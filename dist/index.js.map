{"version":3,"file":"index.js","sources":["../src/script/api.ts","../src/contexts/appContext.tsx","../src/contexts/errorsContext.tsx","../src/contexts/settingsContext.tsx","../src/contexts/formContext.tsx","../src/script/ui/action/atoms.js","../src/script/ui/action/copyAs.js","../src/script/ui/action/copyImageToClipboard.js","../src/script/ui/action/isHidden.ts","../src/script/ui/action/debug.js","../src/script/ui/component/cliparea/cliparea.jsx","../src/script/ui/data/schema/options-schema.ts","../src/script/ui/storage-ext.js","../src/script/ui/state/templates/init-lib.ts","../src/script/ui/state/options/index.js","../src/script/ui/data/schema/schema-helper.js","../src/script/ui/data/schema/sdata-schema.js","../src/script/ui/state/modal/sdata.js","../src/script/ui/state/modal/form.js","../src/script/ui/state/request/request.types.ts","../src/script/ui/state/request/index.ts","../src/script/ui/state/constants.ts","../src/script/ui/data/schema/struct-schema.js","../src/script/ui/data/utils.ts","../src/script/ui/data/convert/structconv.js","../src/script/ui/action/flips.ts","../src/script/ui/action/tools.js","../src/script/ui/state/shared.ts","../src/script/ui/state/server/index.js","../src/script/ui/action/server.js","../src/script/ui/data/templates.js","../src/script/ui/action/templates.js","../src/script/ui/action/zoom.js","../src/script/ui/action/help.js","../src/constants.ts","../src/script/ui/action/functionalGroups.ts","../src/script/ui/action/fullscreen.ts","../src/script/ui/action/index.ts","../src/components/Icon/utils/iconNameToIcon.ts","../src/components/Icon/utils/getIconByName.ts","../src/components/Icon/Icon.tsx","../src/components/Icon/utils/getIconName.ts","../src/components/styles/consts.ts","../src/components/Buttons/IconButton/styles.ts","../src/components/Buttons/IconButton/IconButtonBase.tsx","../src/components/Buttons/IconButton/IconButton.tsx","../src/components/Buttons/IconButton/IconButtonCustomIcon.tsx","../src/components/Buttons/Button/styles.ts","../src/components/Buttons/Button/Button.tsx","../src/components/StructRender/styles.ts","../src/components/StructRender/StructRender.tsx","../src/components/Input/styles.ts","../src/components/Input/Input.tsx","../src/components/Accordion/styles.ts","../src/components/Accordion/Accordion.tsx","../src/components/InfoModal/constants.ts","../src/components/InfoModal/InfoModal.tsx","../src/components/Dialog/Dialog.tsx","../src/components/MonomerPreview/AmbiguousMonomerPreview/AmbiguousMonomerPreview.styles.ts","../src/components/MonomerPreview/AmbiguousMonomerPreview/AmbiguousMonomerPreview.tsx","../src/components/MonomerPreview/AmbiguousMonomerPreview/types.ts","../src/components/MonomerPreview/constants.ts","../../../node_modules/has-symbols/shams.js","../../../node_modules/has-tostringtag/shams.js","../../../node_modules/es-errors/index.js","../../../node_modules/es-errors/eval.js","../../../node_modules/es-errors/range.js","../../../node_modules/es-errors/ref.js","../../../node_modules/es-errors/syntax.js","../../../node_modules/es-errors/type.js","../../../node_modules/es-errors/uri.js","../../../node_modules/has-symbols/index.js","../../../node_modules/has-proto/index.js","../../../node_modules/function-bind/implementation.js","../../../node_modules/function-bind/index.js","../../../node_modules/hasown/index.js","../../../node_modules/get-intrinsic/index.js","../../../node_modules/es-define-property/index.js","../../../node_modules/gopd/index.js","../../../node_modules/define-data-property/index.js","../../../node_modules/has-property-descriptors/index.js","../../../node_modules/set-function-length/index.js","../../../node_modules/call-bind/index.js","../../../node_modules/call-bind/callBound.js","../../../node_modules/is-arguments/index.js","../../../node_modules/is-generator-function/index.js","../../../node_modules/is-callable/index.js","../../../node_modules/for-each/index.js","../../../node_modules/possible-typed-array-names/index.js","../../../node_modules/available-typed-arrays/index.js","../../../node_modules/which-typed-array/index.js","../../../node_modules/is-typed-array/index.js","../../../node_modules/util/support/types.js","../../../node_modules/util/support/isBuffer.js","../../../node_modules/inherits/inherits_browser.js","../../../node_modules/inherits/inherits.js","../../../node_modules/util/util.js","../../../node_modules/assert/build/internal/errors.js","../../../node_modules/assert/build/internal/assert/assertion_error.js","../../../node_modules/object-keys/isArguments.js","../../../node_modules/object-keys/implementation.js","../../../node_modules/object-keys/index.js","../../../node_modules/object.assign/implementation.js","../../../node_modules/object.assign/polyfill.js","../../../node_modules/object-is/implementation.js","../../../node_modules/object-is/polyfill.js","../../../node_modules/define-properties/index.js","../../../node_modules/object-is/shim.js","../../../node_modules/object-is/index.js","../../../node_modules/is-nan/implementation.js","../../../node_modules/is-nan/polyfill.js","../../../node_modules/is-nan/shim.js","../../../node_modules/is-nan/index.js","../../../node_modules/assert/build/internal/util/comparisons.js","../../../node_modules/assert/build/assert.js","../src/components/MonomerPreview/calculatePreviewPosition.ts","../src/script/ui/views/toolbars/ToolbarGroupItem/ActionButton/ActionButton.tsx","../src/script/ui/Portal/Portal.tsx","../src/script/ui/views/toolbars/ToolbarGroupItem/ToolbarMultiToolItem/variants/DefaultMultiTool/DefaultMultiTool.tsx","../src/script/ui/views/toolbars/ToolbarGroupItem/ToolbarMultiToolItem/variants/GroupedMultiTool/GroupedMultiTool.tsx","../src/script/ui/views/toolbars/ToolbarGroupItem/ToolbarMultiToolItem/variants/chooseMultiTool.ts","../src/script/ui/views/toolbars/ToolbarGroupItem/ToolbarMultiToolItem/usePortalOpening.ts","../src/script/ui/views/toolbars/ToolbarGroupItem/ToolbarMultiToolItem/usePortalStyle.ts","../src/script/ui/views/toolbars/ToolbarGroupItem/ToolbarMultiToolItem/ToolbarMultiToolItem.tsx","../src/script/ui/views/toolbars/ToolbarGroupItem/ToolbarGroupItem.tsx","../src/script/ui/views/toolbars/BottomToolbar/TemplatesList/TemplatesList.tsx","../src/script/ui/views/toolbars/BottomToolbar/BottomToolbar.tsx","../src/script/ui/state/modal/index.js","../src/script/ui/state/templates/index.ts","../src/script/ui/state/abbreviationLookup/index.ts","../src/script/ui/state/common/index.ts","../src/script/ui/state/action/index.js","../src/script/ui/utils/fileOpener.js","../src/script/ui/utils/index.ts","../src/script/editor/utils/functionalGroupsTooltip.ts","../src/script/ui/state/functionalGroups/index.ts","../src/script/ui/state/saltsAndSolvents/index.ts","../src/script/ui/state/toolbar/index.js","../src/script/ui/state/floatingTools/index.ts","../src/script/ui/state/index.js","../src/script/ui/views/toolbars/BottomToolbar/BottomToolbar.container.ts","../src/script/ui/views/toolbars/ToolbarGroupItem/utils/makeItems.ts","../src/script/ui/views/toolbars/LeftToolbar/Bond/options.ts","../src/script/ui/views/toolbars/LeftToolbar/leftToolbarOptions.ts","../src/hooks/useSettingsContext.ts","../src/hooks/useResizeObserver.ts","../src/hooks/useFormContext.tsx","../src/hooks/useAppContext.ts","../src/hooks/useInterval.ts","../src/hooks/useSubscribtionOnEvents.ts","../src/script/ui/views/toolbars/ArrowScroll/ArrowScroll.tsx","../src/script/ui/views/toolbars/mediaSizes.ts","../src/script/ui/views/toolbars/LeftToolbar/Bond/Bond.tsx","../src/script/ui/views/toolbars/LeftToolbar/RGroup/RGroup.tsx","../src/script/ui/views/toolbars/LeftToolbar/Shape/Shape.tsx","../src/script/ui/views/toolbars/LeftToolbar/LeftToolbar.tsx","../src/script/ui/views/toolbars/LeftToolbar/LeftToolbar.container.ts","../src/script/ui/component/view/Atom/Atom.jsx","../src/script/ui/views/toolbars/RightToolbar/AtomsList/AtomsList.tsx","../src/script/ui/views/toolbars/TopToolbar/Divider.tsx","../src/script/ui/views/toolbars/RightToolbar/RightToolbar.tsx","../src/script/ui/views/toolbars/RightToolbar/RightToolbar.container.ts","../src/script/ui/views/toolbars/TopToolbar/TopToolbarIconButton.ts","../src/script/ui/views/toolbars/TopToolbar/FileControls.tsx","../src/script/ui/views/toolbars/TopToolbar/ElementWithDropdown.tsx","../src/script/ui/views/toolbars/TopToolbar/ClipboardControls.tsx","../src/script/ui/views/toolbars/TopToolbar/UndoRedo.tsx","../src/script/ui/views/toolbars/TopToolbar/ZoomInput.tsx","../src/script/ui/views/toolbars/TopToolbar/ZoomControls.tsx","../src/script/ui/views/toolbars/TopToolbar/SystemControls.tsx","../src/script/ui/views/toolbars/TopToolbar/ExternalFuncControls.tsx","../src/script/ui/views/toolbars/TopToolbar/CustomButtons.tsx","../src/script/ui/views/toolbars/TopToolbar/TopToolbar.tsx","../src/script/ui/views/toolbars/TopToolbar/TopToolbar.container.ts","../src/script/ui/state/floatingTools/selectors/index.ts","../src/script/ui/views/toolbars/FloatingTools/FloatingTools.tsx","../src/script/ui/views/toolbars/FloatingTools/FloatingTools.container.ts","../src/script/ui/state/abbreviationLookup/selectors/selectors.ts","../src/script/ui/state/moveSelectedItems.ts","../src/script/editor/tool/helper/locate.ts","../src/script/editor/tool/helper/lasso.ts","../src/script/editor/tool/helper/getGroupIdsFromItems.ts","../src/script/editor/tool/select/select.helpers.ts","../src/script/editor/tool/select/selectViewOnly.ts","../src/script/editor/tool/helper/isMacroMolecule.ts","../src/script/editor/tool/helper/deleteFunctionalGroups.ts","../src/script/editor/tool/atom.ts","../src/script/editor/tool/helper/filterNotInCollapsedSGroup.ts","../src/script/editor/tool/sgroup.ts","../src/script/editor/tool/helper/dropAndMerge.ts","../src/script/ui/state/modal/utils/updateOnlyChangedProperties.ts","../src/script/ui/state/modal/atoms.ts","../src/script/ui/state/modal/bonds.ts","../src/script/editor/utils/customOnChangeHandler.ts","../src/script/editor/utils/structLayout.ts","../src/script/editor/utils/handleMovingPosibilityCursor.ts","../src/script/editor/utils/getItemCursor.ts","../src/script/editor/tool/arrow/arrowTool.ts","../src/script/editor/tool/arrow/multitailArrowMoveTool.ts","../src/script/editor/tool/arrow/reactionArrowMoveTool.ts","../src/script/ui/action/createCopyOfSelected.ts","../src/script/editor/tool/select/select.ts","../src/script/editor/tool/select/index.ts","../src/script/editor/tool/templatePreview.ts","../src/script/editor/tool/template.ts","../src/script/ui/state/handleHotkeysOverItem.ts","../src/script/ui/state/hotkeys.ts","../src/script/ui/views/AppClipArea.tsx","../src/script/ui/App/AppHidden/AppHidden.tsx","../src/script/ui/App/AppHidden/AppHidden.container.ts","../src/script/ui/views/modal/mediaSizes.ts","../src/script/ui/views/components/Spinner/LoadingCircles.tsx","../src/script/editor/shared/closest.ts","../src/script/editor/tool/apoint.utils.ts","../src/script/editor/tool/apoint.ts","../src/script/editor/tool/attach.ts","../src/script/editor/tool/bond.ts","../src/script/editor/tool/chain.ts","../src/script/editor/tool/charge.ts","../src/script/editor/tool/enhanced-stereo.ts","../src/script/editor/tool/eraser.ts","../src/script/editor/tool/hand.ts","../src/script/editor/tool/paste.ts","../src/script/editor/tool/rgroupatom.ts","../src/script/editor/tool/rgroupfragment.ts","../src/script/editor/tool/arrow/reactionArrowAdd.ts","../src/script/editor/tool/arrow/multitailArrowAdd.ts","../src/script/editor/tool/arrow/commonArrow.ts","../src/script/editor/tool/reactionmap.ts","../src/script/editor/tool/reactionplus.ts","../src/script/editor/tool/reactionunmap.ts","../src/script/editor/utils/normalizeAngle.ts","../src/script/editor/tool/rotate.ts","../src/script/editor/tool/simpleobject.ts","../src/script/editor/tool/text.ts","../src/script/editor/tool/image.ts","../src/script/editor/tool/index.ts","../src/script/editor/highlighter.ts","../src/script/editor/HoverIcon.ts","../src/script/editor/tool/rotate-controller.utils.ts","../src/script/editor/tool/rotate-controller.ts","../src/script/editor/Editor.ts","../src/script/ui/views/components/ContextMenu/contextMenu.types.ts","../src/script/ui/views/components/ContextMenu/hooks/useAtomEdit.ts","../src/script/ui/views/components/ContextMenu/utils.ts","../src/script/ui/views/components/ContextMenu/hooks/useAtomStereo.ts","../src/script/ui/views/components/ContextMenu/hooks/useDelete.ts","../src/components/ToggleButtonGroup/ToggleButtonGroup.tsx","../src/script/ui/views/components/ContextMenu/hooks/useAddAttachmentPoint.ts","../src/script/ui/views/components/ContextMenu/hooks/useRemoveAttachmentPoint.ts","../src/script/ui/action/highlightColors/style.ts","../src/script/ui/action/highlightColors/HighlightColors.tsx","../src/script/ui/views/components/ContextMenu/menuItems/AtomMenuItems.tsx","../src/script/ui/views/components/ContextMenu/hooks/useBondEdit.ts","../src/script/ui/views/components/ContextMenu/hooks/useBondSGroupAttach.ts","../src/script/ui/views/components/ContextMenu/hooks/useBondSGroupEdit.ts","../src/script/ui/views/components/ContextMenu/hooks/useBondTypeChange.ts","../src/script/ui/views/components/ContextMenu/hooks/useChangeBondDirection.ts","../src/script/ui/views/components/ContextMenu/menuItems/BondMenuItems.tsx","../src/script/ui/views/components/ContextMenu/hooks/useFunctionalGroupEoc.ts","../src/script/ui/views/components/ContextMenu/hooks/useFunctionalGroupRemove.ts","../src/script/ui/views/components/ContextMenu/menuItems/FunctionalGroupMenuItems.tsx","../src/script/ui/views/components/ContextMenu/menuItems/SelectionMenuItems.tsx","../src/script/ui/views/components/ContextMenu/hooks/useRGroupAttachmentPointRemove.ts","../src/script/ui/views/components/ContextMenu/hooks/useRGroupAttachmentPointEdit.ts","../src/script/ui/views/components/ContextMenu/menuItems/RGroupAttachmentPointMenuItems.tsx","../src/script/ui/views/components/ContextMenu/hooks/useMultitailArrowTails.ts","../src/script/ui/views/components/ContextMenu/menuItems/MultitailArrowMenuItems.tsx","../src/script/ui/views/components/ContextMenu/hooks/useMonomerExpansionHandlers.ts","../src/script/ui/views/components/ContextMenu/menuItems/MacromoleculeMenuItems.tsx","../src/script/ui/views/components/ContextMenu/ContextMenu.tsx","../src/script/ui/views/components/ContextMenu/ContextMenuTrigger.utils.ts","../src/script/ui/views/components/ContextMenu/ContextMenuTrigger.tsx","../src/script/ui/views/components/StructEditor/helpers.ts","../src/script/ui/views/components/StructEditor/SGroupDataRender.tsx","../src/script/ui/state/functionalGroups/selectors/index.ts","../src/script/ui/views/components/StructEditor/InfoPanel.tsx","../src/script/ui/views/components/StructEditor/InfoTooltip.tsx","../src/script/ui/views/components/StructEditor/StructEditor.jsx","../src/script/ui/views/modal/components/meta/About/About.jsx","../src/script/ui/component/form/Input/Input.tsx","../src/script/ui/component/form/Select/Select.tsx","../src/script/ui/component/form/form/errorPopover.jsx","../src/script/ui/component/form/form/form.jsx","../src/script/ui/component/form/colorPicker/ColorPicker.tsx","../src/script/ui/component/form/MeasureInput/measure-input.jsx","../src/script/ui/component/view/openbutton.jsx","../src/script/ui/component/view/saveButton.utils.ts","../src/script/ui/component/view/savebutton.tsx","../src/script/ui/views/modal/components/meta/Settings/Accordion/Accordion.tsx","../src/script/ui/component/form/systemfonts.jsx","../src/script/ui/views/modal/components/meta/Settings/fieldGroups.js","../src/script/ui/views/modal/components/meta/Settings/Settings.tsx","../src/script/ui/views/modal/components/process/Check/components/ErrorsCheck.jsx","../src/script/ui/views/modal/components/process/Check/Check.jsx","../src/script/ui/views/modal/components/process/Analyse/components/FormulaInput/FormulaInput.jsx","../src/script/ui/views/modal/components/process/Analyse/components/FrozenInput/FrozenInput.jsx","../src/script/ui/views/modal/components/process/Analyse/Analyse.jsx","../src/script/ui/views/modal/components/document/Open/components/DialogActionButton.tsx","../src/script/ui/views/modal/components/process/Recognize/Recognize.jsx","../src/script/ui/views/modal/components/process/Miew/Miew.tsx","../src/script/ui/views/modal/components/toolbox/Atom/helper.ts","../src/script/ui/views/modal/components/toolbox/Atom/ElementNumber/ElementNumber.tsx","../src/script/ui/views/modal/components/toolbox/Atom/AtomElement/AtomElement.tsx","../src/script/ui/views/modal/components/toolbox/Atom/Atom.tsx","../src/script/ui/views/modal/components/toolbox/Atom/Atom.container.ts","../src/script/ui/views/modal/components/toolbox/Attach/Attach.tsx","../src/script/ui/views/modal/components/toolbox/Attach/Attach.container.ts","../src/script/ui/views/modal/components/toolbox/Automap/Automap.tsx","../src/script/ui/views/modal/components/toolbox/Automap/Automap.container.ts","../src/script/ui/views/modal/components/toolbox/Bond/Bond.tsx","../src/script/ui/views/modal/components/toolbox/Bond/Bond.container.ts","../src/script/ui/views/modal/components/toolbox/RgroupLogic/components/IfThenSelect/IfThenSelect.tsx","../src/script/ui/views/modal/components/toolbox/RgroupLogic/RgroupLogic.tsx","../src/script/ui/views/modal/components/toolbox/RgroupLogic/RgroupLogic.container.ts","../src/script/ui/views/modal/components/document/Open/components/AnalyzingFile.tsx","../src/script/ui/views/modal/components/document/Open/components/FileDrop.tsx","../src/script/ui/views/modal/components/document/Open/components/OpenOptions.tsx","../src/script/ui/views/modal/components/document/Open/components/TextEditor.tsx","../src/script/ui/state/server/selectors/index.ts","../src/script/ui/state/editor/selectors/index.ts","../src/script/ui/views/modal/components/document/Open/components/CDXStructuresViewer/CDXStructuresViewer.tsx","../src/script/ui/views/modal/components/document/Open/components/ViewSwitcher.tsx","../src/script/ui/views/modal/components/document/Open/Open.tsx","../src/script/ui/views/modal/components/document/Open/Open.container.ts","../src/script/ui/data/convert/structConverter.ts","../src/script/ui/component/view/Tabs/Tabs.jsx","../src/script/ui/views/modal/components/document/Save/Save.jsx","../src/script/ui/dialog/toolbox/enhancedStereo/enhancedStereo.tsx","../src/script/ui/dialog/toolbox/labeledit.jsx","../src/script/ui/views/modal/components/PeriodTable/components/AtomInfo/AtomInfo.jsx","../src/script/ui/views/modal/components/PeriodTable/components/ElementsTable/components/Header.jsx","../src/script/ui/views/modal/components/PeriodTable/components/ElementsTable/components/MainRow.jsx","../src/script/ui/views/modal/components/PeriodTable/components/ElementsTable/components/OutinerRow.jsx","../src/script/ui/views/modal/components/PeriodTable/components/ElementsTable/ElementsTable.jsx","../src/script/ui/views/modal/components/ExtendedTable/components/GenericGroups/BoxWithLines.tsx","../src/script/ui/views/modal/components/ExtendedTable/helpers.js","../src/script/ui/views/modal/components/ExtendedTable/components/GenericGroups/components/ButtonGenSet/ButtonGenSet.tsx","../src/script/ui/views/modal/components/ExtendedTable/components/GenericGroups/GenSet.tsx","../src/script/ui/views/modal/components/ExtendedTable/components/GenericGroups/GenGroup.tsx","../src/script/ui/views/modal/components/ExtendedTable/components/GenericGroups/GenericGroups.tsx","../src/script/ui/views/modal/components/ExtendedTable/components/GenericGroups/index.ts","../src/script/ui/views/modal/components/PeriodTable/components/TypeChoice/TypeChoice.jsx","../src/script/ui/views/modal/components/PeriodTable/PeriodTable.jsx","../src/script/ui/views/modal/components/ExtendedTable/ExtendedTable.jsx","../src/script/ui/views/modal/components/toolbox/FG/RemoveFG.tsx","../src/script/ui/component/form/buttonlist.jsx","../src/script/ui/dialog/toolbox/rgroup/rgroup.jsx","../src/script/ui/dialog/toolbox/SDataFieldset.jsx","../src/script/ui/dialog/toolbox/SGroupFieldset.jsx","../src/script/ui/dialog/toolbox/sgroup.jsx","../src/script/ui/dialog/template/template-attach.jsx","../src/script/ui/dialog/template/TemplateTable.tsx","../src/script/ui/state/saltsAndSolvents/selectors/index.ts","../src/script/ui/dialog/template/EmptySearchResult.tsx","../src/script/ui/dialog/template/useSaltsAndSolvets.ts","../src/script/ui/dialog/template/TemplateDialog.tsx","../src/hooks/useClickOutside.ts","../src/script/ui/views/modal/components/Text/FontControl/FontControl.tsx","../src/script/ui/views/modal/components/Text/SpecialSymbolsList/SpecialSymbolsList.tsx","../src/script/ui/views/modal/components/Text/SpecialSymbols/SpecialSymbolsButton.tsx","../src/script/ui/views/modal/components/Text/TextButton/TextButton.tsx","../src/script/ui/views/modal/components/Text/Text.tsx","../src/script/ui/views/modal/components/Confirm/Confirm.tsx","../src/script/ui/views/modal/components/InfoModal/constants.ts","../src/script/ui/views/modal/components/InfoModal/PasteErrorModalBody/PasteErrorModalBody.tsx","../src/script/ui/views/modal/components/InfoModal/InfoModal.tsx","../src/script/ui/dialog/index.ts","../src/script/ui/views/modal/Modal.tsx","../src/script/ui/views/modal/Modal.container.ts","../src/script/ui/state/editor/utils/generateCommonProperties.ts","../src/script/ui/state/editor/index.js","../src/script/ui/views/Editor.jsx","../src/script/ui/state/common/selectors/selectors.ts","../src/script/ui/dialog/AbbreviationLookup/AbbreviationLookup.constants.tsx","../src/script/ui/dialog/AbbreviationLookup/AbbreviationLookup.utils.tsx","../src/script/ui/dialog/AbbreviationLookup/AbbreviationLookup.types.tsx","../src/script/ui/dialog/AbbreviationLookup/AbbreviationLookup.tsx","../src/script/ui/state/templates/selectors/index.ts","../src/script/ui/dialog/AbbreviationLookup/hooks/useOptions.tsx","../src/script/ui/dialog/AbbreviationLookup/AbbreviationLookup.container.tsx","../src/script/ui/App/App.tsx","../src/script/ui/App/App.container.ts","../src/script/ui/state/mouse.ts","../src/script/ui/App/initApp.tsx","../src/script/providers/indigoProvider.ts","../src/script/builders/ketcher/KetcherBuilder.ts","../src/script/index.ts","../src/MicromoleculesEditor.tsx","../src/script/ui/views/toolbars/ModeControl/ModeControl.tsx","../src/Editor.tsx"],"sourcesContent":["/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  InfoResult,\n  StructService,\n  StructServiceOptions,\n  StructServiceProvider,\n} from 'ketcher-core';\n\ntype Api = StructService & Promise<InfoResult>;\n\n// todo: remove - ?? should we? it's in use\nfunction createApi(\n  structServiceProvider: StructServiceProvider,\n  defaultOptions: StructServiceOptions,\n): Api {\n  const structService =\n    structServiceProvider.createStructService(defaultOptions);\n  const info = structService.info();\n\n  return Object.assign(info, {\n    info: structService.info.bind(structService),\n    convert: structService.convert.bind(structService),\n    layout: structService.layout.bind(structService),\n    clean: structService.clean.bind(structService),\n    aromatize: structService.aromatize.bind(structService),\n    dearomatize: structService.dearomatize.bind(structService),\n    calculateCip: structService.calculateCip.bind(structService),\n    automap: structService.automap.bind(structService),\n    check: structService.check.bind(structService),\n    calculate: structService.calculate.bind(structService),\n    recognize: structService.recognize.bind(structService),\n    generateImageAsBase64:\n      structService.generateImageAsBase64.bind(structService),\n    getInChIKey: structService.getInChIKey.bind(structService),\n    toggleExplicitHydrogens:\n      structService.toggleExplicitHydrogens.bind(structService),\n    destroy: structService.destroy?.bind(structService),\n  });\n}\n\nexport default createApi;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Ketcher } from 'ketcher-core';\nimport React from 'react';\n\nexport interface IAppContext {\n  getKetcherInstance: () => Ketcher;\n  ketcherId: string;\n}\n\nconst appContext = React.createContext<IAppContext>({} as IAppContext);\n\nexport default appContext;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport React from 'react';\n\nexport interface IErrorsContext {\n  errorHandler: (message: string) => void;\n}\n\nconst errorsContext = React.createContext<IErrorsContext>({} as IErrorsContext);\n\nexport default errorsContext;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport React from 'react';\n\nexport interface ISettingsContext {\n  staticResourcesUrl: string;\n}\n\nconst settingsContext = React.createContext<ISettingsContext>(\n  {} as ISettingsContext,\n);\n\nexport default settingsContext;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport React from 'react';\n\nconst formContext = React.createContext(null);\n\nexport default formContext;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport const basicAtoms = ['H', 'C', 'N', 'O', 'S', 'P', 'F', 'Cl', 'Br', 'I'];\n\nexport const atomCuts = {\n  H: 'h',\n  C: 'c',\n  N: 'n',\n  O: 'o',\n  S: 's',\n  P: 'p',\n  F: 'f',\n  Cl: 'l',\n  Br: 'b',\n  I: 'i',\n  A: 'a',\n  Q: 'q',\n  R: 'r',\n  K: 'k',\n  M: 'm',\n  Si: 'Shift+s',\n  Na: 'Shift+n',\n  X: 'x',\n  D: 'd',\n  B: 'Shift+b',\n};\n\nexport default Object.keys(atomCuts).reduce((res, label) => {\n  res[`atom-${label.toLowerCase()}`] = {\n    title: `Atom ${label}`,\n    shortcut: atomCuts[label],\n    action: {\n      tool: 'atom',\n      opts: { label },\n    },\n  };\n  return res;\n}, {});\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { KetcherLogger, KetSerializer, MolSerializer } from 'ketcher-core';\n\nexport default function copyAs(type) {\n  const state = global.currentState;\n  const editor = state.editor;\n  const struct = editor.structSelected();\n  const errorHandler = editor.errorHandler;\n  let serializer;\n  try {\n    switch (type) {\n      case 'mol': {\n        serializer = new MolSerializer();\n        break;\n      }\n      case 'ket': {\n        serializer = new KetSerializer();\n        break;\n      }\n      default: {\n        serializer = new KetSerializer();\n        break;\n      }\n    }\n\n    const simpleObjectOrText = Boolean(\n      struct.simpleObjects.size || struct.texts.size,\n    );\n\n    if (simpleObjectOrText && serializer instanceof MolSerializer) {\n      errorHandler(\n        'This feature is not available for Simple objects and Text objects',\n      );\n      return null;\n    }\n\n    const structData = serializer.serialize(struct);\n\n    if (window.clipboardData) {\n      window.clipboardData.setData('text', structData);\n    } else {\n      navigator.clipboard.writeText(structData);\n    }\n  } catch (e) {\n    KetcherLogger.error('copyAs.js::copyAs', e);\n    errorHandler('This feature is not available in your browser');\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  FormatterFactory,\n  Ketcher,\n  defaultBondThickness,\n  KetcherLogger,\n} from 'ketcher-core';\n\nasync function copyImageToClipboard() {\n  const state = global.currentState;\n  const editor = state.editor;\n  const server = state.server;\n  const options = state.options;\n  const struct = editor.structSelected();\n  const errorHandler = editor.errorHandler;\n\n  try {\n    const factory = new FormatterFactory(server);\n    const service = factory.create('ket', options);\n    const structStr = await service.getStructureFromStructAsync(struct);\n    const ketcher = new Ketcher(editor, server, {}, factory);\n    const image = await ketcher.generateImage(structStr, {\n      outputFormat: 'png',\n      backgroundColor: '255, 255, 255',\n      bondThickness: options.settings.bondThickness || defaultBondThickness,\n    });\n    const item = new ClipboardItem({ [image.type]: image }); // eslint-disable-line no-undef\n    await navigator.clipboard.write([item]);\n  } catch (e) {\n    KetcherLogger.error('copyImageToClipboard.js::copyImageToClipboard', e);\n    errorHandler('This feature is not available in your browser');\n  }\n}\n\nexport default copyImageToClipboard;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport default function isHidden(options: any, buttonName: string): boolean {\n  return Boolean(options.buttons?.[buttonName]?.hidden);\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { MolSerializer } from 'ketcher-core';\nimport isHidden from './isHidden';\n\nconst debugObj = {\n  // original: for dev purposes\n  'force-update': {\n    shortcut: 'Ctrl+Shift+r',\n    action: (editor) => {\n      editor.update(true);\n    },\n    hidden: (options) => isHidden(options, 'force-update'),\n  },\n  'qs-serialize': {\n    shortcut: 'Alt+Shift+r',\n    action: (editor) => {\n      const molSerializer = new MolSerializer();\n      const molStr = molSerializer.serialize(editor.struct());\n      const molQs = 'mol=' + encodeURIComponent(molStr).replace(/%20/g, '+');\n      const qs = document.location.search;\n      document.location.search = !qs\n        ? '?' + molQs // eslint-disable-line\n        : qs.search('mol=') === -1\n        ? qs + '&' + molQs\n        : qs.replace(/mol=[^&$]*/, molQs);\n    },\n  },\n  hidden: (options) => isHidden(options, 'qs-serialize'),\n};\n\nexport default debugObj;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Component, createRef } from 'react';\nimport clsx from 'clsx';\nimport classes from './cliparea.module.less';\nimport {\n  KetcherLogger,\n  notifyRequestCompleted,\n  isControlKey,\n  isClipboardAPIAvailable,\n  notifyCopyCut,\n} from 'ketcher-core';\n\nconst ieCb = typeof window !== 'undefined' ? window.clipboardData : {};\n\nexport const CLIP_AREA_BASE_CLASS = 'cliparea';\nlet needSkipCopyEvent = false;\n\nclass ClipArea extends Component {\n  constructor(props) {\n    super(props);\n    this.textAreaRef = createRef();\n  }\n\n  componentDidMount() {\n    const el = this.textAreaRef.current;\n    this.target = this.props.target || el.parentNode;\n\n    this.listeners = {\n      mouseup: (event) => {\n        if (\n          el === event.target ||\n          (!isActiveElement(event.target) && this.props.focused())\n        ) {\n          autoselect(el);\n        }\n      },\n      mousedown: (event) => {\n        if (event.shiftKey && !isActiveElement(event.target))\n          event.preventDefault();\n      },\n      copy: (event) => {\n        if (!this.props.focused()) {\n          return;\n        }\n        if (isClipboardAPIAvailable()) {\n          this.props.onCopy().then((data) => {\n            if (!data) {\n              return;\n            }\n            copy(data).then(() => {\n              event.preventDefault();\n              notifyCopyCut();\n            });\n          });\n        } else {\n          if (needSkipCopyEvent) {\n            needSkipCopyEvent = false;\n            return;\n          }\n          needSkipCopyEvent = true;\n\n          this.props.onCopy().then((data) => {\n            // It is possible to have access to clipboard data through evt.clipboardData\n            // only in synchronous code. That's why we dispatch 'copy' event here after server call.\n            // It will not work with long operations which time > 5 sec, because browser will close access\n            // to clipboard data if user did not interact with application.\n            addEventListener(\n              'copy',\n              (evt) => {\n                legacyCopy(evt.clipboardData, data);\n                evt.preventDefault();\n              },\n              { once: true },\n            );\n            document.execCommand('copy');\n          });\n\n          event.preventDefault();\n        }\n      },\n      cut: async (event) => {\n        if (!this.props.focused()) {\n          return;\n        }\n        if (isClipboardAPIAvailable()) {\n          this.props.onCut().then((data) => {\n            if (!data) {\n              return;\n            }\n            copy(data).then(() => {\n              event.preventDefault();\n              notifyCopyCut();\n            });\n          });\n        } else {\n          const data = this.props.onLegacyCut();\n          if (data) {\n            legacyCopy(event.clipboardData, data);\n          }\n          event.preventDefault();\n        }\n      },\n      paste: (event) => {\n        if (!this.props.focused()) {\n          return;\n        }\n        if (isClipboardAPIAvailable()) {\n          navigator.clipboard.read().then((data) => {\n            if (!data) {\n              return;\n            }\n            this.props.onPaste(data).then(() => {\n              event.preventDefault();\n              notifyRequestCompleted();\n            });\n          });\n        } else {\n          const data = legacyPaste(event.clipboardData, this.props.formats);\n          if (data) {\n            this.props.onLegacyPaste(data);\n          }\n          event.preventDefault();\n        }\n      },\n      keydown: async (event) => {\n        if (!this.props.focused() || !this.props.onPaste) {\n          return;\n        }\n\n        if (isControlKey(event) && event.altKey && event.code === 'KeyV') {\n          if (navigator.clipboard?.read) {\n            const clipboardData = await navigator.clipboard.read();\n            const data = await pasteByKeydown(clipboardData);\n            if (data) {\n              this.props.onPaste(data, true);\n            }\n          } else {\n            window.ketcher.editor.errorHandler?.(\n              \"Your browser doesn't support pasting clipboard content via Ctrl-Alt-V. Please use Google Chrome browser or load SMARTS structure from .smarts file instead.\",\n            );\n          }\n        }\n      },\n    };\n\n    Object.keys(this.listeners).forEach((en) => {\n      this.target.addEventListener(en, this.listeners[en]);\n    });\n  }\n\n  shouldComponentUpdate() {\n    return false;\n  }\n\n  componentWillUnmount() {\n    Object.keys(this.listeners).forEach((en) => {\n      this.target.removeEventListener(en, this.listeners[en]);\n    });\n  }\n\n  render() {\n    return (\n      <textarea\n        ref={this.textAreaRef}\n        className={clsx(CLIP_AREA_BASE_CLASS, classes.cliparea)}\n        contentEditable\n        suppressContentEditableWarning={true}\n      />\n    );\n  }\n}\n\nfunction isActiveElement(el) {\n  if (el.tagName === 'INPUT' && el.type === 'button') return false;\n  return ['INPUT', 'SELECT', 'TEXTAREA', 'OPTION', 'LABEL'].includes(\n    el.tagName,\n  );\n}\n\nfunction autoselect(cliparea) {\n  cliparea.value = ' ';\n  cliparea.select();\n}\n\nasync function copy(data) {\n  try {\n    const clipboardItemData = {};\n    Object.keys(data).forEach((mimeType) => {\n      // https://developer.chrome.com/blog/web-custom-formats-for-the-async-clipboard-api/#writing-web-custom-formats-to-the-clipboard\n      const mimeTypeToSet =\n        mimeType === 'text/plain' ? mimeType : `web ${mimeType}`;\n      clipboardItemData[mimeTypeToSet] = Promise.resolve(\n        new Blob([data[mimeType]], {\n          type: mimeTypeToSet,\n        }),\n      );\n    });\n\n    const clipboardItem = new ClipboardItem(clipboardItemData);\n\n    // Chrome: clipboardItem.presentationStyle is undefined\n    if (\n      clipboardItem.presentationStyle &&\n      clipboardItem.presentationStyle === 'unspecified'\n    ) {\n      if (navigator.clipboard.writeText) {\n        // Fallback to simple text copy\n        const textData = data['text/plain'] || JSON.stringify(data);\n        await navigator.clipboard.writeText(textData);\n      }\n    } else {\n      await navigator.clipboard.write([clipboardItem]);\n    }\n  } catch (e) {\n    KetcherLogger.error('cliparea.jsx::copy', e);\n    console.info(`Could not write exact type ${JSON.stringify(data)}`);\n  }\n}\n\nfunction legacyCopy(clipboardData, data) {\n  if (!clipboardData && ieCb) {\n    ieCb.setData('text', data['text/plain']);\n  } else {\n    let curFmt = null;\n    clipboardData.setData('text/plain', data['text/plain']);\n    try {\n      Object.keys(data).forEach((fmt) => {\n        curFmt = fmt;\n        clipboardData.setData(fmt, data[fmt]);\n      });\n    } catch (e) {\n      console.error('cliparea.jsx::legacyCopy', e);\n      console.info(`Could not write exact type ${curFmt}`);\n    }\n  }\n}\n\nfunction legacyPaste(cb, formats) {\n  let data = {};\n  if (!cb && ieCb) {\n    data['text/plain'] = ieCb.getData('text');\n  } else {\n    data['text/plain'] = cb.getData('text/plain');\n    data = formats.reduce((res, fmt) => {\n      const d = cb.getData(fmt);\n      if (d) res[fmt] = d;\n      return res;\n    }, data);\n  }\n  return data;\n}\n\nasync function pasteByKeydown(clipboardData) {\n  const data = {};\n  if (!clipboardData && ieCb) {\n    data['text/plain'] = ieCb.getData('text');\n  } else {\n    for (const item of clipboardData) {\n      const textPlain = await item.getType('text/plain');\n      data['text/plain'] = await textPlain.text();\n    }\n  }\n  return data;\n}\n\nexport const actions = ['cut', 'copy', 'paste'];\n\nexport function exec(action) {\n  let enabled = document.queryCommandSupported(action);\n  if (enabled) {\n    try {\n      enabled = document.execCommand(action) || window.ClipboardEvent || ieCb;\n    } catch (e) {\n      // FF < 41\n      KetcherLogger.error('cliparea.jsx::exec', e);\n      enabled = false;\n    }\n  }\n  return enabled;\n}\n\nexport default ClipArea;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Schema, Validator } from 'jsonschema';\nimport {\n  StereLabelStyleType,\n  StereoColoringType,\n  ShowHydrogenLabels,\n  ShowHydrogenLabelNames,\n  defaultBondThickness,\n} from 'ketcher-core';\n\ntype ExtendedSchema = Schema & {\n  enumNames?: Array<string>;\n  default?: any;\n};\n\nexport enum MeasurementUnits {\n  Px = 'px',\n  Cm = 'cm',\n  Pt = 'pt',\n  Inch = 'inch',\n}\n\nexport enum ImageResolution {\n  high = '600',\n  low = '72',\n}\n\nconst editor: {\n  resetToSelect: ExtendedSchema;\n  rotationStep: ExtendedSchema;\n} = {\n  resetToSelect: {\n    title: 'Reset to Select Tool',\n    enum: [true, 'paste', false],\n    enumNames: ['on', 'After Paste', 'off'],\n    default: 'paste',\n  },\n  rotationStep: {\n    title: 'Rotation Step, ยบ',\n    type: 'integer',\n    minimum: 1,\n    maximum: 90,\n    default: 15,\n  },\n};\n\nconst render: {\n  showValenceWarnings: ExtendedSchema;\n  atomColoring: ExtendedSchema;\n  showStereoFlags: ExtendedSchema;\n  stereoLabelStyle: ExtendedSchema;\n  colorOfAbsoluteCenters: ExtendedSchema;\n  colorOfAndCenters: ExtendedSchema;\n  colorOfOrCenters: ExtendedSchema;\n  colorStereogenicCenters: ExtendedSchema;\n  autoFadeOfStereoLabels: ExtendedSchema;\n  absFlagLabel: ExtendedSchema;\n  andFlagLabel: ExtendedSchema;\n  mixedFlagLabel: ExtendedSchema;\n  ignoreChiralFlag: ExtendedSchema;\n  orFlagLabel: ExtendedSchema;\n  font: ExtendedSchema;\n  fontsz: ExtendedSchema;\n  fontszUnit: ExtendedSchema;\n  fontszsub: ExtendedSchema;\n  fontszsubUnit: ExtendedSchema;\n  carbonExplicitly: ExtendedSchema;\n  showCharge: ExtendedSchema;\n  showValence: ExtendedSchema;\n  showHydrogenLabels: ExtendedSchema;\n  aromaticCircle: ExtendedSchema;\n  bondSpacing: ExtendedSchema;\n  bondThickness: ExtendedSchema;\n  bondThicknessUnit: ExtendedSchema;\n  stereoBondWidth: ExtendedSchema;\n  stereoBondWidthUnit: ExtendedSchema;\n  bondLength: ExtendedSchema;\n  bondLengthUnit: ExtendedSchema;\n  reactionComponentMarginSize: ExtendedSchema;\n  reactionComponentMarginSizeUnit: ExtendedSchema;\n  hashSpacing: ExtendedSchema;\n  hashSpacingUnit: ExtendedSchema;\n  imageResolution: ExtendedSchema;\n} = {\n  showValenceWarnings: {\n    title: 'Show valence warnings',\n    type: 'boolean',\n    description: 'slider',\n    default: true,\n  },\n  atomColoring: {\n    title: 'Atom coloring',\n    type: 'boolean',\n    description: 'slider',\n    default: true,\n  },\n  showStereoFlags: {\n    title: 'Show the Stereo flags',\n    type: 'boolean',\n    description: 'slider',\n    default: true,\n  },\n  stereoLabelStyle: {\n    title: 'Label display at\\u00A0stereogenic\\u00A0centers',\n    enum: [\n      StereLabelStyleType.IUPAC,\n      StereLabelStyleType.Classic,\n      StereLabelStyleType.On,\n      StereLabelStyleType.Off,\n    ],\n    enumNames: ['IUPAC style', 'Classic', 'On', 'Off'],\n    default: StereLabelStyleType.IUPAC,\n  },\n  colorOfAbsoluteCenters: {\n    title: ' Absolute Center color',\n    type: 'string',\n    default: '#ff0000',\n  },\n  colorOfAndCenters: {\n    title: 'AND Centers color',\n    type: 'string',\n    default: '#0000cd',\n  },\n  colorOfOrCenters: {\n    title: 'OR Centers color',\n    type: 'string',\n    default: '#228b22',\n  },\n  colorStereogenicCenters: {\n    title: 'Color stereogenic centers',\n    enum: [\n      StereoColoringType.LabelsOnly,\n      StereoColoringType.BondsOnly,\n      StereoColoringType.LabelsAndBonds,\n      StereoColoringType.Off,\n    ],\n    enumNames: ['Labels Only', 'Bonds Only', 'Labels And Bonds', 'Off'],\n    default: StereoColoringType.LabelsOnly,\n  },\n  autoFadeOfStereoLabels: {\n    title: 'Auto fade And/Or center labels',\n    type: 'boolean',\n    description: 'slider',\n    default: true,\n  },\n  absFlagLabel: {\n    title: 'Text of Absolute flag',\n    type: 'string',\n    default: 'ABS',\n  },\n  andFlagLabel: {\n    title: 'Text of AND flag',\n    type: 'string',\n    default: 'AND Enantiomer',\n  },\n  mixedFlagLabel: {\n    title: 'Text of Mixed flag',\n    type: 'string',\n    default: 'Mixed',\n  },\n  ignoreChiralFlag: {\n    title: 'Ignore the chiral flag',\n    type: 'boolean',\n    description: 'slider',\n    default: false,\n  },\n  orFlagLabel: {\n    title: 'Text of OR flag',\n    type: 'string',\n    default: 'OR Enantiomer',\n  },\n  font: {\n    title: 'Font',\n    type: 'string',\n    default: '30px Arial',\n  },\n  fontsz: {\n    title: 'Font size',\n    type: 'number',\n    default: 13,\n    minimum: 0.1,\n    maximum: 96,\n  },\n  fontszUnit: {\n    title: 'Font size unit',\n    enum: Object.values(MeasurementUnits),\n    enumNames: Object.values(MeasurementUnits),\n    default: MeasurementUnits.Px,\n  },\n  fontszsub: {\n    title: 'Sub font size',\n    type: 'number',\n    default: 13,\n    minimum: 0.1,\n    maximum: 96,\n  },\n  fontszsubUnit: {\n    title: 'Sub font size unit',\n    enum: Object.values(MeasurementUnits),\n    enumNames: Object.values(MeasurementUnits),\n    default: MeasurementUnits.Px,\n  },\n  // Atom\n  carbonExplicitly: {\n    title: 'Display carbon explicitly',\n    type: 'boolean',\n    description: 'slider',\n    default: false,\n  },\n  showCharge: {\n    title: 'Display charge',\n    type: 'boolean',\n    description: 'slider',\n    default: true,\n  },\n  showValence: {\n    title: 'Display valence',\n    type: 'boolean',\n    description: 'slider',\n    default: true,\n  },\n  showHydrogenLabels: {\n    title: 'Show hydrogen labels',\n    enum: Object.values(ShowHydrogenLabels),\n    enumNames: Object.values(ShowHydrogenLabelNames),\n    default: ShowHydrogenLabels.TerminalAndHetero,\n  },\n  // Bonds\n  aromaticCircle: {\n    title: 'Aromatic Bonds as circle',\n    type: 'boolean',\n    description: 'slider',\n    default: true,\n  },\n  bondSpacing: {\n    title: 'Bond spacing',\n    type: 'integer',\n    default: 15,\n    minimum: 1,\n    maximum: 100,\n  },\n  bondThickness: {\n    title: 'Bond thickness',\n    type: 'number',\n    default: defaultBondThickness,\n    minimum: 0.1,\n    maximum: 96,\n  },\n  bondThicknessUnit: {\n    title: 'Bond thickness unit',\n    enum: Object.values(MeasurementUnits),\n    enumNames: Object.values(MeasurementUnits),\n    default: MeasurementUnits.Px,\n  },\n  stereoBondWidth: {\n    title: 'Stereo (Wedge) bond width',\n    type: 'number',\n    default: 6,\n    minimum: 0.1,\n    maximum: 96,\n  },\n  stereoBondWidthUnit: {\n    title: 'Stereo (Wedge) bond width unit',\n    enum: Object.values(MeasurementUnits),\n    enumNames: Object.values(MeasurementUnits),\n    default: MeasurementUnits.Px,\n  },\n  bondLength: {\n    title: 'Bond length',\n    type: 'number',\n    default: 40,\n    minimum: 0.1,\n    maximum: 1000,\n  },\n  bondLengthUnit: {\n    title: 'Bond length unit',\n    enum: Object.values(MeasurementUnits),\n    enumNames: Object.values(MeasurementUnits),\n    default: MeasurementUnits.Px,\n  },\n  reactionComponentMarginSize: {\n    title: 'Reaction component margin size',\n    type: 'number',\n    default: 20, // half of bond length\n    minimum: 0.1,\n    maximum: 1000,\n  },\n  reactionComponentMarginSizeUnit: {\n    title: 'Reaction component margin size unit',\n    enum: Object.values(MeasurementUnits),\n    enumNames: Object.values(MeasurementUnits),\n    default: MeasurementUnits.Px,\n  },\n  hashSpacing: {\n    title: 'Hash spacing',\n    type: 'number',\n    default: 1.2,\n    minimum: 0.1,\n    maximum: 1000,\n  },\n  hashSpacingUnit: {\n    title: 'Hash spacing unit',\n    enum: Object.values(MeasurementUnits),\n    enumNames: Object.values(MeasurementUnits),\n    default: MeasurementUnits.Px,\n  },\n  imageResolution: {\n    title: 'Image resolution',\n    enum: Object.values(ImageResolution),\n    enumNames: Object.keys(ImageResolution),\n    default: ImageResolution.low,\n  },\n};\n\nconst server: {\n  'smart-layout': ExtendedSchema;\n  'ignore-stereochemistry-errors': ExtendedSchema;\n  'mass-skip-error-on-pseudoatoms': ExtendedSchema;\n  'gross-formula-add-rsites': ExtendedSchema;\n  'gross-formula-add-isotopes': ExtendedSchema;\n  'dearomatize-on-load': ExtendedSchema;\n  ignoreChiralFlag: ExtendedSchema;\n} = {\n  'dearomatize-on-load': {\n    title: 'dearomatize-on-load',\n    type: 'boolean',\n    description: 'slider',\n    default: false,\n  },\n  'smart-layout': {\n    title: 'Smart-layout',\n    type: 'boolean',\n    description: 'slider',\n    default: true,\n  },\n  ignoreChiralFlag: {\n    title: 'Ignore the chiral flag',\n    type: 'boolean',\n    description: 'slider',\n    default: false,\n  },\n  'ignore-stereochemistry-errors': {\n    title: 'Ignore stereochemistry errors',\n    type: 'boolean',\n    description: 'slider',\n    default: true,\n  },\n  'mass-skip-error-on-pseudoatoms': {\n    title: 'Ignore pseudoatoms at mass',\n    type: 'boolean',\n    description: 'slider',\n    default: false,\n  },\n  'gross-formula-add-rsites': {\n    title: 'Add Rsites at mass calculation',\n    type: 'boolean',\n    description: 'slider',\n    default: true,\n  },\n  'gross-formula-add-isotopes': {\n    title: 'Add Isotopes at\\u00A0mass\\u00A0calculation',\n    type: 'boolean',\n    description: 'slider',\n    default: true,\n  },\n};\n\nexport const SERVER_OPTIONS = Object.keys(server);\n\nconst debug: {\n  showAtomIds: ExtendedSchema;\n  showBondIds: ExtendedSchema;\n  showHalfBondIds: ExtendedSchema;\n  showLoopIds: ExtendedSchema;\n} = {\n  showAtomIds: {\n    title: 'Show atom Ids',\n    type: 'boolean',\n    description: 'slider',\n    default: false,\n  },\n  showBondIds: {\n    title: 'Show bonds Ids',\n    type: 'boolean',\n    description: 'slider',\n    default: false,\n  },\n  showHalfBondIds: {\n    title: 'Show half bonds Ids',\n    type: 'boolean',\n    description: 'slider',\n    default: false,\n  },\n  showLoopIds: {\n    title: 'Show loop Ids',\n    type: 'boolean',\n    description: 'slider',\n    default: false,\n  },\n};\n\nconst miew: {\n  miewMode: ExtendedSchema;\n  miewTheme: ExtendedSchema;\n  miewAtomLabel: ExtendedSchema;\n} = {\n  miewMode: {\n    title: 'Display mode',\n    enum: ['LN', 'BS', 'LC'],\n    enumNames: ['Lines', 'Balls and Sticks', 'Licorice'],\n    default: 'LN',\n  },\n  miewTheme: {\n    title: 'Background color',\n    enum: ['light', 'dark'],\n    enumNames: ['Light', 'Dark'],\n    default: 'light',\n  },\n  miewAtomLabel: {\n    title: 'Label coloring',\n    enum: ['no', 'bright', 'blackAndWhite', 'black'],\n    enumNames: ['No', 'Bright', 'Black and White', 'Black'],\n    default: 'bright',\n  },\n};\n\nexport const MIEW_OPTIONS = Object.keys(miew);\n\nconst optionsSchema: ExtendedSchema = {\n  title: 'Settings',\n  type: 'object',\n  required: [],\n  properties: {\n    ...editor,\n    ...render,\n    ...server,\n    ...debug,\n    ...miew,\n  },\n};\n\nexport default optionsSchema;\n\nexport function getDefaultOptions(): Record<string, any> {\n  if (!optionsSchema.properties) return {};\n\n  return Object.keys(optionsSchema.properties).reduce((res, prop) => {\n    res[prop] = (optionsSchema.properties?.[prop] as ExtendedSchema)?.default;\n    return res;\n  }, {});\n}\n\nexport function validation(settings): Record<string, string> | null {\n  if (typeof settings !== 'object' || settings === null) return null;\n\n  const validator = new Validator();\n  const result = validator.validate(settings, optionsSchema);\n  const errorsProps = result.errors.map((el) => el.path[el.path.length - 1]);\n\n  return Object.keys(settings).reduce((res, prop) => {\n    if (!optionsSchema.properties) return res;\n\n    if (optionsSchema.properties[prop] && errorsProps.indexOf(prop) === -1)\n      res[prop] = settings[prop];\n\n    return res;\n  }, {});\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { KetcherLogger } from 'ketcher-core';\n\n/* local storage */\nexport const storage = {\n  warningMessage:\n    'Your changes will be lost after the tab closing. See Help (Note 2).',\n  isAvailable() {\n    try {\n      const storage = global.localStorage;\n      return storage;\n    } catch (e) {\n      KetcherLogger.error('storage-ext.js::storage::isAvailable', e);\n      return false;\n    }\n  },\n  getItem(key) {\n    let item = null;\n    try {\n      item = JSON.parse(localStorage.getItem(key));\n    } catch (e) {\n      KetcherLogger.error('storage-ext.js::storage::getItem', e);\n      console.info('LocalStorage:', e.name);\n    }\n    return item;\n  },\n  setItem(key, data) {\n    let isSet = null;\n    try {\n      localStorage.setItem(key, JSON.stringify(data));\n      isSet = true;\n    } catch (e) {\n      KetcherLogger.error('storage-ext.js::storage::setItem', e);\n      console.info('LocalStorage:', e.name);\n      isSet = false;\n    }\n    return isSet;\n  },\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  KetcherLogger,\n  KetSerializer,\n  SdfItem,\n  SdfSerializer,\n  SettingsManager,\n} from 'ketcher-core';\n\nimport { appUpdate } from '../options';\nimport { storage } from '../../storage-ext';\nimport templatesRawData from '../../../../templates/library.sdf';\nimport { AnyAction, Dispatch } from 'redux';\n\nlet cachedInitData: [Dispatch<AnyAction>, string, Element];\nlet needReinitializeTemplateLibrary = false;\n\ninterface TemplateLibrary {\n  type: string;\n  data: { lib: SdfItem[] };\n}\n\nexport function initLib(lib: SdfItem[]): TemplateLibrary {\n  return {\n    type: 'TMPL_INIT',\n    data: { lib },\n  };\n}\n\nconst deserializeSdfTemplates = (\n  baseUrl: string,\n  cacheEl: Element,\n  _fileName: string,\n): Promise<SdfItem[]> => {\n  const options = {\n    ignoreChiralFlag: SettingsManager.ignoreChiralFlag,\n  };\n\n  const sdfSerializer = new SdfSerializer(options);\n  const tmpls = sdfSerializer.deserialize(templatesRawData);\n  const prefetch = prefetchRender(tmpls, baseUrl + '/templates/', cacheEl);\n\n  return prefetch.then((cachedFiles) =>\n    tmpls.map((tmpl) => {\n      const pr = prefetchSplit(tmpl);\n      if (pr.file)\n        tmpl.props.prerender =\n          cachedFiles.indexOf(pr.file) !== -1 ? `#${pr.id}` : '';\n\n      return tmpl;\n    }),\n  );\n};\n\nexport default async function initTmplLib(\n  dispatch: Dispatch<AnyAction>,\n  baseUrl: string,\n  cacheEl: Element,\n): Promise<void> {\n  cachedInitData = [dispatch, baseUrl, cacheEl];\n\n  const fileName = 'library.sdf';\n\n  return deserializeSdfTemplates(baseUrl, cacheEl, fileName).then((res) => {\n    const lib = res.concat(userTmpls());\n    dispatch(initLib(lib));\n    dispatch(appUpdate({ templates: true }) as unknown as AnyAction);\n    if (needReinitializeTemplateLibrary) {\n      reinitializeTemplateLibrary();\n      needReinitializeTemplateLibrary = false;\n    }\n  });\n}\n\nexport function reinitializeTemplateLibrary(): void {\n  if (!cachedInitData) {\n    needReinitializeTemplateLibrary = true;\n    return;\n  }\n\n  initTmplLib(...cachedInitData);\n}\n\nfunction userTmpls(): SdfItem[] {\n  const userLib = storage.getItem('ketcher-tmpls');\n  if (!Array.isArray(userLib) || userLib.length === 0) return [];\n  const ketSerializer = new KetSerializer();\n  return userLib\n    .map((tmpl) => {\n      try {\n        if (tmpl.props === '') tmpl.props = {};\n        tmpl.props.group = 'User Templates';\n\n        return {\n          struct: ketSerializer.deserialize(tmpl.struct),\n          props: tmpl.props,\n        };\n      } catch (e) {\n        KetcherLogger.error('init-lib.ts::userTmpls', e);\n        return null;\n      }\n    })\n    .filter((tmpl): tmpl is SdfItem => tmpl !== null);\n}\n\nexport function prefetchStatic(url: string): Promise<string> {\n  return fetch(url, { credentials: 'same-origin' }).then((resp) => {\n    if (resp.ok) return resp.text();\n    throw Error('Could not fetch ' + url);\n  });\n}\n\nfunction prefetchSplit(tmpl: SdfItem) {\n  const pr = tmpl.props.prerender;\n  const res = pr && `${pr}`.split('#', 2);\n\n  return {\n    file: pr && res[0],\n    id: pr && res[1],\n  };\n}\n\nfunction prefetchRender(\n  tmpls: SdfItem[],\n  baseUrl: string,\n  cacheEl: Element,\n): Promise<string[]> {\n  const files = tmpls.reduce((res, tmpl) => {\n    const file = prefetchSplit(tmpl).file;\n\n    if (file && res.indexOf(file) === -1) res.push(file);\n\n    return res;\n  }, [] as string[]);\n  const fetch = Promise.all(\n    files.map((fn) =>\n      prefetchStatic(baseUrl + fn).catch((e) => {\n        KetcherLogger.error('init-lib.ts::prefetchRender', e);\n      }),\n    ),\n  );\n\n  return fetch.then((svgs) => {\n    svgs.forEach((svgContent) => {\n      if (svgContent) cacheEl.innerHTML += svgContent;\n    });\n\n    return files.filter((_, i) => !!svgs[i]);\n  });\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  SERVER_OPTIONS,\n  getDefaultOptions,\n  validation,\n} from '../../data/schema/options-schema';\nimport { KETCHER_SAVED_OPTIONS_KEY } from 'ketcher-core';\n\nimport { pick } from 'lodash/fp';\nimport { storage } from '../../storage-ext';\nimport { reinitializeTemplateLibrary } from '../templates/init-lib';\n\nexport function initOptionsState() {\n  return {\n    app: {\n      server: false,\n      templates: false,\n      functionalGroups: false,\n      saltsAndSolvents: false,\n    },\n    analyse: {\n      values: null,\n      roundWeight: 3,\n      roundMass: 3,\n      roundElAnalysis: 1,\n    },\n    check: {\n      checkOptions: [\n        'valence',\n        'radicals',\n        'pseudoatoms',\n        'stereo',\n        'query',\n        'overlapping_atoms',\n        'overlapping_bonds',\n        'rgroups',\n        'chiral',\n        '3d',\n        'chiral_flag',\n      ],\n    },\n    recognize: {\n      file: null,\n      structStr: null,\n      fragment: false,\n      version: null,\n    },\n    settings: Object.assign(\n      getDefaultOptions(),\n      validation(storage.getItem(KETCHER_SAVED_OPTIONS_KEY)),\n    ),\n    getSettings() {\n      this.settings = Object.assign(\n        getDefaultOptions(),\n        validation(storage.getItem(KETCHER_SAVED_OPTIONS_KEY)),\n      );\n    },\n    getServerSettings() {\n      const seriliazedServerOptions = getSerilizedServerOptions(this.settings);\n      const defaultServerOptions = pick(SERVER_OPTIONS, this.settings);\n\n      return {\n        ...defaultServerOptions,\n        ...seriliazedServerOptions,\n      };\n    },\n  };\n}\n\nfunction getSerilizedServerOptions(options) {\n  let newOptions = {\n    'render-coloring': options.atomColoring,\n    'render-font-size': options.fontsz,\n    'render-font-size-unit': options.fontszUnit,\n    'render-font-size-sub': options.fontszsub,\n    'render-font-size-sub-unit': options.fontszsubUnit,\n    'image-resolution': Number(options.imageResolution),\n    'bond-length': options.bondLength,\n    'bond-length-unit': options.bondLengthUnit,\n    'render-bond-thickness': options.bondThickness,\n    'render-bond-thickness-unit': options.bondThicknessUnit,\n    'render-bond-spacing': options.bondSpacing / 100,\n    'render-stereo-bond-width': options.stereoBondWidth,\n    'render-stereo-bond-width-unit': options.stereoBondWidthUnit,\n    'render-hash-spacing': options.hashSpacing,\n    'render-hash-spacing-unit': options.hashSpacingUnit,\n    'reaction-component-margin-size': options.reactionComponentMarginSize,\n    'reaction-component-margin-size-unit':\n      options.reactionComponentMarginSizeUnit,\n  };\n\n  if (options.imageResolution === '600') {\n    newOptions = {\n      ...newOptions,\n      // TODO: change to the values from settings once they are implemented\n      'render-output-sheet-width': 11,\n      'render-output-sheet-height': 8.5,\n    };\n  }\n\n  return newOptions;\n}\n\nexport function appUpdate(data) {\n  return (dispatch) => {\n    dispatch({ type: 'APP_OPTIONS', data });\n    dispatch({ type: 'UPDATE' });\n  };\n}\n\n/* SETTINGS */\nexport function saveSettings(newSettings) {\n  storage.setItem(KETCHER_SAVED_OPTIONS_KEY, newSettings);\n  reinitializeTemplateLibrary();\n  initOptionsState.getSettings();\n\n  return {\n    type: 'SAVE_SETTINGS',\n    data: newSettings,\n  };\n}\n\n/* ANALYZE */\nexport function changeRound(roundName, value) {\n  return {\n    type: 'CHANGE_ANALYSE',\n    data: { [roundName]: value },\n  };\n}\n\n/* RECOGNIZE */\nconst recognizeActions = [\n  'SET_RECOGNIZE_STRUCT',\n  'CHANGE_RECOGNIZE_FILE',\n  'CHANGE_IMAGO_VERSION',\n  'IS_FRAGMENT_RECOGNIZE',\n];\n\nexport function setStruct(str) {\n  return {\n    type: 'SET_RECOGNIZE_STRUCT',\n    data: { structStr: str },\n  };\n}\n\nexport function changeVersion(version) {\n  return {\n    type: 'CHANGE_IMAGO_VERSION',\n    data: { version },\n  };\n}\n\nexport function changeImage(file) {\n  return {\n    type: 'CHANGE_RECOGNIZE_FILE',\n    data: {\n      file,\n      structStr: null,\n    },\n  };\n}\n\nexport function shouldFragment(isFrag) {\n  return {\n    type: 'IS_FRAGMENT_RECOGNIZE',\n    data: { fragment: isFrag },\n  };\n}\n\n/* CHECK */\nexport function checkOpts(data) {\n  return {\n    type: 'SAVE_CHECK_OPTS',\n    data,\n  };\n}\n\n/* REDUCER */\nfunction optionsReducer(state = {}, action) {\n  const { type, data } = action;\n  if (type === 'APP_OPTIONS')\n    return { ...state, app: { ...state.app, ...data } };\n\n  if (type === 'SAVE_SETTINGS') {\n    return { ...state, settings: { ...state.settings, ...data } };\n  }\n\n  if (type === 'SAVE_CHECK_OPTS') return { ...state, check: data };\n\n  if (type === 'CHANGE_ANALYSE')\n    return { ...state, analyse: { ...state.analyse, ...data, loading: false } };\n\n  if (type === 'ANALYSE_LOADING')\n    return { ...state, analyse: { ...state.analyse, loading: true } };\n\n  if (recognizeActions.includes(type))\n    return { ...state, recognize: { ...state.recognize, ...data } };\n  return state;\n}\n\nexport default optionsReducer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\n/* schema utils */\nfunction constant(schema, prop) {\n  const desc = schema.properties[prop];\n  return desc.constant || desc.enum[0]; // see https://git.io/v6hyP\n}\n\nexport function mapOf(schema, prop) {\n  console.assert(schema.oneOf);\n  return schema.oneOf.reduce((res, desc) => {\n    res[constant(desc, prop)] = desc;\n    return res;\n  }, {});\n}\n\nexport function selectListOf(schema, prop) {\n  const desc = schema.properties && schema.properties[prop];\n  if (desc) {\n    return desc.enum.map((value, i) => {\n      const title = desc.enumNames && desc.enumNames[i];\n      return title ? { title, value } : value;\n    });\n  }\n  return schema.oneOf.map((ds) =>\n    !ds.title\n      ? constant(ds, prop)\n      : {\n          title: ds.title,\n          value: constant(ds, prop),\n        },\n  );\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { mapOf } from './schema-helper';\n\nconst radioButtonsSchema = {\n  enum: ['Absolute', 'Relative', 'Attached'],\n  default: 'Absolute',\n};\n\nconst contextSchema = {\n  title: 'Context',\n  enum: ['Fragment', 'Multifragment', 'Bond', 'Atom', 'Group'],\n  default: 'Fragment',\n};\n\nconst sData = {\n  Fragment: {\n    title: 'Fragment',\n    type: 'Object',\n    oneOf: [\n      {\n        key: 'FRG_STR',\n        title: 'MDLBG_FRAGMENT_STEREO',\n        type: 'object',\n        properties: {\n          type: { enum: ['DAT'] },\n          fieldName: {\n            title: 'Field name',\n            enum: ['MDLBG_FRAGMENT_STEREO'],\n            default: 'MDLBG_FRAGMENT_STEREO',\n          },\n          fieldValue: {\n            title: 'Field value',\n            enum: [\n              'abs',\n              '(+)-enantiomer',\n              '(-)-enantiomer',\n              'racemate',\n              'steric',\n              'rel',\n              'R(a)',\n              'S(a)',\n              'R(p)',\n              'S(p)',\n            ],\n            default: 'abs',\n          },\n          radiobuttons: radioButtonsSchema,\n        },\n        required: ['fieldName', 'fieldValue', 'radiobuttons'],\n      },\n      {\n        key: 'FRG_COEFF',\n        title: 'MDLBG_FRAGMENT_COEFFICIENT',\n        type: 'object',\n        properties: {\n          type: { enum: ['DAT'] },\n          fieldName: {\n            title: 'Field name',\n            enum: ['MDLBG_FRAGMENT_COEFFICIENT'],\n            default: 'MDLBG_FRAGMENT_COEFFICIENT',\n          },\n          fieldValue: {\n            title: 'Field value',\n            type: 'string',\n            default: '',\n            minLength: 1,\n            invalidMessage: 'Please, specify field value',\n          },\n          radiobuttons: radioButtonsSchema,\n        },\n        required: ['fieldName', 'fieldValue', 'radiobuttons'],\n      },\n      {\n        key: 'FRG_CHRG',\n        title: 'MDLBG_FRAGMENT_CHARGE',\n        type: 'object',\n        properties: {\n          type: { enum: ['DAT'] },\n          fieldName: {\n            title: 'Field name',\n            enum: ['MDLBG_FRAGMENT_CHARGE'],\n            default: 'MDLBG_FRAGMENT_CHARGE',\n          },\n          fieldValue: {\n            title: 'Field value',\n            type: 'string',\n            default: '',\n            minLength: 1,\n            invalidMessage: 'Please, specify field value',\n          },\n          radiobuttons: radioButtonsSchema,\n        },\n        required: ['fieldName', 'fieldValue', 'radiobuttons'],\n      },\n      {\n        key: 'FRG_RAD',\n        title: 'MDLBG_FRAGMENT_RADICALS',\n        type: 'object',\n        properties: {\n          type: { enum: ['DAT'] },\n          fieldName: {\n            title: 'Field name',\n            enum: ['MDLBG_FRAGMENT_RADICALS'],\n            default: 'MDLBG_FRAGMENT_RADICALS',\n          },\n          fieldValue: {\n            title: 'Field value',\n            type: 'string',\n            default: '',\n            minLength: 1,\n            invalidMessage: 'Please, specify field value',\n          },\n          radiobuttons: radioButtonsSchema,\n        },\n        required: ['fieldName', 'fieldValue', 'radiobuttons'],\n      },\n    ],\n  },\n  Multifragment: {\n    title: 'Multifragment',\n    type: 'Object',\n    oneOf: [\n      {\n        key: 'MLT_FRG',\n        title: 'KETCHER_MULTIPLE_FRAGMENT',\n        type: 'object',\n        properties: {\n          type: { enum: ['DAT'] },\n          fieldName: {\n            title: 'Field name',\n            enum: ['KETCHER_MULTIPLE_FRAGMENT'],\n            default: 'KETCHER_MULTIPLE_FRAGMENT',\n          },\n          fieldValue: {\n            title: 'Field value',\n            enum: [\n              'aerosol',\n              'alloy',\n              'catenane',\n              'complex',\n              'composite',\n              'co-polymer',\n              'emulsion',\n              'host-guest complex',\n              'mixture',\n              'rotaxane',\n              'suspension',\n            ],\n            default: 'aerosol',\n          },\n          radiobuttons: radioButtonsSchema,\n        },\n        required: ['fieldName', 'fieldValue', 'radiobuttons'],\n      },\n    ],\n  },\n  Bond: {\n    title: 'Bond',\n    type: 'Object',\n    oneOf: [\n      {\n        key: 'SB_STR',\n        title: 'MDLBG_STEREO_KEY',\n        type: 'object',\n        properties: {\n          type: { enum: ['DAT'] },\n          fieldName: {\n            title: 'Field name',\n            enum: ['MDLBG_STEREO_KEY'],\n            default: 'MDLBG_STEREO_KEY',\n          },\n          fieldValue: {\n            title: 'Field value',\n            enum: [\n              'erythro',\n              'threo',\n              'alpha',\n              'beta',\n              'endo',\n              'exo',\n              'anti',\n              'syn',\n              'ECL',\n              'STG',\n            ],\n            default: 'erythro',\n          },\n          radiobuttons: radioButtonsSchema,\n        },\n        required: ['fieldName', 'fieldValue', 'radiobuttons'],\n      },\n      {\n        key: 'SB_BND',\n        title: 'MDLBG_BOND_KEY',\n        type: 'object',\n        properties: {\n          type: { enum: ['DAT'] },\n          fieldName: {\n            title: 'Field name',\n            enum: ['MDLBG_BOND_KEY'],\n            default: 'MDLBG_BOND_KEY',\n          },\n          fieldValue: {\n            title: 'Field value',\n            enum: ['Value=4'],\n            default: 'Value=4',\n          },\n          radiobuttons: radioButtonsSchema,\n        },\n        required: ['fieldName', 'fieldValue', 'radiobuttons'],\n      },\n    ],\n  },\n  Atom: {\n    title: 'Atom',\n    type: 'Object',\n    oneOf: [\n      {\n        key: 'AT_STR',\n        title: 'MDLBG_STEREO_KEY',\n        type: 'object',\n        properties: {\n          type: { enum: ['DAT'] },\n          fieldName: {\n            title: 'Field name',\n            enum: ['MDLBG_STEREO_KEY'],\n            default: 'MDLBG_STEREO_KEY',\n          },\n          fieldValue: {\n            title: 'Field value',\n            enum: [\n              'RS',\n              'SR',\n              'P-3',\n              'P-3-PI',\n              'SP-4',\n              'SP-4-PI',\n              'T-4',\n              'T-4-PI',\n              'SP-5',\n              'SP-5-PI',\n              'TB-5',\n              'TB-5-PI',\n              'OC-6',\n              'TP-6',\n              'PB-7',\n              'CU-8',\n              'SA-8',\n              'DD-8',\n              'HB-9',\n              'TPS-9',\n            ],\n            default: 'RS',\n          },\n          radiobuttons: radioButtonsSchema,\n        },\n        required: ['fieldName', 'fieldValue', 'radiobuttons'],\n      },\n    ],\n  },\n  Group: {\n    title: 'Group',\n    type: 'Object',\n    oneOf: [\n      {\n        key: 'GRP_STR',\n        title: 'MDLBG_STEREO_KEY',\n        type: 'object',\n        properties: {\n          type: { enum: ['DAT'] },\n          fieldName: {\n            title: 'Field name',\n            enum: ['MDLBG_STEREO_KEY'],\n            default: 'MDLBG_STEREO_KEY',\n          },\n          fieldValue: {\n            title: 'Field value',\n            enum: ['cis', 'trans'],\n            default: 'cis',\n          },\n          radiobuttons: radioButtonsSchema,\n        },\n        required: ['fieldName', 'fieldValue', 'radiobuttons'],\n      },\n    ],\n  },\n};\n\nexport const sdataCustomSchema = {\n  key: 'Custom',\n  title: 'Data',\n  type: 'object',\n  properties: {\n    type: { enum: ['DAT'] },\n    context: {\n      title: 'Context',\n      enum: ['Atom', 'Bond', 'Fragment', 'Group', 'Multifragment'],\n      default: 'Fragment',\n    },\n    fieldName: {\n      title: 'Field name',\n      type: 'string',\n      default: '',\n      minLength: 1,\n      invalidMessage: 'Please, specify field name',\n    },\n    fieldValue: {\n      title: 'Field value',\n      type: 'string',\n      default: '',\n      minLength: 1,\n      invalidMessage: 'Please, specify field value',\n    },\n    radiobuttons: {\n      enum: ['Absolute', 'Relative', 'Attached'],\n      default: 'Absolute',\n    },\n  },\n  required: ['context', 'fieldName', 'fieldValue', 'radiobuttons'],\n};\n\nexport const sdataSchema = Object.keys(sData).reduce((acc, title) => {\n  acc[title] = mapOf(sData[title], 'fieldName');\n  Object.keys(acc[title]).forEach((fieldName) => {\n    acc[title][fieldName].properties.context = contextSchema;\n  });\n  return acc;\n}, {});\n\n/**\n * Returns first key of passed object\n * @param obj { object }\n */\nfunction firstKeyOf(obj) {\n  return Object.keys(obj)[0];\n}\n\n/**\n * Returns schema default values. Depends on passed arguments:\n * pass schema only -> returns default context\n * pass schema & context -> returns default fieldName\n * pass schema & context & fieldName -> returns default fieldValue\n * @param context? { string }\n * @param fieldName? { string }\n * @returns { string }\n */\nexport function getSdataDefault(schema = sdataSchema, context, fieldName) {\n  if (schema.key === 'Custom') {\n    return schema.properties[context]?.default;\n  }\n\n  if (!context && !fieldName) return firstKeyOf(schema);\n\n  if (!fieldName) return firstKeyOf(schema[context]);\n\n  return schema[context][fieldName]\n    ? schema[context][fieldName].properties.fieldValue.default\n    : '';\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  getSdataDefault,\n  sdataSchema,\n  sdataCustomSchema,\n} from '../../data/schema/sdata-schema';\n\nexport const initSdata = (schema) => {\n  const isCustomShema = schema.key === 'Custom';\n\n  const context = isCustomShema\n    ? getSdataDefault(sdataCustomSchema, 'context')\n    : getSdataDefault(sdataSchema);\n  const fieldName = isCustomShema\n    ? getSdataDefault(sdataCustomSchema, 'fieldName')\n    : getSdataDefault(sdataSchema, context);\n  const fieldValue = isCustomShema\n    ? getSdataDefault(sdataCustomSchema, 'fieldValue')\n    : getSdataDefault(sdataSchema, context, fieldName);\n  const radiobuttons = 'Absolute';\n\n  return {\n    errors: {},\n    valid: true,\n    result: {\n      context,\n      fieldName,\n      fieldValue,\n      radiobuttons,\n      type: 'DAT',\n    },\n  };\n};\n\nconst correctErrors = (state, payload) => {\n  const { valid, errors } = payload;\n  const { fieldName, fieldValue } = state.result;\n\n  return {\n    result: state.result,\n    valid: valid && !!fieldName && !!fieldValue,\n    errors,\n  };\n};\n\nconst onContextChange = (state, payload) => {\n  const { context, fieldValue } = payload;\n\n  const fieldName = getSdataDefault(sdataCustomSchema, 'fieldName');\n\n  let fValue = fieldValue;\n  if (fValue === state.result.fieldValue)\n    fValue = getSdataDefault(sdataCustomSchema, 'fieldValue');\n\n  return {\n    result: {\n      ...payload,\n      context,\n      fieldName,\n      fieldValue: fValue,\n    },\n  };\n};\n\nconst onFieldNameChange = (state, payload) => {\n  const { fieldName } = payload;\n\n  const context = state.result.context;\n\n  let fieldValue = payload.fieldValue;\n\n  if (sdataSchema[context][fieldName])\n    fieldValue = getSdataDefault(sdataSchema, context, fieldName);\n\n  if (\n    fieldValue === state.result.fieldValue &&\n    sdataSchema[context][state.result.fieldName]\n  )\n    fieldValue = '';\n\n  return {\n    result: {\n      ...payload,\n      fieldName,\n      fieldValue,\n    },\n  };\n};\n\nexport function sdataReducer(state, action) {\n  if (action.data.result.init) {\n    return correctErrors(\n      {\n        ...state,\n        result: Object.assign({}, state.result, action.data.result),\n      },\n      action.data,\n    );\n  }\n\n  const actionContext = action.data.result.context;\n  const actionFieldName = action.data.result.fieldName;\n\n  let newstate = null;\n\n  if (actionContext !== state.result.context)\n    newstate = onContextChange(state, action.data.result);\n  else if (actionFieldName !== state.result.fieldName)\n    newstate = onFieldNameChange(state, action.data.result);\n\n  newstate = newstate || {\n    ...state,\n    result: Object.assign({}, state.result, action.data.result),\n  };\n\n  return correctErrors(newstate, action.data);\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { initSdata, sdataReducer } from './sdata';\n\nimport { getDefaultOptions } from '../../data/schema/options-schema';\nimport { sdataCustomSchema } from '../../data/schema/sdata-schema';\n\nexport const formsState = {\n  // TODO: create from schema.{smth}.defaultValue\n  // TODO: change validation method, no 'valid:true' props as default\n  atomProps: {\n    errors: {},\n    valid: true,\n    result: {\n      label: '',\n      charge: null,\n      explicitValence: -1,\n      hCount: 0,\n      invRet: 0,\n      isotope: null,\n      radical: 0,\n      ringBondCount: 0,\n      substitutionCount: 0,\n      aromaticity: null,\n      implicitHCount: null,\n      ringMembership: null,\n      ringSize: null,\n      connectivity: null,\n      chirality: null,\n      customQuery: null,\n    },\n  },\n  attachmentPoints: {\n    errors: {},\n    valid: true,\n    result: {\n      primary: false,\n      secondary: false,\n    },\n  },\n  automap: {\n    errors: {},\n    valid: true,\n    result: {\n      mode: 'discard',\n    },\n  },\n  bondProps: {\n    errors: {},\n    valid: true,\n    result: {\n      type: 'single',\n      topology: 0,\n      center: 0,\n      customQuery: null,\n    },\n  },\n  check: {\n    errors: {},\n    moleculeErrors: {},\n  },\n  labelEdit: {\n    errors: {},\n    valid: true,\n    result: {\n      label: '',\n    },\n  },\n  rgroup: {\n    errors: {},\n    valid: true,\n    result: {\n      values: [],\n    },\n  },\n  rgroupLogic: {\n    errors: {},\n    valid: true,\n    result: {\n      ifthen: 0,\n      range: '>0',\n      resth: false,\n    },\n  },\n  save: {\n    errors: {},\n    valid: true,\n    result: {\n      filename: 'ketcher',\n      format: 'mol',\n    },\n  },\n  settings: {\n    errors: {},\n    valid: true,\n    result: getDefaultOptions(),\n  },\n  text: {\n    errors: {},\n    valid: true,\n    result: {},\n  },\n  attach: {\n    errors: {},\n    valid: true,\n    result: {},\n  },\n  sgroup: initSdata(sdataCustomSchema),\n};\n\nexport function updateFormState(data) {\n  return {\n    type: 'UPDATE_FORM',\n    data,\n  };\n}\n\nexport function checkErrors(errors) {\n  return {\n    type: 'UPDATE_FORM',\n    data: { moleculeErrors: errors },\n  };\n}\n\nexport function setDefaultSettings() {\n  return {\n    type: 'UPDATE_FORM',\n    data: {\n      result: getDefaultOptions(sdataCustomSchema),\n      valid: true,\n      errors: {},\n    },\n  };\n}\n\nexport function formReducer(state, action) {\n  const newType = action.data?.result?.type;\n  if (newType === 'DAT') return sdataReducer(state, action);\n\n  return Object.assign({}, state, action.data);\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport const INDIGO_VERIFICATION = 'INDIGO_VERIFICATION';\nexport const ANALYZING_FILE = 'ANALYZING_FILE';\n\nexport interface RequestState {\n  indigoVerification: boolean;\n  isAnalyzingFile: boolean;\n}\n\ninterface IndigoVerificationAction {\n  type: string;\n  data: boolean;\n}\n\nexport type RequestActionTypes = IndigoVerificationAction;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  INDIGO_VERIFICATION,\n  ANALYZING_FILE,\n  RequestActionTypes,\n  RequestState,\n} from './request.types';\n\nexport function indigoVerification(data: boolean): RequestActionTypes {\n  return {\n    type: INDIGO_VERIFICATION,\n    data,\n  };\n}\n\nexport function setAnalyzingFile(data: boolean): RequestActionTypes {\n  return {\n    type: ANALYZING_FILE,\n    data,\n  };\n}\n\nconst initialState = {\n  indigoVerification: false,\n  isAnalyzingFile: false,\n};\n\nexport default function (\n  state = initialState,\n  action: RequestActionTypes,\n): RequestState {\n  const { type, data } = action;\n\n  switch (type) {\n    case INDIGO_VERIFICATION: {\n      return {\n        ...state,\n        indigoVerification: data,\n      };\n    }\n    case ANALYZING_FILE: {\n      return {\n        ...state,\n        isAnalyzingFile: data,\n      };\n    }\n    default:\n      return state;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport const supportedSGroupTypes = {\n  MUL: 'MUL',\n  SRU: 'SRU',\n  SUP: 'SUP',\n  DAT: 'DAT',\n  GEN: 'GEN',\n  queryComponent: 'queryComponent',\n} as const;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { mapOf } from './schema-helper';\nimport { range } from 'lodash/fp';\nimport { sdataCustomSchema } from './sdata-schema';\n\nexport const atom = {\n  title: 'Atom',\n  type: 'object',\n  required: ['label'],\n  properties: {\n    atomType: {\n      title: 'Atom Type',\n      enum: ['single', 'list', 'pseudo'],\n      enumNames: ['Single', 'List', 'Special'],\n      default: 'single',\n    },\n    label: {\n      title: 'Label',\n      type: 'string', // TODO:should really be enum of elements\n      maxLength: 3,\n      invalidMessage: 'Wrong label',\n    },\n    atomList: {\n      title: 'List',\n      type: 'string',\n      invalidMessage: 'Invalid atom list',\n    },\n    notList: {\n      title: 'Not list',\n      type: 'boolean',\n      default: false,\n    },\n    pseudo: {\n      title: 'Special',\n      type: 'string',\n      invalidMessage: 'Invalid special atom',\n    },\n    alias: {\n      title: 'Alias',\n      type: 'string',\n      invalidMessage: 'Leading and trailing spaces are not allowed',\n    },\n    charge: {\n      title: 'Charge',\n      type: 'string',\n      pattern: '^([+-]?)(1[0-5]|0|[0-9])([+-]?)$',\n      maxLength: 4,\n      default: '',\n      invalidMessage: 'Invalid charge value',\n    },\n    explicitValence: {\n      title: 'Valence',\n      enum: [-1, 0, 1, 2, 3, 4, 5, 6, 7, 8],\n      enumNames: ['', '0', 'I', 'II', 'III', 'IV', 'V', 'VI', 'VII', 'VIII'],\n      default: -1,\n    },\n    isotope: {\n      title: 'Isotope (atomic mass)',\n      type: 'string',\n      pattern: '^[0-9]{1,3}$|(^$)',\n      default: '',\n      maxLength: 3,\n      invalidMessage: 'Invalid isotope value',\n    },\n    radical: {\n      title: 'Radical',\n      enum: [0, 2, 1, 3],\n      enumNames: [\n        '',\n        'Monoradical',\n        'Diradical (singlet)',\n        'Diradical (triplet)',\n      ],\n      default: 0,\n    },\n    cip: {\n      title: 'CIP',\n      type: 'string',\n      enum: ['R', 'S', 'r', 's'],\n    },\n    ringBondCount: {\n      title: 'Ring bond count',\n      enum: [0, -2, -1, 2, 3, 4, 5, 6, 7, 8, 9],\n      enumNames: ['', 'As drawn', '0', '2', '3', '4', '5', '6', '7', '8', '9'],\n      default: 0,\n    },\n    hCount: {\n      title: 'H count',\n      enum: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10],\n      enumNames: ['', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],\n      default: 0,\n    },\n    substitutionCount: {\n      title: 'Substitution count',\n      enum: [0, -2, -1, 1, 2, 3, 4, 5, 6, 7, 8, 9],\n      enumNames: [\n        '',\n        'As drawn',\n        '0',\n        '1',\n        '2',\n        '3',\n        '4',\n        '5',\n        '6',\n        '7',\n        '8',\n        '9',\n      ],\n      default: 0,\n    },\n    unsaturatedAtom: {\n      title: 'Unsaturated',\n      type: 'boolean',\n      default: false,\n    },\n    aromaticity: {\n      title: 'Aromaticity',\n      enum: [null, 'aromatic', 'aliphatic'],\n      enumNames: ['', 'aromatic', 'aliphatic'],\n      default: 0,\n    },\n    implicitHCount: {\n      title: 'Implicit H count',\n      enum: [null, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9],\n      enumNames: ['', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],\n      default: 0,\n    },\n    ringMembership: {\n      title: 'Ring membership',\n      enum: [null, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9],\n      enumNames: ['', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],\n      default: 0,\n    },\n    ringSize: {\n      title: 'Ring size',\n      enum: [null, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9],\n      enumNames: ['', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],\n      default: 0,\n    },\n    connectivity: {\n      title: 'Connectivity',\n      enum: [null, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9],\n      enumNames: ['', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],\n      default: 0,\n    },\n    chirality: {\n      title: 'Chirality',\n      enum: [null, 'anticlockwise', 'clockwise'],\n      enumNames: ['', 'anticlockwise', 'clockwise'],\n      default: 0,\n    },\n    customQuery: {\n      title: 'Custom Query',\n      pattern: '[^ ]',\n      type: 'string',\n      invalidMessage: 'Invalid custom query',\n    },\n    invRet: {\n      title: 'Inversion',\n      enum: [0, 1, 2],\n      enumNames: ['', 'Inverts', 'Retains'],\n      default: 0,\n    },\n    exactChangeFlag: {\n      title: 'Exact change',\n      type: 'boolean',\n      default: false,\n    },\n  },\n};\n\nexport const rgroupSchema = {\n  title: 'R-group',\n  type: 'object',\n  properties: {\n    values: {\n      type: 'array',\n      items: {\n        type: 'string',\n        enum: range(1, 33),\n        enumNames: range(1, 33).map((item) => 'R' + item),\n      },\n    },\n  },\n};\n\nexport const labelEdit = {\n  title: 'Label Edit',\n  type: 'object',\n  required: ['label'],\n  properties: {\n    label: {\n      title: 'Atom',\n      default: '',\n      invalidMessage: 'Wrong atom symbol',\n      type: 'string',\n    },\n  },\n};\n\nexport const attachmentPoints = {\n  title: 'Attachment Points',\n  type: 'object',\n  properties: {\n    primary: {\n      title: 'Primary attachment point',\n      type: 'boolean',\n    },\n    secondary: {\n      title: 'Secondary attachment point',\n      type: 'boolean',\n    },\n  },\n};\n\nexport const bond = {\n  title: 'Bond',\n  type: 'object',\n  required: ['type'],\n  properties: {\n    type: {\n      title: 'Type',\n      enum: [\n        '',\n        'single',\n        'up',\n        'down',\n        'updown',\n        'double',\n        'crossed',\n        'triple',\n        'aromatic',\n        'any',\n        'hydrogen',\n        'singledouble',\n        'singlearomatic',\n        'doublearomatic',\n        'dative',\n      ],\n      enumNames: [\n        '',\n        'Single',\n        'Single Up',\n        'Single Down',\n        'Single Up/Down',\n        'Double',\n        'Double Cis/Trans',\n        'Triple',\n        'Aromatic',\n        'Any',\n        'Hydrogen',\n        'Single/Double',\n        'Single/Aromatic',\n        'Double/Aromatic',\n        'Dative',\n      ],\n      default: 'single',\n    },\n    topology: {\n      title: 'Topology',\n      enum: [null, 0, 1, 2],\n      enumNames: ['', 'Either', 'Ring', 'Chain'],\n      default: 0,\n    },\n    customQuery: {\n      title: 'Custom Query',\n      pattern: '[^ ]',\n      type: 'string',\n      invalidMessage: 'Invalid custom query',\n    },\n    center: {\n      title: 'Reacting Center',\n      enum: [null, 0, -1, 1, 2, 4, 8, 12], // 5, 9, 13\n      enumNames: [\n        '',\n        'Unmarked',\n        'Not center',\n        'Center',\n        'No change',\n        'Made/broken',\n        'Order changes',\n        'Made/broken and changes',\n      ], // \"Order changes\" x 3\n      default: 0,\n    },\n    cip: {\n      title: 'CIP',\n      type: 'string',\n      enum: ['E', 'Z', 'M', 'P'],\n    },\n  },\n};\n\nconst sgroup = {\n  title: 'SGroup',\n  type: 'object',\n  required: ['type'],\n  oneOf: [\n    {\n      ...sdataCustomSchema,\n    },\n    {\n      key: 'MUL',\n      title: 'Multiple group',\n      type: 'object',\n      properties: {\n        type: { enum: ['MUL'] },\n        mul: {\n          title: 'Repeat count',\n          type: 'integer',\n          default: 1,\n          minimum: 1,\n          maximum: 200,\n        },\n      },\n      required: ['mul'],\n    },\n    {\n      key: 'SRU',\n      title: 'SRU polymer',\n      type: 'object',\n      properties: {\n        type: { enum: ['SRU'] },\n        subscript: {\n          title: 'Polymer label',\n          type: 'string',\n          default: 'n',\n          // any string, except empty and including double quotes\n          pattern: '^(?!\\\\s*$)[^\"]+$',\n          invalidMessage:\n            'SRU subscript should not be empty and contain double quotes',\n        },\n        connectivity: {\n          title: 'Repeat Pattern',\n          enum: ['ht', 'hh', 'eu'],\n          enumNames: ['Head-to-tail', 'Head-to-head', 'Either unknown'],\n          default: 'ht',\n        },\n      },\n      required: ['subscript', 'connectivity'],\n    },\n    {\n      key: 'SUP',\n      title: 'Superatom',\n      type: 'object',\n      properties: {\n        type: { enum: ['SUP'] },\n        name: {\n          title: 'Name',\n          type: 'string',\n          default: '',\n          minLength: 1,\n          invalidMessage: 'Please, provide a name for the superatom',\n        },\n      },\n      required: ['name'],\n    },\n    {\n      key: 'queryComponent',\n      title: 'Query component',\n      type: 'object',\n      properties: {\n        type: { enum: ['queryComponent'] },\n      },\n    },\n  ],\n};\nexport const sgroupMap = mapOf(sgroup, 'type');\n\nexport const rgroupLogic = {\n  title: 'R-Group',\n  type: 'object',\n  properties: {\n    range: {\n      title: 'Occurrence',\n      type: 'string',\n      maxLength: 50,\n      invalidMessage: 'Wrong value',\n    },\n    resth: {\n      title: 'RestH',\n      type: 'boolean',\n    },\n    ifthen: {\n      title: 'Condition',\n      type: 'integer',\n      minium: 0,\n    },\n  },\n};\n\nexport const textSchema = {\n  title: 'Text Edit',\n  type: 'object',\n  required: ['label'],\n  properties: {\n    label: {\n      default: '',\n      type: 'string',\n    },\n  },\n};\n\nexport const attachSchema = {\n  title: 'Template edit',\n  type: 'object',\n  required: ['name'],\n  properties: {\n    name: {\n      title: 'Molecule name',\n      type: 'string',\n      minLength: 1,\n      maxLength: 128,\n      invalidMessage:\n        'Template must have a unique name and no more than 128 symbols in length',\n    },\n  },\n};\n","import { atom } from './schema/struct-schema';\n\n/**\n * Get match groups from string representation of charge. It returns RegExpExecArray for charges with values +-[0..15]\n * overwise returns null\n *\n * @example\n * matchCharge(\"16\") === null\n * matchCharge(\"0\") === []\n * matchCharge(\"-1\") === [\"-1\", \"-\", \"1\", \"\"]\n * matchCharge(\"15+\") === [\"15+\", \"\", \"15\", \"+\"]\n */\nexport function matchCharge(charge: string) {\n  const regex = new RegExp(atom.properties.charge.pattern);\n  return regex.exec(charge);\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  AtomList,\n  Bond,\n  Elements,\n  StereoLabel,\n  getAtomType,\n} from 'ketcher-core';\nimport { capitalize } from 'lodash/fp';\nimport {\n  sdataSchema,\n  getSdataDefault,\n  sdataCustomSchema,\n} from '../schema/sdata-schema';\nimport { matchCharge } from '../utils';\n\nconst DefaultStereoGroupNumber = 1;\n\nexport function fromElement(selem) {\n  if (selem.label === 'R#') {\n    return {\n      type: 'rlabel',\n      values: fromRlabel(selem.rglabel),\n      ...selem,\n    };\n  }\n  if (selem.label === 'L#') return fromAtomList(selem);\n\n  if (Elements.get(selem.label)) return fromAtom(selem);\n\n  if (!selem.label && 'attachmentPoints' in selem)\n    return { ap: fromApoint(selem.attachmentPoints) };\n\n  return selem; // probably generic\n}\n\nexport function toElement(elem) {\n  if (elem.type === 'rlabel') {\n    return {\n      label: elem.values.length ? 'R#' : 'C',\n      rglabel: elem.values.length === 0 ? null : toRlabel(elem.values),\n    };\n  }\n  if (elem.type === 'list' || elem.type === 'not-list') return toAtomList(elem);\n\n  if (!elem.label && 'ap' in elem) {\n    return { attachmentPoints: toApoint(elem.ap) };\n  }\n  if (elem.atomType === 'list') {\n    elem.label = 'L#';\n    elem.pseudo = null;\n    elem.atomList = new AtomList({\n      notList: elem.notList,\n      ids: elem.atomList?.split(',').map((el) => Elements.get(el).number) || [],\n    });\n    delete elem.notList;\n    delete elem.atomType;\n    return toAtom(elem);\n  }\n\n  if (elem.atomType === 'pseudo') {\n    elem.label = elem.pseudo;\n    elem.atomList = null;\n    delete elem.notList;\n    delete elem.atomType;\n    return toAtom(elem);\n  }\n\n  if (\n    Elements.get(capitalize(elem.label)) ||\n    (elem.customQuery && elem.customQuery !== '')\n  ) {\n    elem.label = capitalize(elem.label);\n    elem.pseudo = null;\n    elem.atomList = null;\n    delete elem.notList;\n    delete elem.atomType;\n    return toAtom(elem);\n  }\n\n  if (\n    elem.label === 'A' ||\n    elem.label === '*' ||\n    elem.label === 'Q' ||\n    elem.label === 'X' ||\n    elem.label === 'R'\n  ) {\n    elem.pseudo = elem.label;\n    return toAtom(elem);\n  }\n\n  return elem;\n}\n\nexport function fromAtom(satom) {\n  const alias = satom.alias || '';\n  const atomType = getAtomType(satom);\n  return {\n    alias,\n    atomType,\n    atomList:\n      satom.atomList?.ids.map((i) => Elements.get(i).label).join(',') || '',\n    notList: satom.atomList?.notList || false,\n    pseudo: satom.pseudo,\n    label: satom.label,\n    charge: satom.charge === null ? '' : satom.charge.toString(),\n    isotope: satom.isotope === null ? '' : satom.isotope.toString(),\n    explicitValence: satom.explicitValence,\n    radical: satom.radical,\n    invRet: satom.invRet,\n    exactChangeFlag: !!satom.exactChangeFlag,\n    ringBondCount: satom.ringBondCount,\n    substitutionCount: satom.substitutionCount,\n    unsaturatedAtom: !!satom.unsaturatedAtom,\n    hCount: satom.hCount,\n    stereoParity: satom.stereoParity,\n    implicitHCount: satom.implicitHCount,\n    aromaticity: satom.queryProperties.aromaticity,\n    ringMembership: satom.queryProperties.ringMembership,\n    ringSize: satom.queryProperties.ringSize,\n    connectivity: satom.queryProperties.connectivity,\n    chirality: satom.queryProperties.chirality,\n    customQuery:\n      satom.queryProperties.customQuery === null\n        ? ''\n        : satom.queryProperties.customQuery.toString(),\n  };\n}\n\nexport function toAtom(atom) {\n  // TODO merge this to Atom.attrlist?\n  //      see ratomtool\n  const {\n    aromaticity = null,\n    ringMembership = null,\n    ringSize = null,\n    connectivity = null,\n    chirality = null,\n    customQuery = '',\n    ...restAtom\n  } = atom;\n  if (customQuery && customQuery !== '') {\n    return Object.assign({}, restAtom, {\n      label: 'A',\n      atomList: null,\n      pseudo: null,\n      alias: null,\n      charge: null,\n      isotope: null,\n      explicitValence: -1,\n      radical: 0,\n      ringBondCount: 0,\n      hCount: 0,\n      substitutionCount: 0,\n      unsaturatedAtom: 0,\n      implicitHCount: null,\n      queryProperties: {\n        aromaticity: null,\n        implicitHCount: null,\n        ringMembership: null,\n        ringSize: null,\n        connectivity: null,\n        chirality: null,\n        customQuery,\n      },\n      invRet: 0,\n      exactChangeFlag: 0,\n    });\n  }\n  const pch = matchCharge(restAtom.charge);\n  const charge = pch ? parseInt(pch[1] + pch[3] + pch[2]) : restAtom.charge;\n\n  const conv = Object.assign({}, restAtom, {\n    isotope: restAtom.isotope ? Number(restAtom.isotope) : null,\n    // empty charge value by default treated as zero,\n    // no need to pass and display zero values(0, -0) explicitly\n    charge: restAtom.charge && charge !== 0 ? Number(charge) : null,\n    alias: restAtom.alias || null,\n    exactChangeFlag: +(restAtom.exactChangeFlag ?? false),\n    unsaturatedAtom: +(restAtom.unsaturatedAtom ?? false),\n    queryProperties: {\n      aromaticity,\n      implicitHCount: restAtom.implicitHCount,\n      ringMembership,\n      ringSize,\n      connectivity,\n      chirality,\n      customQuery: customQuery === '' ? null : customQuery,\n    },\n  });\n\n  return conv;\n}\n\nfunction fromAtomList(satom) {\n  return {\n    type: satom.atomList.notList ? 'not-list' : 'list',\n    values: satom.atomList.ids.map((i) => Elements.get(i).label),\n  };\n}\n\nfunction toAtomList(atom) {\n  return {\n    pseudo: null,\n    label: 'L#',\n    atomList: new AtomList({\n      notList: atom.type === 'not-list',\n      ids: atom.values.map((el) => Elements.get(el).number),\n    }),\n  };\n}\n\nexport function fromStereoLabel(stereoLabel) {\n  if (stereoLabel === null) return { type: null };\n  const type = stereoLabel.match(/\\D+/g)[0];\n  const number = +stereoLabel.replace(type, '');\n\n  if (type === StereoLabel.Abs) {\n    return {\n      type: stereoLabel,\n      orNumber: DefaultStereoGroupNumber,\n      andNumber: DefaultStereoGroupNumber,\n    };\n  }\n\n  if (type === StereoLabel.And) {\n    return {\n      type,\n      orNumber: DefaultStereoGroupNumber,\n      andNumber: number,\n    };\n  }\n\n  if (type === StereoLabel.Or) {\n    return {\n      type,\n      orNumber: number,\n      andNumber: DefaultStereoGroupNumber,\n    };\n  }\n}\n\nexport function toStereoLabel(stereoLabel) {\n  switch (stereoLabel.type) {\n    case StereoLabel.And:\n      return `${StereoLabel.And}${stereoLabel.andNumber || 1}`;\n\n    case StereoLabel.Or:\n      return `${StereoLabel.Or}${stereoLabel.orNumber || 1}`;\n\n    default:\n      return stereoLabel.type;\n  }\n}\n\nfunction fromApoint(sap) {\n  return {\n    primary: ((sap || 0) & 1) > 0,\n    secondary: ((sap || 0) & 2) > 0,\n  };\n}\n\nfunction toApoint(ap) {\n  return (ap.primary && 1) + (ap.secondary && 2);\n}\n\nfunction fromRlabel(rg) {\n  const res = [];\n  let rgi;\n  let val;\n  for (rgi = 0; rgi < 32; rgi++) {\n    if (rg & (1 << rgi)) {\n      val = rgi + 1;\n      res.push(val); // push the string\n    }\n  }\n  return res;\n}\n\nfunction toRlabel(values) {\n  let res = 0;\n  values.forEach((val) => {\n    const rgi = val - 1;\n    res |= 1 << rgi;\n  });\n  return res;\n}\n\nexport function fromBond(sbond) {\n  const type = sbond.type;\n  const stereo = sbond.stereo;\n  const isCustomQuery = sbond.customQuery !== null;\n  return {\n    type: isCustomQuery ? '' : fromBondType(type, stereo),\n    topology: sbond.topology,\n    center: sbond.reactingCenterStatus,\n    customQuery: !isCustomQuery ? '' : sbond.customQuery.toString(),\n  };\n}\n\nexport function toBond(bond) {\n  const isCustomQuery = bond.customQuery !== '';\n  return {\n    topology: bond.topology,\n    reactingCenterStatus: bond.center,\n    customQuery: !isCustomQuery ? null : bond.customQuery,\n    ...toBondType(isCustomQuery ? 'any' : bond.type),\n  };\n}\n\nconst bondCaptionMap = {\n  single: {\n    type: Bond.PATTERN.TYPE.SINGLE,\n    stereo: Bond.PATTERN.STEREO.NONE,\n  },\n  up: {\n    type: Bond.PATTERN.TYPE.SINGLE,\n    stereo: Bond.PATTERN.STEREO.UP,\n  },\n  down: {\n    type: Bond.PATTERN.TYPE.SINGLE,\n    stereo: Bond.PATTERN.STEREO.DOWN,\n  },\n  updown: {\n    type: Bond.PATTERN.TYPE.SINGLE,\n    stereo: Bond.PATTERN.STEREO.EITHER,\n  },\n  double: {\n    type: Bond.PATTERN.TYPE.DOUBLE,\n    stereo: Bond.PATTERN.STEREO.NONE,\n  },\n  crossed: {\n    type: Bond.PATTERN.TYPE.DOUBLE,\n    stereo: Bond.PATTERN.STEREO.CIS_TRANS,\n  },\n  triple: {\n    type: Bond.PATTERN.TYPE.TRIPLE,\n    stereo: Bond.PATTERN.STEREO.NONE,\n  },\n  aromatic: {\n    type: Bond.PATTERN.TYPE.AROMATIC,\n    stereo: Bond.PATTERN.STEREO.NONE,\n  },\n  singledouble: {\n    type: Bond.PATTERN.TYPE.SINGLE_OR_DOUBLE,\n    stereo: Bond.PATTERN.STEREO.NONE,\n  },\n  singlearomatic: {\n    type: Bond.PATTERN.TYPE.SINGLE_OR_AROMATIC,\n    stereo: Bond.PATTERN.STEREO.NONE,\n  },\n  doublearomatic: {\n    type: Bond.PATTERN.TYPE.DOUBLE_OR_AROMATIC,\n    stereo: Bond.PATTERN.STEREO.NONE,\n  },\n  any: {\n    type: Bond.PATTERN.TYPE.ANY,\n    stereo: Bond.PATTERN.STEREO.NONE,\n  },\n  hydrogen: {\n    type: Bond.PATTERN.TYPE.HYDROGEN,\n    stereo: Bond.PATTERN.STEREO.NONE,\n  },\n  dative: {\n    type: Bond.PATTERN.TYPE.DATIVE,\n    stereo: Bond.PATTERN.STEREO.NONE,\n  },\n};\n\nexport function toBondType(caption) {\n  return Object.assign({}, bondCaptionMap[caption]);\n}\n\nfunction fromBondType(type, stereo) {\n  for (const caption in bondCaptionMap) {\n    if (\n      bondCaptionMap[caption].type === type &&\n      bondCaptionMap[caption].stereo === stereo\n    )\n      return caption;\n  }\n  return '';\n}\n\nexport function fromSgroup(ssgroup) {\n  const type = ssgroup.type || 'SRU';\n  const { context, fieldName, fieldValue, absolute, attached } = ssgroup.attrs;\n\n  if (absolute === false && attached === false)\n    ssgroup.attrs.radiobuttons = 'Relative';\n  else ssgroup.attrs.radiobuttons = attached ? 'Attached' : 'Absolute';\n\n  if (\n    sdataSchema[context][fieldName] &&\n    sdataSchema[context][fieldName].properties.fieldValue.items\n  )\n    ssgroup.attrs.fieldValue = fieldValue.split('\\n');\n\n  const sDataInitValue =\n    type === 'DAT'\n      ? {\n          context: context || getSdataDefault(sdataCustomSchema, 'context'),\n          fieldName:\n            fieldName || getSdataDefault(sdataCustomSchema, 'fieldName'),\n          fieldValue:\n            fieldValue || getSdataDefault(sdataCustomSchema, 'fieldValue'),\n        }\n      : type === 'SRU' &&\n        ssgroup.attrs.subscript == null &&\n        ssgroup.attrs.connectivity == null\n      ? {\n          subscript: 'nn',\n          connectivity: 'ht',\n        }\n      : {};\n\n  return Object.assign({ type }, ssgroup.attrs, sDataInitValue);\n}\n\nexport function toSgroup(sgroup) {\n  const { type, radiobuttons, ...props } = sgroup;\n  const attrs = { ...props };\n\n  const absolute = 'absolute';\n  const attached = 'attached';\n\n  switch (radiobuttons) {\n    case 'Absolute':\n      attrs[absolute] = true;\n      attrs[attached] = false;\n      break;\n    case 'Attached':\n      attrs[absolute] = false;\n      attrs[attached] = true;\n      break;\n    case 'Relative':\n      attrs[absolute] = false;\n      attrs[attached] = false;\n      break;\n    default:\n      break;\n  }\n\n  if (attrs.fieldName) attrs.fieldName = attrs.fieldName.trim();\n\n  if (attrs.fieldValue) {\n    attrs.fieldValue =\n      typeof attrs.fieldValue === 'string'\n        ? attrs.fieldValue.trim()\n        : attrs.fieldValue;\n  }\n\n  return {\n    type,\n    attrs,\n  };\n}\n","import { Atom, ReBond, ReStruct, isAttachmentBond } from 'ketcher-core';\n\nexport function isFlipDisabled(editor): boolean {\n  const selection: { atoms: number[]; bonds: number[] } = editor.selection();\n  const restruct: ReStruct = editor.render.ctab;\n\n  if (!selection) {\n    return false;\n  }\n\n  const { bonds = [], atoms = [] } = selection;\n  const getBondIdsForAttachmentAtoms = () => {\n    const result: number[] = [];\n    for (const atomId of atoms) {\n      const atomBondIds = Atom.getConnectedBondIds(restruct.molecule, atomId);\n      for (const atomBondId of atomBondIds) {\n        const bond: ReBond | undefined = restruct.bonds.get(atomBondId);\n        if (bond && isAttachmentBond(bond.b, selection)) {\n          result.push(atomBondId);\n        }\n      }\n    }\n    return result;\n  };\n  const getAmountOfAttachmentBonds = (): number => {\n    let amountOfAttachmentBonds = 0;\n    const totalBondIds = new Set([...bonds, ...getBondIdsForAttachmentAtoms()]);\n    for (const bondId of totalBondIds) {\n      const bond: ReBond | undefined = restruct.bonds.get(bondId);\n      if (bond && isAttachmentBond(bond.b, selection)) {\n        amountOfAttachmentBonds++;\n      }\n    }\n\n    return amountOfAttachmentBonds;\n  };\n\n  return getAmountOfAttachmentBonds() > 1;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  RxnArrowMode,\n  SimpleObjectMode,\n  findStereoAtoms,\n  IMAGE_KEY,\n  MULTITAIL_ARROW_TOOL_NAME,\n} from 'ketcher-core';\n\nimport { bond as bondSchema } from '../data/schema/struct-schema';\nimport isHidden from './isHidden';\nimport { toBondType } from '../data/convert/structconv';\nimport { isFlipDisabled } from './flips';\n\nconst toolActions = {\n  hand: {\n    title: 'Hand tool',\n    enabledInViewOnly: true,\n    shortcut: 'Mod+Alt+h',\n    action: { tool: 'hand' },\n    hidden: (options) => isHidden(options, 'hand'),\n  },\n  'select-rectangle': {\n    title: 'Rectangle Selection',\n    enabledInViewOnly: true,\n    shortcut: ['Shift+Tab', 'Escape'],\n    action: { tool: 'select', opts: 'rectangle' },\n    hidden: (options) => isHidden(options, 'select-rectangle'),\n  },\n  'select-lasso': {\n    title: 'Lasso Selection',\n    enabledInViewOnly: true,\n    shortcut: ['Shift+Tab', 'Escape'],\n    action: { tool: 'select', opts: 'lasso' },\n  },\n  'select-fragment': {\n    title: 'Fragment Selection',\n    shortcut: ['Shift+Tab', 'Escape'],\n    action: { tool: 'select', opts: 'fragment' },\n    hidden: (options) => isHidden(options, 'select-fragment'),\n  },\n  erase: {\n    title: 'Erase',\n    shortcut: ['Delete', 'Backspace'],\n    action: { tool: 'eraser', opts: 1 }, // TODO last selector mode is better\n    hidden: (options) => isHidden(options, 'erase'),\n  },\n  chain: {\n    title: 'Chain',\n    action: { tool: 'chain' },\n    hidden: (options) => isHidden(options, 'chain'),\n  },\n  'enhanced-stereo': {\n    shortcut: 'Alt+e',\n    title: 'Stereochemistry',\n    action: { tool: 'enhancedStereo' },\n    disabled: (editor) =>\n      findStereoAtoms(\n        editor?.struct(),\n        Array.from(editor?.struct().atoms.keys()),\n      ).length === 0,\n    hidden: (options) => isHidden(options, 'enhanced-stereo'),\n  },\n  'charge-plus': {\n    shortcut: '+',\n    title: 'Charge Plus',\n    action: { tool: 'charge', opts: 1 },\n    hidden: (options) => isHidden(options, 'charge-plus'),\n  },\n  'charge-minus': {\n    shortcut: '-',\n    title: 'Charge Minus',\n    action: { tool: 'charge', opts: -1 },\n    hidden: (options) => isHidden(options, 'charge-minus'),\n  },\n  'transform-rotate': {\n    title: 'Rotate Tool',\n    action: { tool: 'rotate' },\n    hidden: (options) => isHidden(options, 'transform-rotate'),\n  },\n  'transform-flip-h': {\n    shortcut: 'Alt+h',\n    title: 'Horizontal Flip',\n    action: { tool: 'rotate', opts: 'horizontal' },\n    disabled: isFlipDisabled,\n    hidden: (options) => isHidden(options, 'transform-flip-h'),\n  },\n  'transform-flip-v': {\n    shortcut: 'Alt+v',\n    title: 'Vertical Flip',\n    action: { tool: 'rotate', opts: 'vertical' },\n    disabled: isFlipDisabled,\n    hidden: (options) => isHidden(options, 'transform-flip-v'),\n  },\n  sgroup: {\n    shortcut: 'Mod+g',\n    title: 'S-Group',\n    action: { tool: 'sgroup' },\n    hidden: (options) => isHidden(options, 'sgroup'),\n  },\n  arrows: {\n    hidden: (options) => isHidden(options, 'arrows'),\n  },\n  'reaction-arrow-open-angle': {\n    title: 'Arrow Open Angle Tool',\n    action: { tool: 'reactionarrow', opts: RxnArrowMode.OpenAngle },\n    hidden: (options) => isHidden(options, 'reaction-arrow-open-angle'),\n  },\n  'reaction-arrow-filled-triangle': {\n    title: 'Arrow Filled Triangle Tool',\n    action: { tool: 'reactionarrow', opts: RxnArrowMode.FilledTriangle },\n    hidden: (options) => isHidden(options, 'reaction-arrow-filled-triangle'),\n  },\n  'reaction-arrow-filled-bow': {\n    title: 'Arrow Filled Bow Tool',\n    action: { tool: 'reactionarrow', opts: RxnArrowMode.FilledBow },\n    hidden: (options) => isHidden(options, 'reaction-arrow-filled-bow'),\n  },\n  'reaction-arrow-dashed-open-angle': {\n    title: 'Arrow Dashed Open Angle Tool',\n    action: { tool: 'reactionarrow', opts: RxnArrowMode.DashedOpenAngle },\n    hidden: (options) => isHidden(options, 'reaction-arrow-dashed-open-angle'),\n  },\n  'reaction-arrow-failed': {\n    title: 'Failed Arrow Tool',\n    action: { tool: 'reactionarrow', opts: RxnArrowMode.Failed },\n    hidden: (options) => isHidden(options, 'reaction-arrow-failed'),\n  },\n  'reaction-arrow-retrosynthetic': {\n    title: 'Retrosynthetic Arrow Tool',\n    action: { tool: 'reactionarrow', opts: RxnArrowMode.Retrosynthetic },\n    hidden: (options) => isHidden(options, 'reaction-arrow-retrosynthetic'),\n  },\n  'reaction-arrow-both-ends-filled-triangle': {\n    title: 'Arrow Both Ends Filled Triangle Tool',\n    action: {\n      tool: 'reactionarrow',\n      opts: RxnArrowMode.BothEndsFilledTriangle,\n    },\n    hidden: (options) =>\n      isHidden(options, 'reaction-arrow-both-ends-filled-triangle'),\n  },\n  'reaction-arrow-equilibrium-filled-half-bow': {\n    title: 'Arrow Equilibrium Filled Half Bow Tool',\n    action: {\n      tool: 'reactionarrow',\n      opts: RxnArrowMode.EquilibriumFilledHalfBow,\n    },\n    hidden: (options) =>\n      isHidden(options, 'reaction-arrow-equilibrium-filled-half-bow'),\n  },\n  'reaction-arrow-equilibrium-filled-triangle': {\n    title: 'Arrow Equilibrium Filled Triangle Tool',\n    action: {\n      tool: 'reactionarrow',\n      opts: RxnArrowMode.EquilibriumFilledTriangle,\n    },\n    hidden: (options) =>\n      isHidden(options, 'reaction-arrow-equilibrium-filled-triangle'),\n  },\n  'reaction-arrow-equilibrium-open-angle': {\n    title: 'Arrow Equilibrium Open Angle Tool',\n    action: { tool: 'reactionarrow', opts: RxnArrowMode.EquilibriumOpenAngle },\n    hidden: (options) =>\n      isHidden(options, 'reaction-arrow-equilibrium-open-angle'),\n  },\n  'reaction-arrow-unbalanced-equilibrium-filled-half-bow': {\n    title: 'Arrow Unbalanced Equilibrium Filled Half Bow Tool',\n    action: {\n      tool: 'reactionarrow',\n      opts: RxnArrowMode.UnbalancedEquilibriumFilledHalfBow,\n    },\n    hidden: (options) =>\n      isHidden(\n        options,\n        'reaction-arrow-unbalanced-equilibrium-filled-half-bow',\n      ),\n  },\n  'reaction-arrow-unbalanced-equilibrium-open-half-angle': {\n    title: 'Arrow Unbalanced Equilibrium Open Half Angle Tool',\n    action: {\n      tool: 'reactionarrow',\n      opts: RxnArrowMode.UnbalancedEquilibriumOpenHalfAngle,\n    },\n    hidden: (options) =>\n      isHidden(\n        options,\n        'reaction-arrow-unbalanced-equilibrium-open-half-angle',\n      ),\n  },\n  'reaction-arrow-unbalanced-equilibrium-large-filled-half-bow': {\n    title: 'Arrow Unbalanced Equilibrium Large Filled Half Bow Tool',\n    action: {\n      tool: 'reactionarrow',\n      opts: RxnArrowMode.UnbalancedEquilibriumLargeFilledHalfBow,\n    },\n    hidden: (options) =>\n      isHidden(\n        options,\n        'reaction-arrow-unbalanced-equilibrium-large-filled-half-bow',\n      ),\n  },\n  'reaction-arrow-unbalanced-equilibrium-filled-half-triangle': {\n    title: 'Arrow Unbalanced Equilibrium Filled Half Triangle Tool',\n    action: {\n      tool: 'reactionarrow',\n      opts: RxnArrowMode.UnbalancedEquilibriumFilledHalfTriangle,\n    },\n    hidden: (options) =>\n      isHidden(\n        options,\n        'reaction-arrow-unbalanced-equilibrium-filled-half-triangle',\n      ),\n  },\n  'reaction-arrow-elliptical-arc-arrow-filled-bow': {\n    title: 'Arrow Elliptical Arc Filled Bow Tool',\n    action: {\n      tool: 'reactionarrow',\n      opts: RxnArrowMode.EllipticalArcFilledBow,\n    },\n    hidden: (options) =>\n      isHidden(options, 'reaction-arrow-elliptical-arc-arrow-filled-bow'),\n  },\n  'reaction-arrow-elliptical-arc-arrow-filled-triangle': {\n    title: 'Arrow Elliptical Arc Filled Triangle Tool',\n    action: {\n      tool: 'reactionarrow',\n      opts: RxnArrowMode.EllipticalArcFilledTriangle,\n    },\n    hidden: (options) =>\n      isHidden(options, 'reaction-arrow-elliptical-arc-arrow-filled-triangle'),\n  },\n  'reaction-arrow-elliptical-arc-arrow-open-angle': {\n    title: 'Arrow Elliptical Arc Open Angle Tool',\n    action: {\n      tool: 'reactionarrow',\n      opts: RxnArrowMode.EllipticalArcOpenAngle,\n    },\n    hidden: (options) =>\n      isHidden(options, 'reaction-arrow-elliptical-arc-arrow-open-angle'),\n  },\n  'reaction-arrow-elliptical-arc-arrow-open-half-angle': {\n    title: 'Arrow Elliptical Arc Open Half Angle Tool',\n    action: {\n      tool: 'reactionarrow',\n      opts: RxnArrowMode.EllipticalArcOpenHalfAngle,\n    },\n    hidden: (options) =>\n      isHidden(options, 'reaction-arrow-elliptical-arc-arrow-open-half-angle'),\n  },\n  [MULTITAIL_ARROW_TOOL_NAME]: {\n    title: 'Multi-Tailed Arrow Tool',\n    action: {\n      tool: 'reactionarrow',\n      opts: MULTITAIL_ARROW_TOOL_NAME,\n    },\n    hidden: (options) => isHidden(options, MULTITAIL_ARROW_TOOL_NAME),\n  },\n  'reaction-plus': {\n    title: 'Reaction Plus Tool',\n    action: { tool: 'reactionplus' },\n    hidden: (options) => isHidden(options, 'reaction-plus'),\n  },\n  'reaction-mapping-tools': {\n    hidden: (options) => isHidden(options, 'reaction-mapping-tools'),\n  },\n  'reaction-map': {\n    title: 'Reaction Mapping Tool',\n    action: { tool: 'reactionmap' },\n    hidden: (options) => isHidden(options, 'reaction-map'),\n  },\n  'reaction-unmap': {\n    title: 'Reaction Unmapping Tool',\n    action: { tool: 'reactionunmap' },\n    hidden: (options) => isHidden(options, 'reaction-unmap'),\n  },\n  rgroup: {\n    hidden: (options) => isHidden(options, 'rgroup'),\n  },\n  'rgroup-label': {\n    shortcut: 'Mod+r',\n    title: 'R-Group Label Tool',\n    action: { tool: 'rgroupatom' },\n    hidden: (options) => isHidden(options, 'rgroup-label'),\n  },\n  'rgroup-fragment': {\n    shortcut: ['Mod+Shift+r', 'Mod+r'],\n    title: 'R-Group Fragment Tool',\n    action: { tool: 'rgroupfragment' },\n    hidden: (options) => isHidden(options, 'rgroup-fragment'),\n  },\n  'rgroup-attpoints': {\n    shortcut: 'Mod+r',\n    title: 'Attachment Point Tool',\n    action: { tool: 'apoint' },\n    hidden: (options) => isHidden(options, 'rgroup-attpoints'),\n  },\n  shapes: {\n    hidden: (options) => isHidden(options, 'shapes'),\n  },\n  'shape-ellipse': {\n    title: 'Shape Ellipse',\n    action: { tool: 'simpleobject', opts: SimpleObjectMode.ellipse },\n    hidden: (options) => isHidden(options, 'shape-ellipse'),\n  },\n  'shape-rectangle': {\n    title: 'Shape Rectangle',\n    action: { tool: 'simpleobject', opts: SimpleObjectMode.rectangle },\n    hidden: (options) => isHidden(options, 'shape-rectangle'),\n  },\n  'shape-line': {\n    title: 'Shape Line',\n    action: { tool: 'simpleobject', opts: SimpleObjectMode.line },\n    hidden: (options) => isHidden(options, 'shape-line'),\n  },\n  text: {\n    shortcut: 'Alt+t',\n    title: 'Add text',\n    action: { tool: 'text' },\n    hidden: (options) => isHidden(options, 'text'),\n  },\n  bonds: {\n    hidden: (options) => isHidden(options, 'bonds'),\n  },\n  [IMAGE_KEY]: {\n    title: 'Add Image',\n    action: { tool: IMAGE_KEY },\n    hidden: (options) => isHidden(options, IMAGE_KEY),\n  },\n};\n\nconst bondCuts = {\n  single: '1',\n  double: '2',\n  triple: '3',\n  up: '1',\n  down: '1',\n  updown: '1',\n  crossed: '2',\n  any: '0',\n  aromatic: '4',\n};\n\nconst typeSchema = bondSchema.properties.type;\n\nexport default typeSchema.enum.reduce((res, type, i) => {\n  res[`bond-${type}`] = {\n    title: `${typeSchema.enumNames[i]} Bond`,\n    shortcut: bondCuts[type],\n    action: {\n      tool: 'bond',\n      opts: toBondType(type),\n    },\n    hidden: (options) => isHidden(options, `bond-${type}`),\n  };\n  return res;\n}, toolActions);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  FormatterFactory,\n  Pile,\n  SGroup,\n  identifyStructFormat,\n  Struct,\n  SupportedFormat,\n  notifyRequestCompleted,\n  Editor,\n  KetcherLogger,\n  SettingsManager,\n  MULTITAIL_ARROW_KEY,\n  IMAGE_KEY,\n} from 'ketcher-core';\n\nimport { supportedSGroupTypes } from './constants';\nimport { setAnalyzingFile } from './request';\nimport tools from '../action/tools';\nimport { isNumber } from 'lodash';\n\nexport function onAction(action) {\n  if (action && action.dialog) {\n    return {\n      type: 'MODAL_OPEN',\n      data: { name: action.dialog, prop: action.prop },\n    };\n  }\n  if (action && action.thunk) {\n    return action.thunk;\n  }\n\n  return {\n    type: 'ACTION',\n    action,\n  };\n}\n\nexport function loadStruct(struct) {\n  return (_dispatch, getState) => {\n    const editor = getState().editor;\n    editor.struct(struct);\n  };\n}\n\nexport function parseStruct(\n  struct: string | Struct,\n  server,\n  options?,\n): Promise<Struct> {\n  if (typeof struct === 'string') {\n    options = options || {};\n    const {\n      /* eslint-disable @typescript-eslint/no-unused-vars */\n      rescale,\n      fragment,\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      ...formatterOptions\n    } = options;\n\n    const format = identifyStructFormat(struct);\n    if (format === SupportedFormat.cdx) {\n      struct = `base64::${struct.replace(/\\s/g, '')}`;\n    }\n    const factory = new FormatterFactory(server);\n    const queryPropertiesAreUsed = format === 'mol' && struct.includes('MRV'); // temporary check if query properties are used\n    const service = factory.create(\n      format,\n      formatterOptions,\n      queryPropertiesAreUsed,\n    );\n    return service.getStructureFromStringAsync(struct);\n  } else {\n    return Promise.resolve(struct);\n  }\n}\n\n// Removing from what should be saved - structure, which was added to paste tool,\n// but not yet rendered on canvas\nexport function removeStructAction(): {\n  type: string;\n  action?: Record<string, unknown>;\n} {\n  const savedSelectedTool = SettingsManager.selectionTool;\n\n  return onAction(savedSelectedTool || tools['select-rectangle'].action);\n}\n\nexport const getSelectionFromStruct = (struct) => {\n  const selection = {};\n  [\n    'atoms',\n    'bonds',\n    'enhancedFlags',\n    'rxnPluses',\n    'rxnArrows',\n    'texts',\n    'rgroupAttachmentPoints',\n    'simpleObjects',\n    IMAGE_KEY,\n    MULTITAIL_ARROW_KEY,\n  ].forEach((selectionEntity) => {\n    if (struct && struct[selectionEntity]) {\n      const selected: number[] = [];\n      struct[selectionEntity].forEach((value, key) => {\n        if (\n          typeof value.getInitiallySelected === 'function' &&\n          value.getInitiallySelected()\n        ) {\n          selected.push(key);\n        }\n      });\n      selection[selectionEntity] = selected;\n    }\n  });\n  return selection;\n};\n\nexport function load(struct: Struct, options?) {\n  return async (dispatch, getState) => {\n    const state = getState();\n    const editor = state.editor as Editor;\n    const server = state.server;\n    const serverSettings = state.options.getServerSettings();\n    const errorHandler = editor.errorHandler;\n    options = options || {};\n    let { isPaste, method, ...otherOptions } = options;\n    otherOptions = {\n      ...serverSettings,\n      ...otherOptions,\n    };\n\n    dispatch(setAnalyzingFile(true));\n\n    try {\n      const parsedStruct = await parseStruct(struct, server, otherOptions);\n      const { fragment } = otherOptions;\n      const hasUnsupportedGroups = parsedStruct.sgroups.some(\n        (sGroup) => !supportedSGroupTypes[sGroup.type],\n      );\n      const hasMoleculeToMonomerConnections = parsedStruct.bonds.find(\n        (_, bond) => {\n          return (\n            isNumber(bond.beginSuperatomAttachmentPointNumber) ||\n            isNumber(bond.endSuperatomAttachmentPointNumber)\n          );\n        },\n      );\n\n      if (hasUnsupportedGroups) {\n        await editor.event.confirm.dispatch();\n        parsedStruct.sgroups = parsedStruct.sgroups.filter(\n          (_key, sGroup) => supportedSGroupTypes[sGroup.type],\n        );\n      }\n\n      // scaling works bad with molecule-to-monomer connections\n      if (!hasMoleculeToMonomerConnections) {\n        parsedStruct.rescale(); // TODO: move out parsing?\n      }\n\n      if (editor.struct().atoms.size) {\n        // NB: reset id\n        const oldStruct = editor.struct().clone();\n        parsedStruct.sgroups.forEach((sg, sgId) => {\n          const sgroup = oldStruct.sgroups.get(sgId);\n          const offset = sgroup ? SGroup.getOffset(sgroup) : null;\n          const atomSet = new Pile(sg.atoms);\n          const crossBonds = SGroup.getCrossBonds(parsedStruct, atomSet);\n          SGroup.bracketPos(sg, parsedStruct, crossBonds);\n          if (offset) sg.updateOffset(offset);\n        });\n      }\n\n      parsedStruct.findConnectedComponents();\n      parsedStruct.setImplicitHydrogen();\n      parsedStruct.setStereoLabelsToAtoms();\n      parsedStruct.markFragments();\n\n      if (fragment) {\n        if (parsedStruct.isBlank()) {\n          dispatch(removeStructAction());\n        } else {\n          dispatch(onAction({ tool: 'paste', opts: parsedStruct }));\n        }\n      } else {\n        editor.struct(parsedStruct, method === 'layout');\n      }\n\n      editor.zoomAccordingContent(parsedStruct);\n\n      const isIndigoFunctionCalled = !!method;\n      if (!isPaste && !isIndigoFunctionCalled) {\n        editor.centerStruct();\n      }\n      if (!fragment) {\n        // do not update selection if fragment is added\n        editor.selection(getSelectionFromStruct(editor.struct()));\n      }\n      editor.struct().disableInitiallySelected();\n      dispatch(setAnalyzingFile(false));\n      dispatch({ type: 'MODAL_CLOSE' });\n    } catch (e: any) {\n      KetcherLogger.error('shared.ts::load', e);\n      dispatch(setAnalyzingFile(false));\n      e && errorHandler && errorHandler(e.message);\n    } finally {\n      notifyRequestCompleted();\n    }\n  };\n}\n\nexport function openInfoModal(command: 'Paste' | 'Copy' | 'Cut'): {\n  type: 'MODAL_OPEN';\n  data: { name: 'info-modal'; prop: { message: 'Paste' | 'Copy' | 'Cut' } };\n} {\n  return {\n    type: 'MODAL_OPEN',\n    data: { name: 'info-modal', prop: { message: command } },\n  };\n}\n\nexport function openInfoModalWithCustomMessage(message: string): {\n  type: 'MODAL_OPEN';\n  data: { name: 'info-modal'; prop: { customText: string } };\n} {\n  return {\n    type: 'MODAL_OPEN',\n    data: { name: 'info-modal', prop: { customText: message } },\n  };\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { ChemicalMimeType, KetcherLogger, KetSerializer } from 'ketcher-core';\nimport { appUpdate, setStruct } from '../options';\nimport { omit, without } from 'lodash/fp';\n\nimport { checkErrors } from '../modal/form';\nimport { indigoVerification } from '../request';\nimport { load } from '../shared';\n\nexport function checkServer() {\n  return (dispatch, getState) => {\n    const { editor, server } = getState();\n\n    server.then(\n      (res) =>\n        dispatch(\n          appUpdate({\n            indigoVersion: res?.indigoVersion,\n            imagoVersions: res?.imagoVersions,\n            server: res?.isAvailable,\n          }),\n        ),\n      (e) => editor.errorHandler(e),\n    );\n  };\n}\n\nexport function recognize(file, version) {\n  return (dispatch, getState) => {\n    const rec = getState().server.recognize;\n    const editor = getState().editor;\n\n    const process = rec(file, version).then(\n      (res) => {\n        dispatch(setStruct(res.struct));\n      },\n      (e) => {\n        dispatch(setStruct(null));\n        editor.errorHandler(e);\n      },\n    );\n    dispatch(setStruct(process));\n  };\n}\n\nfunction ketcherCheck(struct, checkParams) {\n  const errors = {};\n\n  if (checkParams.includes('chiral_flag')) {\n    const isAbs = Array.from(struct.frags.values()).some((fr) =>\n      fr ? fr.enhancedStereoFlag === 'abs' : false,\n    );\n    if (isAbs) errors.chiral_flag = 'Chiral flag is present on the canvas';\n  }\n\n  if (checkParams.includes('valence')) {\n    let badVal = 0;\n    struct.atoms.forEach((atom) => atom.badConn && badVal++);\n    if (badVal > 0)\n      errors.valence = `Structure contains ${badVal} atom${\n        badVal !== 1 ? 's' : ''\n      } with bad valence`;\n  }\n\n  return errors;\n}\n\nexport function check(optsTypes) {\n  return (dispatch, getState) => {\n    const { editor, server } = getState();\n    const ketcherErrors = ketcherCheck(editor.struct(), optsTypes);\n\n    const options = getState().options.getServerSettings();\n    options.data = { types: without(['valence', 'chiral_flag'], optsTypes) };\n\n    return serverCall(editor, server, 'check', options)\n      .then((res) => {\n        res = Object.assign(res, ketcherErrors); // merge Indigo check with Ketcher check\n        dispatch(checkErrors(res));\n      })\n      .catch((e) => {\n        KetcherLogger.error('index.js::check', e);\n        editor.errorHandler(e);\n      });\n  };\n}\n\nexport function automap(res) {\n  return serverTransform('automap', res);\n}\n\nexport function analyse() {\n  return (dispatch, getState) => {\n    // reset values to initial state\n    dispatch({\n      type: 'ANALYSE_LOADING',\n    });\n    const { editor, server, options } = getState();\n    const serverSettings = options.getServerSettings();\n    serverSettings.data = {\n      properties: [\n        'molecular-weight',\n        'most-abundant-mass',\n        'monoisotopic-mass',\n        'gross',\n        'mass-composition',\n      ],\n    };\n\n    return serverCall(editor, server, 'calculate', serverSettings)\n      .then((values) =>\n        dispatch({\n          type: 'CHANGE_ANALYSE',\n          data: { values },\n        }),\n      )\n      .catch((e) => {\n        KetcherLogger.error('index.js::analyse', e);\n        editor.errorHandler(e);\n      });\n  };\n}\n\nexport function serverTransform(method, data, struct) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const opts = state.options.getServerSettings();\n\n    opts.data = data;\n    dispatch(indigoVerification(true));\n\n    serverCall(state.editor, state.server, method, opts, struct)\n      .then((res) => {\n        const loadedStruct = new KetSerializer().deserialize(res.struct);\n\n        return dispatch(\n          load(loadedStruct, {\n            rescale: method === 'layout',\n            reactionRelayout: method === 'clean',\n            method,\n          }),\n        );\n      })\n      .catch((e) => {\n        KetcherLogger.error('index.js::serverTransform', e);\n        state.editor.errorHandler(e);\n      })\n      .finally(() => {\n        dispatch(indigoVerification(false));\n      });\n    // TODO: notification\n  };\n}\n\n/*\n  Indigo doesn't perform layout for enhancedFlags and just preserves their positions\n  That results in structure being aligned and moved, but flags left as is.\n*/\nfunction resetStereoFlagsPosition(struct) {\n  struct.frags.forEach((fragment) => (fragment.stereoFlagPosition = undefined));\n}\n\n// TODO: serverCall function should not be exported\nexport function serverCall(editor, server, method, options, struct) {\n  const selection = editor.selection();\n  let selectedAtoms = [];\n  let selectedBonds = [];\n  const aidMap = new Map();\n  const bidMap = new Map();\n  const currentStruct = (struct || editor.struct()).clone(\n    null,\n    null,\n    false,\n    aidMap,\n    null,\n    null,\n    null,\n    null,\n    null,\n    bidMap,\n  );\n  const expSel = editor.explicitSelected();\n  if (selection) {\n    selectedAtoms = (selection.atoms ? selection.atoms : expSel.atoms).map(\n      (aid) => aidMap.get(aid),\n    );\n    selectedBonds = (selection.bonds ? selection.bonds : expSel.bonds).map(\n      (bid) => bidMap.get(bid),\n    );\n  }\n  if (method === 'layout') {\n    resetStereoFlagsPosition(currentStruct);\n  }\n\n  const ketSerializer = new KetSerializer();\n  const serializedStruct = ketSerializer.serialize(currentStruct, undefined, {\n    ...selection,\n    atoms: selectedAtoms,\n    bonds: selectedBonds,\n  });\n\n  return server.then(() =>\n    server[method](\n      Object.assign(\n        {\n          struct: serializedStruct,\n        },\n        method !== 'calculate' && method !== 'check'\n          ? {\n              output_format: ChemicalMimeType.KET,\n            }\n          : null,\n        selectedAtoms && selectedAtoms.length > 0\n          ? {\n              selected: selectedAtoms,\n            }\n          : null,\n        options.data,\n      ),\n      omit('data', options),\n    ),\n  );\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport isHidden from './isHidden';\nimport { serverTransform } from '../state/server';\n\nconst config = {\n  layout: {\n    shortcut: 'Mod+l',\n    title: 'Layout',\n    action: {\n      thunk: serverTransform('layout'),\n    },\n    disabled: (editor, server, options) => !options.app.server,\n    hidden: (options) => isHidden(options, 'layout'),\n  },\n  clean: {\n    shortcut: 'Mod+Shift+l',\n    title: 'Clean Up',\n    action: {\n      thunk: serverTransform('clean'),\n    },\n    disabled: (editor, server, options) => !options.app.server,\n    hidden: (options) => isHidden(options, 'clean'),\n  },\n  arom: {\n    shortcut: 'Alt+a',\n    title: 'Aromatize',\n    action: {\n      thunk: serverTransform('aromatize'),\n    },\n    disabled: (editor, server, options) => !options.app.server,\n    hidden: (options) => isHidden(options, 'arom'),\n  },\n  dearom: {\n    shortcut: 'Ctrl+Alt+a',\n    title: 'Dearomatize',\n    action: {\n      thunk: serverTransform('dearomatize'),\n    },\n    disabled: (editor, server, options) => !options.app.server,\n    hidden: (options) => isHidden(options, 'dearom'),\n  },\n  cip: {\n    shortcut: 'Mod+p',\n    title: 'Calculate CIP',\n    action: {\n      thunk: serverTransform('calculateCip'),\n    },\n    disabled: (editor, server, options) => !options.app.server,\n    hidden: (options) => isHidden(options, 'cip'),\n  },\n  check: {\n    shortcut: 'Alt+s',\n    enabledInViewOnly: true,\n    title: 'Check Structure',\n    action: { dialog: 'check' },\n    disabled: (editor, server, options) => !options.app.server,\n    hidden: (options) => isHidden(options, 'check'),\n  },\n  analyse: {\n    shortcut: 'Alt+c',\n    enabledInViewOnly: true,\n    title: 'Calculated Values',\n    action: { dialog: 'analyse' },\n    disabled: (editor, server, options) => !options.app.server,\n    hidden: (options) => isHidden(options, 'analyse'),\n  },\n  recognize: {\n    title: 'Recognize Molecule',\n    action: { dialog: 'recognize' },\n    disabled: (editor, server, options) =>\n      // TODO: provide the list of disabled functions as array\n      !options.app.server || !options.app.imagoVersions?.length > 0,\n    hidden: (options) => isHidden(options, 'recognize'),\n  },\n  miew: {\n    title: '3D Viewer',\n    enabledInViewOnly: true,\n    action: { dialog: 'miew' },\n    hidden: (options) => isHidden(options, 'miew'),\n  },\n  'explicit-hydrogens': {\n    title: 'Add/Remove explicit hydrogens',\n    action: {\n      thunk: serverTransform('toggleExplicitHydrogens'),\n    },\n    disabled: (editor, server, options) => !options.app.server,\n    hidden: (options) => isHidden(options, 'explicit-hydrogens'),\n  },\n};\n\nexport default config;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { MolSerializer } from 'ketcher-core';\n\nconst molSerializer = new MolSerializer();\n\nexport default [\n  `Benzene\n  Ketcher  5112215552D 1   1.00000     0.00000     0\n\n  6  6  0  0  0  0            999 V2000\n    0.6548    2.2452    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    2.0813    2.2456    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    1.3694    2.6575    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    2.0813    1.4204    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    0.6548    1.4167    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    1.3712    1.0086    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n  3  1  2  0     0  0\n  1  5  1  0     0  0\n  5  6  2  0     0  0\n  6  4  1  0     0  0\n  4  2  2  0     0  0\n  2  3  1  0     0  0\nM  END`,\n\n  `Cyclopentadiene\n  Ketcher  5112215552D 1   1.00000     0.00000     0\n\n  5  5  0  0  0  0            999 V2000\n    3.8091    8.2444    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    4.3091    6.7055    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    4.6181    7.6510    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    3.3091    6.7055    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    3.0000    7.6510    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n  1  5  1  0     0  0\n  5  4  2  0     0  0\n  4  2  1  0     0  0\n  2  3  2  0     0  0\n  3  1  1  0     0  0\nM  END`,\n\n  `Cyclohexane\n  Ketcher  5112215552D 1   1.00000     0.00000     0\n\n  6  6  0  0  0  0            999 V2000\n    2.5500    3.6722    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    2.5500    2.6722    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    3.4160    2.1722    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    4.2820    2.6722    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    4.2820    3.6722    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    3.4160    4.1722    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n  6  1  1  0     0  0\n  1  2  1  0     0  0\n  2  3  1  0     0  0\n  3  4  1  0     0  0\n  4  5  1  0     0  0\n  5  6  1  0     0  0\nM  END`,\n\n  `Cyclopentane\n  Ketcher 11161218352D 1   1.00000     0.00000     0\n\n  5  5  0     0  0            999 V2000\n    0.8090    1.5389    0.0000 C   0  0  0  0  0  0        0  0  0\n    1.6180    0.9511    0.0000 C   0  0  0  0  0  0        0  0  0\n    1.3090    0.0000    0.0000 C   0  0  0  0  0  0        0  0  0\n    0.3090    0.0000    0.0000 C   0  0  0  0  0  0        0  0  0\n    0.0000    0.9511    0.0000 C   0  0  0  0  0  0        0  0  0\n  1  5  1  0     0  0\n  5  4  1  0     0  0\n  4  3  1  0     0  0\n  3  2  1  0     0  0\n  2  1  1  0     0  0\nM  END`,\n\n  `Cyclopropane\n  Ketcher  5112215552D 1   1.00000     0.00000     0\n\n  3  3  0  0  0  0            999 V2000\n    2.6123    1.5663    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    3.6098    1.5663    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    3.1111    2.4280    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n  1  2  1  0     0  0\n  2  3  1  0     0  0\n  3  1  1  0     0  0\nM  END`,\n\n  `Cyclobutane\n  Ketcher  5112215552D 1   1.00000     0.00000     0\n\n  4  4  0  0  0  0            999 V2000\n    3.4956    1.8862    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    3.4919    2.8804    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    2.4846    1.8991    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    2.4821    2.8804    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n  1  2  1  0     0  0\n  2  4  1  0     0  0\n  4  3  1  0     0  0\n  3  1  1  0     0  0\nM  END`,\n\n  `Cycloheptane\n  Ketcher  5112215552D 1   1.00000     0.00000     0\n\n  7  7  0  0  0  0            999 V2000\n   21.4111    6.3389    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n   22.1938    6.9555    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n   23.1653    6.7333    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n   23.5987    5.8389    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n   21.4166    5.3333    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n   23.1660    4.9333    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n   22.1938    4.7111    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n  2  1  1  0     0  0\n  1  5  1  0     0  0\n  5  7  1  0     0  0\n  7  6  1  0     0  0\n  6  4  1  0     0  0\n  4  3  1  0     0  0\n  3  2  1  0     0  0\nM  END`,\n\n  `Cyclooctane\n  Ketcher  5112215552D 1   1.00000     0.00000     0\n\n  8  8  0  0  0  0            999 V2000\n    2.9268    2.2122    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    2.9270    3.2099    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    3.6288    3.9118    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    3.6290    1.5102    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    4.6266    1.5102    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    5.3286    2.2122    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    5.3285    3.2099    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n    4.6266    3.9119    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n  2  1  1  0     0  0\n  1  4  1  0     0  0\n  4  5  1  0     0  0\n  5  6  1  0     0  0\n  6  7  1  0     0  0\n  7  8  1  0     0  0\n  8  3  1  0     0  0\n  3  2  1  0     0  0\nM  END`,\n].map((structStr) => molSerializer.deserialize(structStr));\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport templates from '../data/templates';\nimport isHidden from './isHidden';\n\nconst templateLib = {\n  'template-lib': {\n    shortcut: 'Shift+t',\n    title: 'Structure Library',\n    action: { dialog: 'templates', prop: { tab: null } },\n    selected: (editor) => editor._tool.mode === 'classic',\n    disabled: (editor, server, options) => !options.app.templates,\n    hidden: (options) => isHidden(options, 'template-lib'),\n  },\n};\n\nexport default templates.reduce((res, struct, i) => {\n  res[`template-${i}`] = {\n    title: `${struct.name}`,\n    shortcut: 't',\n    action: {\n      tool: 'template',\n      opts: { struct },\n    },\n  };\n  return res;\n}, templateLib);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { findIndex, findLastIndex } from 'lodash/fp';\nimport isHidden from './isHidden';\n\nexport const zoomList = [\n  0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.2, 1.3, 1.4, 1.5, 1.7, 2,\n  2.5, 3, 3.5, 4,\n];\n\nexport default {\n  zoom: {\n    shortcut: ['Mod+0'],\n    enabledInViewOnly: true,\n    selected: (editor) => editor.zoom(),\n    action: (editor) => {\n      editor.zoom(1);\n      editor.tool()?.mousemove(editor.lastEvent);\n    },\n    hidden: (options) => isHidden(options, 'zoom'),\n  },\n  'zoom-out': {\n    shortcut: ['Ctrl+_', 'Ctrl+-'],\n    title: 'Zoom Out',\n    enabledInViewOnly: true,\n    disabled: (editor) => editor.zoom() <= zoomList[0], // unsave\n    action: (event) => (editor) => {\n      const zoom = editor.zoom();\n      const i = findLastIndex((z) => z <= zoom, zoomList);\n      editor.zoom(zoomList[zoomList[i] === zoom && i > 0 ? i - 1 : i], event);\n      editor.tool()?.mousemove(editor.lastEvent);\n    },\n    hidden: (options) => isHidden(options, 'zoom-out'),\n  },\n  'zoom-in': {\n    shortcut: ['Ctrl+=', 'Ctrl++'],\n    title: 'Zoom In',\n    enabledInViewOnly: true,\n    disabled: (editor) => zoomList[zoomList.length - 1] <= editor.zoom(),\n    action: (event) => (editor) => {\n      const zoom = editor.zoom();\n      const i = findIndex((z) => z >= zoom, zoomList);\n      editor.zoom(\n        zoomList[zoomList[i] === zoom && i < zoomList.length - 1 ? i + 1 : i],\n        event,\n      );\n      editor.tool()?.mousemove(editor.lastEvent);\n    },\n    hidden: (options) => isHidden(options, 'zoom-in'),\n  },\n  'zoom-list': {\n    enabledInViewOnly: true,\n    hidden: (options) => isHidden(options, 'zoom-list'),\n  },\n};\n","/****************************************************************************\n * Copyright 2022 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport isHidden from './isHidden';\n\nconst openHelpLink = () =>\n  window\n    .open(\n      `https://github.com/epam/ketcher/blob/${process.env.HELP_LINK}/documentation/help.md#ketcher-overview`,\n    )\n    ?.focus();\n\nexport default {\n  help: {\n    enabledInViewOnly: true,\n    shortcut: ['?', '&', 'Shift+/'],\n    action: () => openHelpLink(),\n    hidden: (options) => isHidden(options, 'help'),\n  },\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport const ketcherInitEventName = (ketcherId?: string) =>\n  ketcherId ? `ketcher-init-${ketcherId}` : 'ketcher-init';\n\nexport const MODES = {\n  FG: 'fg',\n};\n\nexport const STRUCT_TYPE = {\n  atoms: 'atoms',\n  bonds: 'bonds',\n};\n\nexport const KETCHER_ROOT_NODE_CLASS_NAME = 'Ketcher-root';\nexport const KETCHER_ROOT_NODE_CSS_SELECTOR = `.${KETCHER_ROOT_NODE_CLASS_NAME}`;\n\nexport const EditorClassName = 'Ketcher-polymer-editor-root';\nexport const KETCHER_MACROMOLECULES_ROOT_NODE_SELECTOR = `.${EditorClassName}`;\nexport const STRUCT_SERVICE_NO_RENDER_INITIALIZED_EVENT =\n  'struct-service-no-render-initialized';\nexport const STRUCT_SERVICE_INITIALIZED_EVENT = 'struct-service-initialized';\nexport const ACS_STYLE_DEFAULT_SETTINGS = {\n  atomColoring: false,\n  font: '30px Arial',\n  fontsz: 10,\n  fontszUnit: 'pt',\n  fontszsub: 10,\n  fontszsubUnit: 'pt',\n  reactionComponentMarginSize: 1.6,\n  reactionComponentMarginSizeUnit: 'pt',\n  imageResolution: '600',\n  bondLength: 14.4,\n  bondLengthUnit: 'pt',\n  bondSpacing: 18,\n  bondThickness: 0.6,\n  bondThicknessUnit: 'pt',\n  stereoBondWidth: 2,\n  stereoBondWidthUnit: 'pt',\n  hashSpacing: 2.5,\n  hashSpacingUnit: 'pt',\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport isHidden from './isHidden';\nimport { MODES } from 'src/constants';\n\nconst functionalGroupsLib = {\n  'functional-groups': {\n    shortcut: 'Shift+f',\n    // TODO Update HELP about current tools\n    title: 'Functional Groups',\n    action: { dialog: 'templates', prop: { tab: 1 } },\n    selected: (editor) => editor._tool.mode === MODES.FG,\n    disabled: (_, __, options) => {\n      return !options.app.functionalGroups;\n    },\n    hidden: (options) => isHidden(options, 'functional-groups'),\n  },\n};\n\nexport default functionalGroupsLib;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport isHidden from './isHidden';\nimport { KETCHER_ROOT_NODE_CSS_SELECTOR } from 'src/constants';\n\nconst requestFullscreen = (element: HTMLElement) => {\n  (element.requestFullscreen && element.requestFullscreen()) ||\n    (element.msRequestFullscreen && element.msRequestFullscreen()) ||\n    (element.mozRequestFullScreen && element.mozRequestFullScreen()) ||\n    (element.webkitRequestFullscreen && element.webkitRequestFullscreen());\n};\n\nconst exitFullscreen = () => {\n  (document.exitFullscreen && document.exitFullscreen()) ||\n    (document.msExitFullscreen && document.msExitFullscreen()) ||\n    (document.mozCancelFullScreen && document.mozCancelFullScreen()) ||\n    (document.webkitExitFullscreen && document.webkitExitFullscreen());\n};\n\nconst getIfFullScreen = () => {\n  return !!(\n    document.fullscreenElement ||\n    document.mozFullScreenElement ||\n    document.webkitFullscreenElement ||\n    document.msFullscreenElement\n  );\n};\n\nconst toggleFullscreen = () => {\n  const fullscreenElement: HTMLElement =\n    document.querySelector(KETCHER_ROOT_NODE_CSS_SELECTOR) ||\n    document.documentElement;\n  getIfFullScreen() ? exitFullscreen() : requestFullscreen(fullscreenElement);\n};\n\nexport default {\n  fullscreen: {\n    title: 'Fullscreen mode',\n    enabledInViewOnly: true,\n    action: () => toggleFullscreen(),\n    hidden: (options) => isHidden(options, 'fullscreen'),\n  },\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport atoms from './atoms';\nimport copyAs from './copyAs';\nimport copyImageToClipboard from './copyImageToClipboard';\nimport debug from './debug';\nimport { exec } from '../component/cliparea/cliparea';\nimport isHidden from './isHidden';\nimport server from './server';\nimport templates from './templates';\nimport tools from './tools';\nimport zoom from './zoom';\nimport help from './help';\nimport functionalGroups from './functionalGroups';\nimport fullscreen from './fullscreen';\nimport { removeStructAction, openInfoModal } from '../state/shared';\nimport { GetActionState, Tools, UiAction } from './action.types';\nimport Editor from '../../editor/Editor';\n\nexport * from './action.types';\n\nconst disableIfViewOnly = (editor: Editor): boolean =>\n  !!editor.render.options.viewOnlyMode;\n\nconst updateConfigItem = (item: UiAction): UiAction => {\n  if (typeof item.disabled === 'boolean' || item.enabledInViewOnly === true) {\n    return item;\n  } else if (typeof item.disabled === 'function') {\n    const originalDisabled = item.disabled as GetActionState;\n    return {\n      ...item,\n      disabled: (...props) =>\n        disableIfViewOnly(props[0]) || originalDisabled(...props),\n    };\n  } else {\n    return {\n      ...item,\n      disabled: disableIfViewOnly,\n    };\n  }\n};\n\nconst config: Record<string, UiAction> = {\n  clear: {\n    shortcut: ['Mod+Delete', 'Mod+Backspace'],\n    title: 'Clear Canvas',\n    action: {\n      thunk: (dispatch, getState) => {\n        const editor = getState().editor;\n\n        dispatch(removeStructAction());\n\n        if (!editor.struct().isBlank()) editor.struct(null);\n      },\n    },\n    hidden: (options) => isHidden(options, 'clear'),\n  },\n  open: {\n    shortcut: 'Mod+o',\n    title: 'Openโฆ',\n    enabledInViewOnly: true,\n    action: { dialog: 'open' },\n    hidden: (options) => isHidden(options, 'open'),\n  },\n  save: {\n    shortcut: 'Mod+s',\n    title: 'Save Asโฆ',\n    enabledInViewOnly: true,\n    action: { dialog: 'save' },\n    hidden: (options) => isHidden(options, 'save'),\n  },\n  'atom-props': {\n    title: 'Atom Properties',\n    action: { dialog: 'atomProps' },\n    hidden: (options) => isHidden(options, 'atom-props'),\n  },\n  'bond-props': {\n    title: 'Bond Properties',\n    action: { dialog: 'bondProps' },\n    hidden: (options) => isHidden(options, 'bond-props'),\n  },\n  undo: {\n    shortcut: 'Mod+z',\n    title: 'Undo',\n    action: (editor) => {\n      editor.undo();\n    },\n    disabled: (editor) => editor.historySize().undo === 0,\n    hidden: (options) => isHidden(options, 'undo'),\n  },\n  redo: {\n    shortcut: ['Mod+Shift+z', 'Mod+y'],\n    title: 'Redo',\n    action: (editor) => {\n      editor.redo();\n    },\n    disabled: (editor) => editor.historySize().redo === 0,\n    hidden: (options) => isHidden(options, 'redo'),\n  },\n  cut: {\n    shortcut: 'Mod+x',\n    title: 'Cut',\n    action: {\n      thunk: (dispatch, _) => {\n        const isCutSupported = exec('cut');\n\n        if (!isCutSupported) {\n          dispatch(openInfoModal('Cut'));\n        }\n      },\n    },\n    disabled: (editor) => !hasSelection(editor),\n    hidden: (options) => isHidden(options, 'cut'),\n  },\n  // This is some dirty trick for `ClipboardControls.tsx` component\n  copies: {\n    enabledInViewOnly: true,\n    disabled: (editor) => !hasSelection(editor),\n    hidden: (options) => isHidden(options, 'copies'),\n  } as UiAction,\n  copy: {\n    shortcut: 'Mod+c',\n    enabledInViewOnly: true,\n    title: 'Copy',\n    action: {\n      thunk: (dispatch, _) => {\n        const isCopySupported = exec('copy');\n\n        if (!isCopySupported) {\n          dispatch(openInfoModal('Copy'));\n        }\n      },\n    },\n    disabled: (editor) => !hasSelection(editor),\n    hidden: (options) => isHidden(options, 'copy'),\n  },\n  'copy-image': {\n    shortcut: 'Mod+Shift+f',\n    enabledInViewOnly: true,\n    title: 'Copy Image',\n    action: () => {\n      copyImageToClipboard();\n    },\n    disabled: (editor) => !hasSelection(editor),\n    hidden: (options) => isHidden(options, 'copy-image'),\n  },\n  'copy-mol': {\n    shortcut: 'Mod+m',\n    enabledInViewOnly: true,\n    title: 'Copy as MOL',\n    action: () => {\n      copyAs('mol');\n    },\n    disabled: (editor) => !hasSelection(editor),\n    hidden: (options) => isHidden(options, 'copy-mol'),\n  },\n  'copy-ket': {\n    shortcut: 'Mod+Shift+k',\n    enabledInViewOnly: true,\n    title: 'Copy as KET',\n    action: () => {\n      copyAs('ket');\n    },\n    disabled: (editor) => !hasSelection(editor),\n    hidden: (options) => isHidden(options, 'copy-ket'),\n  },\n  paste: {\n    shortcut: 'Mod+v',\n    title: 'Paste',\n    action: {\n      thunk: (dispatch, _) => {\n        const isPasteSupported = exec('paste');\n\n        if (!isPasteSupported) {\n          dispatch(openInfoModal('Paste'));\n        }\n      },\n    },\n    selected: ({ actions }) =>\n      actions && // TMP\n      actions.active &&\n      actions.active.tool === 'paste',\n    hidden: (options) => isHidden(options, 'paste'),\n  },\n  settings: {\n    title: 'Settings',\n    action: { dialog: 'settings' },\n    hidden: (options) => isHidden(options, 'settings'),\n  },\n  about: {\n    title: 'About',\n    enabledInViewOnly: true,\n    action: { dialog: 'about' },\n    hidden: (options) => isHidden(options, 'about'),\n  },\n  'reaction-automap': {\n    title: 'Reaction Auto-Mapping Tool',\n    action: { dialog: 'automap' },\n    hidden: (options) => isHidden(options, 'reaction-automap'),\n    disabled: (editor, _server, options) =>\n      !options.app.server || !editor.struct().hasRxnArrow(),\n  },\n  'period-table': {\n    title: 'Periodic Table',\n    action: { dialog: 'period-table' },\n    hidden: (options) => isHidden(options, 'period-table'),\n  },\n  'extended-table': {\n    title: 'Extended Table',\n    action: { dialog: 'extended-table' },\n    hidden: (options) => isHidden(options, 'extended-table'),\n  },\n  'select-all': {\n    title: 'Select All',\n    enabledInViewOnly: true,\n    shortcut: 'Mod+a',\n    action: {\n      thunk: (dispatch, getState) => {\n        const selectionTool = getState().toolbar.visibleTools.select;\n        dispatch({ type: 'ACTION', action: tools[selectionTool].action });\n        getState().editor.selection('all');\n      },\n    },\n    hidden: (options) => isHidden(options, 'select-all'),\n  },\n  'deselect-all': {\n    title: 'Deselect All',\n    enabledInViewOnly: true,\n    shortcut: 'Mod+Shift+a',\n    action: (editor) => {\n      editor.selection(null);\n    },\n    hidden: (options) => isHidden(options, 'deselect-all'),\n  },\n  'select-descriptors': {\n    title: 'Select descriptors',\n    shortcut: 'Mod+d',\n    enabledInViewOnly: true,\n    action: {\n      thunk: (dispatch, getState) => {\n        const selectionTool = getState().toolbar.visibleTools.select;\n        const editor = getState().editor;\n        editor.alignDescriptors();\n        editor.selection('descriptors');\n        dispatch({ type: 'ACTION', action: tools[selectionTool].action });\n      },\n    },\n    hidden: (options) => isHidden(options, 'select-descriptors'),\n  },\n  'any-atom': {\n    title: 'Any atom',\n    action: {\n      tool: 'atom',\n      opts: {\n        label: 'A',\n        pseudo: 'A',\n        type: 'gen',\n      },\n    },\n    hidden: (options) => isHidden(options, 'any-atom'),\n  },\n  'info-modal': {\n    title: 'Error message',\n    action: { dialog: 'info-modal' },\n    hidden: (options) => isHidden(options, 'info-modal'),\n  },\n};\n\nconst configWithNonViewOnlyActionsDisabled: Tools = Object.entries({\n  ...config,\n  ...server,\n  ...debug,\n  ...tools,\n  ...atoms,\n  ...zoom,\n  ...templates,\n  ...functionalGroups,\n  ...fullscreen,\n  ...help,\n}).reduce(\n  (acc, [key, item]) => ({\n    ...acc,\n    [key]: updateConfigItem(item as UiAction),\n  }),\n  {},\n) as Tools;\n\nfunction hasSelection(editor) {\n  const selection = editor.selection();\n  return (\n    selection && // if not only sgroupData selected\n    Object.keys(selection).filter((key) => !['sgroupData'].includes(key))\n      .length > 0\n  );\n}\n\nexport default configWithNonViewOnlyActionsDisabled;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport AboutIcon from '../../../assets/icons/files/about.svg';\nimport AddImageIcon from '../../../assets/icons/files/add-image.svg';\nimport AnalyseIcon from '../../../assets/icons/files/analyse.svg';\nimport AromIcon from '../../../assets/icons/files/arom.svg';\nimport ArrowUpwardIcon from '../../../assets/icons/files/arrow-upward.svg';\nimport BondAnyIcon from '../../../assets/icons/files/bond-any.svg';\nimport BondAromaticIcon from '../../../assets/icons/files/bond-aromatic.svg';\nimport BondCrossedIcon from '../../../assets/icons/files/bond-crossed.svg';\nimport BondDative from '../../../assets/icons/files/bond-dative.svg';\nimport BondDoubleAromaticIcon from '../../../assets/icons/files/bond-doublearomatic.svg';\nimport BondDoubleIcon from '../../../assets/icons/files/bond-double.svg';\nimport BondDownIcon from '../../../assets/icons/files/bond-down.svg';\nimport BondHydrogenIcon from '../../../assets/icons/files/bond-hydrogen.svg';\nimport BondSingleAromaticIcon from '../../../assets/icons/files/bond-singlearomatic.svg';\nimport BondSingleDoubleIcon from '../../../assets/icons/files/bond-singledouble.svg';\nimport BondSingleIcon from '../../../assets/icons/files/bond-single.svg';\nimport BondTripleIcon from '../../../assets/icons/files/bond-triple.svg';\nimport BondUpIcon from '../../../assets/icons/files/bond-up.svg';\nimport BondUpdownIcon from '../../../assets/icons/files/bond-updown.svg';\nimport CapitalTIcon from '../../../assets/icons/files/capital-t.svg';\nimport ChainIcon from '../../../assets/icons/files/chain.svg';\nimport ChargeMinusIcon from '../../../assets/icons/files/charge-minus.svg';\nimport ChargePlusIcon from '../../../assets/icons/files/charge-plus.svg';\nimport CheckIcon from '../../../assets/icons/files/check.svg';\nimport CheckMarkIcon from '../../../assets/icons/files/checkmark.svg';\nimport ChiralFlagIcon from '../../../assets/icons/files/chiral-flag.svg';\nimport CipIcon from '../../../assets/icons/files/cip.svg';\nimport CleanIcon from '../../../assets/icons/files/clean.svg';\nimport CopyIcon from '../../../assets/icons/files/copy.svg';\nimport CopyImageIcon from '../../../assets/icons/files/copy-image.svg';\nimport CopyKetIcon from '../../../assets/icons/files/copy-ket.svg';\nimport CopyMolIcon from '../../../assets/icons/files/copy-mol.svg';\nimport CutIcon from '../../../assets/icons/files/cut.svg';\nimport DearomIcon from '../../../assets/icons/files/dearom.svg';\nimport DeleteIcon from '../../../assets/icons/files/delete.svg';\nimport DropdownIcon from '../../../assets/icons/files/dropdown.svg';\nimport EnhancedStereoIcon from '../../../assets/icons/files/enhanced-stereo.svg';\nimport EditIcon from '../../../assets/icons/files/edit.svg';\nimport ElementsGroupIcon from '../../../assets/icons/files/elements-group.svg';\nimport EraseIcon from '../../../assets/icons/files/erase.svg';\nimport ExtendedTableIcon from '../../../assets/icons/files/extended-table.svg';\nimport FileThumbnailIcon from '../../../assets/icons/files/file-thumbnail.svg';\nimport GenericGroupsIcon from '../../../assets/icons/files/generic-groups.svg';\nimport HandIcon from '../../../assets/icons/files/hand.svg';\nimport CompressedHandIcon from '../../../assets/icons/files/compressed-hand.svg';\nimport HelpIcon from '../../../assets/icons/files/help.svg';\nimport HistoryIcon from '../../../assets/icons/files/history.svg';\nimport ImageFrameIcon from '../../../assets/icons/files/image-frame.svg';\nimport LayoutIcon from '../../../assets/icons/files/layout.svg';\nimport LogoIcon from '../../../assets/icons/files/logo.svg';\nimport MiewIcon from '../../../assets/icons/files/miew.svg';\nimport MacromoleculesMode from '../../../assets/icons/files/macromolecules-mode.svg';\nimport MoleculesMode from '../../../assets/icons/files/molecules-mode.svg';\nimport ClearIcon from '../../../assets/icons/files/clear.svg';\nimport NotFoundIcon from '../../../assets/icons/files/not-found.svg';\nimport OpenIcon from '../../../assets/icons/files/open.svg';\nimport PasteIcon from '../../../assets/icons/files/paste.svg';\nimport OpenWindowPasteIcon from '../../../assets/icons/files/open-window-paste-icon.svg';\nimport OpenWindowUploadIcon from '../../../assets/icons/files/open-window-upload-icon.svg';\nimport PeriodTableIcon from '../../../assets/icons/files/period-table.svg';\nimport ReactionArrowBothEndsFilledTriangle from '../../../assets/icons/files/reaction-arrow-both-ends-filled-triangle.svg';\nimport ReactionArrowDashedOpenAngle from '../../../assets/icons/files/reaction-arrow-dashed-open-angle.svg';\nimport ReactionArrowEllipticalArcArrowFilledBow from '../../../assets/icons/files/reaction-arrow-elliptical-arc-arrow-filled-bow.svg';\nimport ReactionArrowEllipticalArcArrowFilledTriangle from '../../../assets/icons/files/reaction-arrow-elliptical-arc-arrow-filled-triangle.svg';\nimport ReactionArrowEllipticalArcArrowOpenAngle from '../../../assets/icons/files/reaction-arrow-elliptical-arc-arrow-open-angle.svg';\nimport ReactionArrowEllipticalArcArrowOpenHalfAngle from '../../../assets/icons/files/reaction-arrow-elliptical-arc-arrow-open-half-angle.svg';\nimport ReactionArrowEquilibriumFilledHalfBow from '../../../assets/icons/files/reaction-arrow-equilibrium-filled-half-bow.svg';\nimport ReactionArrowEquilibriumFilledTriangle from '../../../assets/icons/files/reaction-arrow-equilibrium-filled-triangle.svg';\nimport ReactionArrowEquilibriumOpenAngle from '../../../assets/icons/files/reaction-arrow-equilibrium-open-angle.svg';\nimport ReactionArrowFailed from '../../../assets/icons/files/reaction-arrow-failed.svg';\nimport ReactionArrowRetrosynthetic from '../../../assets/icons/files/reaction-arrow-retrosynthetic-arrow.svg';\nimport ReactionArrowFilledBow from '../../../assets/icons/files/reaction-arrow-filled-bow.svg';\nimport ReactionArrowFilledTriangle from '../../../assets/icons/files/reaction-arrow-filled-triangle.svg';\nimport ReactionArrowOpenAngleIcon from '../../../assets/icons/files/reaction-arrow-open-angle.svg';\nimport ReactionArrowUnbalancedEquilibriumFilledHalfBow from '../../../assets/icons/files/reaction-arrow-unbalanced-equilibrium-filled-half-bow.svg';\nimport ReactionArrowUnbalancedEquilibriumFilledHalfTriangle from '../../../assets/icons/files/reaction-arrow-unbalanced-equilibrium-filled-half-triangle.svg';\nimport ReactionArrowUnbalancedEquilibriumLargeFilledHalfBow from '../../../assets/icons/files/reaction-arrow-unbalanced-equilibrium-large-filled-half-bow.svg';\nimport ReactionArrowUnbalancedEquilibriumOpenHalfAngle from '../../../assets/icons/files/reaction-arrow-unbalanced-equilibrium-open-half-angle.svg';\nimport ReactionArrowMultitail from '../../../assets/icons/files/reaction-arrow-multitail.svg';\nimport ReactionAutomapIcon from '../../../assets/icons/files/reaction-automap.svg';\nimport ReactionMapIcon from '../../../assets/icons/files/reaction-map.svg';\nimport ReactionPlusIcon from '../../../assets/icons/files/reaction-plus.svg';\nimport ReactionUnmapIcon from '../../../assets/icons/files/reaction-unmap.svg';\nimport RecognizeIcon from '../../../assets/icons/files/recognize.svg';\nimport RedoIcon from '../../../assets/icons/files/redo.svg';\nimport RgroupAttpointsIcon from '../../../assets/icons/files/rgroup-attpoints.svg';\nimport RgroupFragmentIcon from '../../../assets/icons/files/rgroup-fragment.svg';\nimport RgroupLabelIcon from '../../../assets/icons/files/rgroup-label.svg';\nimport SaveIcon from '../../../assets/icons/files/save.svg';\nimport SearchIcon from '../../../assets/icons/files/search.svg';\nimport SelectFragmentIcon from '../../../assets/icons/files/select-fragment.svg';\nimport SelectLassoIcon from '../../../assets/icons/files/select-lasso.svg';\nimport SelectRectangleIcon from '../../../assets/icons/files/select-rectangle.svg';\nimport SettingsIcon from '../../../assets/icons/files/settings.svg';\nimport SgroupIcon from '../../../assets/icons/files/sgroup.svg';\nimport ShapeEllipseIcon from '../../../assets/icons/files/shape-ellipse.svg';\nimport ShapeLineIcon from '../../../assets/icons/files/shape-line.svg';\nimport ShapePolylineIcon from '../../../assets/icons/files/shape-polyline.svg';\nimport ShapeRectangleIcon from '../../../assets/icons/files/shape-rectangle.svg';\nimport Template0Icon from '../../../assets/icons/files/template-0.svg';\nimport Template1Icon from '../../../assets/icons/files/template-1.svg';\nimport Template2Icon from '../../../assets/icons/files/template-2.svg';\nimport Template3Icon from '../../../assets/icons/files/template-3.svg';\nimport Template4Icon from '../../../assets/icons/files/template-4.svg';\nimport Template5Icon from '../../../assets/icons/files/template-5.svg';\nimport Template6Icon from '../../../assets/icons/files/template-6.svg';\nimport Template7Icon from '../../../assets/icons/files/template-7.svg';\nimport TemplateDialogIcon from '../../../assets/icons/files/template-dialog.svg';\nimport TemplateLibIcon from '../../../assets/icons/files/template-lib.svg';\nimport TextBold from '../../../assets/icons/files/text-bold.svg';\nimport TextIcon from '../../../assets/icons/files/text.svg';\nimport TextItalic from '../../../assets/icons/files/text-italic.svg';\nimport TextSubscript from '../../../assets/icons/files/text-subscript.svg';\nimport TextSuperscript from '../../../assets/icons/files/text-superscript.svg';\nimport TransformFlipHIcon from '../../../assets/icons/files/transform-flip-h.svg';\nimport TransformFlipVIcon from '../../../assets/icons/files/transform-flip-v.svg';\nimport SnakeModeIcon from '../../../assets/icons/files/snake-mode.svg';\nimport UndoIcon from '../../../assets/icons/files/undo.svg';\nimport ZoomInIcon from '../../../assets/icons/files/zoom-in.svg';\nimport ZoomOutIcon from '../../../assets/icons/files/zoom-out.svg';\nimport ZoomResetIcon from '../../../assets/icons/files/zoom-reset.svg';\nimport TextSpecialSymbolsIcon from '../../../assets/icons/files/text-special-symbols.svg';\nimport Save1Icon from '../../../assets/icons/files/save-1.svg';\nimport Open1Icon from '../../../assets/icons/files/open-1.svg';\nimport ResetIcon from '../../../assets/icons/files/reset.svg';\nimport CloseIcon from '../../../assets/icons/files/close.svg';\nimport GeneralIcon from '../../../assets/icons/files/general.svg';\nimport GeneralWhiteIcon from '../../../assets/icons/files/general-white.svg';\nimport StereoIcon from '../../../assets/icons/files/stereo.svg';\nimport StereoWhiteIcon from '../../../assets/icons/files/stereo-white.svg';\nimport AtomsIcon from '../../../assets/icons/files/atoms.svg';\nimport AtomsWhiteIcon from '../../../assets/icons/files/atoms-white.svg';\nimport BondsIcon from '../../../assets/icons/files/bonds.svg';\nimport BondsWhiteIcon from '../../../assets/icons/files/bonds-white.svg';\nimport ServerIcon from '../../../assets/icons/files/server.svg';\nimport ServerWhiteIcon from '../../../assets/icons/files/server-white.svg';\nimport ThreeDViewerIcon from '../../../assets/icons/files/3d.svg';\nimport ThreeDViewerWhiteIcon from '../../../assets/icons/files/3d-white.svg';\nimport DebuggingIcon from '../../../assets/icons/files/debugging.svg';\nimport DebuggingWhiteIcon from '../../../assets/icons/files/debugging-white.svg';\nimport DropdownIndicatorIcon from '../../../assets/icons/files/dropdown-indicator.svg';\nimport ChevronIcon from '../../../assets/icons/files/chevron.svg';\nimport FullscreenEnterIcon from '../../../assets/icons/files/fullscreen-enter.svg';\nimport FullscreenExitIcon from '../../../assets/icons/files/fullscreen-exit.svg';\nimport ฮฑ from '../../../assets/icons/files/ฮฑ.svg';\nimport ฮฒ from '../../../assets/icons/files/ฮฒ.svg';\nimport ฮณ from '../../../assets/icons/files/ฮณ.svg';\nimport ฮด from '../../../assets/icons/files/ฮด.svg';\nimport ฮต from '../../../assets/icons/files/ฮต.svg';\nimport ฮถ from '../../../assets/icons/files/ฮถ.svg';\nimport ฮท from '../../../assets/icons/files/ฮท.svg';\nimport ฮธ from '../../../assets/icons/files/ฮธ.svg';\nimport ฮน from '../../../assets/icons/files/ฮน.svg';\nimport ฮบ from '../../../assets/icons/files/ฮบ.svg';\nimport ฮป from '../../../assets/icons/files/ฮป.svg';\nimport ฮผ from '../../../assets/icons/files/ฮผ.svg';\nimport ฮฝ from '../../../assets/icons/files/ฮฝ.svg';\nimport ฮพ from '../../../assets/icons/files/ฮพ.svg';\nimport ฮฟ from '../../../assets/icons/files/ฮฟ.svg';\nimport ฯ from '../../../assets/icons/files/ฯ.svg';\nimport ฯ from '../../../assets/icons/files/ฯ.svg';\nimport ฯ from '../../../assets/icons/files/ฯ.svg';\nimport ฯ from '../../../assets/icons/files/ฯ.svg';\nimport ฯ from '../../../assets/icons/files/ฯ.svg';\nimport ฯ from '../../../assets/icons/files/ฯ.svg';\nimport ฯ from '../../../assets/icons/files/ฯ.svg';\nimport ฯ from '../../../assets/icons/files/ฯ.svg';\nimport ฯ from '../../../assets/icons/files/ฯ.svg';\nimport DegreeCelseusIcon from '../../../assets/icons/files/degree-celseus.svg';\nimport DegreeFahreinheitIcon from '../../../assets/icons/files/degree-fahreinheit.svg';\nimport AngstromIcon from '../../../assets/icons/files/angstrom.svg';\nimport DegreeIcon from '../../../assets/icons/files/degree-symbol.svg';\nimport PlanckDiracConstantIcon from '../../../assets/icons/files/planck-dirac-constant.svg';\nimport PlusMinusIcon from '../../../assets/icons/files/plus-minus.svg';\nimport PromilleIcon from '../../../assets/icons/files/promille.svg';\nimport RootIcon from '../../../assets/icons/files/root-symbol.svg';\nimport LeftArrowIcon from '../../../assets/icons/files/left-arrow.svg';\nimport RightArrowIcon from '../../../assets/icons/files/right-arrow.svg';\nimport LeftArrowCrossedOutIcon from '../../../assets/icons/files/left-arrow-crossed-out.svg';\nimport RightArrowCrossedOutIcon from '../../../assets/icons/files/right-arrow-crossed-out.svg';\nimport LeftAndRightArrowIcon from '../../../assets/icons/files/left-and-right-arrow.svg';\nimport CapitalPiIcon from '../../../assets/icons/files/capital-pi.svg';\nimport SumIcon from '../../../assets/icons/files/sum-symbol.svg';\nimport InfinityIcon from '../../../assets/icons/files/infinity-sign.svg';\nimport PartialDerivativeIcon from '../../../assets/icons/files/partial-derivative.svg';\nimport DeltaIcon from '../../../assets/icons/files/delta-sign.svg';\nimport IntegralIcon from '../../../assets/icons/files/integral.svg';\nimport ApproximatelyEqualIcon from '../../../assets/icons/files/approximately-equal.svg';\nimport NotEqualIcon from '../../../assets/icons/files/not-equal.svg';\nimport LessOrEqualIcon from '../../../assets/icons/files/less-or-equal.svg';\nimport MoreOrEqualIcon from '../../../assets/icons/files/more-or-equal.svg';\nimport AnyAtomIcon from '../../../assets/icons/files/any-atom.svg';\nimport Bracket from '../../../assets/icons/files/bracket.svg';\nimport Error from '../../../assets/icons/files/error.svg';\nimport RapLeftLink from '../../../assets/icons/files/rap-left-link.svg';\nimport RapMiddleLink from '../../../assets/icons/files/rap-middle-link.svg';\nimport RapRightLink from '../../../assets/icons/files/rap-right-link.svg';\nimport ArrowsLeft from '../../../assets/icons/files/arrows-left.svg';\nimport ArrowsRight from '../../../assets/icons/files/arrows-right.svg';\nimport Sugar from '../../../assets/icons/files/sugar.svg';\nimport Base from '../../../assets/icons/files/base.svg';\nimport Phosphate from '../../../assets/icons/files/phosphate.svg';\nimport Preset from '../../../assets/icons/files/preset.svg';\nimport EditFilled from '../../../assets/icons/files/edit-filled.svg';\nimport VerticalDots from '../../../assets/icons/files/vertical-dots.svg';\nimport ExpandIcon from '../../../assets/icons/files/expand.svg';\nimport MinimizeExpansionIcon from '../../../assets/icons/files/minimize-expantion.svg';\nimport ExplicitHydrogensIcon from '../../../assets/icons/files/explicit-hydrogens.svg';\nimport FlexLayoutIcon from '../../../assets/icons/files/flex-layout-mode.svg';\nimport SnakeLayoutIcon from '../../../assets/icons/files/snake-layout-mode.svg';\nimport SequenceLayoutIcon from '../../../assets/icons/files/sequence-layout-mode.svg';\nimport QuestionMark from '../../../assets/icons/files/questionMark.svg';\nimport Nucleotide from '../../../assets/icons/files/nucleotide.svg';\nimport { IMAGE_KEY, MULTITAIL_ARROW_TOOL_NAME } from 'ketcher-core';\nimport CrossIcon from '../../../assets/icons/files/cross.svg';\n\nexport const iconNameToIcon = {\n  ฮฑ,\n  ฮฒ,\n  ฮณ,\n  ฮด,\n  ฮต,\n  ฮถ,\n  ฮท,\n  ฮธ,\n  ฮน,\n  ฮบ,\n  ฮป,\n  ฮผ,\n  ฮฝ,\n  ฮพ,\n  ฮฟ,\n  ฯ,\n  ฯ,\n  ฯ,\n  ฯ,\n  ฯ,\n  ฯ,\n  ฯ,\n  ฯ,\n  ฯ,\n  โซ: AngstromIcon,\n  'ยฐ': DegreeIcon,\n  ฤง: PlanckDiracConstantIcon,\n  'ยฑ': PlusMinusIcon,\n  'โฐ': PromilleIcon,\n  'โ': RootIcon,\n  'โ': LeftArrowIcon,\n  'โ': RightArrowIcon,\n  'โ/': LeftArrowCrossedOutIcon,\n  '/โ': RightArrowCrossedOutIcon,\n  'โ': LeftAndRightArrowIcon,\n  'โ': CapitalPiIcon,\n  'โ': SumIcon,\n  'โ': InfinityIcon,\n  'โ': PartialDerivativeIcon,\n  'โ': DeltaIcon,\n  'โซ': IntegralIcon,\n  'โ': ApproximatelyEqualIcon,\n  '=/': NotEqualIcon,\n  'โค': LessOrEqualIcon,\n  'โฅ': MoreOrEqualIcon,\n  'โ': DegreeFahreinheitIcon,\n  'โ': DegreeCelseusIcon,\n  about: AboutIcon,\n  analyse: AnalyseIcon,\n  'any-atom': AnyAtomIcon,\n  arom: AromIcon,\n  'arrow-upward': ArrowUpwardIcon,\n  bonds: BondSingleIcon,\n  'bond-any': BondAnyIcon,\n  'bond-aromatic': BondAromaticIcon,\n  'bond-crossed': BondCrossedIcon,\n  'bond-hydrogen': BondHydrogenIcon,\n  'bond-dative': BondDative,\n  'bond-double': BondDoubleIcon,\n  'bond-doublearomatic': BondDoubleAromaticIcon,\n  'bond-down': BondDownIcon,\n  'bond-single': BondSingleIcon,\n  'bond-singlearomatic': BondSingleAromaticIcon,\n  'bond-singledouble': BondSingleDoubleIcon,\n  'bond-triple': BondTripleIcon,\n  'bond-up': BondUpIcon,\n  'bond-updown': BondUpdownIcon,\n  'capital-t': CapitalTIcon,\n  chain: ChainIcon,\n  'charge-minus': ChargeMinusIcon,\n  'charge-plus': ChargePlusIcon,\n  check: CheckIcon,\n  'check-mark': CheckMarkIcon,\n  'chiral-flag': ChiralFlagIcon,\n  cip: CipIcon,\n  clean: CleanIcon,\n  copies: CopyIcon,\n  copy: CopyIcon,\n  'copy-image': CopyImageIcon,\n  'copy-mol': CopyMolIcon,\n  'copy-ket': CopyKetIcon,\n  cut: CutIcon,\n  dearom: DearomIcon,\n  delete: DeleteIcon,\n  dropdown: DropdownIcon,\n  'enhanced-stereo': EnhancedStereoIcon,\n  edit: EditIcon,\n  'elements-group': ElementsGroupIcon,\n  'extended-table': ExtendedTableIcon,\n  erase: EraseIcon,\n  'file-thumbnail': FileThumbnailIcon,\n  'fullscreen-enter': FullscreenEnterIcon,\n  'fullscreen-exit': FullscreenExitIcon,\n  'generic-groups': GenericGroupsIcon,\n  hand: HandIcon,\n  compressedhand: CompressedHandIcon,\n  help: HelpIcon,\n  history: HistoryIcon,\n  'image-frame': ImageFrameIcon,\n  layout: LayoutIcon,\n  logo: LogoIcon,\n  miew: MiewIcon,\n  'macromolecules-mode': MacromoleculesMode,\n  'molecules-mode': MoleculesMode,\n  clear: ClearIcon,\n  open: OpenIcon,\n  paste: PasteIcon,\n  'period-table': PeriodTableIcon,\n  arrows: ReactionArrowOpenAngleIcon,\n  'reaction-arrow-elliptical-arc-arrow-filled-bow':\n    ReactionArrowEllipticalArcArrowFilledBow,\n  'reaction-arrow-elliptical-arc-arrow-filled-triangle':\n    ReactionArrowEllipticalArcArrowFilledTriangle,\n  'reaction-arrow-elliptical-arc-arrow-open-angle':\n    ReactionArrowEllipticalArcArrowOpenAngle,\n  'reaction-arrow-elliptical-arc-arrow-open-half-angle':\n    ReactionArrowEllipticalArcArrowOpenHalfAngle,\n  'reaction-arrow-open-angle': ReactionArrowOpenAngleIcon,\n  'reaction-arrow-filled-triangle': ReactionArrowFilledTriangle,\n  'reaction-arrow-filled-bow': ReactionArrowFilledBow,\n  'reaction-arrow-dashed-open-angle': ReactionArrowDashedOpenAngle,\n  'reaction-arrow-failed': ReactionArrowFailed,\n  'reaction-arrow-retrosynthetic': ReactionArrowRetrosynthetic,\n  'reaction-arrow-both-ends-filled-triangle':\n    ReactionArrowBothEndsFilledTriangle,\n  'reaction-arrow-equilibrium-filled-half-bow':\n    ReactionArrowEquilibriumFilledHalfBow,\n  'reaction-arrow-equilibrium-filled-triangle':\n    ReactionArrowEquilibriumFilledTriangle,\n  'reaction-arrow-equilibrium-open-angle': ReactionArrowEquilibriumOpenAngle,\n  'reaction-arrow-unbalanced-equilibrium-filled-half-bow':\n    ReactionArrowUnbalancedEquilibriumFilledHalfBow,\n  'reaction-arrow-unbalanced-equilibrium-open-half-angle':\n    ReactionArrowUnbalancedEquilibriumOpenHalfAngle,\n  'reaction-arrow-unbalanced-equilibrium-large-filled-half-bow':\n    ReactionArrowUnbalancedEquilibriumLargeFilledHalfBow,\n  'reaction-arrow-unbalanced-equilibrium-filled-half-triangle':\n    ReactionArrowUnbalancedEquilibriumFilledHalfTriangle,\n  [MULTITAIL_ARROW_TOOL_NAME]: ReactionArrowMultitail,\n  'reaction-automap': ReactionAutomapIcon,\n  'reaction-mapping-tools': ReactionMapIcon,\n  'reaction-map': ReactionMapIcon,\n  'reaction-plus': ReactionPlusIcon,\n  'reaction-unmap': ReactionUnmapIcon,\n  recognize: RecognizeIcon,\n  redo: RedoIcon,\n  rgroup: RgroupLabelIcon,\n  'rgroup-attpoints': RgroupAttpointsIcon,\n  'rgroup-fragment': RgroupFragmentIcon,\n  'rgroup-label': RgroupLabelIcon,\n  save: SaveIcon,\n  search: SearchIcon,\n  'select-fragment': SelectFragmentIcon,\n  'select-lasso': SelectLassoIcon,\n  'select-rectangle': SelectRectangleIcon,\n  settings: SettingsIcon,\n  sgroup: SgroupIcon,\n  'template-0': Template0Icon,\n  'template-1': Template1Icon,\n  'template-2': Template2Icon,\n  'template-3': Template3Icon,\n  'template-4': Template4Icon,\n  'template-5': Template5Icon,\n  'template-6': Template6Icon,\n  'template-7': Template7Icon,\n  'template-dialog': TemplateDialogIcon,\n  'template-lib': TemplateLibIcon,\n  'snake-mode': SnakeModeIcon,\n  text: TextIcon,\n  [IMAGE_KEY]: AddImageIcon,\n  'text-bold': TextBold,\n  'text-italic': TextItalic,\n  'text-subscript': TextSubscript,\n  'text-superscript': TextSuperscript,\n  'transform-flip-h': TransformFlipHIcon,\n  'transform-flip-v': TransformFlipVIcon,\n  undo: UndoIcon,\n  'zoom-in': ZoomInIcon,\n  'zoom-out': ZoomOutIcon,\n  'zoom-reset': ZoomResetIcon,\n  shapes: ShapeEllipseIcon,\n  'shape-ellipse': ShapeEllipseIcon,\n  'shape-rectangle': ShapeRectangleIcon,\n  'shape-polyline': ShapePolylineIcon,\n  'shape-line': ShapeLineIcon,\n  'not-found': NotFoundIcon,\n  'save-1': Save1Icon,\n  'open-1': Open1Icon,\n  reset: ResetIcon,\n  close: CloseIcon,\n  general: GeneralIcon,\n  'general-white': GeneralWhiteIcon,\n  stereo: StereoIcon,\n  'stereo-white': StereoWhiteIcon,\n  atoms: AtomsIcon,\n  'atoms-white': AtomsWhiteIcon,\n  'bond-common': BondsIcon,\n  'bonds-white': BondsWhiteIcon,\n  server: ServerIcon,\n  'server-white': ServerWhiteIcon,\n  '3dviewer': ThreeDViewerIcon,\n  '3dviewer-white': ThreeDViewerWhiteIcon,\n  debugging: DebuggingIcon,\n  'debugging-white': DebuggingWhiteIcon,\n  'dropdown-indicator': DropdownIndicatorIcon,\n  'text-special-symbols': TextSpecialSymbolsIcon,\n  chevron: ChevronIcon,\n  'open-window-paste-icon': OpenWindowPasteIcon,\n  'open-window-upload-icon': OpenWindowUploadIcon,\n  bracket: Bracket,\n  error: Error,\n  'rap-left-link': RapLeftLink,\n  'rap-middle-link': RapMiddleLink,\n  'rap-right-link': RapRightLink,\n  'arrows-left': ArrowsLeft,\n  'arrows-right': ArrowsRight,\n  sugar: Sugar,\n  base: Base,\n  phosphate: Phosphate,\n  preset: Preset,\n  nucleotide: Nucleotide,\n  'edit-filled': EditFilled,\n  'vertical-dots': VerticalDots,\n  expand: ExpandIcon,\n  'minimize-expansion': MinimizeExpansionIcon,\n  'explicit-hydrogens': ExplicitHydrogensIcon,\n  'flex-layout-mode': FlexLayoutIcon,\n  'snake-layout-mode': SnakeLayoutIcon,\n  'sequence-layout-mode': SequenceLayoutIcon,\n  questionMark: QuestionMark,\n  'no-highlight-cross': CrossIcon,\n} as const;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { IconName, SvgComponent } from '../types';\nimport { iconNameToIcon } from './iconNameToIcon';\n\nexport const getIconByName = (name: IconName): SvgComponent =>\n  iconNameToIcon[name];\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { IIconProps } from './types';\nimport { getIconByName } from './utils/getIconByName';\n\nconst Icon = ({ name, className, onClick }: IIconProps) => {\n  const Component = getIconByName(name);\n\n  return <Component className={className} onClick={onClick} />;\n};\n\nexport default Icon;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { IconName } from '../types';\nimport { iconNameToIcon } from './iconNameToIcon';\n\nexport const getIconName = (name: string): IconName | null => {\n  return Object.hasOwn(iconNameToIcon, name) ? (name as IconName) : null;\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nconst color = {\n  white: '#FFFFFF',\n  primaryWhite: '#EFF2F5',\n  green: '#167782',\n  lightGreen: '#188794',\n  graphite: '#333333',\n  grey: '#cad3dd',\n  darkGrey: '#b4b9d6',\n} as const;\n\nconst text = {\n  color: {\n    primary: color.graphite,\n    secondary: color.white,\n    hover: color.green,\n  },\n} as const;\n\nconst font = {\n  size: {\n    small: '10px',\n    regular: '12px',\n  },\n  weight: {\n    regular: '400',\n  },\n} as const;\n\nconst background = {\n  color: {\n    primary: color.white,\n    secondary: color.green,\n    hover: color.lightGreen,\n  },\n} as const;\n\nconst border = {\n  primary: `1px solid ${color.grey}`,\n  secondary: `1px solid ${color.green}`,\n  medium: `1.5px solid ${color.lightGreen}`,\n  radius: {\n    regular: '2px',\n    medium: '4px',\n  },\n} as const;\n\nexport default {\n  background,\n  font,\n  border,\n  color,\n  text,\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport styled from '@emotion/styled';\nimport Icon from '../../Icon/Icon';\nimport { style } from 'src/components/styles';\nimport { IStyledButtonProps } from './types';\nimport { css } from '@emotion/react';\n\nexport const StyledButton = styled('button', {\n  shouldForwardProp: (prop) => prop !== 'isActive',\n})<IStyledButtonProps>((props) => ({\n  boxShadow: 'none',\n  transition: 'none',\n  background: 'none',\n  display: 'block',\n  border: '0',\n  borderRadius: style.border.radius.regular,\n  padding: '1px',\n  minHeight: '28px',\n  minWidth: '28px',\n  cursor: 'pointer',\n  color: props.isActive ? style.text.color.secondary : style.text.color.primary,\n  backgroundColor: props.isActive\n    ? style.background.color.secondary\n    : undefined,\n\n  ':hover': {\n    color: props.isActive ? undefined : style.text.color.hover,\n    backgroundColor: props.isActive ? style.background.color.hover : undefined,\n  },\n\n  ':active': {\n    color: style.text.color.secondary,\n    backgroundColor: style.background.color.secondary,\n  },\n\n  ':disabled': {\n    opacity: '0.4',\n    cursor: 'not-allowed',\n  },\n}));\n\nconst IconStyles = css`\n  width: 100%;\n  height: 100%;\n`;\n\nexport const StyledIcon = styled(Icon)`\n  ${IconStyles};\n`;\n\nexport const StyledCustomIcon = styled('img')`\n  ${IconStyles};\n`;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { StyledButton } from './styles';\nimport { IIconButtonBaseProps } from './types';\n\nexport const IconButtonBase = ({\n  onClick,\n  shortcut,\n  title,\n  className,\n  isActive = false,\n  isHidden = false,\n  disabled = false,\n  testId,\n  children,\n}: IIconButtonBaseProps) => {\n  const combinedTitle = shortcut ? `${title} (${shortcut})` : title;\n\n  if (isHidden) {\n    return null;\n  }\n\n  return (\n    <StyledButton\n      className={className}\n      title={combinedTitle}\n      onClick={onClick}\n      disabled={disabled}\n      isActive={isActive}\n      data-testid={testId}\n    >\n      {children}\n    </StyledButton>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { StyledIcon } from './styles';\nimport { IIconButtonProps } from './types';\nimport { IconButtonBase } from './IconButtonBase';\n\nexport const IconButton = ({ iconName, ...props }: IIconButtonProps) => {\n  return (\n    <IconButtonBase {...props}>\n      <StyledIcon name={iconName} />\n    </IconButtonBase>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { IIconButtonCustomIconProps } from './types';\nimport { IconButtonBase } from './IconButtonBase';\nimport { StyledCustomIcon } from './styles';\n\nexport const IconButtonCustomIcon = ({\n  link,\n  ...props\n}: IIconButtonCustomIconProps) => {\n  return (\n    <IconButtonBase {...props}>\n      <StyledCustomIcon src={link} alt={props.title} />\n    </IconButtonBase>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport styled from '@emotion/styled';\nimport { style } from 'src/components/styles';\n\nexport const StyledButton = styled.button({\n  boxShadow: 'none',\n  transition: 'none',\n  border: '0',\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center',\n  cursor: 'pointer',\n  padding: '4px 8px',\n  outline: '1px solid #585858',\n  background: style.background.color.primary,\n  borderRadius: style.border.radius.regular,\n  textTransform: 'none',\n  fontSize: style.font.size.regular,\n  fontWeight: style.font.weight.regular,\n\n  ':disabled': {\n    cursor: 'auto',\n    background: '#e1e5ea',\n    outline: 'none',\n  },\n});\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { StyledButton } from './styles';\n\nexport const Button = ({\n  children,\n  ...props\n}: React.ButtonHTMLAttributes<HTMLButtonElement>) => {\n  return <StyledButton {...props}>{children}</StyledButton>;\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport styled from '@emotion/styled';\n\nexport const Container = styled.div<{ fullsize?: boolean }>`\n  ${(props) => {\n    if (props.fullsize) {\n      return `\n          > svg {\n            height: 100%;\n            width: 100%;\n          }\n        `;\n    } else {\n      return `\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        `;\n    }\n  }}\n`;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  KetcherLogger,\n  MolSerializer,\n  RenderStruct,\n  Struct,\n} from 'ketcher-core';\nimport { useEffect, useRef } from 'react';\nimport { Container } from './styles';\nimport { IStructRenderProps } from './types';\n\nconst normalizeStruct = (molV2000StringOrStruct: string | Struct) => {\n  if (molV2000StringOrStruct instanceof Struct) {\n    return molV2000StringOrStruct;\n  }\n\n  try {\n    return new MolSerializer().deserialize(molV2000StringOrStruct);\n  } catch (e) {\n    KetcherLogger.error('StructRenderer.tsx::normalizeStruct', e);\n    throw Error('Could not parse Struct');\n  }\n};\n\nconst StructRender = ({\n  struct,\n  options,\n  className,\n  fullsize,\n  update,\n}: IStructRenderProps) => {\n  const renderRef = useRef<HTMLDivElement>(null);\n  useEffect(() => {\n    const container = renderRef.current;\n\n    if (container) {\n      container.innerHTML = '';\n      const normalizedStruct = normalizeStruct(struct);\n      RenderStruct.render(container, normalizedStruct, options);\n    }\n  }, [struct, options, update]);\n\n  return (\n    <Container\n      ref={renderRef}\n      className={className}\n      fullsize={fullsize}\n    ></Container>\n  );\n};\n\nexport default StructRender;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport styled from '@emotion/styled';\nimport { style } from '../styles';\n\nexport const StyledInput = styled.input({\n  border: 'none',\n  borderRadius: style.border.radius.medium,\n  outline: style.border.primary,\n  padding: '4px 8px',\n  caretColor: style.color.green,\n\n  ':hover': {\n    outline: style.border.medium,\n  },\n\n  ':active, :focus,:focus-visible': {\n    outline: style.border.secondary,\n  },\n\n  ':disabled': {\n    color: 'blue',\n    outline: style.border.primary,\n    backgroundColor: '#e1e5ea',\n  },\n});\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { StyledInput } from './styles';\n\nexport const Input = (props: React.InputHTMLAttributes<HTMLInputElement>) => {\n  return <StyledInput {...props} />;\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport styled from '@emotion/styled';\nimport { IDetailsContainerProps } from './types';\n\nexport const Container = styled.div({\n  overflow: 'hidden',\n  display: 'flex',\n  flexDirection: 'column',\n  flexBasis: 'content',\n  height: '100%',\n});\n\nexport const SummaryContainer = styled.div({\n  backgroundColor: 'white',\n  cursor: 'pointer',\n\n  '&:hover': {\n    backgroundColor: '#f3f8f9',\n  },\n});\n\nexport const DetailsContainer = styled.div<IDetailsContainerProps>({\n  overflowX: 'hidden',\n  overflowY: 'auto',\n  transition: 'all .3s',\n});\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { Container, DetailsContainer, SummaryContainer } from './styles';\nimport { IAccordionProps } from './types';\n\nexport const Accordion = ({\n  summary,\n  details,\n  expanded,\n  className,\n  onSummaryClick,\n  dataTestIdDetails,\n}: IAccordionProps) => {\n  return (\n    <Container className={className}>\n      <SummaryContainer onClick={onSummaryClick}>{summary}</SummaryContainer>\n      {expanded && (\n        <DetailsContainer data-testid={dataTestIdDetails} expanded={expanded}>\n          {details}\n        </DetailsContainer>\n      )}\n    </Container>\n  );\n};\n","export const error = {\n  message: 'Error Message',\n  close: 'Close',\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { error } from './constants';\n\nimport styles from './InfoModal.module.less';\n\ninterface InfoModalProps {\n  message: string;\n  close: () => void;\n}\n\nconst InfoModal = ({ message, close }: InfoModalProps): JSX.Element => {\n  return (\n    <div className={styles.infoModalOverlay}>\n      <div\n        className={styles.infoModalWindow}\n        role=\"dialog\"\n        aria-modal=\"true\"\n        aria-labelledby=\"dialog-label\"\n        aria-describedby=\"dialog-content\"\n        data-testid=\"info-modal-window\"\n      >\n        <header id=\"dialog-label\">{error.message}</header>\n        <div\n          className={styles.infoModalBody}\n          id=\"dialog-content\"\n          data-testid=\"info-modal-body\"\n        >\n          {message}\n        </div>\n        <footer>\n          <button className={styles.ok} onClick={close}>\n            {error.close}\n          </button>\n        </footer>\n      </div>\n    </div>\n  );\n};\n\nexport default InfoModal;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport * as KN from 'w3c-keyname';\n\nimport {\n  FC,\n  PropsWithChildren,\n  ReactElement,\n  useLayoutEffect,\n  useRef,\n} from 'react';\n\nimport clsx from 'clsx';\nimport { Icon } from 'components';\nimport styles from './Dialog.module.less';\nimport { KETCHER_ROOT_NODE_CSS_SELECTOR } from 'src/constants';\nimport { CLIP_AREA_BASE_CLASS } from '../../script/ui/component/cliparea/cliparea';\n\ninterface DialogParamsCallProps {\n  onCancel: () => void;\n  onOk: (result: unknown) => void;\n}\n\nexport interface DialogParams extends DialogParamsCallProps {\n  className?: string;\n  isNestedModal?: boolean;\n}\n\ninterface DialogProps {\n  title?: string;\n  params: DialogParams;\n  buttons?: Array<string | ReactElement>;\n  className?: string;\n  needMargin?: boolean;\n  withDivider?: boolean;\n  headerContent?: ReactElement;\n  footerContent?: ReactElement;\n  buttonsNameMap?: {\n    [key in string]: string;\n  };\n  focusable?: boolean;\n}\n\ninterface DialogCallProps {\n  result?: () => unknown;\n  valid?: () => boolean;\n}\n\ntype Props = DialogProps & DialogCallProps;\n\nexport const Dialog: FC<PropsWithChildren & Props> = (props) => {\n  const {\n    children,\n    title,\n    params,\n    result = () => null,\n    valid = () => !!result(),\n    buttons = ['OK'],\n    headerContent,\n    footerContent,\n    className,\n    buttonsNameMap,\n    needMargin = true,\n    withDivider = false,\n    focusable = true,\n    ...rest\n  } = props;\n  const dialogRef = useRef<HTMLDivElement>(null);\n\n  useLayoutEffect(() => {\n    if (focusable) {\n      (dialogRef.current as HTMLElement).focus();\n    }\n\n    return () => {\n      (\n        dialogRef.current\n          ?.closest(KETCHER_ROOT_NODE_CSS_SELECTOR)\n          ?.getElementsByClassName(CLIP_AREA_BASE_CLASS)[0] as HTMLElement\n      ).focus();\n    };\n  }, [focusable]);\n\n  const isButtonOk = (button) => {\n    return button === 'OK' || button === 'Save';\n  };\n\n  const exit = (mode) => {\n    const key = isButtonOk(mode) ? 'onOk' : 'onCancel';\n    if (params && key in params && (key !== 'onOk' || valid())) {\n      params[key](result());\n    }\n  };\n\n  const keyDown = (event) => {\n    const key = KN.keyName(event);\n    const active = document.activeElement;\n    const activeTextarea = active && active.tagName === 'TEXTAREA';\n    if (key === 'Escape' || (key === 'Enter' && !activeTextarea)) {\n      exit(key === 'Enter' ? 'OK' : 'Cancel');\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  };\n\n  return (\n    <div\n      ref={dialogRef}\n      role=\"dialog\"\n      onSubmit={(event) => event.preventDefault()}\n      onKeyDown={keyDown}\n      tabIndex={-1}\n      className={clsx(styles.dialog, className, params.className)}\n      {...rest}\n    >\n      <header\n        className={clsx(styles.header, withDivider && styles.withDivider)}\n      >\n        {headerContent || <span>{title}</span>}\n        <div className={styles.btnContainer}>\n          <button\n            className={styles.buttonTop}\n            onClick={() => exit('Cancel')}\n            data-testid={'close-icon'}\n          >\n            <Icon name={'close'} className={styles.closeButton} />\n          </button>\n        </div>\n      </header>\n      <div className={clsx(styles.body, needMargin && styles.withMargin)}>\n        {children}\n      </div>\n\n      {(footerContent || buttons.length > 0) && (\n        <footer className={styles.footer}>\n          {footerContent}\n          {buttons.length > 0 &&\n            buttons.map((button) =>\n              typeof button !== 'string' ? (\n                button\n              ) : (\n                <input\n                  key={button}\n                  type=\"button\"\n                  className={clsx(\n                    isButtonOk(button) ? styles.ok : styles.cancel,\n                    button === 'Save' && styles.save,\n                  )}\n                  value={\n                    buttonsNameMap && buttonsNameMap[button]\n                      ? buttonsNameMap[button]\n                      : button\n                  }\n                  disabled={isButtonOk(button) && !valid()}\n                  onClick={() => exit(button)}\n                  data-testid={button}\n                />\n              ),\n            )}\n        </footer>\n      )}\n    </div>\n  );\n};\n","import styled from '@emotion/styled';\n\nexport const Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: start;\n  gap: 16px;\n  padding: 8px;\n  background: #ffffff;\n  border: 1px solid #cad3dd;\n  border-radius: 4px;\n  box-shadow: 0px 1px 1px rgba(197, 203, 207, 0.7);\n`;\n\nexport const Header = styled.div`\n  font-weight: 600;\n`;\n\nexport const Content = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n`;\n\nexport const ContentLine = styled.div`\n  height: 24px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  white-space: nowrap;\n`;\n\ninterface RatioBarProps {\n  ratio: number;\n}\n\nexport const RatioBar = styled.div<RatioBarProps>`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  width: 36px;\n  border-right: 0.5px solid #b4b9d6;\n  background: ${({ ratio }) => `linear-gradient(\n    90deg,\n    #ffffff 0%,\n    #ffffff ${100 - ratio}%,\n    #e7f7ea ${100 - ratio + 0.5}%,\n    #e7f7ea 100%\n  )`};\n`;\n\nexport const MonomerName = styled.div`\n  flex: 1;\n`;\n","import { CSSProperties, useMemo } from 'react';\nimport {\n  Container,\n  Content,\n  ContentLine,\n  Header,\n  RatioBar,\n} from './AmbiguousMonomerPreview.styles';\nimport { AmbiguousMonomerPreviewState } from './types';\n\ninterface Props {\n  className?: string;\n  preview: AmbiguousMonomerPreviewState;\n  style?: CSSProperties;\n}\n\nconst AmbiguousMonomerPreview = ({ className, preview, style }: Props) => {\n  const { monomer, presetMonomers } = preview;\n\n  const isAlternatives = monomer.subtype === 'alternatives';\n  const header = isAlternatives ? 'Alternatives' : 'Mixed';\n  const aminoAcidFallback = monomer.label === 'X' ? 'Any amino acid' : null;\n  const baseFallback = monomer.label === 'N' ? 'Any base' : null;\n  const fallback = aminoAcidFallback || baseFallback;\n\n  const { monomers, options } = monomer;\n\n  const previewData: { monomerName: string; ratio?: number }[] = useMemo(() => {\n    if (fallback) {\n      return [];\n    }\n\n    return monomers.map((monomer) => {\n      const option = options.find(\n        (option) => option.templateId === monomer.monomerItem.props.id,\n      );\n\n      let monomerName: string;\n      if (presetMonomers) {\n        const [sugar, , phosphate] = presetMonomers;\n        const sugarName = sugar?.label ?? '';\n        const phosphateName = phosphate?.label ?? '';\n        monomerName = `${sugarName}(${monomer.label})${phosphateName}`;\n      } else {\n        monomerName = monomer.monomerItem.props.Name;\n      }\n\n      return {\n        monomerName,\n        ratio: option?.ratio,\n      };\n    });\n  }, [fallback, monomers, presetMonomers, options]);\n\n  const preparedPreviewData = useMemo(() => {\n    const sortedData = previewData.sort((a, b) => {\n      if (isAlternatives) {\n        return a.monomerName.localeCompare(b.monomerName);\n      } else {\n        if (!a.ratio || !b.ratio) {\n          return 0;\n        }\n        return b.ratio - a.ratio;\n      }\n    });\n    if (!isAlternatives) {\n      const overallRatio = sortedData.reduce(\n        (acc, item) => acc + (item.ratio || 1),\n        0,\n      );\n\n      sortedData.forEach((entry) => {\n        entry.ratio = Math.round(((entry.ratio || 1) / overallRatio) * 100);\n      });\n    }\n\n    return sortedData.slice(0, 5);\n  }, [previewData, isAlternatives]);\n\n  return (\n    <Container\n      style={style}\n      className={className}\n      data-testid=\"polymer-library-preview\"\n    >\n      <Header>{header}</Header>\n      <Content>\n        {fallback ??\n          preparedPreviewData.map((entry) => (\n            <ContentLine key={entry.monomerName}>\n              {entry.ratio && (\n                <RatioBar ratio={entry.ratio}>{entry.ratio}%</RatioBar>\n              )}\n              {entry.monomerName}\n            </ContentLine>\n          ))}\n      </Content>\n    </Container>\n  );\n};\n\nexport { AmbiguousMonomerPreview };\n","import {\n  AmbiguousMonomerType,\n  AttachmentPointsToBonds,\n  IKetIdtAliases,\n  MonomerItemType,\n  PolymerBond,\n} from 'ketcher-core';\n\nexport enum PreviewType {\n  Monomer = 'monomer',\n  Preset = 'preset',\n  Bond = 'bond',\n  AmbiguousMonomer = 'ambiguousMonomer',\n}\n\nexport interface PreviewStyle {\n  readonly top?: string;\n  readonly left?: string;\n  readonly right?: string;\n  readonly transform?: string;\n}\n\ninterface BasePreviewState {\n  readonly type: PreviewType;\n  readonly style?: PreviewStyle;\n}\n\nexport interface MonomerPreviewState extends BasePreviewState {\n  readonly type: PreviewType.Monomer;\n  readonly monomer: MonomerItemType | undefined;\n  readonly attachmentPointsToBonds?: AttachmentPointsToBonds;\n}\n\nexport enum PresetPosition {\n  Library = 'library',\n  ChainStart = 'chainStart',\n  ChainMiddle = 'chainMiddle',\n  ChainEnd = 'chainEnd',\n}\n\nexport interface PresetPreviewState extends BasePreviewState {\n  readonly type: PreviewType.Preset;\n  readonly monomers: ReadonlyArray<MonomerItemType | undefined>;\n  readonly position: PresetPosition;\n  readonly name?: string;\n  readonly idtAliases?: IKetIdtAliases;\n}\n\nexport interface BondPreviewState extends BasePreviewState {\n  readonly type: PreviewType.Bond;\n  readonly polymerBond: PolymerBond;\n}\n\nexport interface AmbiguousMonomerPreviewState extends BasePreviewState {\n  readonly type: PreviewType.AmbiguousMonomer;\n  readonly monomer: AmbiguousMonomerType;\n  readonly presetMonomers?: ReadonlyArray<MonomerItemType | undefined>;\n}\n\nexport type EditorStatePreview =\n  | MonomerPreviewState\n  | PresetPreviewState\n  | BondPreviewState\n  | AmbiguousMonomerPreviewState;\n","export const preview = {\n  width: 345,\n  height: 345,\n  gap: 5,\n  topPadding: 16,\n  heightForNucleotide: 105,\n  widthForBond: 358,\n  heightForBond: 268,\n} as const;\n","'use strict';\n\n/* eslint complexity: [2, 18], max-statements: [2, 33] */\nmodule.exports = function hasSymbols() {\n\tif (typeof Symbol !== 'function' || typeof Object.getOwnPropertySymbols !== 'function') { return false; }\n\tif (typeof Symbol.iterator === 'symbol') { return true; }\n\n\tvar obj = {};\n\tvar sym = Symbol('test');\n\tvar symObj = Object(sym);\n\tif (typeof sym === 'string') { return false; }\n\n\tif (Object.prototype.toString.call(sym) !== '[object Symbol]') { return false; }\n\tif (Object.prototype.toString.call(symObj) !== '[object Symbol]') { return false; }\n\n\t// temp disabled per https://github.com/ljharb/object.assign/issues/17\n\t// if (sym instanceof Symbol) { return false; }\n\t// temp disabled per https://github.com/WebReflection/get-own-property-symbols/issues/4\n\t// if (!(symObj instanceof Symbol)) { return false; }\n\n\t// if (typeof Symbol.prototype.toString !== 'function') { return false; }\n\t// if (String(sym) !== Symbol.prototype.toString.call(sym)) { return false; }\n\n\tvar symVal = 42;\n\tobj[sym] = symVal;\n\tfor (sym in obj) { return false; } // eslint-disable-line no-restricted-syntax, no-unreachable-loop\n\tif (typeof Object.keys === 'function' && Object.keys(obj).length !== 0) { return false; }\n\n\tif (typeof Object.getOwnPropertyNames === 'function' && Object.getOwnPropertyNames(obj).length !== 0) { return false; }\n\n\tvar syms = Object.getOwnPropertySymbols(obj);\n\tif (syms.length !== 1 || syms[0] !== sym) { return false; }\n\n\tif (!Object.prototype.propertyIsEnumerable.call(obj, sym)) { return false; }\n\n\tif (typeof Object.getOwnPropertyDescriptor === 'function') {\n\t\tvar descriptor = Object.getOwnPropertyDescriptor(obj, sym);\n\t\tif (descriptor.value !== symVal || descriptor.enumerable !== true) { return false; }\n\t}\n\n\treturn true;\n};\n","'use strict';\n\nvar hasSymbols = require('has-symbols/shams');\n\n/** @type {import('.')} */\nmodule.exports = function hasToStringTagShams() {\n\treturn hasSymbols() && !!Symbol.toStringTag;\n};\n","'use strict';\n\n/** @type {import('.')} */\nmodule.exports = Error;\n","'use strict';\n\n/** @type {import('./eval')} */\nmodule.exports = EvalError;\n","'use strict';\n\n/** @type {import('./range')} */\nmodule.exports = RangeError;\n","'use strict';\n\n/** @type {import('./ref')} */\nmodule.exports = ReferenceError;\n","'use strict';\n\n/** @type {import('./syntax')} */\nmodule.exports = SyntaxError;\n","'use strict';\n\n/** @type {import('./type')} */\nmodule.exports = TypeError;\n","'use strict';\n\n/** @type {import('./uri')} */\nmodule.exports = URIError;\n","'use strict';\n\nvar origSymbol = typeof Symbol !== 'undefined' && Symbol;\nvar hasSymbolSham = require('./shams');\n\nmodule.exports = function hasNativeSymbols() {\n\tif (typeof origSymbol !== 'function') { return false; }\n\tif (typeof Symbol !== 'function') { return false; }\n\tif (typeof origSymbol('foo') !== 'symbol') { return false; }\n\tif (typeof Symbol('bar') !== 'symbol') { return false; }\n\n\treturn hasSymbolSham();\n};\n","'use strict';\n\nvar test = {\n\t__proto__: null,\n\tfoo: {}\n};\n\nvar $Object = Object;\n\n/** @type {import('.')} */\nmodule.exports = function hasProto() {\n\t// @ts-expect-error: TS errors on an inherited property for some reason\n\treturn { __proto__: test }.foo === test.foo\n\t\t&& !(test instanceof $Object);\n};\n","'use strict';\n\n/* eslint no-invalid-this: 1 */\n\nvar ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';\nvar toStr = Object.prototype.toString;\nvar max = Math.max;\nvar funcType = '[object Function]';\n\nvar concatty = function concatty(a, b) {\n    var arr = [];\n\n    for (var i = 0; i < a.length; i += 1) {\n        arr[i] = a[i];\n    }\n    for (var j = 0; j < b.length; j += 1) {\n        arr[j + a.length] = b[j];\n    }\n\n    return arr;\n};\n\nvar slicy = function slicy(arrLike, offset) {\n    var arr = [];\n    for (var i = offset || 0, j = 0; i < arrLike.length; i += 1, j += 1) {\n        arr[j] = arrLike[i];\n    }\n    return arr;\n};\n\nvar joiny = function (arr, joiner) {\n    var str = '';\n    for (var i = 0; i < arr.length; i += 1) {\n        str += arr[i];\n        if (i + 1 < arr.length) {\n            str += joiner;\n        }\n    }\n    return str;\n};\n\nmodule.exports = function bind(that) {\n    var target = this;\n    if (typeof target !== 'function' || toStr.apply(target) !== funcType) {\n        throw new TypeError(ERROR_MESSAGE + target);\n    }\n    var args = slicy(arguments, 1);\n\n    var bound;\n    var binder = function () {\n        if (this instanceof bound) {\n            var result = target.apply(\n                this,\n                concatty(args, arguments)\n            );\n            if (Object(result) === result) {\n                return result;\n            }\n            return this;\n        }\n        return target.apply(\n            that,\n            concatty(args, arguments)\n        );\n\n    };\n\n    var boundLength = max(0, target.length - args.length);\n    var boundArgs = [];\n    for (var i = 0; i < boundLength; i++) {\n        boundArgs[i] = '$' + i;\n    }\n\n    bound = Function('binder', 'return function (' + joiny(boundArgs, ',') + '){ return binder.apply(this,arguments); }')(binder);\n\n    if (target.prototype) {\n        var Empty = function Empty() {};\n        Empty.prototype = target.prototype;\n        bound.prototype = new Empty();\n        Empty.prototype = null;\n    }\n\n    return bound;\n};\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = Function.prototype.bind || implementation;\n","'use strict';\n\nvar call = Function.prototype.call;\nvar $hasOwn = Object.prototype.hasOwnProperty;\nvar bind = require('function-bind');\n\n/** @type {import('.')} */\nmodule.exports = bind.call(call, $hasOwn);\n","'use strict';\n\nvar undefined;\n\nvar $Error = require('es-errors');\nvar $EvalError = require('es-errors/eval');\nvar $RangeError = require('es-errors/range');\nvar $ReferenceError = require('es-errors/ref');\nvar $SyntaxError = require('es-errors/syntax');\nvar $TypeError = require('es-errors/type');\nvar $URIError = require('es-errors/uri');\n\nvar $Function = Function;\n\n// eslint-disable-next-line consistent-return\nvar getEvalledConstructor = function (expressionSyntax) {\n\ttry {\n\t\treturn $Function('\"use strict\"; return (' + expressionSyntax + ').constructor;')();\n\t} catch (e) {}\n};\n\nvar $gOPD = Object.getOwnPropertyDescriptor;\nif ($gOPD) {\n\ttry {\n\t\t$gOPD({}, '');\n\t} catch (e) {\n\t\t$gOPD = null; // this is IE 8, which has a broken gOPD\n\t}\n}\n\nvar throwTypeError = function () {\n\tthrow new $TypeError();\n};\nvar ThrowTypeError = $gOPD\n\t? (function () {\n\t\ttry {\n\t\t\t// eslint-disable-next-line no-unused-expressions, no-caller, no-restricted-properties\n\t\t\targuments.callee; // IE 8 does not throw here\n\t\t\treturn throwTypeError;\n\t\t} catch (calleeThrows) {\n\t\t\ttry {\n\t\t\t\t// IE 8 throws on Object.getOwnPropertyDescriptor(arguments, '')\n\t\t\t\treturn $gOPD(arguments, 'callee').get;\n\t\t\t} catch (gOPDthrows) {\n\t\t\t\treturn throwTypeError;\n\t\t\t}\n\t\t}\n\t}())\n\t: throwTypeError;\n\nvar hasSymbols = require('has-symbols')();\nvar hasProto = require('has-proto')();\n\nvar getProto = Object.getPrototypeOf || (\n\thasProto\n\t\t? function (x) { return x.__proto__; } // eslint-disable-line no-proto\n\t\t: null\n);\n\nvar needsEval = {};\n\nvar TypedArray = typeof Uint8Array === 'undefined' || !getProto ? undefined : getProto(Uint8Array);\n\nvar INTRINSICS = {\n\t__proto__: null,\n\t'%AggregateError%': typeof AggregateError === 'undefined' ? undefined : AggregateError,\n\t'%Array%': Array,\n\t'%ArrayBuffer%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer,\n\t'%ArrayIteratorPrototype%': hasSymbols && getProto ? getProto([][Symbol.iterator]()) : undefined,\n\t'%AsyncFromSyncIteratorPrototype%': undefined,\n\t'%AsyncFunction%': needsEval,\n\t'%AsyncGenerator%': needsEval,\n\t'%AsyncGeneratorFunction%': needsEval,\n\t'%AsyncIteratorPrototype%': needsEval,\n\t'%Atomics%': typeof Atomics === 'undefined' ? undefined : Atomics,\n\t'%BigInt%': typeof BigInt === 'undefined' ? undefined : BigInt,\n\t'%BigInt64Array%': typeof BigInt64Array === 'undefined' ? undefined : BigInt64Array,\n\t'%BigUint64Array%': typeof BigUint64Array === 'undefined' ? undefined : BigUint64Array,\n\t'%Boolean%': Boolean,\n\t'%DataView%': typeof DataView === 'undefined' ? undefined : DataView,\n\t'%Date%': Date,\n\t'%decodeURI%': decodeURI,\n\t'%decodeURIComponent%': decodeURIComponent,\n\t'%encodeURI%': encodeURI,\n\t'%encodeURIComponent%': encodeURIComponent,\n\t'%Error%': $Error,\n\t'%eval%': eval, // eslint-disable-line no-eval\n\t'%EvalError%': $EvalError,\n\t'%Float32Array%': typeof Float32Array === 'undefined' ? undefined : Float32Array,\n\t'%Float64Array%': typeof Float64Array === 'undefined' ? undefined : Float64Array,\n\t'%FinalizationRegistry%': typeof FinalizationRegistry === 'undefined' ? undefined : FinalizationRegistry,\n\t'%Function%': $Function,\n\t'%GeneratorFunction%': needsEval,\n\t'%Int8Array%': typeof Int8Array === 'undefined' ? undefined : Int8Array,\n\t'%Int16Array%': typeof Int16Array === 'undefined' ? undefined : Int16Array,\n\t'%Int32Array%': typeof Int32Array === 'undefined' ? undefined : Int32Array,\n\t'%isFinite%': isFinite,\n\t'%isNaN%': isNaN,\n\t'%IteratorPrototype%': hasSymbols && getProto ? getProto(getProto([][Symbol.iterator]())) : undefined,\n\t'%JSON%': typeof JSON === 'object' ? JSON : undefined,\n\t'%Map%': typeof Map === 'undefined' ? undefined : Map,\n\t'%MapIteratorPrototype%': typeof Map === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Map()[Symbol.iterator]()),\n\t'%Math%': Math,\n\t'%Number%': Number,\n\t'%Object%': Object,\n\t'%parseFloat%': parseFloat,\n\t'%parseInt%': parseInt,\n\t'%Promise%': typeof Promise === 'undefined' ? undefined : Promise,\n\t'%Proxy%': typeof Proxy === 'undefined' ? undefined : Proxy,\n\t'%RangeError%': $RangeError,\n\t'%ReferenceError%': $ReferenceError,\n\t'%Reflect%': typeof Reflect === 'undefined' ? undefined : Reflect,\n\t'%RegExp%': RegExp,\n\t'%Set%': typeof Set === 'undefined' ? undefined : Set,\n\t'%SetIteratorPrototype%': typeof Set === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Set()[Symbol.iterator]()),\n\t'%SharedArrayBuffer%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer,\n\t'%String%': String,\n\t'%StringIteratorPrototype%': hasSymbols && getProto ? getProto(''[Symbol.iterator]()) : undefined,\n\t'%Symbol%': hasSymbols ? Symbol : undefined,\n\t'%SyntaxError%': $SyntaxError,\n\t'%ThrowTypeError%': ThrowTypeError,\n\t'%TypedArray%': TypedArray,\n\t'%TypeError%': $TypeError,\n\t'%Uint8Array%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array,\n\t'%Uint8ClampedArray%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray,\n\t'%Uint16Array%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array,\n\t'%Uint32Array%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array,\n\t'%URIError%': $URIError,\n\t'%WeakMap%': typeof WeakMap === 'undefined' ? undefined : WeakMap,\n\t'%WeakRef%': typeof WeakRef === 'undefined' ? undefined : WeakRef,\n\t'%WeakSet%': typeof WeakSet === 'undefined' ? undefined : WeakSet\n};\n\nif (getProto) {\n\ttry {\n\t\tnull.error; // eslint-disable-line no-unused-expressions\n\t} catch (e) {\n\t\t// https://github.com/tc39/proposal-shadowrealm/pull/384#issuecomment-1364264229\n\t\tvar errorProto = getProto(getProto(e));\n\t\tINTRINSICS['%Error.prototype%'] = errorProto;\n\t}\n}\n\nvar doEval = function doEval(name) {\n\tvar value;\n\tif (name === '%AsyncFunction%') {\n\t\tvalue = getEvalledConstructor('async function () {}');\n\t} else if (name === '%GeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('function* () {}');\n\t} else if (name === '%AsyncGeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('async function* () {}');\n\t} else if (name === '%AsyncGenerator%') {\n\t\tvar fn = doEval('%AsyncGeneratorFunction%');\n\t\tif (fn) {\n\t\t\tvalue = fn.prototype;\n\t\t}\n\t} else if (name === '%AsyncIteratorPrototype%') {\n\t\tvar gen = doEval('%AsyncGenerator%');\n\t\tif (gen && getProto) {\n\t\t\tvalue = getProto(gen.prototype);\n\t\t}\n\t}\n\n\tINTRINSICS[name] = value;\n\n\treturn value;\n};\n\nvar LEGACY_ALIASES = {\n\t__proto__: null,\n\t'%ArrayBufferPrototype%': ['ArrayBuffer', 'prototype'],\n\t'%ArrayPrototype%': ['Array', 'prototype'],\n\t'%ArrayProto_entries%': ['Array', 'prototype', 'entries'],\n\t'%ArrayProto_forEach%': ['Array', 'prototype', 'forEach'],\n\t'%ArrayProto_keys%': ['Array', 'prototype', 'keys'],\n\t'%ArrayProto_values%': ['Array', 'prototype', 'values'],\n\t'%AsyncFunctionPrototype%': ['AsyncFunction', 'prototype'],\n\t'%AsyncGenerator%': ['AsyncGeneratorFunction', 'prototype'],\n\t'%AsyncGeneratorPrototype%': ['AsyncGeneratorFunction', 'prototype', 'prototype'],\n\t'%BooleanPrototype%': ['Boolean', 'prototype'],\n\t'%DataViewPrototype%': ['DataView', 'prototype'],\n\t'%DatePrototype%': ['Date', 'prototype'],\n\t'%ErrorPrototype%': ['Error', 'prototype'],\n\t'%EvalErrorPrototype%': ['EvalError', 'prototype'],\n\t'%Float32ArrayPrototype%': ['Float32Array', 'prototype'],\n\t'%Float64ArrayPrototype%': ['Float64Array', 'prototype'],\n\t'%FunctionPrototype%': ['Function', 'prototype'],\n\t'%Generator%': ['GeneratorFunction', 'prototype'],\n\t'%GeneratorPrototype%': ['GeneratorFunction', 'prototype', 'prototype'],\n\t'%Int8ArrayPrototype%': ['Int8Array', 'prototype'],\n\t'%Int16ArrayPrototype%': ['Int16Array', 'prototype'],\n\t'%Int32ArrayPrototype%': ['Int32Array', 'prototype'],\n\t'%JSONParse%': ['JSON', 'parse'],\n\t'%JSONStringify%': ['JSON', 'stringify'],\n\t'%MapPrototype%': ['Map', 'prototype'],\n\t'%NumberPrototype%': ['Number', 'prototype'],\n\t'%ObjectPrototype%': ['Object', 'prototype'],\n\t'%ObjProto_toString%': ['Object', 'prototype', 'toString'],\n\t'%ObjProto_valueOf%': ['Object', 'prototype', 'valueOf'],\n\t'%PromisePrototype%': ['Promise', 'prototype'],\n\t'%PromiseProto_then%': ['Promise', 'prototype', 'then'],\n\t'%Promise_all%': ['Promise', 'all'],\n\t'%Promise_reject%': ['Promise', 'reject'],\n\t'%Promise_resolve%': ['Promise', 'resolve'],\n\t'%RangeErrorPrototype%': ['RangeError', 'prototype'],\n\t'%ReferenceErrorPrototype%': ['ReferenceError', 'prototype'],\n\t'%RegExpPrototype%': ['RegExp', 'prototype'],\n\t'%SetPrototype%': ['Set', 'prototype'],\n\t'%SharedArrayBufferPrototype%': ['SharedArrayBuffer', 'prototype'],\n\t'%StringPrototype%': ['String', 'prototype'],\n\t'%SymbolPrototype%': ['Symbol', 'prototype'],\n\t'%SyntaxErrorPrototype%': ['SyntaxError', 'prototype'],\n\t'%TypedArrayPrototype%': ['TypedArray', 'prototype'],\n\t'%TypeErrorPrototype%': ['TypeError', 'prototype'],\n\t'%Uint8ArrayPrototype%': ['Uint8Array', 'prototype'],\n\t'%Uint8ClampedArrayPrototype%': ['Uint8ClampedArray', 'prototype'],\n\t'%Uint16ArrayPrototype%': ['Uint16Array', 'prototype'],\n\t'%Uint32ArrayPrototype%': ['Uint32Array', 'prototype'],\n\t'%URIErrorPrototype%': ['URIError', 'prototype'],\n\t'%WeakMapPrototype%': ['WeakMap', 'prototype'],\n\t'%WeakSetPrototype%': ['WeakSet', 'prototype']\n};\n\nvar bind = require('function-bind');\nvar hasOwn = require('hasown');\nvar $concat = bind.call(Function.call, Array.prototype.concat);\nvar $spliceApply = bind.call(Function.apply, Array.prototype.splice);\nvar $replace = bind.call(Function.call, String.prototype.replace);\nvar $strSlice = bind.call(Function.call, String.prototype.slice);\nvar $exec = bind.call(Function.call, RegExp.prototype.exec);\n\n/* adapted from https://github.com/lodash/lodash/blob/4.17.15/dist/lodash.js#L6735-L6744 */\nvar rePropName = /[^%.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|%$))/g;\nvar reEscapeChar = /\\\\(\\\\)?/g; /** Used to match backslashes in property paths. */\nvar stringToPath = function stringToPath(string) {\n\tvar first = $strSlice(string, 0, 1);\n\tvar last = $strSlice(string, -1);\n\tif (first === '%' && last !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected closing `%`');\n\t} else if (last === '%' && first !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected opening `%`');\n\t}\n\tvar result = [];\n\t$replace(string, rePropName, function (match, number, quote, subString) {\n\t\tresult[result.length] = quote ? $replace(subString, reEscapeChar, '$1') : number || match;\n\t});\n\treturn result;\n};\n/* end adaptation */\n\nvar getBaseIntrinsic = function getBaseIntrinsic(name, allowMissing) {\n\tvar intrinsicName = name;\n\tvar alias;\n\tif (hasOwn(LEGACY_ALIASES, intrinsicName)) {\n\t\talias = LEGACY_ALIASES[intrinsicName];\n\t\tintrinsicName = '%' + alias[0] + '%';\n\t}\n\n\tif (hasOwn(INTRINSICS, intrinsicName)) {\n\t\tvar value = INTRINSICS[intrinsicName];\n\t\tif (value === needsEval) {\n\t\t\tvalue = doEval(intrinsicName);\n\t\t}\n\t\tif (typeof value === 'undefined' && !allowMissing) {\n\t\t\tthrow new $TypeError('intrinsic ' + name + ' exists, but is not available. Please file an issue!');\n\t\t}\n\n\t\treturn {\n\t\t\talias: alias,\n\t\t\tname: intrinsicName,\n\t\t\tvalue: value\n\t\t};\n\t}\n\n\tthrow new $SyntaxError('intrinsic ' + name + ' does not exist!');\n};\n\nmodule.exports = function GetIntrinsic(name, allowMissing) {\n\tif (typeof name !== 'string' || name.length === 0) {\n\t\tthrow new $TypeError('intrinsic name must be a non-empty string');\n\t}\n\tif (arguments.length > 1 && typeof allowMissing !== 'boolean') {\n\t\tthrow new $TypeError('\"allowMissing\" argument must be a boolean');\n\t}\n\n\tif ($exec(/^%?[^%]*%?$/, name) === null) {\n\t\tthrow new $SyntaxError('`%` may not be present anywhere but at the beginning and end of the intrinsic name');\n\t}\n\tvar parts = stringToPath(name);\n\tvar intrinsicBaseName = parts.length > 0 ? parts[0] : '';\n\n\tvar intrinsic = getBaseIntrinsic('%' + intrinsicBaseName + '%', allowMissing);\n\tvar intrinsicRealName = intrinsic.name;\n\tvar value = intrinsic.value;\n\tvar skipFurtherCaching = false;\n\n\tvar alias = intrinsic.alias;\n\tif (alias) {\n\t\tintrinsicBaseName = alias[0];\n\t\t$spliceApply(parts, $concat([0, 1], alias));\n\t}\n\n\tfor (var i = 1, isOwn = true; i < parts.length; i += 1) {\n\t\tvar part = parts[i];\n\t\tvar first = $strSlice(part, 0, 1);\n\t\tvar last = $strSlice(part, -1);\n\t\tif (\n\t\t\t(\n\t\t\t\t(first === '\"' || first === \"'\" || first === '`')\n\t\t\t\t|| (last === '\"' || last === \"'\" || last === '`')\n\t\t\t)\n\t\t\t&& first !== last\n\t\t) {\n\t\t\tthrow new $SyntaxError('property names with quotes must have matching quotes');\n\t\t}\n\t\tif (part === 'constructor' || !isOwn) {\n\t\t\tskipFurtherCaching = true;\n\t\t}\n\n\t\tintrinsicBaseName += '.' + part;\n\t\tintrinsicRealName = '%' + intrinsicBaseName + '%';\n\n\t\tif (hasOwn(INTRINSICS, intrinsicRealName)) {\n\t\t\tvalue = INTRINSICS[intrinsicRealName];\n\t\t} else if (value != null) {\n\t\t\tif (!(part in value)) {\n\t\t\t\tif (!allowMissing) {\n\t\t\t\t\tthrow new $TypeError('base intrinsic for ' + name + ' exists, but the property is not available.');\n\t\t\t\t}\n\t\t\t\treturn void undefined;\n\t\t\t}\n\t\t\tif ($gOPD && (i + 1) >= parts.length) {\n\t\t\t\tvar desc = $gOPD(value, part);\n\t\t\t\tisOwn = !!desc;\n\n\t\t\t\t// By convention, when a data property is converted to an accessor\n\t\t\t\t// property to emulate a data property that does not suffer from\n\t\t\t\t// the override mistake, that accessor's getter is marked with\n\t\t\t\t// an `originalValue` property. Here, when we detect this, we\n\t\t\t\t// uphold the illusion by pretending to see that original data\n\t\t\t\t// property, i.e., returning the value rather than the getter\n\t\t\t\t// itself.\n\t\t\t\tif (isOwn && 'get' in desc && !('originalValue' in desc.get)) {\n\t\t\t\t\tvalue = desc.get;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = value[part];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tisOwn = hasOwn(value, part);\n\t\t\t\tvalue = value[part];\n\t\t\t}\n\n\t\t\tif (isOwn && !skipFurtherCaching) {\n\t\t\t\tINTRINSICS[intrinsicRealName] = value;\n\t\t\t}\n\t\t}\n\t}\n\treturn value;\n};\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\n/** @type {import('.')} */\nvar $defineProperty = GetIntrinsic('%Object.defineProperty%', true) || false;\nif ($defineProperty) {\n\ttry {\n\t\t$defineProperty({}, 'a', { value: 1 });\n\t} catch (e) {\n\t\t// IE 8 has a broken defineProperty\n\t\t$defineProperty = false;\n\t}\n}\n\nmodule.exports = $defineProperty;\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar $gOPD = GetIntrinsic('%Object.getOwnPropertyDescriptor%', true);\n\nif ($gOPD) {\n\ttry {\n\t\t$gOPD([], 'length');\n\t} catch (e) {\n\t\t// IE 8 has a broken gOPD\n\t\t$gOPD = null;\n\t}\n}\n\nmodule.exports = $gOPD;\n","'use strict';\n\nvar $defineProperty = require('es-define-property');\n\nvar $SyntaxError = require('es-errors/syntax');\nvar $TypeError = require('es-errors/type');\n\nvar gopd = require('gopd');\n\n/** @type {import('.')} */\nmodule.exports = function defineDataProperty(\n\tobj,\n\tproperty,\n\tvalue\n) {\n\tif (!obj || (typeof obj !== 'object' && typeof obj !== 'function')) {\n\t\tthrow new $TypeError('`obj` must be an object or a function`');\n\t}\n\tif (typeof property !== 'string' && typeof property !== 'symbol') {\n\t\tthrow new $TypeError('`property` must be a string or a symbol`');\n\t}\n\tif (arguments.length > 3 && typeof arguments[3] !== 'boolean' && arguments[3] !== null) {\n\t\tthrow new $TypeError('`nonEnumerable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 4 && typeof arguments[4] !== 'boolean' && arguments[4] !== null) {\n\t\tthrow new $TypeError('`nonWritable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 5 && typeof arguments[5] !== 'boolean' && arguments[5] !== null) {\n\t\tthrow new $TypeError('`nonConfigurable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 6 && typeof arguments[6] !== 'boolean') {\n\t\tthrow new $TypeError('`loose`, if provided, must be a boolean');\n\t}\n\n\tvar nonEnumerable = arguments.length > 3 ? arguments[3] : null;\n\tvar nonWritable = arguments.length > 4 ? arguments[4] : null;\n\tvar nonConfigurable = arguments.length > 5 ? arguments[5] : null;\n\tvar loose = arguments.length > 6 ? arguments[6] : false;\n\n\t/* @type {false | TypedPropertyDescriptor<unknown>} */\n\tvar desc = !!gopd && gopd(obj, property);\n\n\tif ($defineProperty) {\n\t\t$defineProperty(obj, property, {\n\t\t\tconfigurable: nonConfigurable === null && desc ? desc.configurable : !nonConfigurable,\n\t\t\tenumerable: nonEnumerable === null && desc ? desc.enumerable : !nonEnumerable,\n\t\t\tvalue: value,\n\t\t\twritable: nonWritable === null && desc ? desc.writable : !nonWritable\n\t\t});\n\t} else if (loose || (!nonEnumerable && !nonWritable && !nonConfigurable)) {\n\t\t// must fall back to [[Set]], and was not explicitly asked to make non-enumerable, non-writable, or non-configurable\n\t\tobj[property] = value; // eslint-disable-line no-param-reassign\n\t} else {\n\t\tthrow new $SyntaxError('This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.');\n\t}\n};\n","'use strict';\n\nvar $defineProperty = require('es-define-property');\n\nvar hasPropertyDescriptors = function hasPropertyDescriptors() {\n\treturn !!$defineProperty;\n};\n\nhasPropertyDescriptors.hasArrayLengthDefineBug = function hasArrayLengthDefineBug() {\n\t// node v0.6 has a bug where array lengths can be Set but not Defined\n\tif (!$defineProperty) {\n\t\treturn null;\n\t}\n\ttry {\n\t\treturn $defineProperty([], 'length', { value: 1 }).length !== 1;\n\t} catch (e) {\n\t\t// In Firefox 4-22, defining length on an array throws an exception.\n\t\treturn true;\n\t}\n};\n\nmodule.exports = hasPropertyDescriptors;\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\nvar define = require('define-data-property');\nvar hasDescriptors = require('has-property-descriptors')();\nvar gOPD = require('gopd');\n\nvar $TypeError = require('es-errors/type');\nvar $floor = GetIntrinsic('%Math.floor%');\n\n/** @typedef {(...args: unknown[]) => unknown} Func */\n\n/** @type {<T extends Func = Func>(fn: T, length: number, loose?: boolean) => T} */\nmodule.exports = function setFunctionLength(fn, length) {\n\tif (typeof fn !== 'function') {\n\t\tthrow new $TypeError('`fn` is not a function');\n\t}\n\tif (typeof length !== 'number' || length < 0 || length > 0xFFFFFFFF || $floor(length) !== length) {\n\t\tthrow new $TypeError('`length` must be a positive 32-bit integer');\n\t}\n\n\tvar loose = arguments.length > 2 && !!arguments[2];\n\n\tvar functionLengthIsConfigurable = true;\n\tvar functionLengthIsWritable = true;\n\tif ('length' in fn && gOPD) {\n\t\tvar desc = gOPD(fn, 'length');\n\t\tif (desc && !desc.configurable) {\n\t\t\tfunctionLengthIsConfigurable = false;\n\t\t}\n\t\tif (desc && !desc.writable) {\n\t\t\tfunctionLengthIsWritable = false;\n\t\t}\n\t}\n\n\tif (functionLengthIsConfigurable || functionLengthIsWritable || !loose) {\n\t\tif (hasDescriptors) {\n\t\t\tdefine(/** @type {Parameters<define>[0]} */ (fn), 'length', length, true, true);\n\t\t} else {\n\t\t\tdefine(/** @type {Parameters<define>[0]} */ (fn), 'length', length);\n\t\t}\n\t}\n\treturn fn;\n};\n","'use strict';\n\nvar bind = require('function-bind');\nvar GetIntrinsic = require('get-intrinsic');\nvar setFunctionLength = require('set-function-length');\n\nvar $TypeError = require('es-errors/type');\nvar $apply = GetIntrinsic('%Function.prototype.apply%');\nvar $call = GetIntrinsic('%Function.prototype.call%');\nvar $reflectApply = GetIntrinsic('%Reflect.apply%', true) || bind.call($call, $apply);\n\nvar $defineProperty = require('es-define-property');\nvar $max = GetIntrinsic('%Math.max%');\n\nmodule.exports = function callBind(originalFunction) {\n\tif (typeof originalFunction !== 'function') {\n\t\tthrow new $TypeError('a function is required');\n\t}\n\tvar func = $reflectApply(bind, $call, arguments);\n\treturn setFunctionLength(\n\t\tfunc,\n\t\t1 + $max(0, originalFunction.length - (arguments.length - 1)),\n\t\ttrue\n\t);\n};\n\nvar applyBind = function applyBind() {\n\treturn $reflectApply(bind, $apply, arguments);\n};\n\nif ($defineProperty) {\n\t$defineProperty(module.exports, 'apply', { value: applyBind });\n} else {\n\tmodule.exports.apply = applyBind;\n}\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar callBind = require('./');\n\nvar $indexOf = callBind(GetIntrinsic('String.prototype.indexOf'));\n\nmodule.exports = function callBoundIntrinsic(name, allowMissing) {\n\tvar intrinsic = GetIntrinsic(name, !!allowMissing);\n\tif (typeof intrinsic === 'function' && $indexOf(name, '.prototype.') > -1) {\n\t\treturn callBind(intrinsic);\n\t}\n\treturn intrinsic;\n};\n","'use strict';\n\nvar hasToStringTag = require('has-tostringtag/shams')();\nvar callBound = require('call-bind/callBound');\n\nvar $toString = callBound('Object.prototype.toString');\n\nvar isStandardArguments = function isArguments(value) {\n\tif (hasToStringTag && value && typeof value === 'object' && Symbol.toStringTag in value) {\n\t\treturn false;\n\t}\n\treturn $toString(value) === '[object Arguments]';\n};\n\nvar isLegacyArguments = function isArguments(value) {\n\tif (isStandardArguments(value)) {\n\t\treturn true;\n\t}\n\treturn value !== null &&\n\t\ttypeof value === 'object' &&\n\t\ttypeof value.length === 'number' &&\n\t\tvalue.length >= 0 &&\n\t\t$toString(value) !== '[object Array]' &&\n\t\t$toString(value.callee) === '[object Function]';\n};\n\nvar supportsStandardArguments = (function () {\n\treturn isStandardArguments(arguments);\n}());\n\nisStandardArguments.isLegacyArguments = isLegacyArguments; // for tests\n\nmodule.exports = supportsStandardArguments ? isStandardArguments : isLegacyArguments;\n","'use strict';\n\nvar toStr = Object.prototype.toString;\nvar fnToStr = Function.prototype.toString;\nvar isFnRegex = /^\\s*(?:function)?\\*/;\nvar hasToStringTag = require('has-tostringtag/shams')();\nvar getProto = Object.getPrototypeOf;\nvar getGeneratorFunc = function () { // eslint-disable-line consistent-return\n\tif (!hasToStringTag) {\n\t\treturn false;\n\t}\n\ttry {\n\t\treturn Function('return function*() {}')();\n\t} catch (e) {\n\t}\n};\nvar GeneratorFunction;\n\nmodule.exports = function isGeneratorFunction(fn) {\n\tif (typeof fn !== 'function') {\n\t\treturn false;\n\t}\n\tif (isFnRegex.test(fnToStr.call(fn))) {\n\t\treturn true;\n\t}\n\tif (!hasToStringTag) {\n\t\tvar str = toStr.call(fn);\n\t\treturn str === '[object GeneratorFunction]';\n\t}\n\tif (!getProto) {\n\t\treturn false;\n\t}\n\tif (typeof GeneratorFunction === 'undefined') {\n\t\tvar generatorFunc = getGeneratorFunc();\n\t\tGeneratorFunction = generatorFunc ? getProto(generatorFunc) : false;\n\t}\n\treturn getProto(fn) === GeneratorFunction;\n};\n","'use strict';\n\nvar fnToStr = Function.prototype.toString;\nvar reflectApply = typeof Reflect === 'object' && Reflect !== null && Reflect.apply;\nvar badArrayLike;\nvar isCallableMarker;\nif (typeof reflectApply === 'function' && typeof Object.defineProperty === 'function') {\n\ttry {\n\t\tbadArrayLike = Object.defineProperty({}, 'length', {\n\t\t\tget: function () {\n\t\t\t\tthrow isCallableMarker;\n\t\t\t}\n\t\t});\n\t\tisCallableMarker = {};\n\t\t// eslint-disable-next-line no-throw-literal\n\t\treflectApply(function () { throw 42; }, null, badArrayLike);\n\t} catch (_) {\n\t\tif (_ !== isCallableMarker) {\n\t\t\treflectApply = null;\n\t\t}\n\t}\n} else {\n\treflectApply = null;\n}\n\nvar constructorRegex = /^\\s*class\\b/;\nvar isES6ClassFn = function isES6ClassFunction(value) {\n\ttry {\n\t\tvar fnStr = fnToStr.call(value);\n\t\treturn constructorRegex.test(fnStr);\n\t} catch (e) {\n\t\treturn false; // not a function\n\t}\n};\n\nvar tryFunctionObject = function tryFunctionToStr(value) {\n\ttry {\n\t\tif (isES6ClassFn(value)) { return false; }\n\t\tfnToStr.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\nvar toStr = Object.prototype.toString;\nvar objectClass = '[object Object]';\nvar fnClass = '[object Function]';\nvar genClass = '[object GeneratorFunction]';\nvar ddaClass = '[object HTMLAllCollection]'; // IE 11\nvar ddaClass2 = '[object HTML document.all class]';\nvar ddaClass3 = '[object HTMLCollection]'; // IE 9-10\nvar hasToStringTag = typeof Symbol === 'function' && !!Symbol.toStringTag; // better: use `has-tostringtag`\n\nvar isIE68 = !(0 in [,]); // eslint-disable-line no-sparse-arrays, comma-spacing\n\nvar isDDA = function isDocumentDotAll() { return false; };\nif (typeof document === 'object') {\n\t// Firefox 3 canonicalizes DDA to undefined when it's not accessed directly\n\tvar all = document.all;\n\tif (toStr.call(all) === toStr.call(document.all)) {\n\t\tisDDA = function isDocumentDotAll(value) {\n\t\t\t/* globals document: false */\n\t\t\t// in IE 6-8, typeof document.all is \"object\" and it's truthy\n\t\t\tif ((isIE68 || !value) && (typeof value === 'undefined' || typeof value === 'object')) {\n\t\t\t\ttry {\n\t\t\t\t\tvar str = toStr.call(value);\n\t\t\t\t\treturn (\n\t\t\t\t\t\tstr === ddaClass\n\t\t\t\t\t\t|| str === ddaClass2\n\t\t\t\t\t\t|| str === ddaClass3 // opera 12.16\n\t\t\t\t\t\t|| str === objectClass // IE 6-8\n\t\t\t\t\t) && value('') == null; // eslint-disable-line eqeqeq\n\t\t\t\t} catch (e) { /**/ }\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t}\n}\n\nmodule.exports = reflectApply\n\t? function isCallable(value) {\n\t\tif (isDDA(value)) { return true; }\n\t\tif (!value) { return false; }\n\t\tif (typeof value !== 'function' && typeof value !== 'object') { return false; }\n\t\ttry {\n\t\t\treflectApply(value, null, badArrayLike);\n\t\t} catch (e) {\n\t\t\tif (e !== isCallableMarker) { return false; }\n\t\t}\n\t\treturn !isES6ClassFn(value) && tryFunctionObject(value);\n\t}\n\t: function isCallable(value) {\n\t\tif (isDDA(value)) { return true; }\n\t\tif (!value) { return false; }\n\t\tif (typeof value !== 'function' && typeof value !== 'object') { return false; }\n\t\tif (hasToStringTag) { return tryFunctionObject(value); }\n\t\tif (isES6ClassFn(value)) { return false; }\n\t\tvar strClass = toStr.call(value);\n\t\tif (strClass !== fnClass && strClass !== genClass && !(/^\\[object HTML/).test(strClass)) { return false; }\n\t\treturn tryFunctionObject(value);\n\t};\n","'use strict';\n\nvar isCallable = require('is-callable');\n\nvar toStr = Object.prototype.toString;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar forEachArray = function forEachArray(array, iterator, receiver) {\n    for (var i = 0, len = array.length; i < len; i++) {\n        if (hasOwnProperty.call(array, i)) {\n            if (receiver == null) {\n                iterator(array[i], i, array);\n            } else {\n                iterator.call(receiver, array[i], i, array);\n            }\n        }\n    }\n};\n\nvar forEachString = function forEachString(string, iterator, receiver) {\n    for (var i = 0, len = string.length; i < len; i++) {\n        // no such thing as a sparse string.\n        if (receiver == null) {\n            iterator(string.charAt(i), i, string);\n        } else {\n            iterator.call(receiver, string.charAt(i), i, string);\n        }\n    }\n};\n\nvar forEachObject = function forEachObject(object, iterator, receiver) {\n    for (var k in object) {\n        if (hasOwnProperty.call(object, k)) {\n            if (receiver == null) {\n                iterator(object[k], k, object);\n            } else {\n                iterator.call(receiver, object[k], k, object);\n            }\n        }\n    }\n};\n\nvar forEach = function forEach(list, iterator, thisArg) {\n    if (!isCallable(iterator)) {\n        throw new TypeError('iterator must be a function');\n    }\n\n    var receiver;\n    if (arguments.length >= 3) {\n        receiver = thisArg;\n    }\n\n    if (toStr.call(list) === '[object Array]') {\n        forEachArray(list, iterator, receiver);\n    } else if (typeof list === 'string') {\n        forEachString(list, iterator, receiver);\n    } else {\n        forEachObject(list, iterator, receiver);\n    }\n};\n\nmodule.exports = forEach;\n","'use strict';\n\n/** @type {import('.')} */\nmodule.exports = [\n\t'Float32Array',\n\t'Float64Array',\n\t'Int8Array',\n\t'Int16Array',\n\t'Int32Array',\n\t'Uint8Array',\n\t'Uint8ClampedArray',\n\t'Uint16Array',\n\t'Uint32Array',\n\t'BigInt64Array',\n\t'BigUint64Array'\n];\n","'use strict';\n\nvar possibleNames = require('possible-typed-array-names');\n\nvar g = typeof globalThis === 'undefined' ? global : globalThis;\n\n/** @type {import('.')} */\nmodule.exports = function availableTypedArrays() {\n\tvar /** @type {ReturnType<typeof availableTypedArrays>} */ out = [];\n\tfor (var i = 0; i < possibleNames.length; i++) {\n\t\tif (typeof g[possibleNames[i]] === 'function') {\n\t\t\t// @ts-expect-error\n\t\t\tout[out.length] = possibleNames[i];\n\t\t}\n\t}\n\treturn out;\n};\n","'use strict';\n\nvar forEach = require('for-each');\nvar availableTypedArrays = require('available-typed-arrays');\nvar callBind = require('call-bind');\nvar callBound = require('call-bind/callBound');\nvar gOPD = require('gopd');\n\nvar $toString = callBound('Object.prototype.toString');\nvar hasToStringTag = require('has-tostringtag/shams')();\n\nvar g = typeof globalThis === 'undefined' ? global : globalThis;\nvar typedArrays = availableTypedArrays();\n\nvar $slice = callBound('String.prototype.slice');\nvar getPrototypeOf = Object.getPrototypeOf; // require('getprototypeof');\n\nvar $indexOf = callBound('Array.prototype.indexOf', true) || /** @type {(array: readonly unknown[], value: unknown) => keyof array} */ function indexOf(array, value) {\n\tfor (var i = 0; i < array.length; i += 1) {\n\t\tif (array[i] === value) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n};\n\n/** @typedef {Int8Array | Uint8Array | Uint8ClampedArray | Int16Array | Uint16Array | Int32Array | Uint32Array | Float32Array | Float64Array | BigInt64Array | BigUint64Array} TypedArray */\n/** @typedef {'Int8Array' | 'Uint8Array' | 'Uint8ClampedArray' | 'Int16Array' | 'Uint16Array' | 'Int32Array' | 'Uint32Array' | 'Float32Array' | 'Float64Array' | 'BigInt64Array' | 'BigUint64Array'} TypedArrayName */\n/** @type {{ [k in `\\$${TypedArrayName}`]?: (receiver: TypedArray) => string | typeof Uint8Array.prototype.slice.call | typeof Uint8Array.prototype.set.call } & { __proto__: null }} */\nvar cache = { __proto__: null };\nif (hasToStringTag && gOPD && getPrototypeOf) {\n\tforEach(typedArrays, function (typedArray) {\n\t\tvar arr = new g[typedArray]();\n\t\tif (Symbol.toStringTag in arr) {\n\t\t\tvar proto = getPrototypeOf(arr);\n\t\t\t// @ts-expect-error TS won't narrow inside a closure\n\t\t\tvar descriptor = gOPD(proto, Symbol.toStringTag);\n\t\t\tif (!descriptor) {\n\t\t\t\tvar superProto = getPrototypeOf(proto);\n\t\t\t\t// @ts-expect-error TS won't narrow inside a closure\n\t\t\t\tdescriptor = gOPD(superProto, Symbol.toStringTag);\n\t\t\t}\n\t\t\t// @ts-expect-error TODO: fix\n\t\t\tcache['$' + typedArray] = callBind(descriptor.get);\n\t\t}\n\t});\n} else {\n\tforEach(typedArrays, function (typedArray) {\n\t\tvar arr = new g[typedArray]();\n\t\tvar fn = arr.slice || arr.set;\n\t\tif (fn) {\n\t\t\t// @ts-expect-error TODO: fix\n\t\t\tcache['$' + typedArray] = callBind(fn);\n\t\t}\n\t});\n}\n\n/** @type {import('.')} */\nvar tryTypedArrays = function tryAllTypedArrays(value) {\n\t/** @type {ReturnType<tryAllTypedArrays>} */ var found = false;\n\tforEach(\n\t\t// eslint-disable-next-line no-extra-parens\n\t\t/** @type {Record<`\\$${TypedArrayName}`, typeof cache>} */ /** @type {any} */ (cache),\n\t\t/** @type {(getter: typeof cache, name: `\\$${TypedArrayName}`) => void} */ function (getter, typedArray) {\n\t\t\tif (!found) {\n\t\t\t\ttry {\n\t\t\t\t// @ts-expect-error TODO: fix\n\t\t\t\t\tif ('$' + getter(value) === typedArray) {\n\t\t\t\t\t\tfound = $slice(typedArray, 1);\n\t\t\t\t\t}\n\t\t\t\t} catch (e) { /**/ }\n\t\t\t}\n\t\t}\n\t);\n\treturn found;\n};\n\n/** @type {import('.')} */\nvar trySlices = function tryAllSlices(value) {\n\t/** @type {ReturnType<tryAllSlices>} */ var found = false;\n\tforEach(\n\t\t// eslint-disable-next-line no-extra-parens\n\t\t/** @type {any} */ (cache),\n\t\t/** @type {(getter: typeof cache, name: `\\$${TypedArrayName}`) => void} */ function (getter, name) {\n\t\t\tif (!found) {\n\t\t\t\ttry {\n\t\t\t\t// @ts-expect-error TODO: fix\n\t\t\t\t\tgetter(value);\n\t\t\t\t\tfound = $slice(name, 1);\n\t\t\t\t} catch (e) { /**/ }\n\t\t\t}\n\t\t}\n\t);\n\treturn found;\n};\n\n/** @type {import('.')} */\nmodule.exports = function whichTypedArray(value) {\n\tif (!value || typeof value !== 'object') { return false; }\n\tif (!hasToStringTag) {\n\t\tvar tag = $slice($toString(value), 8, -1);\n\t\tif ($indexOf(typedArrays, tag) > -1) {\n\t\t\treturn tag;\n\t\t}\n\t\tif (tag !== 'Object') {\n\t\t\treturn false;\n\t\t}\n\t\t// node < 0.6 hits here on real Typed Arrays\n\t\treturn trySlices(value);\n\t}\n\tif (!gOPD) { return null; } // unknown engine\n\treturn tryTypedArrays(value);\n};\n","'use strict';\n\nvar whichTypedArray = require('which-typed-array');\n\n/** @type {import('.')} */\nmodule.exports = function isTypedArray(value) {\n\treturn !!whichTypedArray(value);\n};\n","// Currently in sync with Node.js lib/internal/util/types.js\n// https://github.com/nodejs/node/commit/112cc7c27551254aa2b17098fb774867f05ed0d9\n\n'use strict';\n\nvar isArgumentsObject = require('is-arguments');\nvar isGeneratorFunction = require('is-generator-function');\nvar whichTypedArray = require('which-typed-array');\nvar isTypedArray = require('is-typed-array');\n\nfunction uncurryThis(f) {\n  return f.call.bind(f);\n}\n\nvar BigIntSupported = typeof BigInt !== 'undefined';\nvar SymbolSupported = typeof Symbol !== 'undefined';\n\nvar ObjectToString = uncurryThis(Object.prototype.toString);\n\nvar numberValue = uncurryThis(Number.prototype.valueOf);\nvar stringValue = uncurryThis(String.prototype.valueOf);\nvar booleanValue = uncurryThis(Boolean.prototype.valueOf);\n\nif (BigIntSupported) {\n  var bigIntValue = uncurryThis(BigInt.prototype.valueOf);\n}\n\nif (SymbolSupported) {\n  var symbolValue = uncurryThis(Symbol.prototype.valueOf);\n}\n\nfunction checkBoxedPrimitive(value, prototypeValueOf) {\n  if (typeof value !== 'object') {\n    return false;\n  }\n  try {\n    prototypeValueOf(value);\n    return true;\n  } catch(e) {\n    return false;\n  }\n}\n\nexports.isArgumentsObject = isArgumentsObject;\nexports.isGeneratorFunction = isGeneratorFunction;\nexports.isTypedArray = isTypedArray;\n\n// Taken from here and modified for better browser support\n// https://github.com/sindresorhus/p-is-promise/blob/cda35a513bda03f977ad5cde3a079d237e82d7ef/index.js\nfunction isPromise(input) {\n\treturn (\n\t\t(\n\t\t\ttypeof Promise !== 'undefined' &&\n\t\t\tinput instanceof Promise\n\t\t) ||\n\t\t(\n\t\t\tinput !== null &&\n\t\t\ttypeof input === 'object' &&\n\t\t\ttypeof input.then === 'function' &&\n\t\t\ttypeof input.catch === 'function'\n\t\t)\n\t);\n}\nexports.isPromise = isPromise;\n\nfunction isArrayBufferView(value) {\n  if (typeof ArrayBuffer !== 'undefined' && ArrayBuffer.isView) {\n    return ArrayBuffer.isView(value);\n  }\n\n  return (\n    isTypedArray(value) ||\n    isDataView(value)\n  );\n}\nexports.isArrayBufferView = isArrayBufferView;\n\n\nfunction isUint8Array(value) {\n  return whichTypedArray(value) === 'Uint8Array';\n}\nexports.isUint8Array = isUint8Array;\n\nfunction isUint8ClampedArray(value) {\n  return whichTypedArray(value) === 'Uint8ClampedArray';\n}\nexports.isUint8ClampedArray = isUint8ClampedArray;\n\nfunction isUint16Array(value) {\n  return whichTypedArray(value) === 'Uint16Array';\n}\nexports.isUint16Array = isUint16Array;\n\nfunction isUint32Array(value) {\n  return whichTypedArray(value) === 'Uint32Array';\n}\nexports.isUint32Array = isUint32Array;\n\nfunction isInt8Array(value) {\n  return whichTypedArray(value) === 'Int8Array';\n}\nexports.isInt8Array = isInt8Array;\n\nfunction isInt16Array(value) {\n  return whichTypedArray(value) === 'Int16Array';\n}\nexports.isInt16Array = isInt16Array;\n\nfunction isInt32Array(value) {\n  return whichTypedArray(value) === 'Int32Array';\n}\nexports.isInt32Array = isInt32Array;\n\nfunction isFloat32Array(value) {\n  return whichTypedArray(value) === 'Float32Array';\n}\nexports.isFloat32Array = isFloat32Array;\n\nfunction isFloat64Array(value) {\n  return whichTypedArray(value) === 'Float64Array';\n}\nexports.isFloat64Array = isFloat64Array;\n\nfunction isBigInt64Array(value) {\n  return whichTypedArray(value) === 'BigInt64Array';\n}\nexports.isBigInt64Array = isBigInt64Array;\n\nfunction isBigUint64Array(value) {\n  return whichTypedArray(value) === 'BigUint64Array';\n}\nexports.isBigUint64Array = isBigUint64Array;\n\nfunction isMapToString(value) {\n  return ObjectToString(value) === '[object Map]';\n}\nisMapToString.working = (\n  typeof Map !== 'undefined' &&\n  isMapToString(new Map())\n);\n\nfunction isMap(value) {\n  if (typeof Map === 'undefined') {\n    return false;\n  }\n\n  return isMapToString.working\n    ? isMapToString(value)\n    : value instanceof Map;\n}\nexports.isMap = isMap;\n\nfunction isSetToString(value) {\n  return ObjectToString(value) === '[object Set]';\n}\nisSetToString.working = (\n  typeof Set !== 'undefined' &&\n  isSetToString(new Set())\n);\nfunction isSet(value) {\n  if (typeof Set === 'undefined') {\n    return false;\n  }\n\n  return isSetToString.working\n    ? isSetToString(value)\n    : value instanceof Set;\n}\nexports.isSet = isSet;\n\nfunction isWeakMapToString(value) {\n  return ObjectToString(value) === '[object WeakMap]';\n}\nisWeakMapToString.working = (\n  typeof WeakMap !== 'undefined' &&\n  isWeakMapToString(new WeakMap())\n);\nfunction isWeakMap(value) {\n  if (typeof WeakMap === 'undefined') {\n    return false;\n  }\n\n  return isWeakMapToString.working\n    ? isWeakMapToString(value)\n    : value instanceof WeakMap;\n}\nexports.isWeakMap = isWeakMap;\n\nfunction isWeakSetToString(value) {\n  return ObjectToString(value) === '[object WeakSet]';\n}\nisWeakSetToString.working = (\n  typeof WeakSet !== 'undefined' &&\n  isWeakSetToString(new WeakSet())\n);\nfunction isWeakSet(value) {\n  return isWeakSetToString(value);\n}\nexports.isWeakSet = isWeakSet;\n\nfunction isArrayBufferToString(value) {\n  return ObjectToString(value) === '[object ArrayBuffer]';\n}\nisArrayBufferToString.working = (\n  typeof ArrayBuffer !== 'undefined' &&\n  isArrayBufferToString(new ArrayBuffer())\n);\nfunction isArrayBuffer(value) {\n  if (typeof ArrayBuffer === 'undefined') {\n    return false;\n  }\n\n  return isArrayBufferToString.working\n    ? isArrayBufferToString(value)\n    : value instanceof ArrayBuffer;\n}\nexports.isArrayBuffer = isArrayBuffer;\n\nfunction isDataViewToString(value) {\n  return ObjectToString(value) === '[object DataView]';\n}\nisDataViewToString.working = (\n  typeof ArrayBuffer !== 'undefined' &&\n  typeof DataView !== 'undefined' &&\n  isDataViewToString(new DataView(new ArrayBuffer(1), 0, 1))\n);\nfunction isDataView(value) {\n  if (typeof DataView === 'undefined') {\n    return false;\n  }\n\n  return isDataViewToString.working\n    ? isDataViewToString(value)\n    : value instanceof DataView;\n}\nexports.isDataView = isDataView;\n\n// Store a copy of SharedArrayBuffer in case it's deleted elsewhere\nvar SharedArrayBufferCopy = typeof SharedArrayBuffer !== 'undefined' ? SharedArrayBuffer : undefined;\nfunction isSharedArrayBufferToString(value) {\n  return ObjectToString(value) === '[object SharedArrayBuffer]';\n}\nfunction isSharedArrayBuffer(value) {\n  if (typeof SharedArrayBufferCopy === 'undefined') {\n    return false;\n  }\n\n  if (typeof isSharedArrayBufferToString.working === 'undefined') {\n    isSharedArrayBufferToString.working = isSharedArrayBufferToString(new SharedArrayBufferCopy());\n  }\n\n  return isSharedArrayBufferToString.working\n    ? isSharedArrayBufferToString(value)\n    : value instanceof SharedArrayBufferCopy;\n}\nexports.isSharedArrayBuffer = isSharedArrayBuffer;\n\nfunction isAsyncFunction(value) {\n  return ObjectToString(value) === '[object AsyncFunction]';\n}\nexports.isAsyncFunction = isAsyncFunction;\n\nfunction isMapIterator(value) {\n  return ObjectToString(value) === '[object Map Iterator]';\n}\nexports.isMapIterator = isMapIterator;\n\nfunction isSetIterator(value) {\n  return ObjectToString(value) === '[object Set Iterator]';\n}\nexports.isSetIterator = isSetIterator;\n\nfunction isGeneratorObject(value) {\n  return ObjectToString(value) === '[object Generator]';\n}\nexports.isGeneratorObject = isGeneratorObject;\n\nfunction isWebAssemblyCompiledModule(value) {\n  return ObjectToString(value) === '[object WebAssembly.Module]';\n}\nexports.isWebAssemblyCompiledModule = isWebAssemblyCompiledModule;\n\nfunction isNumberObject(value) {\n  return checkBoxedPrimitive(value, numberValue);\n}\nexports.isNumberObject = isNumberObject;\n\nfunction isStringObject(value) {\n  return checkBoxedPrimitive(value, stringValue);\n}\nexports.isStringObject = isStringObject;\n\nfunction isBooleanObject(value) {\n  return checkBoxedPrimitive(value, booleanValue);\n}\nexports.isBooleanObject = isBooleanObject;\n\nfunction isBigIntObject(value) {\n  return BigIntSupported && checkBoxedPrimitive(value, bigIntValue);\n}\nexports.isBigIntObject = isBigIntObject;\n\nfunction isSymbolObject(value) {\n  return SymbolSupported && checkBoxedPrimitive(value, symbolValue);\n}\nexports.isSymbolObject = isSymbolObject;\n\nfunction isBoxedPrimitive(value) {\n  return (\n    isNumberObject(value) ||\n    isStringObject(value) ||\n    isBooleanObject(value) ||\n    isBigIntObject(value) ||\n    isSymbolObject(value)\n  );\n}\nexports.isBoxedPrimitive = isBoxedPrimitive;\n\nfunction isAnyArrayBuffer(value) {\n  return typeof Uint8Array !== 'undefined' && (\n    isArrayBuffer(value) ||\n    isSharedArrayBuffer(value)\n  );\n}\nexports.isAnyArrayBuffer = isAnyArrayBuffer;\n\n['isProxy', 'isExternal', 'isModuleNamespaceObject'].forEach(function(method) {\n  Object.defineProperty(exports, method, {\n    enumerable: false,\n    value: function() {\n      throw new Error(method + ' is not supported in userland');\n    }\n  });\n});\n","module.exports = function isBuffer(arg) {\n  return arg instanceof Buffer;\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","try {\n  var util = require('util');\n  /* istanbul ignore next */\n  if (typeof util.inherits !== 'function') throw '';\n  module.exports = util.inherits;\n} catch (e) {\n  /* istanbul ignore next */\n  module.exports = require('./inherits_browser.js');\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnvRegex = /^$/;\n\nif (process.env.NODE_DEBUG) {\n  var debugEnv = process.env.NODE_DEBUG;\n  debugEnv = debugEnv.replace(/[|\\\\{}()[\\]^$+?.]/g, '\\\\$&')\n    .replace(/\\*/g, '.*')\n    .replace(/,/g, '$|^')\n    .toUpperCase();\n  debugEnvRegex = new RegExp('^' + debugEnv + '$', 'i');\n}\nexports.debuglog = function(set) {\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (debugEnvRegex.test(set)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').slice(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.slice(1, -1);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nexports.types = require('./support/types');\n\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\nexports.types.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\nexports.types.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\nexports.types.isNativeError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb.bind(null, null, ret)) },\n            function(rej) { process.nextTick(callbackifyOnRejected.bind(null, rej, cb)) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n","// Currently in sync with Node.js lib/internal/errors.js\n// https://github.com/nodejs/node/commit/3b044962c48fe313905877a96b5d0894a5404f6f\n\n/* eslint node-core/documented-errors: \"error\" */\n/* eslint node-core/alphabetize-errors: \"error\" */\n/* eslint node-core/prefer-util-format-errors: \"error\" */\n\n'use strict';\n\n// The whole point behind this internal module is to allow Node.js to no\n// longer be forced to treat every error message change as a semver-major\n// change. The NodeError classes here all expose a `code` property whose\n// value statically and permanently identifies the error. While the error\n// message may change, the code should not.\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nvar codes = {};\n\n// Lazy loaded\nvar assert;\nvar util;\nfunction createErrorType(code, message, Base) {\n  if (!Base) {\n    Base = Error;\n  }\n  function getMessage(arg1, arg2, arg3) {\n    if (typeof message === 'string') {\n      return message;\n    } else {\n      return message(arg1, arg2, arg3);\n    }\n  }\n  var NodeError = /*#__PURE__*/function (_Base) {\n    _inherits(NodeError, _Base);\n    var _super = _createSuper(NodeError);\n    function NodeError(arg1, arg2, arg3) {\n      var _this;\n      _classCallCheck(this, NodeError);\n      _this = _super.call(this, getMessage(arg1, arg2, arg3));\n      _this.code = code;\n      return _this;\n    }\n    return _createClass(NodeError);\n  }(Base);\n  codes[code] = NodeError;\n}\n\n// https://github.com/nodejs/node/blob/v10.8.0/lib/internal/errors.js\nfunction oneOf(expected, thing) {\n  if (Array.isArray(expected)) {\n    var len = expected.length;\n    expected = expected.map(function (i) {\n      return String(i);\n    });\n    if (len > 2) {\n      return \"one of \".concat(thing, \" \").concat(expected.slice(0, len - 1).join(', '), \", or \") + expected[len - 1];\n    } else if (len === 2) {\n      return \"one of \".concat(thing, \" \").concat(expected[0], \" or \").concat(expected[1]);\n    } else {\n      return \"of \".concat(thing, \" \").concat(expected[0]);\n    }\n  } else {\n    return \"of \".concat(thing, \" \").concat(String(expected));\n  }\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith\nfunction startsWith(str, search, pos) {\n  return str.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\nfunction endsWith(str, search, this_len) {\n  if (this_len === undefined || this_len > str.length) {\n    this_len = str.length;\n  }\n  return str.substring(this_len - search.length, this_len) === search;\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes\nfunction includes(str, search, start) {\n  if (typeof start !== 'number') {\n    start = 0;\n  }\n  if (start + search.length > str.length) {\n    return false;\n  } else {\n    return str.indexOf(search, start) !== -1;\n  }\n}\ncreateErrorType('ERR_AMBIGUOUS_ARGUMENT', 'The \"%s\" argument is ambiguous. %s', TypeError);\ncreateErrorType('ERR_INVALID_ARG_TYPE', function (name, expected, actual) {\n  if (assert === undefined) assert = require('../assert');\n  assert(typeof name === 'string', \"'name' must be a string\");\n\n  // determiner: 'must be' or 'must not be'\n  var determiner;\n  if (typeof expected === 'string' && startsWith(expected, 'not ')) {\n    determiner = 'must not be';\n    expected = expected.replace(/^not /, '');\n  } else {\n    determiner = 'must be';\n  }\n  var msg;\n  if (endsWith(name, ' argument')) {\n    // For cases like 'first argument'\n    msg = \"The \".concat(name, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  } else {\n    var type = includes(name, '.') ? 'property' : 'argument';\n    msg = \"The \\\"\".concat(name, \"\\\" \").concat(type, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  }\n\n  // TODO(BridgeAR): Improve the output by showing `null` and similar.\n  msg += \". Received type \".concat(_typeof(actual));\n  return msg;\n}, TypeError);\ncreateErrorType('ERR_INVALID_ARG_VALUE', function (name, value) {\n  var reason = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'is invalid';\n  if (util === undefined) util = require('util/');\n  var inspected = util.inspect(value);\n  if (inspected.length > 128) {\n    inspected = \"\".concat(inspected.slice(0, 128), \"...\");\n  }\n  return \"The argument '\".concat(name, \"' \").concat(reason, \". Received \").concat(inspected);\n}, TypeError, RangeError);\ncreateErrorType('ERR_INVALID_RETURN_VALUE', function (input, name, value) {\n  var type;\n  if (value && value.constructor && value.constructor.name) {\n    type = \"instance of \".concat(value.constructor.name);\n  } else {\n    type = \"type \".concat(_typeof(value));\n  }\n  return \"Expected \".concat(input, \" to be returned from the \\\"\").concat(name, \"\\\"\") + \" function but got \".concat(type, \".\");\n}, TypeError);\ncreateErrorType('ERR_MISSING_ARGS', function () {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n  if (assert === undefined) assert = require('../assert');\n  assert(args.length > 0, 'At least one arg needs to be specified');\n  var msg = 'The ';\n  var len = args.length;\n  args = args.map(function (a) {\n    return \"\\\"\".concat(a, \"\\\"\");\n  });\n  switch (len) {\n    case 1:\n      msg += \"\".concat(args[0], \" argument\");\n      break;\n    case 2:\n      msg += \"\".concat(args[0], \" and \").concat(args[1], \" arguments\");\n      break;\n    default:\n      msg += args.slice(0, len - 1).join(', ');\n      msg += \", and \".concat(args[len - 1], \" arguments\");\n      break;\n  }\n  return \"\".concat(msg, \" must be specified\");\n}, TypeError);\nmodule.exports.codes = codes;","// Currently in sync with Node.js lib/internal/assert/assertion_error.js\n// https://github.com/nodejs/node/commit/0817840f775032169ddd70c85ac059f18ffcc81c\n\n'use strict';\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct.bind(); } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nvar _require = require('util/'),\n  inspect = _require.inspect;\nvar _require2 = require('../errors'),\n  ERR_INVALID_ARG_TYPE = _require2.codes.ERR_INVALID_ARG_TYPE;\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\nfunction endsWith(str, search, this_len) {\n  if (this_len === undefined || this_len > str.length) {\n    this_len = str.length;\n  }\n  return str.substring(this_len - search.length, this_len) === search;\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeat\nfunction repeat(str, count) {\n  count = Math.floor(count);\n  if (str.length == 0 || count == 0) return '';\n  var maxCount = str.length * count;\n  count = Math.floor(Math.log(count) / Math.log(2));\n  while (count) {\n    str += str;\n    count--;\n  }\n  str += str.substring(0, maxCount - str.length);\n  return str;\n}\nvar blue = '';\nvar green = '';\nvar red = '';\nvar white = '';\nvar kReadableOperator = {\n  deepStrictEqual: 'Expected values to be strictly deep-equal:',\n  strictEqual: 'Expected values to be strictly equal:',\n  strictEqualObject: 'Expected \"actual\" to be reference-equal to \"expected\":',\n  deepEqual: 'Expected values to be loosely deep-equal:',\n  equal: 'Expected values to be loosely equal:',\n  notDeepStrictEqual: 'Expected \"actual\" not to be strictly deep-equal to:',\n  notStrictEqual: 'Expected \"actual\" to be strictly unequal to:',\n  notStrictEqualObject: 'Expected \"actual\" not to be reference-equal to \"expected\":',\n  notDeepEqual: 'Expected \"actual\" not to be loosely deep-equal to:',\n  notEqual: 'Expected \"actual\" to be loosely unequal to:',\n  notIdentical: 'Values identical but not reference-equal:'\n};\n\n// Comparing short primitives should just show === / !== instead of using the\n// diff.\nvar kMaxShortLength = 10;\nfunction copyError(source) {\n  var keys = Object.keys(source);\n  var target = Object.create(Object.getPrototypeOf(source));\n  keys.forEach(function (key) {\n    target[key] = source[key];\n  });\n  Object.defineProperty(target, 'message', {\n    value: source.message\n  });\n  return target;\n}\nfunction inspectValue(val) {\n  // The util.inspect default values could be changed. This makes sure the\n  // error messages contain the necessary information nevertheless.\n  return inspect(val, {\n    compact: false,\n    customInspect: false,\n    depth: 1000,\n    maxArrayLength: Infinity,\n    // Assert compares only enumerable properties (with a few exceptions).\n    showHidden: false,\n    // Having a long line as error is better than wrapping the line for\n    // comparison for now.\n    // TODO(BridgeAR): `breakLength` should be limited as soon as soon as we\n    // have meta information about the inspected properties (i.e., know where\n    // in what line the property starts and ends).\n    breakLength: Infinity,\n    // Assert does not detect proxies currently.\n    showProxy: false,\n    sorted: true,\n    // Inspect getters as we also check them when comparing entries.\n    getters: true\n  });\n}\nfunction createErrDiff(actual, expected, operator) {\n  var other = '';\n  var res = '';\n  var lastPos = 0;\n  var end = '';\n  var skipped = false;\n  var actualInspected = inspectValue(actual);\n  var actualLines = actualInspected.split('\\n');\n  var expectedLines = inspectValue(expected).split('\\n');\n  var i = 0;\n  var indicator = '';\n\n  // In case both values are objects explicitly mark them as not reference equal\n  // for the `strictEqual` operator.\n  if (operator === 'strictEqual' && _typeof(actual) === 'object' && _typeof(expected) === 'object' && actual !== null && expected !== null) {\n    operator = 'strictEqualObject';\n  }\n\n  // If \"actual\" and \"expected\" fit on a single line and they are not strictly\n  // equal, check further special handling.\n  if (actualLines.length === 1 && expectedLines.length === 1 && actualLines[0] !== expectedLines[0]) {\n    var inputLength = actualLines[0].length + expectedLines[0].length;\n    // If the character length of \"actual\" and \"expected\" together is less than\n    // kMaxShortLength and if neither is an object and at least one of them is\n    // not `zero`, use the strict equal comparison to visualize the output.\n    if (inputLength <= kMaxShortLength) {\n      if ((_typeof(actual) !== 'object' || actual === null) && (_typeof(expected) !== 'object' || expected === null) && (actual !== 0 || expected !== 0)) {\n        // -0 === +0\n        return \"\".concat(kReadableOperator[operator], \"\\n\\n\") + \"\".concat(actualLines[0], \" !== \").concat(expectedLines[0], \"\\n\");\n      }\n    } else if (operator !== 'strictEqualObject') {\n      // If the stderr is a tty and the input length is lower than the current\n      // columns per line, add a mismatch indicator below the output. If it is\n      // not a tty, use a default value of 80 characters.\n      var maxLength = process.stderr && process.stderr.isTTY ? process.stderr.columns : 80;\n      if (inputLength < maxLength) {\n        while (actualLines[0][i] === expectedLines[0][i]) {\n          i++;\n        }\n        // Ignore the first characters.\n        if (i > 2) {\n          // Add position indicator for the first mismatch in case it is a\n          // single line and the input length is less than the column length.\n          indicator = \"\\n  \".concat(repeat(' ', i), \"^\");\n          i = 0;\n        }\n      }\n    }\n  }\n\n  // Remove all ending lines that match (this optimizes the output for\n  // readability by reducing the number of total changed lines).\n  var a = actualLines[actualLines.length - 1];\n  var b = expectedLines[expectedLines.length - 1];\n  while (a === b) {\n    if (i++ < 2) {\n      end = \"\\n  \".concat(a).concat(end);\n    } else {\n      other = a;\n    }\n    actualLines.pop();\n    expectedLines.pop();\n    if (actualLines.length === 0 || expectedLines.length === 0) break;\n    a = actualLines[actualLines.length - 1];\n    b = expectedLines[expectedLines.length - 1];\n  }\n  var maxLines = Math.max(actualLines.length, expectedLines.length);\n  // Strict equal with identical objects that are not identical by reference.\n  // E.g., assert.deepStrictEqual({ a: Symbol() }, { a: Symbol() })\n  if (maxLines === 0) {\n    // We have to get the result again. The lines were all removed before.\n    var _actualLines = actualInspected.split('\\n');\n\n    // Only remove lines in case it makes sense to collapse those.\n    // TODO: Accept env to always show the full error.\n    if (_actualLines.length > 30) {\n      _actualLines[26] = \"\".concat(blue, \"...\").concat(white);\n      while (_actualLines.length > 27) {\n        _actualLines.pop();\n      }\n    }\n    return \"\".concat(kReadableOperator.notIdentical, \"\\n\\n\").concat(_actualLines.join('\\n'), \"\\n\");\n  }\n  if (i > 3) {\n    end = \"\\n\".concat(blue, \"...\").concat(white).concat(end);\n    skipped = true;\n  }\n  if (other !== '') {\n    end = \"\\n  \".concat(other).concat(end);\n    other = '';\n  }\n  var printedLines = 0;\n  var msg = kReadableOperator[operator] + \"\\n\".concat(green, \"+ actual\").concat(white, \" \").concat(red, \"- expected\").concat(white);\n  var skippedMsg = \" \".concat(blue, \"...\").concat(white, \" Lines skipped\");\n  for (i = 0; i < maxLines; i++) {\n    // Only extra expected lines exist\n    var cur = i - lastPos;\n    if (actualLines.length < i + 1) {\n      // If the last diverging line is more than one line above and the\n      // current line is at least line three, add some of the former lines and\n      // also add dots to indicate skipped entries.\n      if (cur > 1 && i > 2) {\n        if (cur > 4) {\n          res += \"\\n\".concat(blue, \"...\").concat(white);\n          skipped = true;\n        } else if (cur > 3) {\n          res += \"\\n  \".concat(expectedLines[i - 2]);\n          printedLines++;\n        }\n        res += \"\\n  \".concat(expectedLines[i - 1]);\n        printedLines++;\n      }\n      // Mark the current line as the last diverging one.\n      lastPos = i;\n      // Add the expected line to the cache.\n      other += \"\\n\".concat(red, \"-\").concat(white, \" \").concat(expectedLines[i]);\n      printedLines++;\n      // Only extra actual lines exist\n    } else if (expectedLines.length < i + 1) {\n      // If the last diverging line is more than one line above and the\n      // current line is at least line three, add some of the former lines and\n      // also add dots to indicate skipped entries.\n      if (cur > 1 && i > 2) {\n        if (cur > 4) {\n          res += \"\\n\".concat(blue, \"...\").concat(white);\n          skipped = true;\n        } else if (cur > 3) {\n          res += \"\\n  \".concat(actualLines[i - 2]);\n          printedLines++;\n        }\n        res += \"\\n  \".concat(actualLines[i - 1]);\n        printedLines++;\n      }\n      // Mark the current line as the last diverging one.\n      lastPos = i;\n      // Add the actual line to the result.\n      res += \"\\n\".concat(green, \"+\").concat(white, \" \").concat(actualLines[i]);\n      printedLines++;\n      // Lines diverge\n    } else {\n      var expectedLine = expectedLines[i];\n      var actualLine = actualLines[i];\n      // If the lines diverge, specifically check for lines that only diverge by\n      // a trailing comma. In that case it is actually identical and we should\n      // mark it as such.\n      var divergingLines = actualLine !== expectedLine && (!endsWith(actualLine, ',') || actualLine.slice(0, -1) !== expectedLine);\n      // If the expected line has a trailing comma but is otherwise identical,\n      // add a comma at the end of the actual line. Otherwise the output could\n      // look weird as in:\n      //\n      //   [\n      //     1         // No comma at the end!\n      // +   2\n      //   ]\n      //\n      if (divergingLines && endsWith(expectedLine, ',') && expectedLine.slice(0, -1) === actualLine) {\n        divergingLines = false;\n        actualLine += ',';\n      }\n      if (divergingLines) {\n        // If the last diverging line is more than one line above and the\n        // current line is at least line three, add some of the former lines and\n        // also add dots to indicate skipped entries.\n        if (cur > 1 && i > 2) {\n          if (cur > 4) {\n            res += \"\\n\".concat(blue, \"...\").concat(white);\n            skipped = true;\n          } else if (cur > 3) {\n            res += \"\\n  \".concat(actualLines[i - 2]);\n            printedLines++;\n          }\n          res += \"\\n  \".concat(actualLines[i - 1]);\n          printedLines++;\n        }\n        // Mark the current line as the last diverging one.\n        lastPos = i;\n        // Add the actual line to the result and cache the expected diverging\n        // line so consecutive diverging lines show up as +++--- and not +-+-+-.\n        res += \"\\n\".concat(green, \"+\").concat(white, \" \").concat(actualLine);\n        other += \"\\n\".concat(red, \"-\").concat(white, \" \").concat(expectedLine);\n        printedLines += 2;\n        // Lines are identical\n      } else {\n        // Add all cached information to the result before adding other things\n        // and reset the cache.\n        res += other;\n        other = '';\n        // If the last diverging line is exactly one line above or if it is the\n        // very first line, add the line to the result.\n        if (cur === 1 || i === 0) {\n          res += \"\\n  \".concat(actualLine);\n          printedLines++;\n        }\n      }\n    }\n    // Inspected object to big (Show ~20 rows max)\n    if (printedLines > 20 && i < maxLines - 2) {\n      return \"\".concat(msg).concat(skippedMsg, \"\\n\").concat(res, \"\\n\").concat(blue, \"...\").concat(white).concat(other, \"\\n\") + \"\".concat(blue, \"...\").concat(white);\n    }\n  }\n  return \"\".concat(msg).concat(skipped ? skippedMsg : '', \"\\n\").concat(res).concat(other).concat(end).concat(indicator);\n}\nvar AssertionError = /*#__PURE__*/function (_Error, _inspect$custom) {\n  _inherits(AssertionError, _Error);\n  var _super = _createSuper(AssertionError);\n  function AssertionError(options) {\n    var _this;\n    _classCallCheck(this, AssertionError);\n    if (_typeof(options) !== 'object' || options === null) {\n      throw new ERR_INVALID_ARG_TYPE('options', 'Object', options);\n    }\n    var message = options.message,\n      operator = options.operator,\n      stackStartFn = options.stackStartFn;\n    var actual = options.actual,\n      expected = options.expected;\n    var limit = Error.stackTraceLimit;\n    Error.stackTraceLimit = 0;\n    if (message != null) {\n      _this = _super.call(this, String(message));\n    } else {\n      if (process.stderr && process.stderr.isTTY) {\n        // Reset on each call to make sure we handle dynamically set environment\n        // variables correct.\n        if (process.stderr && process.stderr.getColorDepth && process.stderr.getColorDepth() !== 1) {\n          blue = \"\\x1B[34m\";\n          green = \"\\x1B[32m\";\n          white = \"\\x1B[39m\";\n          red = \"\\x1B[31m\";\n        } else {\n          blue = '';\n          green = '';\n          white = '';\n          red = '';\n        }\n      }\n      // Prevent the error stack from being visible by duplicating the error\n      // in a very close way to the original in case both sides are actually\n      // instances of Error.\n      if (_typeof(actual) === 'object' && actual !== null && _typeof(expected) === 'object' && expected !== null && 'stack' in actual && actual instanceof Error && 'stack' in expected && expected instanceof Error) {\n        actual = copyError(actual);\n        expected = copyError(expected);\n      }\n      if (operator === 'deepStrictEqual' || operator === 'strictEqual') {\n        _this = _super.call(this, createErrDiff(actual, expected, operator));\n      } else if (operator === 'notDeepStrictEqual' || operator === 'notStrictEqual') {\n        // In case the objects are equal but the operator requires unequal, show\n        // the first object and say A equals B\n        var base = kReadableOperator[operator];\n        var res = inspectValue(actual).split('\\n');\n\n        // In case \"actual\" is an object, it should not be reference equal.\n        if (operator === 'notStrictEqual' && _typeof(actual) === 'object' && actual !== null) {\n          base = kReadableOperator.notStrictEqualObject;\n        }\n\n        // Only remove lines in case it makes sense to collapse those.\n        // TODO: Accept env to always show the full error.\n        if (res.length > 30) {\n          res[26] = \"\".concat(blue, \"...\").concat(white);\n          while (res.length > 27) {\n            res.pop();\n          }\n        }\n\n        // Only print a single input.\n        if (res.length === 1) {\n          _this = _super.call(this, \"\".concat(base, \" \").concat(res[0]));\n        } else {\n          _this = _super.call(this, \"\".concat(base, \"\\n\\n\").concat(res.join('\\n'), \"\\n\"));\n        }\n      } else {\n        var _res = inspectValue(actual);\n        var other = '';\n        var knownOperators = kReadableOperator[operator];\n        if (operator === 'notDeepEqual' || operator === 'notEqual') {\n          _res = \"\".concat(kReadableOperator[operator], \"\\n\\n\").concat(_res);\n          if (_res.length > 1024) {\n            _res = \"\".concat(_res.slice(0, 1021), \"...\");\n          }\n        } else {\n          other = \"\".concat(inspectValue(expected));\n          if (_res.length > 512) {\n            _res = \"\".concat(_res.slice(0, 509), \"...\");\n          }\n          if (other.length > 512) {\n            other = \"\".concat(other.slice(0, 509), \"...\");\n          }\n          if (operator === 'deepEqual' || operator === 'equal') {\n            _res = \"\".concat(knownOperators, \"\\n\\n\").concat(_res, \"\\n\\nshould equal\\n\\n\");\n          } else {\n            other = \" \".concat(operator, \" \").concat(other);\n          }\n        }\n        _this = _super.call(this, \"\".concat(_res).concat(other));\n      }\n    }\n    Error.stackTraceLimit = limit;\n    _this.generatedMessage = !message;\n    Object.defineProperty(_assertThisInitialized(_this), 'name', {\n      value: 'AssertionError [ERR_ASSERTION]',\n      enumerable: false,\n      writable: true,\n      configurable: true\n    });\n    _this.code = 'ERR_ASSERTION';\n    _this.actual = actual;\n    _this.expected = expected;\n    _this.operator = operator;\n    if (Error.captureStackTrace) {\n      // eslint-disable-next-line no-restricted-syntax\n      Error.captureStackTrace(_assertThisInitialized(_this), stackStartFn);\n    }\n    // Create error message including the error code in the name.\n    _this.stack;\n    // Reset the name.\n    _this.name = 'AssertionError';\n    return _possibleConstructorReturn(_this);\n  }\n  _createClass(AssertionError, [{\n    key: \"toString\",\n    value: function toString() {\n      return \"\".concat(this.name, \" [\").concat(this.code, \"]: \").concat(this.message);\n    }\n  }, {\n    key: _inspect$custom,\n    value: function value(recurseTimes, ctx) {\n      // This limits the `actual` and `expected` property default inspection to\n      // the minimum depth. Otherwise those values would be too verbose compared\n      // to the actual error message which contains a combined view of these two\n      // input values.\n      return inspect(this, _objectSpread(_objectSpread({}, ctx), {}, {\n        customInspect: false,\n        depth: 0\n      }));\n    }\n  }]);\n  return AssertionError;\n}( /*#__PURE__*/_wrapNativeSuper(Error), inspect.custom);\nmodule.exports = AssertionError;","'use strict';\n\nvar toStr = Object.prototype.toString;\n\nmodule.exports = function isArguments(value) {\n\tvar str = toStr.call(value);\n\tvar isArgs = str === '[object Arguments]';\n\tif (!isArgs) {\n\t\tisArgs = str !== '[object Array]' &&\n\t\t\tvalue !== null &&\n\t\t\ttypeof value === 'object' &&\n\t\t\ttypeof value.length === 'number' &&\n\t\t\tvalue.length >= 0 &&\n\t\t\ttoStr.call(value.callee) === '[object Function]';\n\t}\n\treturn isArgs;\n};\n","'use strict';\n\nvar keysShim;\nif (!Object.keys) {\n\t// modified from https://github.com/es-shims/es5-shim\n\tvar has = Object.prototype.hasOwnProperty;\n\tvar toStr = Object.prototype.toString;\n\tvar isArgs = require('./isArguments'); // eslint-disable-line global-require\n\tvar isEnumerable = Object.prototype.propertyIsEnumerable;\n\tvar hasDontEnumBug = !isEnumerable.call({ toString: null }, 'toString');\n\tvar hasProtoEnumBug = isEnumerable.call(function () {}, 'prototype');\n\tvar dontEnums = [\n\t\t'toString',\n\t\t'toLocaleString',\n\t\t'valueOf',\n\t\t'hasOwnProperty',\n\t\t'isPrototypeOf',\n\t\t'propertyIsEnumerable',\n\t\t'constructor'\n\t];\n\tvar equalsConstructorPrototype = function (o) {\n\t\tvar ctor = o.constructor;\n\t\treturn ctor && ctor.prototype === o;\n\t};\n\tvar excludedKeys = {\n\t\t$applicationCache: true,\n\t\t$console: true,\n\t\t$external: true,\n\t\t$frame: true,\n\t\t$frameElement: true,\n\t\t$frames: true,\n\t\t$innerHeight: true,\n\t\t$innerWidth: true,\n\t\t$onmozfullscreenchange: true,\n\t\t$onmozfullscreenerror: true,\n\t\t$outerHeight: true,\n\t\t$outerWidth: true,\n\t\t$pageXOffset: true,\n\t\t$pageYOffset: true,\n\t\t$parent: true,\n\t\t$scrollLeft: true,\n\t\t$scrollTop: true,\n\t\t$scrollX: true,\n\t\t$scrollY: true,\n\t\t$self: true,\n\t\t$webkitIndexedDB: true,\n\t\t$webkitStorageInfo: true,\n\t\t$window: true\n\t};\n\tvar hasAutomationEqualityBug = (function () {\n\t\t/* global window */\n\t\tif (typeof window === 'undefined') { return false; }\n\t\tfor (var k in window) {\n\t\t\ttry {\n\t\t\t\tif (!excludedKeys['$' + k] && has.call(window, k) && window[k] !== null && typeof window[k] === 'object') {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tequalsConstructorPrototype(window[k]);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}());\n\tvar equalsConstructorPrototypeIfNotBuggy = function (o) {\n\t\t/* global window */\n\t\tif (typeof window === 'undefined' || !hasAutomationEqualityBug) {\n\t\t\treturn equalsConstructorPrototype(o);\n\t\t}\n\t\ttry {\n\t\t\treturn equalsConstructorPrototype(o);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tkeysShim = function keys(object) {\n\t\tvar isObject = object !== null && typeof object === 'object';\n\t\tvar isFunction = toStr.call(object) === '[object Function]';\n\t\tvar isArguments = isArgs(object);\n\t\tvar isString = isObject && toStr.call(object) === '[object String]';\n\t\tvar theKeys = [];\n\n\t\tif (!isObject && !isFunction && !isArguments) {\n\t\t\tthrow new TypeError('Object.keys called on a non-object');\n\t\t}\n\n\t\tvar skipProto = hasProtoEnumBug && isFunction;\n\t\tif (isString && object.length > 0 && !has.call(object, 0)) {\n\t\t\tfor (var i = 0; i < object.length; ++i) {\n\t\t\t\ttheKeys.push(String(i));\n\t\t\t}\n\t\t}\n\n\t\tif (isArguments && object.length > 0) {\n\t\t\tfor (var j = 0; j < object.length; ++j) {\n\t\t\t\ttheKeys.push(String(j));\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var name in object) {\n\t\t\t\tif (!(skipProto && name === 'prototype') && has.call(object, name)) {\n\t\t\t\t\ttheKeys.push(String(name));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (hasDontEnumBug) {\n\t\t\tvar skipConstructor = equalsConstructorPrototypeIfNotBuggy(object);\n\n\t\t\tfor (var k = 0; k < dontEnums.length; ++k) {\n\t\t\t\tif (!(skipConstructor && dontEnums[k] === 'constructor') && has.call(object, dontEnums[k])) {\n\t\t\t\t\ttheKeys.push(dontEnums[k]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn theKeys;\n\t};\n}\nmodule.exports = keysShim;\n","'use strict';\n\nvar slice = Array.prototype.slice;\nvar isArgs = require('./isArguments');\n\nvar origKeys = Object.keys;\nvar keysShim = origKeys ? function keys(o) { return origKeys(o); } : require('./implementation');\n\nvar originalKeys = Object.keys;\n\nkeysShim.shim = function shimObjectKeys() {\n\tif (Object.keys) {\n\t\tvar keysWorksWithArguments = (function () {\n\t\t\t// Safari 5.0 bug\n\t\t\tvar args = Object.keys(arguments);\n\t\t\treturn args && args.length === arguments.length;\n\t\t}(1, 2));\n\t\tif (!keysWorksWithArguments) {\n\t\t\tObject.keys = function keys(object) { // eslint-disable-line func-name-matching\n\t\t\t\tif (isArgs(object)) {\n\t\t\t\t\treturn originalKeys(slice.call(object));\n\t\t\t\t}\n\t\t\t\treturn originalKeys(object);\n\t\t\t};\n\t\t}\n\t} else {\n\t\tObject.keys = keysShim;\n\t}\n\treturn Object.keys || keysShim;\n};\n\nmodule.exports = keysShim;\n","'use strict';\n\n// modified from https://github.com/es-shims/es6-shim\nvar objectKeys = require('object-keys');\nvar hasSymbols = require('has-symbols/shams')();\nvar callBound = require('call-bind/callBound');\nvar toObject = Object;\nvar $push = callBound('Array.prototype.push');\nvar $propIsEnumerable = callBound('Object.prototype.propertyIsEnumerable');\nvar originalGetSymbols = hasSymbols ? Object.getOwnPropertySymbols : null;\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function assign(target, source1) {\n\tif (target == null) { throw new TypeError('target must be an object'); }\n\tvar to = toObject(target); // step 1\n\tif (arguments.length === 1) {\n\t\treturn to; // step 2\n\t}\n\tfor (var s = 1; s < arguments.length; ++s) {\n\t\tvar from = toObject(arguments[s]); // step 3.a.i\n\n\t\t// step 3.a.ii:\n\t\tvar keys = objectKeys(from);\n\t\tvar getSymbols = hasSymbols && (Object.getOwnPropertySymbols || originalGetSymbols);\n\t\tif (getSymbols) {\n\t\t\tvar syms = getSymbols(from);\n\t\t\tfor (var j = 0; j < syms.length; ++j) {\n\t\t\t\tvar key = syms[j];\n\t\t\t\tif ($propIsEnumerable(from, key)) {\n\t\t\t\t\t$push(keys, key);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// step 3.a.iii:\n\t\tfor (var i = 0; i < keys.length; ++i) {\n\t\t\tvar nextKey = keys[i];\n\t\t\tif ($propIsEnumerable(from, nextKey)) { // step 3.a.iii.2\n\t\t\t\tvar propValue = from[nextKey]; // step 3.a.iii.2.a\n\t\t\t\tto[nextKey] = propValue; // step 3.a.iii.2.b\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to; // step 4\n};\n","'use strict';\n\nvar implementation = require('./implementation');\n\nvar lacksProperEnumerationOrder = function () {\n\tif (!Object.assign) {\n\t\treturn false;\n\t}\n\t/*\n\t * v8, specifically in node 4.x, has a bug with incorrect property enumeration order\n\t * note: this does not detect the bug unless there's 20 characters\n\t */\n\tvar str = 'abcdefghijklmnopqrst';\n\tvar letters = str.split('');\n\tvar map = {};\n\tfor (var i = 0; i < letters.length; ++i) {\n\t\tmap[letters[i]] = letters[i];\n\t}\n\tvar obj = Object.assign({}, map);\n\tvar actual = '';\n\tfor (var k in obj) {\n\t\tactual += k;\n\t}\n\treturn str !== actual;\n};\n\nvar assignHasPendingExceptions = function () {\n\tif (!Object.assign || !Object.preventExtensions) {\n\t\treturn false;\n\t}\n\t/*\n\t * Firefox 37 still has \"pending exception\" logic in its Object.assign implementation,\n\t * which is 72% slower than our shim, and Firefox 40's native implementation.\n\t */\n\tvar thrower = Object.preventExtensions({ 1: 2 });\n\ttry {\n\t\tObject.assign(thrower, 'xy');\n\t} catch (e) {\n\t\treturn thrower[1] === 'y';\n\t}\n\treturn false;\n};\n\nmodule.exports = function getPolyfill() {\n\tif (!Object.assign) {\n\t\treturn implementation;\n\t}\n\tif (lacksProperEnumerationOrder()) {\n\t\treturn implementation;\n\t}\n\tif (assignHasPendingExceptions()) {\n\t\treturn implementation;\n\t}\n\treturn Object.assign;\n};\n","'use strict';\n\nvar numberIsNaN = function (value) {\n\treturn value !== value;\n};\n\nmodule.exports = function is(a, b) {\n\tif (a === 0 && b === 0) {\n\t\treturn 1 / a === 1 / b;\n\t}\n\tif (a === b) {\n\t\treturn true;\n\t}\n\tif (numberIsNaN(a) && numberIsNaN(b)) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = function getPolyfill() {\n\treturn typeof Object.is === 'function' ? Object.is : implementation;\n};\n","'use strict';\n\nvar keys = require('object-keys');\nvar hasSymbols = typeof Symbol === 'function' && typeof Symbol('foo') === 'symbol';\n\nvar toStr = Object.prototype.toString;\nvar concat = Array.prototype.concat;\nvar defineDataProperty = require('define-data-property');\n\nvar isFunction = function (fn) {\n\treturn typeof fn === 'function' && toStr.call(fn) === '[object Function]';\n};\n\nvar supportsDescriptors = require('has-property-descriptors')();\n\nvar defineProperty = function (object, name, value, predicate) {\n\tif (name in object) {\n\t\tif (predicate === true) {\n\t\t\tif (object[name] === value) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else if (!isFunction(predicate) || !predicate()) {\n\t\t\treturn;\n\t\t}\n\t}\n\n\tif (supportsDescriptors) {\n\t\tdefineDataProperty(object, name, value, true);\n\t} else {\n\t\tdefineDataProperty(object, name, value);\n\t}\n};\n\nvar defineProperties = function (object, map) {\n\tvar predicates = arguments.length > 2 ? arguments[2] : {};\n\tvar props = keys(map);\n\tif (hasSymbols) {\n\t\tprops = concat.call(props, Object.getOwnPropertySymbols(map));\n\t}\n\tfor (var i = 0; i < props.length; i += 1) {\n\t\tdefineProperty(object, props[i], map[props[i]], predicates[props[i]]);\n\t}\n};\n\ndefineProperties.supportsDescriptors = !!supportsDescriptors;\n\nmodule.exports = defineProperties;\n","'use strict';\n\nvar getPolyfill = require('./polyfill');\nvar define = require('define-properties');\n\nmodule.exports = function shimObjectIs() {\n\tvar polyfill = getPolyfill();\n\tdefine(Object, { is: polyfill }, {\n\t\tis: function testObjectIs() {\n\t\t\treturn Object.is !== polyfill;\n\t\t}\n\t});\n\treturn polyfill;\n};\n","'use strict';\n\nvar define = require('define-properties');\nvar callBind = require('call-bind');\n\nvar implementation = require('./implementation');\nvar getPolyfill = require('./polyfill');\nvar shim = require('./shim');\n\nvar polyfill = callBind(getPolyfill(), Object);\n\ndefine(polyfill, {\n\tgetPolyfill: getPolyfill,\n\timplementation: implementation,\n\tshim: shim\n});\n\nmodule.exports = polyfill;\n","'use strict';\n\n/* http://www.ecma-international.org/ecma-262/6.0/#sec-number.isnan */\n\nmodule.exports = function isNaN(value) {\n\treturn value !== value;\n};\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = function getPolyfill() {\n\tif (Number.isNaN && Number.isNaN(NaN) && !Number.isNaN('a')) {\n\t\treturn Number.isNaN;\n\t}\n\treturn implementation;\n};\n","'use strict';\n\nvar define = require('define-properties');\nvar getPolyfill = require('./polyfill');\n\n/* http://www.ecma-international.org/ecma-262/6.0/#sec-number.isnan */\n\nmodule.exports = function shimNumberIsNaN() {\n\tvar polyfill = getPolyfill();\n\tdefine(Number, { isNaN: polyfill }, {\n\t\tisNaN: function testIsNaN() {\n\t\t\treturn Number.isNaN !== polyfill;\n\t\t}\n\t});\n\treturn polyfill;\n};\n","'use strict';\n\nvar callBind = require('call-bind');\nvar define = require('define-properties');\n\nvar implementation = require('./implementation');\nvar getPolyfill = require('./polyfill');\nvar shim = require('./shim');\n\nvar polyfill = callBind(getPolyfill(), Number);\n\n/* http://www.ecma-international.org/ecma-262/6.0/#sec-number.isnan */\n\ndefine(polyfill, {\n\tgetPolyfill: getPolyfill,\n\timplementation: implementation,\n\tshim: shim\n});\n\nmodule.exports = polyfill;\n","// Currently in sync with Node.js lib/internal/util/comparisons.js\n// https://github.com/nodejs/node/commit/112cc7c27551254aa2b17098fb774867f05ed0d9\n\n'use strict';\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nvar regexFlagsSupported = /a/g.flags !== undefined;\nvar arrayFromSet = function arrayFromSet(set) {\n  var array = [];\n  set.forEach(function (value) {\n    return array.push(value);\n  });\n  return array;\n};\nvar arrayFromMap = function arrayFromMap(map) {\n  var array = [];\n  map.forEach(function (value, key) {\n    return array.push([key, value]);\n  });\n  return array;\n};\nvar objectIs = Object.is ? Object.is : require('object-is');\nvar objectGetOwnPropertySymbols = Object.getOwnPropertySymbols ? Object.getOwnPropertySymbols : function () {\n  return [];\n};\nvar numberIsNaN = Number.isNaN ? Number.isNaN : require('is-nan');\nfunction uncurryThis(f) {\n  return f.call.bind(f);\n}\nvar hasOwnProperty = uncurryThis(Object.prototype.hasOwnProperty);\nvar propertyIsEnumerable = uncurryThis(Object.prototype.propertyIsEnumerable);\nvar objectToString = uncurryThis(Object.prototype.toString);\nvar _require$types = require('util/').types,\n  isAnyArrayBuffer = _require$types.isAnyArrayBuffer,\n  isArrayBufferView = _require$types.isArrayBufferView,\n  isDate = _require$types.isDate,\n  isMap = _require$types.isMap,\n  isRegExp = _require$types.isRegExp,\n  isSet = _require$types.isSet,\n  isNativeError = _require$types.isNativeError,\n  isBoxedPrimitive = _require$types.isBoxedPrimitive,\n  isNumberObject = _require$types.isNumberObject,\n  isStringObject = _require$types.isStringObject,\n  isBooleanObject = _require$types.isBooleanObject,\n  isBigIntObject = _require$types.isBigIntObject,\n  isSymbolObject = _require$types.isSymbolObject,\n  isFloat32Array = _require$types.isFloat32Array,\n  isFloat64Array = _require$types.isFloat64Array;\nfunction isNonIndex(key) {\n  if (key.length === 0 || key.length > 10) return true;\n  for (var i = 0; i < key.length; i++) {\n    var code = key.charCodeAt(i);\n    if (code < 48 || code > 57) return true;\n  }\n  // The maximum size for an array is 2 ** 32 -1.\n  return key.length === 10 && key >= Math.pow(2, 32);\n}\nfunction getOwnNonIndexProperties(value) {\n  return Object.keys(value).filter(isNonIndex).concat(objectGetOwnPropertySymbols(value).filter(Object.prototype.propertyIsEnumerable.bind(value)));\n}\n\n// Taken from https://github.com/feross/buffer/blob/680e9e5e488f22aac27599a57dc844a6315928dd/index.js\n// original notice:\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\nfunction compare(a, b) {\n  if (a === b) {\n    return 0;\n  }\n  var x = a.length;\n  var y = b.length;\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n  if (x < y) {\n    return -1;\n  }\n  if (y < x) {\n    return 1;\n  }\n  return 0;\n}\nvar ONLY_ENUMERABLE = undefined;\nvar kStrict = true;\nvar kLoose = false;\nvar kNoIterator = 0;\nvar kIsArray = 1;\nvar kIsSet = 2;\nvar kIsMap = 3;\n\n// Check if they have the same source and flags\nfunction areSimilarRegExps(a, b) {\n  return regexFlagsSupported ? a.source === b.source && a.flags === b.flags : RegExp.prototype.toString.call(a) === RegExp.prototype.toString.call(b);\n}\nfunction areSimilarFloatArrays(a, b) {\n  if (a.byteLength !== b.byteLength) {\n    return false;\n  }\n  for (var offset = 0; offset < a.byteLength; offset++) {\n    if (a[offset] !== b[offset]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction areSimilarTypedArrays(a, b) {\n  if (a.byteLength !== b.byteLength) {\n    return false;\n  }\n  return compare(new Uint8Array(a.buffer, a.byteOffset, a.byteLength), new Uint8Array(b.buffer, b.byteOffset, b.byteLength)) === 0;\n}\nfunction areEqualArrayBuffers(buf1, buf2) {\n  return buf1.byteLength === buf2.byteLength && compare(new Uint8Array(buf1), new Uint8Array(buf2)) === 0;\n}\nfunction isEqualBoxedPrimitive(val1, val2) {\n  if (isNumberObject(val1)) {\n    return isNumberObject(val2) && objectIs(Number.prototype.valueOf.call(val1), Number.prototype.valueOf.call(val2));\n  }\n  if (isStringObject(val1)) {\n    return isStringObject(val2) && String.prototype.valueOf.call(val1) === String.prototype.valueOf.call(val2);\n  }\n  if (isBooleanObject(val1)) {\n    return isBooleanObject(val2) && Boolean.prototype.valueOf.call(val1) === Boolean.prototype.valueOf.call(val2);\n  }\n  if (isBigIntObject(val1)) {\n    return isBigIntObject(val2) && BigInt.prototype.valueOf.call(val1) === BigInt.prototype.valueOf.call(val2);\n  }\n  return isSymbolObject(val2) && Symbol.prototype.valueOf.call(val1) === Symbol.prototype.valueOf.call(val2);\n}\n\n// Notes: Type tags are historical [[Class]] properties that can be set by\n// FunctionTemplate::SetClassName() in C++ or Symbol.toStringTag in JS\n// and retrieved using Object.prototype.toString.call(obj) in JS\n// See https://tc39.github.io/ecma262/#sec-object.prototype.tostring\n// for a list of tags pre-defined in the spec.\n// There are some unspecified tags in the wild too (e.g. typed array tags).\n// Since tags can be altered, they only serve fast failures\n//\n// Typed arrays and buffers are checked by comparing the content in their\n// underlying ArrayBuffer. This optimization requires that it's\n// reasonable to interpret their underlying memory in the same way,\n// which is checked by comparing their type tags.\n// (e.g. a Uint8Array and a Uint16Array with the same memory content\n// could still be different because they will be interpreted differently).\n//\n// For strict comparison, objects should have\n// a) The same built-in type tags\n// b) The same prototypes.\n\nfunction innerDeepEqual(val1, val2, strict, memos) {\n  // All identical values are equivalent, as determined by ===.\n  if (val1 === val2) {\n    if (val1 !== 0) return true;\n    return strict ? objectIs(val1, val2) : true;\n  }\n\n  // Check more closely if val1 and val2 are equal.\n  if (strict) {\n    if (_typeof(val1) !== 'object') {\n      return typeof val1 === 'number' && numberIsNaN(val1) && numberIsNaN(val2);\n    }\n    if (_typeof(val2) !== 'object' || val1 === null || val2 === null) {\n      return false;\n    }\n    if (Object.getPrototypeOf(val1) !== Object.getPrototypeOf(val2)) {\n      return false;\n    }\n  } else {\n    if (val1 === null || _typeof(val1) !== 'object') {\n      if (val2 === null || _typeof(val2) !== 'object') {\n        // eslint-disable-next-line eqeqeq\n        return val1 == val2;\n      }\n      return false;\n    }\n    if (val2 === null || _typeof(val2) !== 'object') {\n      return false;\n    }\n  }\n  var val1Tag = objectToString(val1);\n  var val2Tag = objectToString(val2);\n  if (val1Tag !== val2Tag) {\n    return false;\n  }\n  if (Array.isArray(val1)) {\n    // Check for sparse arrays and general fast path\n    if (val1.length !== val2.length) {\n      return false;\n    }\n    var keys1 = getOwnNonIndexProperties(val1, ONLY_ENUMERABLE);\n    var keys2 = getOwnNonIndexProperties(val2, ONLY_ENUMERABLE);\n    if (keys1.length !== keys2.length) {\n      return false;\n    }\n    return keyCheck(val1, val2, strict, memos, kIsArray, keys1);\n  }\n  // [browserify] This triggers on certain types in IE (Map/Set) so we don't\n  // wan't to early return out of the rest of the checks. However we can check\n  // if the second value is one of these values and the first isn't.\n  if (val1Tag === '[object Object]') {\n    // return keyCheck(val1, val2, strict, memos, kNoIterator);\n    if (!isMap(val1) && isMap(val2) || !isSet(val1) && isSet(val2)) {\n      return false;\n    }\n  }\n  if (isDate(val1)) {\n    if (!isDate(val2) || Date.prototype.getTime.call(val1) !== Date.prototype.getTime.call(val2)) {\n      return false;\n    }\n  } else if (isRegExp(val1)) {\n    if (!isRegExp(val2) || !areSimilarRegExps(val1, val2)) {\n      return false;\n    }\n  } else if (isNativeError(val1) || val1 instanceof Error) {\n    // Do not compare the stack as it might differ even though the error itself\n    // is otherwise identical.\n    if (val1.message !== val2.message || val1.name !== val2.name) {\n      return false;\n    }\n  } else if (isArrayBufferView(val1)) {\n    if (!strict && (isFloat32Array(val1) || isFloat64Array(val1))) {\n      if (!areSimilarFloatArrays(val1, val2)) {\n        return false;\n      }\n    } else if (!areSimilarTypedArrays(val1, val2)) {\n      return false;\n    }\n    // Buffer.compare returns true, so val1.length === val2.length. If they both\n    // only contain numeric keys, we don't need to exam further than checking\n    // the symbols.\n    var _keys = getOwnNonIndexProperties(val1, ONLY_ENUMERABLE);\n    var _keys2 = getOwnNonIndexProperties(val2, ONLY_ENUMERABLE);\n    if (_keys.length !== _keys2.length) {\n      return false;\n    }\n    return keyCheck(val1, val2, strict, memos, kNoIterator, _keys);\n  } else if (isSet(val1)) {\n    if (!isSet(val2) || val1.size !== val2.size) {\n      return false;\n    }\n    return keyCheck(val1, val2, strict, memos, kIsSet);\n  } else if (isMap(val1)) {\n    if (!isMap(val2) || val1.size !== val2.size) {\n      return false;\n    }\n    return keyCheck(val1, val2, strict, memos, kIsMap);\n  } else if (isAnyArrayBuffer(val1)) {\n    if (!areEqualArrayBuffers(val1, val2)) {\n      return false;\n    }\n  } else if (isBoxedPrimitive(val1) && !isEqualBoxedPrimitive(val1, val2)) {\n    return false;\n  }\n  return keyCheck(val1, val2, strict, memos, kNoIterator);\n}\nfunction getEnumerables(val, keys) {\n  return keys.filter(function (k) {\n    return propertyIsEnumerable(val, k);\n  });\n}\nfunction keyCheck(val1, val2, strict, memos, iterationType, aKeys) {\n  // For all remaining Object pairs, including Array, objects and Maps,\n  // equivalence is determined by having:\n  // a) The same number of owned enumerable properties\n  // b) The same set of keys/indexes (although not necessarily the same order)\n  // c) Equivalent values for every corresponding key/index\n  // d) For Sets and Maps, equal contents\n  // Note: this accounts for both named and indexed properties on Arrays.\n  if (arguments.length === 5) {\n    aKeys = Object.keys(val1);\n    var bKeys = Object.keys(val2);\n\n    // The pair must have the same number of owned properties.\n    if (aKeys.length !== bKeys.length) {\n      return false;\n    }\n  }\n\n  // Cheap key test\n  var i = 0;\n  for (; i < aKeys.length; i++) {\n    if (!hasOwnProperty(val2, aKeys[i])) {\n      return false;\n    }\n  }\n  if (strict && arguments.length === 5) {\n    var symbolKeysA = objectGetOwnPropertySymbols(val1);\n    if (symbolKeysA.length !== 0) {\n      var count = 0;\n      for (i = 0; i < symbolKeysA.length; i++) {\n        var key = symbolKeysA[i];\n        if (propertyIsEnumerable(val1, key)) {\n          if (!propertyIsEnumerable(val2, key)) {\n            return false;\n          }\n          aKeys.push(key);\n          count++;\n        } else if (propertyIsEnumerable(val2, key)) {\n          return false;\n        }\n      }\n      var symbolKeysB = objectGetOwnPropertySymbols(val2);\n      if (symbolKeysA.length !== symbolKeysB.length && getEnumerables(val2, symbolKeysB).length !== count) {\n        return false;\n      }\n    } else {\n      var _symbolKeysB = objectGetOwnPropertySymbols(val2);\n      if (_symbolKeysB.length !== 0 && getEnumerables(val2, _symbolKeysB).length !== 0) {\n        return false;\n      }\n    }\n  }\n  if (aKeys.length === 0 && (iterationType === kNoIterator || iterationType === kIsArray && val1.length === 0 || val1.size === 0)) {\n    return true;\n  }\n\n  // Use memos to handle cycles.\n  if (memos === undefined) {\n    memos = {\n      val1: new Map(),\n      val2: new Map(),\n      position: 0\n    };\n  } else {\n    // We prevent up to two map.has(x) calls by directly retrieving the value\n    // and checking for undefined. The map can only contain numbers, so it is\n    // safe to check for undefined only.\n    var val2MemoA = memos.val1.get(val1);\n    if (val2MemoA !== undefined) {\n      var val2MemoB = memos.val2.get(val2);\n      if (val2MemoB !== undefined) {\n        return val2MemoA === val2MemoB;\n      }\n    }\n    memos.position++;\n  }\n  memos.val1.set(val1, memos.position);\n  memos.val2.set(val2, memos.position);\n  var areEq = objEquiv(val1, val2, strict, aKeys, memos, iterationType);\n  memos.val1.delete(val1);\n  memos.val2.delete(val2);\n  return areEq;\n}\nfunction setHasEqualElement(set, val1, strict, memo) {\n  // Go looking.\n  var setValues = arrayFromSet(set);\n  for (var i = 0; i < setValues.length; i++) {\n    var val2 = setValues[i];\n    if (innerDeepEqual(val1, val2, strict, memo)) {\n      // Remove the matching element to make sure we do not check that again.\n      set.delete(val2);\n      return true;\n    }\n  }\n  return false;\n}\n\n// See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness#Loose_equality_using\n// Sadly it is not possible to detect corresponding values properly in case the\n// type is a string, number, bigint or boolean. The reason is that those values\n// can match lots of different string values (e.g., 1n == '+00001').\nfunction findLooseMatchingPrimitives(prim) {\n  switch (_typeof(prim)) {\n    case 'undefined':\n      return null;\n    case 'object':\n      // Only pass in null as object!\n      return undefined;\n    case 'symbol':\n      return false;\n    case 'string':\n      prim = +prim;\n    // Loose equal entries exist only if the string is possible to convert to\n    // a regular number and not NaN.\n    // Fall through\n    case 'number':\n      if (numberIsNaN(prim)) {\n        return false;\n      }\n  }\n  return true;\n}\nfunction setMightHaveLoosePrim(a, b, prim) {\n  var altValue = findLooseMatchingPrimitives(prim);\n  if (altValue != null) return altValue;\n  return b.has(altValue) && !a.has(altValue);\n}\nfunction mapMightHaveLoosePrim(a, b, prim, item, memo) {\n  var altValue = findLooseMatchingPrimitives(prim);\n  if (altValue != null) {\n    return altValue;\n  }\n  var curB = b.get(altValue);\n  if (curB === undefined && !b.has(altValue) || !innerDeepEqual(item, curB, false, memo)) {\n    return false;\n  }\n  return !a.has(altValue) && innerDeepEqual(item, curB, false, memo);\n}\nfunction setEquiv(a, b, strict, memo) {\n  // This is a lazily initiated Set of entries which have to be compared\n  // pairwise.\n  var set = null;\n  var aValues = arrayFromSet(a);\n  for (var i = 0; i < aValues.length; i++) {\n    var val = aValues[i];\n    // Note: Checking for the objects first improves the performance for object\n    // heavy sets but it is a minor slow down for primitives. As they are fast\n    // to check this improves the worst case scenario instead.\n    if (_typeof(val) === 'object' && val !== null) {\n      if (set === null) {\n        set = new Set();\n      }\n      // If the specified value doesn't exist in the second set its an not null\n      // object (or non strict only: a not matching primitive) we'll need to go\n      // hunting for something thats deep-(strict-)equal to it. To make this\n      // O(n log n) complexity we have to copy these values in a new set first.\n      set.add(val);\n    } else if (!b.has(val)) {\n      if (strict) return false;\n\n      // Fast path to detect missing string, symbol, undefined and null values.\n      if (!setMightHaveLoosePrim(a, b, val)) {\n        return false;\n      }\n      if (set === null) {\n        set = new Set();\n      }\n      set.add(val);\n    }\n  }\n  if (set !== null) {\n    var bValues = arrayFromSet(b);\n    for (var _i = 0; _i < bValues.length; _i++) {\n      var _val = bValues[_i];\n      // We have to check if a primitive value is already\n      // matching and only if it's not, go hunting for it.\n      if (_typeof(_val) === 'object' && _val !== null) {\n        if (!setHasEqualElement(set, _val, strict, memo)) return false;\n      } else if (!strict && !a.has(_val) && !setHasEqualElement(set, _val, strict, memo)) {\n        return false;\n      }\n    }\n    return set.size === 0;\n  }\n  return true;\n}\nfunction mapHasEqualEntry(set, map, key1, item1, strict, memo) {\n  // To be able to handle cases like:\n  //   Map([[{}, 'a'], [{}, 'b']]) vs Map([[{}, 'b'], [{}, 'a']])\n  // ... we need to consider *all* matching keys, not just the first we find.\n  var setValues = arrayFromSet(set);\n  for (var i = 0; i < setValues.length; i++) {\n    var key2 = setValues[i];\n    if (innerDeepEqual(key1, key2, strict, memo) && innerDeepEqual(item1, map.get(key2), strict, memo)) {\n      set.delete(key2);\n      return true;\n    }\n  }\n  return false;\n}\nfunction mapEquiv(a, b, strict, memo) {\n  var set = null;\n  var aEntries = arrayFromMap(a);\n  for (var i = 0; i < aEntries.length; i++) {\n    var _aEntries$i = _slicedToArray(aEntries[i], 2),\n      key = _aEntries$i[0],\n      item1 = _aEntries$i[1];\n    if (_typeof(key) === 'object' && key !== null) {\n      if (set === null) {\n        set = new Set();\n      }\n      set.add(key);\n    } else {\n      // By directly retrieving the value we prevent another b.has(key) check in\n      // almost all possible cases.\n      var item2 = b.get(key);\n      if (item2 === undefined && !b.has(key) || !innerDeepEqual(item1, item2, strict, memo)) {\n        if (strict) return false;\n        // Fast path to detect missing string, symbol, undefined and null\n        // keys.\n        if (!mapMightHaveLoosePrim(a, b, key, item1, memo)) return false;\n        if (set === null) {\n          set = new Set();\n        }\n        set.add(key);\n      }\n    }\n  }\n  if (set !== null) {\n    var bEntries = arrayFromMap(b);\n    for (var _i2 = 0; _i2 < bEntries.length; _i2++) {\n      var _bEntries$_i = _slicedToArray(bEntries[_i2], 2),\n        _key = _bEntries$_i[0],\n        item = _bEntries$_i[1];\n      if (_typeof(_key) === 'object' && _key !== null) {\n        if (!mapHasEqualEntry(set, a, _key, item, strict, memo)) return false;\n      } else if (!strict && (!a.has(_key) || !innerDeepEqual(a.get(_key), item, false, memo)) && !mapHasEqualEntry(set, a, _key, item, false, memo)) {\n        return false;\n      }\n    }\n    return set.size === 0;\n  }\n  return true;\n}\nfunction objEquiv(a, b, strict, keys, memos, iterationType) {\n  // Sets and maps don't have their entries accessible via normal object\n  // properties.\n  var i = 0;\n  if (iterationType === kIsSet) {\n    if (!setEquiv(a, b, strict, memos)) {\n      return false;\n    }\n  } else if (iterationType === kIsMap) {\n    if (!mapEquiv(a, b, strict, memos)) {\n      return false;\n    }\n  } else if (iterationType === kIsArray) {\n    for (; i < a.length; i++) {\n      if (hasOwnProperty(a, i)) {\n        if (!hasOwnProperty(b, i) || !innerDeepEqual(a[i], b[i], strict, memos)) {\n          return false;\n        }\n      } else if (hasOwnProperty(b, i)) {\n        return false;\n      } else {\n        // Array is sparse.\n        var keysA = Object.keys(a);\n        for (; i < keysA.length; i++) {\n          var key = keysA[i];\n          if (!hasOwnProperty(b, key) || !innerDeepEqual(a[key], b[key], strict, memos)) {\n            return false;\n          }\n        }\n        if (keysA.length !== Object.keys(b).length) {\n          return false;\n        }\n        return true;\n      }\n    }\n  }\n\n  // The pair must have equivalent values for every corresponding key.\n  // Possibly expensive deep test:\n  for (i = 0; i < keys.length; i++) {\n    var _key2 = keys[i];\n    if (!innerDeepEqual(a[_key2], b[_key2], strict, memos)) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction isDeepEqual(val1, val2) {\n  return innerDeepEqual(val1, val2, kLoose);\n}\nfunction isDeepStrictEqual(val1, val2) {\n  return innerDeepEqual(val1, val2, kStrict);\n}\nmodule.exports = {\n  isDeepEqual: isDeepEqual,\n  isDeepStrictEqual: isDeepStrictEqual\n};","// Currently in sync with Node.js lib/assert.js\n// https://github.com/nodejs/node/commit/2a51ae424a513ec9a6aa3466baa0cc1d55dd4f3b\n\n// Originally from narwhal.js (http://narwhaljs.org)\n// Copyright (c) 2009 Thomas Robinson <280north.com>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the 'Software'), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nvar _require = require('./internal/errors'),\n  _require$codes = _require.codes,\n  ERR_AMBIGUOUS_ARGUMENT = _require$codes.ERR_AMBIGUOUS_ARGUMENT,\n  ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n  ERR_INVALID_ARG_VALUE = _require$codes.ERR_INVALID_ARG_VALUE,\n  ERR_INVALID_RETURN_VALUE = _require$codes.ERR_INVALID_RETURN_VALUE,\n  ERR_MISSING_ARGS = _require$codes.ERR_MISSING_ARGS;\nvar AssertionError = require('./internal/assert/assertion_error');\nvar _require2 = require('util/'),\n  inspect = _require2.inspect;\nvar _require$types = require('util/').types,\n  isPromise = _require$types.isPromise,\n  isRegExp = _require$types.isRegExp;\nvar objectAssign = require('object.assign/polyfill')();\nvar objectIs = require('object-is/polyfill')();\nvar RegExpPrototypeTest = require('call-bind/callBound')('RegExp.prototype.test');\nvar errorCache = new Map();\nvar isDeepEqual;\nvar isDeepStrictEqual;\nvar parseExpressionAt;\nvar findNodeAround;\nvar decoder;\nfunction lazyLoadComparison() {\n  var comparison = require('./internal/util/comparisons');\n  isDeepEqual = comparison.isDeepEqual;\n  isDeepStrictEqual = comparison.isDeepStrictEqual;\n}\n\n// Escape control characters but not \\n and \\t to keep the line breaks and\n// indentation intact.\n// eslint-disable-next-line no-control-regex\nvar escapeSequencesRegExp = /[\\x00-\\x08\\x0b\\x0c\\x0e-\\x1f]/g;\nvar meta = [\"\\\\u0000\", \"\\\\u0001\", \"\\\\u0002\", \"\\\\u0003\", \"\\\\u0004\", \"\\\\u0005\", \"\\\\u0006\", \"\\\\u0007\", '\\\\b', '', '', \"\\\\u000b\", '\\\\f', '', \"\\\\u000e\", \"\\\\u000f\", \"\\\\u0010\", \"\\\\u0011\", \"\\\\u0012\", \"\\\\u0013\", \"\\\\u0014\", \"\\\\u0015\", \"\\\\u0016\", \"\\\\u0017\", \"\\\\u0018\", \"\\\\u0019\", \"\\\\u001a\", \"\\\\u001b\", \"\\\\u001c\", \"\\\\u001d\", \"\\\\u001e\", \"\\\\u001f\"];\nvar escapeFn = function escapeFn(str) {\n  return meta[str.charCodeAt(0)];\n};\nvar warned = false;\n\n// The assert module provides functions that throw\n// AssertionError's when particular conditions are not met. The\n// assert module must conform to the following interface.\n\nvar assert = module.exports = ok;\nvar NO_EXCEPTION_SENTINEL = {};\n\n// All of the following functions must throw an AssertionError\n// when a corresponding condition is not met, with a message that\n// may be undefined if not provided. All assertion methods provide\n// both the actual and expected values to the assertion error for\n// display purposes.\n\nfunction innerFail(obj) {\n  if (obj.message instanceof Error) throw obj.message;\n  throw new AssertionError(obj);\n}\nfunction fail(actual, expected, message, operator, stackStartFn) {\n  var argsLen = arguments.length;\n  var internalMessage;\n  if (argsLen === 0) {\n    internalMessage = 'Failed';\n  } else if (argsLen === 1) {\n    message = actual;\n    actual = undefined;\n  } else {\n    if (warned === false) {\n      warned = true;\n      var warn = process.emitWarning ? process.emitWarning : console.warn.bind(console);\n      warn('assert.fail() with more than one argument is deprecated. ' + 'Please use assert.strictEqual() instead or only pass a message.', 'DeprecationWarning', 'DEP0094');\n    }\n    if (argsLen === 2) operator = '!=';\n  }\n  if (message instanceof Error) throw message;\n  var errArgs = {\n    actual: actual,\n    expected: expected,\n    operator: operator === undefined ? 'fail' : operator,\n    stackStartFn: stackStartFn || fail\n  };\n  if (message !== undefined) {\n    errArgs.message = message;\n  }\n  var err = new AssertionError(errArgs);\n  if (internalMessage) {\n    err.message = internalMessage;\n    err.generatedMessage = true;\n  }\n  throw err;\n}\nassert.fail = fail;\n\n// The AssertionError is defined in internal/error.\nassert.AssertionError = AssertionError;\nfunction innerOk(fn, argLen, value, message) {\n  if (!value) {\n    var generatedMessage = false;\n    if (argLen === 0) {\n      generatedMessage = true;\n      message = 'No value argument passed to `assert.ok()`';\n    } else if (message instanceof Error) {\n      throw message;\n    }\n    var err = new AssertionError({\n      actual: value,\n      expected: true,\n      message: message,\n      operator: '==',\n      stackStartFn: fn\n    });\n    err.generatedMessage = generatedMessage;\n    throw err;\n  }\n}\n\n// Pure assertion tests whether a value is truthy, as determined\n// by !!value.\nfunction ok() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n  innerOk.apply(void 0, [ok, args.length].concat(args));\n}\nassert.ok = ok;\n\n// The equality assertion tests shallow, coercive equality with ==.\n/* eslint-disable no-restricted-properties */\nassert.equal = function equal(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  // eslint-disable-next-line eqeqeq\n  if (actual != expected) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: '==',\n      stackStartFn: equal\n    });\n  }\n};\n\n// The non-equality assertion tests for whether two objects are not\n// equal with !=.\nassert.notEqual = function notEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  // eslint-disable-next-line eqeqeq\n  if (actual == expected) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: '!=',\n      stackStartFn: notEqual\n    });\n  }\n};\n\n// The equivalence assertion tests a deep equality relation.\nassert.deepEqual = function deepEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  if (isDeepEqual === undefined) lazyLoadComparison();\n  if (!isDeepEqual(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'deepEqual',\n      stackStartFn: deepEqual\n    });\n  }\n};\n\n// The non-equivalence assertion tests for any deep inequality.\nassert.notDeepEqual = function notDeepEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  if (isDeepEqual === undefined) lazyLoadComparison();\n  if (isDeepEqual(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'notDeepEqual',\n      stackStartFn: notDeepEqual\n    });\n  }\n};\n/* eslint-enable */\n\nassert.deepStrictEqual = function deepStrictEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  if (isDeepEqual === undefined) lazyLoadComparison();\n  if (!isDeepStrictEqual(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'deepStrictEqual',\n      stackStartFn: deepStrictEqual\n    });\n  }\n};\nassert.notDeepStrictEqual = notDeepStrictEqual;\nfunction notDeepStrictEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  if (isDeepEqual === undefined) lazyLoadComparison();\n  if (isDeepStrictEqual(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'notDeepStrictEqual',\n      stackStartFn: notDeepStrictEqual\n    });\n  }\n}\nassert.strictEqual = function strictEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  if (!objectIs(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'strictEqual',\n      stackStartFn: strictEqual\n    });\n  }\n};\nassert.notStrictEqual = function notStrictEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  if (objectIs(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'notStrictEqual',\n      stackStartFn: notStrictEqual\n    });\n  }\n};\nvar Comparison = /*#__PURE__*/_createClass(function Comparison(obj, keys, actual) {\n  var _this = this;\n  _classCallCheck(this, Comparison);\n  keys.forEach(function (key) {\n    if (key in obj) {\n      if (actual !== undefined && typeof actual[key] === 'string' && isRegExp(obj[key]) && RegExpPrototypeTest(obj[key], actual[key])) {\n        _this[key] = actual[key];\n      } else {\n        _this[key] = obj[key];\n      }\n    }\n  });\n});\nfunction compareExceptionKey(actual, expected, key, message, keys, fn) {\n  if (!(key in actual) || !isDeepStrictEqual(actual[key], expected[key])) {\n    if (!message) {\n      // Create placeholder objects to create a nice output.\n      var a = new Comparison(actual, keys);\n      var b = new Comparison(expected, keys, actual);\n      var err = new AssertionError({\n        actual: a,\n        expected: b,\n        operator: 'deepStrictEqual',\n        stackStartFn: fn\n      });\n      err.actual = actual;\n      err.expected = expected;\n      err.operator = fn.name;\n      throw err;\n    }\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: fn.name,\n      stackStartFn: fn\n    });\n  }\n}\nfunction expectedException(actual, expected, msg, fn) {\n  if (typeof expected !== 'function') {\n    if (isRegExp(expected)) return RegExpPrototypeTest(expected, actual);\n    // assert.doesNotThrow does not accept objects.\n    if (arguments.length === 2) {\n      throw new ERR_INVALID_ARG_TYPE('expected', ['Function', 'RegExp'], expected);\n    }\n\n    // Handle primitives properly.\n    if (_typeof(actual) !== 'object' || actual === null) {\n      var err = new AssertionError({\n        actual: actual,\n        expected: expected,\n        message: msg,\n        operator: 'deepStrictEqual',\n        stackStartFn: fn\n      });\n      err.operator = fn.name;\n      throw err;\n    }\n    var keys = Object.keys(expected);\n    // Special handle errors to make sure the name and the message are compared\n    // as well.\n    if (expected instanceof Error) {\n      keys.push('name', 'message');\n    } else if (keys.length === 0) {\n      throw new ERR_INVALID_ARG_VALUE('error', expected, 'may not be an empty object');\n    }\n    if (isDeepEqual === undefined) lazyLoadComparison();\n    keys.forEach(function (key) {\n      if (typeof actual[key] === 'string' && isRegExp(expected[key]) && RegExpPrototypeTest(expected[key], actual[key])) {\n        return;\n      }\n      compareExceptionKey(actual, expected, key, msg, keys, fn);\n    });\n    return true;\n  }\n  // Guard instanceof against arrow functions as they don't have a prototype.\n  if (expected.prototype !== undefined && actual instanceof expected) {\n    return true;\n  }\n  if (Error.isPrototypeOf(expected)) {\n    return false;\n  }\n  return expected.call({}, actual) === true;\n}\nfunction getActual(fn) {\n  if (typeof fn !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('fn', 'Function', fn);\n  }\n  try {\n    fn();\n  } catch (e) {\n    return e;\n  }\n  return NO_EXCEPTION_SENTINEL;\n}\nfunction checkIsPromise(obj) {\n  // Accept native ES6 promises and promises that are implemented in a similar\n  // way. Do not accept thenables that use a function as `obj` and that have no\n  // `catch` handler.\n\n  // TODO: thenables are checked up until they have the correct methods,\n  // but according to documentation, the `then` method should receive\n  // the `fulfill` and `reject` arguments as well or it may be never resolved.\n\n  return isPromise(obj) || obj !== null && _typeof(obj) === 'object' && typeof obj.then === 'function' && typeof obj.catch === 'function';\n}\nfunction waitForActual(promiseFn) {\n  return Promise.resolve().then(function () {\n    var resultPromise;\n    if (typeof promiseFn === 'function') {\n      // Return a rejected promise if `promiseFn` throws synchronously.\n      resultPromise = promiseFn();\n      // Fail in case no promise is returned.\n      if (!checkIsPromise(resultPromise)) {\n        throw new ERR_INVALID_RETURN_VALUE('instance of Promise', 'promiseFn', resultPromise);\n      }\n    } else if (checkIsPromise(promiseFn)) {\n      resultPromise = promiseFn;\n    } else {\n      throw new ERR_INVALID_ARG_TYPE('promiseFn', ['Function', 'Promise'], promiseFn);\n    }\n    return Promise.resolve().then(function () {\n      return resultPromise;\n    }).then(function () {\n      return NO_EXCEPTION_SENTINEL;\n    }).catch(function (e) {\n      return e;\n    });\n  });\n}\nfunction expectsError(stackStartFn, actual, error, message) {\n  if (typeof error === 'string') {\n    if (arguments.length === 4) {\n      throw new ERR_INVALID_ARG_TYPE('error', ['Object', 'Error', 'Function', 'RegExp'], error);\n    }\n    if (_typeof(actual) === 'object' && actual !== null) {\n      if (actual.message === error) {\n        throw new ERR_AMBIGUOUS_ARGUMENT('error/message', \"The error message \\\"\".concat(actual.message, \"\\\" is identical to the message.\"));\n      }\n    } else if (actual === error) {\n      throw new ERR_AMBIGUOUS_ARGUMENT('error/message', \"The error \\\"\".concat(actual, \"\\\" is identical to the message.\"));\n    }\n    message = error;\n    error = undefined;\n  } else if (error != null && _typeof(error) !== 'object' && typeof error !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('error', ['Object', 'Error', 'Function', 'RegExp'], error);\n  }\n  if (actual === NO_EXCEPTION_SENTINEL) {\n    var details = '';\n    if (error && error.name) {\n      details += \" (\".concat(error.name, \")\");\n    }\n    details += message ? \": \".concat(message) : '.';\n    var fnType = stackStartFn.name === 'rejects' ? 'rejection' : 'exception';\n    innerFail({\n      actual: undefined,\n      expected: error,\n      operator: stackStartFn.name,\n      message: \"Missing expected \".concat(fnType).concat(details),\n      stackStartFn: stackStartFn\n    });\n  }\n  if (error && !expectedException(actual, error, message, stackStartFn)) {\n    throw actual;\n  }\n}\nfunction expectsNoError(stackStartFn, actual, error, message) {\n  if (actual === NO_EXCEPTION_SENTINEL) return;\n  if (typeof error === 'string') {\n    message = error;\n    error = undefined;\n  }\n  if (!error || expectedException(actual, error)) {\n    var details = message ? \": \".concat(message) : '.';\n    var fnType = stackStartFn.name === 'doesNotReject' ? 'rejection' : 'exception';\n    innerFail({\n      actual: actual,\n      expected: error,\n      operator: stackStartFn.name,\n      message: \"Got unwanted \".concat(fnType).concat(details, \"\\n\") + \"Actual message: \\\"\".concat(actual && actual.message, \"\\\"\"),\n      stackStartFn: stackStartFn\n    });\n  }\n  throw actual;\n}\nassert.throws = function throws(promiseFn) {\n  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n  expectsError.apply(void 0, [throws, getActual(promiseFn)].concat(args));\n};\nassert.rejects = function rejects(promiseFn) {\n  for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n    args[_key3 - 1] = arguments[_key3];\n  }\n  return waitForActual(promiseFn).then(function (result) {\n    return expectsError.apply(void 0, [rejects, result].concat(args));\n  });\n};\nassert.doesNotThrow = function doesNotThrow(fn) {\n  for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n    args[_key4 - 1] = arguments[_key4];\n  }\n  expectsNoError.apply(void 0, [doesNotThrow, getActual(fn)].concat(args));\n};\nassert.doesNotReject = function doesNotReject(fn) {\n  for (var _len5 = arguments.length, args = new Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n    args[_key5 - 1] = arguments[_key5];\n  }\n  return waitForActual(fn).then(function (result) {\n    return expectsNoError.apply(void 0, [doesNotReject, result].concat(args));\n  });\n};\nassert.ifError = function ifError(err) {\n  if (err !== null && err !== undefined) {\n    var message = 'ifError got unwanted exception: ';\n    if (_typeof(err) === 'object' && typeof err.message === 'string') {\n      if (err.message.length === 0 && err.constructor) {\n        message += err.constructor.name;\n      } else {\n        message += err.message;\n      }\n    } else {\n      message += inspect(err);\n    }\n    var newErr = new AssertionError({\n      actual: err,\n      expected: null,\n      operator: 'ifError',\n      message: message,\n      stackStartFn: ifError\n    });\n\n    // Make sure we actually have a stack trace!\n    var origStack = err.stack;\n    if (typeof origStack === 'string') {\n      // This will remove any duplicated frames from the error frames taken\n      // from within `ifError` and add the original error frames to the newly\n      // created ones.\n      var tmp2 = origStack.split('\\n');\n      tmp2.shift();\n      // Filter all frames existing in err.stack.\n      var tmp1 = newErr.stack.split('\\n');\n      for (var i = 0; i < tmp2.length; i++) {\n        // Find the first occurrence of the frame.\n        var pos = tmp1.indexOf(tmp2[i]);\n        if (pos !== -1) {\n          // Only keep new frames.\n          tmp1 = tmp1.slice(0, pos);\n          break;\n        }\n      }\n      newErr.stack = \"\".concat(tmp1.join('\\n'), \"\\n\").concat(tmp2.join('\\n'));\n    }\n    throw newErr;\n  }\n};\n\n// Currently in sync with Node.js lib/assert.js\n// https://github.com/nodejs/node/commit/2a871df3dfb8ea663ef5e1f8f62701ec51384ecb\nfunction internalMatch(string, regexp, message, fn, fnName) {\n  if (!isRegExp(regexp)) {\n    throw new ERR_INVALID_ARG_TYPE('regexp', 'RegExp', regexp);\n  }\n  var match = fnName === 'match';\n  if (typeof string !== 'string' || RegExpPrototypeTest(regexp, string) !== match) {\n    if (message instanceof Error) {\n      throw message;\n    }\n    var generatedMessage = !message;\n\n    // 'The input was expected to not match the regular expression ' +\n    message = message || (typeof string !== 'string' ? 'The \"string\" argument must be of type string. Received type ' + \"\".concat(_typeof(string), \" (\").concat(inspect(string), \")\") : (match ? 'The input did not match the regular expression ' : 'The input was expected to not match the regular expression ') + \"\".concat(inspect(regexp), \". Input:\\n\\n\").concat(inspect(string), \"\\n\"));\n    var err = new AssertionError({\n      actual: string,\n      expected: regexp,\n      message: message,\n      operator: fnName,\n      stackStartFn: fn\n    });\n    err.generatedMessage = generatedMessage;\n    throw err;\n  }\n}\nassert.match = function match(string, regexp, message) {\n  internalMatch(string, regexp, message, match, 'match');\n};\nassert.doesNotMatch = function doesNotMatch(string, regexp, message) {\n  internalMatch(string, regexp, message, doesNotMatch, 'doesNotMatch');\n};\n\n// Expose a strict only variant of assert\nfunction strict() {\n  for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n    args[_key6] = arguments[_key6];\n  }\n  innerOk.apply(void 0, [strict, args.length].concat(args));\n}\nassert.strict = objectAssign(strict, assert, {\n  equal: assert.strictEqual,\n  deepEqual: assert.deepStrictEqual,\n  notEqual: assert.notStrictEqual,\n  notDeepEqual: assert.notDeepStrictEqual\n});\nassert.strict.strict = assert.strict;","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { AmbiguousMonomerType, PolymerBond, ZoomTool } from 'ketcher-core';\nimport { preview } from './constants';\nimport { PreviewStyle } from './AmbiguousMonomerPreview/types';\nimport assert from 'assert';\n\nexport const calculateMonomerPreviewTop = createCalculatePreviewTopFunction(\n  preview.height,\n);\nexport const calculateNucleoElementPreviewTop =\n  createCalculatePreviewTopFunction(preview.heightForNucleotide);\n\ntype CalculatePreviewTopPayload = { left: number; top: number; bottom: number };\n\nfunction calculateTop(\n  target: CalculatePreviewTopPayload,\n  height: number,\n): number {\n  const canvasWrapperBoundingClientRect = ZoomTool.instance?.canvasWrapper\n    .node()\n    ?.getBoundingClientRect();\n  const canvasWrapperTopOffset = canvasWrapperBoundingClientRect?.top || 0;\n  const canvasWrapperBottom = canvasWrapperBoundingClientRect?.bottom || 0;\n  const canvasWrapperHeight = canvasWrapperBoundingClientRect?.height || 0;\n  const topPreviewPosition =\n    target.top - preview.gap - height - preview.topPadding;\n  const bottomPreviewPosition = target.bottom + preview.gap;\n\n  return target.top - canvasWrapperTopOffset >\n    height + preview.gap + preview.topPadding\n    ? topPreviewPosition\n    : target.top + height > canvasWrapperBottom - canvasWrapperTopOffset &&\n      target.top > canvasWrapperHeight / 2\n    ? topPreviewPosition\n    : bottomPreviewPosition;\n}\n\nfunction createCalculatePreviewTopFunction(\n  height: number,\n): (target?: CalculatePreviewTopPayload) => string {\n  return function calculatePreviewTop(\n    target?: CalculatePreviewTopPayload,\n  ): string {\n    if (!target) {\n      return '';\n    }\n\n    const top = calculateTop(target, height);\n    return `${top}px`;\n  };\n}\n\nconst calculateAmbiguousPreviewHeight = (monomersCount: number) => {\n  const headingHeight = 16;\n  const monomersHeight = 35 * monomersCount;\n  return headingHeight + monomersHeight;\n};\n\nexport const calculateAmbiguousMonomerPreviewTop = (\n  monomer: AmbiguousMonomerType,\n) => {\n  const shouldHaveOneLine = monomer.label === 'X' || monomer.label === 'N';\n  const monomersCount = shouldHaveOneLine ? 1 : monomer.monomers.length;\n  const monomersCountToUse = Math.min(5, monomersCount);\n  const height = calculateAmbiguousPreviewHeight(monomersCountToUse);\n\n  return createCalculatePreviewTopFunction(height);\n};\n\nexport function calculateAmbiguousMonomerPreviewLeft(initialLeft: number) {\n  const canvasWrapperBoundingClientRect = ZoomTool.instance.canvasWrapper\n    .node()\n    ?.getBoundingClientRect();\n  const PREVIEW_WIDTH = 70;\n  const canvasWrapperRight = canvasWrapperBoundingClientRect?.right || 0;\n  const canvasWrapperLeft = canvasWrapperBoundingClientRect?.left || 0;\n\n  return initialLeft + PREVIEW_WIDTH / 2 > canvasWrapperRight\n    ? canvasWrapperRight - PREVIEW_WIDTH\n    : initialLeft - PREVIEW_WIDTH / 2 < canvasWrapperLeft\n    ? canvasWrapperLeft\n    : initialLeft - PREVIEW_WIDTH / 2;\n}\n\nexport const calculateBondPreviewPosition = (\n  bond: PolymerBond,\n  bondCoordinates: DOMRect,\n): PreviewStyle => {\n  const { firstMonomer, secondMonomer } = bond;\n\n  assert(secondMonomer);\n\n  const firstMonomerCoordinates = firstMonomer.renderer?.rootBoundingClientRect;\n  const secondMonomerCoordinates =\n    secondMonomer.renderer?.rootBoundingClientRect;\n  const canvasWrapperBoundingClientRect = ZoomTool.instance?.canvasWrapper\n    .node()\n    ?.getBoundingClientRect();\n  const canvasWrapperBottom = canvasWrapperBoundingClientRect?.bottom || 0;\n  const canvasWrapperTop = canvasWrapperBoundingClientRect?.top || 0;\n  const canvasWrapperRight = canvasWrapperBoundingClientRect?.right || 0;\n\n  assert(firstMonomerCoordinates);\n  assert(secondMonomerCoordinates);\n\n  const left = Math.min(\n    bondCoordinates.left,\n    firstMonomerCoordinates.left,\n    secondMonomerCoordinates.left,\n  );\n  const top = Math.min(\n    bondCoordinates.top,\n    firstMonomerCoordinates.top,\n    secondMonomerCoordinates.top,\n  );\n  const right = Math.max(\n    bondCoordinates.right,\n    firstMonomerCoordinates.right,\n    secondMonomerCoordinates.right,\n  );\n  const bottom = Math.max(\n    bondCoordinates.bottom,\n    firstMonomerCoordinates.bottom,\n    secondMonomerCoordinates.bottom,\n  );\n\n  const width = right - left;\n  const height = bottom - top;\n\n  let style: PreviewStyle = {};\n\n  if (width > height) {\n    const leftValue = left + width / 2;\n    let topValue: number;\n    if (top + canvasWrapperTop > preview.height) {\n      topValue = top - preview.heightForBond - preview.gap;\n    } else {\n      topValue = bottom + preview.gap;\n    }\n\n    style = {\n      top: `${topValue}px`,\n      left: `${leftValue}px`,\n      transform: `translate(${\n        leftValue + preview.width > canvasWrapperRight\n          ? '-100%'\n          : leftValue > preview.width / 2\n          ? '-50%'\n          : 0\n      }, 0)`,\n    };\n  } else {\n    const topValue = top + height / 2;\n    let leftValue: number;\n    if (left > preview.widthForBond + preview.gap) {\n      leftValue = left - preview.widthForBond / 2 - preview.gap;\n    } else {\n      leftValue = right + preview.widthForBond / 2 + preview.gap;\n    }\n\n    style = {\n      top: `${topValue}px`,\n      left: `${leftValue}px`,\n      transform: `translate(${leftValue > preview.width / 2 ? '-50%' : 0}, ${\n        topValue + preview.height / 2 > canvasWrapperBottom\n          ? '-100%'\n          : topValue > preview.height / 2\n          ? '-50%'\n          : 0\n      })`,\n    };\n  }\n\n  return style;\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { UiAction, UiActionAction } from '../../../../action';\n\nimport classes from './ActionButton.module.less';\nimport clsx from 'clsx';\nimport { shortcutStr } from 'ketcher-core';\nimport { Icon, IconName } from 'components';\n\ninterface ActionButtonProps {\n  name: IconName;\n  action?: UiAction;\n  status?: {\n    disabled?: boolean;\n    hidden?: boolean;\n  };\n  selected?: boolean;\n  disableableButtons: string[];\n  indigoVerification: boolean;\n  className?: string;\n  dataTestId?: string;\n}\n\ninterface ActionButtonCallProps {\n  onAction: (action: UiActionAction) => void;\n}\n\ntype Props = ActionButtonProps & ActionButtonCallProps;\n\nconst ActionButton = (props: Props) => {\n  const {\n    name,\n    action,\n    status = {},\n    selected = false,\n    disableableButtons,\n    indigoVerification,\n    className,\n    onAction,\n    dataTestId,\n  } = props;\n\n  if (status.hidden) {\n    return null;\n  }\n\n  const shortcut = shortcutStr(action?.shortcut);\n  const disabled =\n    status.disabled ||\n    (indigoVerification && disableableButtons.includes(name));\n\n  const handleClick = () => {\n    if (action?.action) {\n      onAction(action.action);\n    }\n  };\n\n  return (\n    <button\n      data-testid={dataTestId || name}\n      disabled={disabled}\n      onClick={handleClick}\n      title={shortcut ? `${action?.title} (${shortcut})` : action?.title}\n      className={clsx(\n        classes.button,\n        {\n          [classes.selected]: selected,\n        },\n        className,\n      )}\n    >\n      <Icon name={name} />\n      <kbd>{shortcut}</kbd>\n    </button>\n  );\n};\n\nexport type { ActionButtonProps, ActionButtonCallProps };\nexport { ActionButton };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { CSSProperties, Component, ReactNode } from 'react';\n\nimport ReactDOM from 'react-dom';\nimport { KETCHER_ROOT_NODE_CSS_SELECTOR } from 'src/constants';\n\nconst CLASSNAME_SEPARATOR = ' ';\n\ninterface PortalProps {\n  isOpen: boolean;\n  className?: string;\n  style?: CSSProperties;\n  children: ReactNode;\n}\n\ntype Props = PortalProps;\n\nclass Portal extends Component<Props> {\n  private readonly element: HTMLDivElement;\n  private isElementInDom: boolean;\n\n  constructor(props) {\n    super(props);\n    this.element = document.createElement('div');\n    this.isElementInDom = false;\n  }\n\n  componentDidMount() {\n    if (!this.isElementInDom && this.props.isOpen) {\n      this.addElementInDOM();\n    }\n\n    const { className, style } = this.props;\n    if (className) {\n      this.addClassName(className);\n    }\n    if (style) {\n      this.updateStyle(style);\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.isElementInDom) {\n      this.removeElementFromDOM();\n    }\n  }\n\n  componentDidUpdate(prevProps: Readonly<Props>) {\n    const { isOpen, className, style } = this.props;\n    if (className !== prevProps.className) {\n      this.removeClassNames(prevProps.className);\n      this.addClassName(className);\n    }\n\n    if (style !== prevProps.style) {\n      this.updateStyle(style, prevProps.style);\n    }\n\n    if (isOpen === prevProps.isOpen) {\n      return;\n    }\n\n    if (isOpen && !this.isElementInDom) {\n      this.addElementInDOM();\n    } else if (this.isElementInDom) {\n      this.removeElementFromDOM();\n    }\n  }\n\n  private addElementInDOM() {\n    document\n      .querySelector(KETCHER_ROOT_NODE_CSS_SELECTOR)\n      ?.appendChild(this.element);\n    this.isElementInDom = true;\n  }\n\n  private removeElementFromDOM() {\n    document\n      .querySelector(KETCHER_ROOT_NODE_CSS_SELECTOR)\n      ?.removeChild(this.element);\n    this.isElementInDom = false;\n  }\n\n  private removeClassNames(classNames?: string) {\n    if (!classNames) {\n      return;\n    }\n\n    classNames.split(CLASSNAME_SEPARATOR).forEach((className) => {\n      this.element.classList.remove(className);\n    });\n  }\n\n  private addClassName(classNames?: string) {\n    if (!classNames) {\n      return;\n    }\n\n    classNames.split(CLASSNAME_SEPARATOR).forEach((className) => {\n      this.element.classList.add(className);\n    });\n  }\n\n  private updateStyle(style?: CSSProperties, prevStyle?: CSSProperties) {\n    if (prevStyle) {\n      Object.keys(prevStyle).forEach((property) => {\n        this.element.style[property] = '';\n      }, this);\n    }\n\n    if (!style) {\n      return;\n    }\n\n    Object.keys(style).forEach((property) => {\n      this.element.style[property] = style[property];\n    }, this);\n  }\n\n  render() {\n    const { children } = this.props;\n    const component = ReactDOM.createPortal(children, this.element);\n    return component as any;\n  }\n}\n\nexport { Portal };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { MultiToolCallProps, MultiToolProps } from '../variants.types';\n\nimport { ActionButton, ActionButtonProps } from '../../../ActionButton';\nimport action from '../../../../../../action';\nimport { getIconName } from 'components';\n\ntype DefaultMultiToolProps = MultiToolProps;\ntype DefaultMultiToolCallProps = MultiToolCallProps;\n\ntype Props = DefaultMultiToolProps & DefaultMultiToolCallProps;\n\nconst DefaultMultiTool = (props: Props) => {\n  const { options, status, disableableButtons, indigoVerification, onAction } =\n    props;\n\n  return (\n    <>\n      {options.map((toolbarItem) => {\n        const currentStatus = status[toolbarItem.id];\n        const iconName = getIconName(toolbarItem.id);\n        return (\n          iconName && (\n            <ActionButton\n              key={toolbarItem.id}\n              name={iconName}\n              action={action[toolbarItem.id]}\n              status={currentStatus as ActionButtonProps['status']}\n              selected={!!currentStatus?.selected}\n              disableableButtons={disableableButtons}\n              indigoVerification={indigoVerification}\n              onAction={onAction}\n            />\n          )\n        );\n      })}\n    </>\n  );\n};\n\nexport type { DefaultMultiToolProps, DefaultMultiToolCallProps };\nexport { DefaultMultiTool };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { MultiToolCallProps, MultiToolProps } from '../variants.types';\n\nimport { ActionButton, ActionButtonProps } from '../../../ActionButton';\nimport action from '../../../../../../action';\nimport classes from './GroupedMultiTool.module.less';\nimport { getIconName } from 'components';\n\ntype GroupedMultiToolProps = MultiToolProps;\ntype GroupedMultiToolCallProps = MultiToolCallProps;\n\ntype Props = GroupedMultiToolProps & GroupedMultiToolCallProps;\n\nconst GroupedMultiTool = (props: Props) => {\n  const {\n    groups,\n    options,\n    status,\n    disableableButtons,\n    indigoVerification,\n    onAction,\n  } = props;\n\n  if (!groups) {\n    return null;\n  }\n\n  return (\n    <>\n      {groups.map((descriptor) => (\n        <div className={classes.group} key={descriptor.start}>\n          {options\n            .slice(descriptor.start, descriptor.end)\n            .map((toolbarItem) => {\n              const currentStatus = status[toolbarItem.id];\n              const iconName = getIconName(toolbarItem.id);\n              return (\n                iconName && (\n                  <ActionButton\n                    key={toolbarItem.id}\n                    name={iconName}\n                    action={action[toolbarItem.id]}\n                    status={currentStatus as ActionButtonProps['status']}\n                    selected={!!currentStatus?.selected}\n                    disableableButtons={disableableButtons}\n                    indigoVerification={indigoVerification}\n                    onAction={onAction}\n                  />\n                )\n              );\n            })}\n        </div>\n      ))}\n    </>\n  );\n};\n\nexport type { GroupedMultiToolProps, GroupedMultiToolCallProps };\nexport { GroupedMultiTool };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  DefaultMultiTool,\n  classes as defaultClasses,\n} from './DefaultMultiTool';\nimport {\n  MultiToolCallProps,\n  MultiToolProps,\n  MultiToolVariant,\n} from './variants.types';\n\nimport { ComponentType } from 'react';\nimport { GroupedMultiTool } from './GroupedMultiTool';\n\nexport function chooseMultiTool(\n  variant: MultiToolVariant = 'default',\n): [ComponentType<MultiToolProps & MultiToolCallProps>, string?] {\n  switch (variant) {\n    case 'default':\n      return [\n        DefaultMultiTool,\n        `${defaultClasses.default} default-multitool-dropdown`,\n      ];\n\n    case 'grouped':\n      return [GroupedMultiTool, 'grouped-multitool-dropdown'];\n\n    default:\n      throw new Error(`Unsupported variant ${variant}`);\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useEffect, useState } from 'react';\n\nimport { ToolbarItem } from '../../toolbar.types';\n\ntype HookParams = [string, string | null, ToolbarItem[]];\n\nfunction usePortalOpening([id, opened, options]: HookParams): [boolean] {\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n\n  useEffect(() => {\n    const currentId = (options.length && options![0].id) || '';\n    const newState = opened === id || opened === currentId;\n    setIsOpen(newState);\n  }, [opened, options]);\n\n  return [isOpen];\n}\n\nexport { usePortalOpening };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { CSSProperties, RefObject, useEffect, useState } from 'react';\nimport { KETCHER_ROOT_NODE_CSS_SELECTOR } from 'src/constants';\n\ntype HookParams = [RefObject<HTMLDivElement>, boolean];\n\nfunction usePortalStyle([ref, isOpen]: HookParams): [CSSProperties] {\n  const [portalStyle, setPortalStyle] = useState<CSSProperties>({});\n\n  useEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n\n    const editorRect = document\n      .querySelector(KETCHER_ROOT_NODE_CSS_SELECTOR)\n      ?.getBoundingClientRect() || { top: 0, left: 0 };\n    const menuItemRect = ref.current.getBoundingClientRect();\n\n    const top = menuItemRect.top - editorRect.top;\n    const spaceBetween = 4;\n    const left =\n      menuItemRect.left - editorRect.left + menuItemRect.width + spaceBetween;\n\n    setPortalStyle({ top: `${top}px`, left: `${left}px` });\n  }, [ref, isOpen]);\n\n  return [portalStyle];\n}\n\nexport { usePortalStyle };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  ActionButton,\n  ActionButtonCallProps,\n  ActionButtonProps,\n} from '../ActionButton';\nimport { GroupDescriptor, MultiToolVariant } from './variants/variants.types';\nimport { ToolbarItem, ToolbarItemVariant } from '../../toolbar.types';\nimport action, { UiAction, UiActionAction } from '../../../../action';\n\nimport { useRef } from 'react';\nimport clsx from 'clsx';\nimport { Portal } from '../../../../Portal';\nimport { chooseMultiTool } from './variants/chooseMultiTool';\nimport classes from './ToolbarMultiToolItem.module.less';\nimport { usePortalOpening } from './usePortalOpening';\nimport { usePortalStyle } from './usePortalStyle';\nimport { getIconName, Icon } from 'components';\nimport { SettingsManager } from 'ketcher-core';\n\ninterface ToolbarMultiToolItemProps {\n  id: ToolbarItemVariant;\n  options: ToolbarItem[];\n  groups?: GroupDescriptor[];\n  variant?: MultiToolVariant;\n  status: {\n    [key in string]?: UiAction;\n  };\n  opened: string | null;\n  disableableButtons: string[];\n  indigoVerification: boolean;\n  className?: string;\n  vertical?: boolean;\n  dataTestId?: string;\n}\n\ninterface ToolbarMultiToolItemCallProps {\n  onAction: (action: UiActionAction) => void;\n  onOpen: (menuName: string, isSelected: boolean) => void;\n}\n\ntype Props = ToolbarMultiToolItemProps & ToolbarMultiToolItemCallProps;\n\nconst ToolbarMultiToolItem = (props: Props) => {\n  const {\n    id,\n    options,\n    groups,\n    variant,\n    status,\n    opened,\n    indigoVerification,\n    disableableButtons,\n    className,\n    vertical,\n    onAction,\n    onOpen,\n    dataTestId,\n  } = props;\n\n  const ref = useRef<HTMLDivElement>(null);\n  const [isOpen] = usePortalOpening([id, opened, options]);\n  const [portalStyle] = usePortalStyle([ref, isOpen]);\n\n  let selected = false;\n  let currentId = id;\n\n  const selectedTool = options.find(\n    (toolbarItem) => status[toolbarItem.id]?.selected,\n  );\n  if (selectedTool) {\n    currentId = selectedTool.id;\n    selected = true;\n  }\n\n  const currentStatus = status[currentId];\n  // todo: #type find out real type, possible GetActionState is no acceptable here\n  // and check this type convert is redundant\n  selected = selected || Boolean(currentStatus?.selected);\n\n  const allInnerItemsHidden: boolean = options.every(\n    (option) => status[option.id]?.hidden,\n  );\n\n  const displayMultiToolItem = !(allInnerItemsHidden || currentStatus?.hidden);\n\n  if (!currentStatus && options.length) {\n    const savedSelectionTool = SettingsManager.selectionTool;\n    const savedSelectionToolId =\n      savedSelectionTool &&\n      `${savedSelectionTool.tool}-${savedSelectionTool.opts}`;\n    currentId =\n      savedSelectionTool &&\n      savedSelectionToolId &&\n      options.filter(\n        (option) =>\n          !status[option.id]?.hidden && option.id === savedSelectionToolId,\n      )[0]?.id;\n\n    if (!currentId) {\n      currentId =\n        options.filter((option) => !status[option.id]?.hidden)[0]?.id ||\n        options[0].id;\n    }\n  }\n  const onOpenOptions = () => {\n    // TODO: same as #type above\n    onOpen(id, Boolean(currentStatus?.selected));\n  };\n\n  const actionButtonProps: Omit<\n    ActionButtonProps & ActionButtonCallProps,\n    'name' | 'status' | 'action'\n  > = {\n    disableableButtons,\n    indigoVerification,\n    onAction: selected ? () => onOpenOptions() : onAction,\n  };\n\n  const [Component, portalClassName] = chooseMultiTool(variant);\n  const iconName = getIconName(currentId);\n  const isDisabled = currentStatus?.disabled === true;\n  return displayMultiToolItem && iconName ? (\n    <div\n      ref={ref}\n      className={classes.root}\n      data-testid={`${dataTestId || iconName}-in-toolbar`}\n    >\n      <ActionButton\n        {...actionButtonProps}\n        className={className}\n        name={iconName}\n        action={action[currentId]}\n        status={currentStatus as ActionButtonProps['status']}\n        selected={selected}\n        dataTestId={dataTestId || iconName}\n      />\n      {!isOpen && !isDisabled && (\n        <Icon\n          className={`${classes.icon} ${\n            currentStatus?.selected && classes.iconSelected\n          }`}\n          name=\"dropdown\"\n          onClick={onOpenOptions}\n        />\n      )}\n\n      {isOpen ? (\n        <Portal\n          isOpen={isOpen}\n          className={clsx(\n            classes.portal,\n            vertical && classes['portal-vertical'],\n            portalClassName,\n          )}\n          style={portalStyle}\n        >\n          <Component\n            options={options}\n            groups={groups}\n            status={status}\n            disableableButtons={disableableButtons}\n            indigoVerification={indigoVerification}\n            onAction={onAction}\n          />\n        </Portal>\n      ) : null}\n    </div>\n  ) : null;\n};\n\nexport type { ToolbarMultiToolItemProps, ToolbarMultiToolItemCallProps };\nexport { ToolbarMultiToolItem };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport action, { Tools, UiActionAction } from '../../../action';\n\nimport { ActionButton, ActionButtonProps } from './ActionButton';\nimport { ToolbarItem } from '../toolbar.types';\nimport { ToolbarMultiToolItem } from './ToolbarMultiToolItem';\nimport { getIconName } from 'components';\n\ninterface ToolbarGroupItemProps extends ToolbarItem {\n  status: Tools;\n  opened: string | null;\n  disableableButtons: string[];\n  indigoVerification: boolean;\n  className?: string;\n  vertical?: boolean;\n  dataTestId?: string;\n}\n\ninterface ToolbarGroupItemCallProps {\n  onAction: (action: UiActionAction) => void;\n  onOpen: (menuName: string, isSelected: boolean) => void;\n}\n\ntype Props = ToolbarGroupItemProps & ToolbarGroupItemCallProps;\n\nconst ToolbarGroupItem = (props: Props) => {\n  const {\n    id,\n    options,\n    status,\n    className,\n    opened,\n    indigoVerification,\n    disableableButtons,\n    vertical,\n    onAction,\n    onOpen,\n    dataTestId,\n  } = props;\n  if (!options?.length) {\n    const iconName = getIconName(id);\n    return (\n      iconName && (\n        <ActionButton\n          className={className}\n          name={iconName}\n          action={action[id]}\n          status={status[id] as ActionButtonProps['status']}\n          selected={!!status[id]?.selected}\n          indigoVerification={indigoVerification}\n          disableableButtons={disableableButtons}\n          onAction={onAction}\n          dataTestId={dataTestId}\n        />\n      )\n    );\n  }\n\n  return (\n    <ToolbarMultiToolItem\n      className={className}\n      id={id}\n      options={options}\n      status={status}\n      opened={opened}\n      disableableButtons={disableableButtons}\n      indigoVerification={indigoVerification}\n      onAction={onAction}\n      onOpen={onOpen}\n      vertical={vertical}\n      dataTestId={dataTestId}\n    />\n  );\n};\n\nexport type { ToolbarGroupItemProps, ToolbarGroupItemCallProps };\nexport { ToolbarGroupItem };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport action, { Tools, UiAction, UiActionAction } from '../../../../action';\n\nimport { ActionButton } from '../../ToolbarGroupItem/ActionButton';\nimport templates from '../../../../data/templates';\nimport { getIconName } from 'components';\n\ninterface TemplatesListProps {\n  active?: {\n    tool?: string;\n    opts: {\n      struct: any;\n    };\n  };\n  disableableButtons: string[];\n  indigoVerification: boolean;\n  status: Tools;\n}\n\ninterface TemplatesListCallProps {\n  onAction: (action: UiActionAction) => void;\n}\n\ntype Props = TemplatesListProps & TemplatesListCallProps;\n\nconst TemplatesList = (props: Props) => {\n  const { active, disableableButtons, indigoVerification, onAction, status } =\n    props;\n\n  const isTemplate = active && active.tool === 'template';\n\n  const makeAction = (struct, index): UiAction => ({\n    shortcut: action[`template-${index}`].shortcut,\n    action: { tool: 'template', opts: { struct } },\n    title: struct.name,\n  });\n\n  return (\n    <>\n      {templates.map((struct, index) => {\n        const iconName = getIconName(`template-${index}`);\n        return (\n          iconName && (\n            <ActionButton\n              key={iconName}\n              name={iconName}\n              action={makeAction(struct, index)}\n              onAction={onAction}\n              selected={isTemplate && active && active.opts.struct === struct}\n              status={status[`template-${index}`]}\n              disableableButtons={disableableButtons}\n              indigoVerification={indigoVerification}\n            />\n          )\n        );\n      })}\n    </>\n  );\n};\n\nexport type { TemplatesListProps, TemplatesListCallProps };\nexport { TemplatesList };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { FC, PropsWithChildren } from 'react';\nimport {\n  ToolbarGroupItem,\n  ToolbarGroupItemCallProps,\n  ToolbarGroupItemProps,\n} from '../ToolbarGroupItem';\n\nimport { TemplatesList } from './TemplatesList';\nimport classes from './BottomToolbar.module.less';\nimport clsx from 'clsx';\n\nconst Group: FC<{ className?: string } & PropsWithChildren> = ({\n  children,\n  className,\n}) => <div className={clsx(classes.group, className)}>{children}</div>;\n\ninterface BottomToolbarProps\n  extends Omit<ToolbarGroupItemProps, 'id' | 'options'> {\n  className?: string;\n  active?: {\n    opts: any;\n    tool: string;\n  };\n}\n\ntype BottomToolbarCallProps = ToolbarGroupItemCallProps;\n\ntype Props = BottomToolbarProps & BottomToolbarCallProps;\n\nconst BottomToolbar = (props: Props) => {\n  const { className, ...rest } = props;\n\n  return (\n    <div data-testid=\"bottom-toolbar\" className={clsx(classes.root, className)}>\n      <Group>\n        <TemplatesList {...rest} />\n        <ToolbarGroupItem id=\"template-lib\" {...rest} />\n      </Group>\n    </div>\n  );\n};\n\nexport type { BottomToolbarProps, BottomToolbarCallProps };\nexport { BottomToolbar };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { formReducer, formsState } from './form';\n\nexport function openDialog(dispatch, dialogName, props) {\n  return new Promise((resolve, reject) => {\n    dispatch({\n      type: 'MODAL_OPEN',\n      data: {\n        name: dialogName,\n        prop: {\n          ...props,\n          onResult: resolve,\n          onCancel: reject,\n        },\n      },\n    });\n  });\n}\n\nfunction modalReducer(state = null, action) {\n  const { type, data } = action;\n\n  if (type === 'UPDATE_FORM') {\n    // Don't update if modal has already been closed\n    // TODO: refactor actions and server functions in /src/script/ui/state/server/index.js to\n    // not send 'UPDATE_FORM' action to a closed modal in the first place\n    if (!state) {\n      return null;\n    }\n\n    const formState = formReducer(state.form, action);\n    return { ...state, form: formState };\n  }\n\n  switch (type) {\n    case 'MODAL_CLOSE':\n      if (state?.parentModal) {\n        state.parentModal.prop = {\n          ...state.parentModal.prop,\n          ...state.parentModal.form.result,\n          isRestoredModal: true,\n        };\n        return state.parentModal;\n      }\n      return null;\n    case 'MODAL_OPEN':\n      return {\n        name: data.name,\n        form: formsState[data.name] || null,\n        prop: data.prop || null,\n        parentModal: data.prop?.isNestedModal ? state : null,\n      };\n    default:\n      return state;\n  }\n}\n\nexport default modalReducer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport initTmplLib, { initLib } from './init-lib';\n\nimport { KetcherLogger, KetSerializer } from 'ketcher-core';\nimport { omit } from 'lodash/fp';\nimport { openDialog } from '../modal';\nimport { storage } from '../../storage-ext';\n\nexport { initTmplLib };\n\n/* TEMPLATES */\nexport function selectTmpl(tmpl) {\n  return {\n    type: 'TMPL_SELECT',\n    data: { selected: tmpl },\n  };\n}\n\nexport function changeGroup(group) {\n  return {\n    type: 'TMPL_CHANGE_GROUP',\n    data: { group, selected: null },\n  };\n}\n\nexport function changeFilter(filter) {\n  return {\n    type: 'TMPL_CHANGE_FILTER',\n    data: { filter, selected: null },\n  };\n}\n\nexport function changeTab(tab) {\n  return {\n    type: 'TMPL_CHANGE_TAB',\n    data: { tab },\n  };\n}\n\n/* TEMPLATE-ATTACH-EDIT */\nexport function initAttach(name, attach) {\n  return {\n    type: 'INIT_ATTACH',\n    data: {\n      name,\n      atomid: attach.atomid,\n      bondid: attach.bondid,\n    },\n  };\n}\n\nexport function setAttachPoints(attach) {\n  return {\n    type: 'SET_ATTACH_POINTS',\n    data: {\n      atomid: attach.atomid,\n      bondid: attach.bondid,\n    },\n  };\n}\n\nexport function setTmplName(name) {\n  return {\n    type: 'SET_TMPL_NAME',\n    data: { name },\n  };\n}\n\nexport function editTmpl(tmpl) {\n  return (dispatch, getState) => {\n    openDialog(dispatch, 'attach', { tmpl })\n      .then(\n        (formData) => {\n          tmpl.struct.name = formData ? formData.name.trim() : tmpl.struct.name;\n          tmpl.props = formData\n            ? Object.assign({}, tmpl.props, formData.attach)\n            : tmpl.props;\n\n          if (tmpl.props.group === 'User Templates')\n            updateLocalStore(getState().templates.lib);\n        },\n        () => null,\n      )\n      .then(() =>\n        openDialog(dispatch, 'templates').catch((e) => {\n          KetcherLogger.error('index.ts::editTmpl', e);\n        }),\n      );\n  };\n}\n\nexport function deleteUserTmpl(tmpl) {\n  return {\n    type: 'TMPL_DELETE',\n    data: {\n      tmpl,\n    },\n  };\n}\n\nexport function deleteTmpl(tmpl) {\n  return (dispatch, getState) => {\n    const lib = getState().templates.lib.filter((value) => value !== tmpl);\n    dispatch(deleteUserTmpl(tmpl));\n    updateLocalStore(lib);\n  };\n}\n\n/* SAVE */\nexport function saveUserTmpl(struct) {\n  // TODO: structStr can be not in mol format => structformat.toString ...\n  const tmpl = { struct: struct.clone(), props: {} };\n\n  return (dispatch, getState) => {\n    openDialog(dispatch, 'attach', { tmpl })\n      .then(({ name, attach }) => {\n        tmpl.struct.name = name.trim();\n        tmpl.props = { ...attach, group: 'User Templates' };\n\n        const lib = getState().templates.lib.concat(tmpl);\n        dispatch(initLib(lib));\n        updateLocalStore(lib);\n      })\n      .catch((e) => {\n        KetcherLogger.error('index.ts::saveUserTmpl', e);\n      });\n  };\n}\n\nfunction updateLocalStore(lib) {\n  const ketSerializer = new KetSerializer();\n  const userLib = lib\n    .filter((item) => item.props.group === 'User Templates')\n    .map((item) => ({\n      struct: ketSerializer.serialize(item.struct),\n      props: Object.assign({}, omit(['group'], item.props)),\n    }));\n\n  storage.setItem('ketcher-tmpls', userLib);\n}\n\n/* REDUCER */\nexport const initTmplsState = {\n  lib: [],\n  selected: null,\n  filter: '',\n  group: null,\n  attach: {},\n  mode: 'classic',\n  tab: 0,\n};\n\nconst tmplActions = [\n  'TMPL_INIT',\n  'TMPL_SELECT',\n  'TMPL_CHANGE_GROUP',\n  'TMPL_CHANGE_FILTER',\n  'TMPL_CHANGE_TAB',\n];\n\nconst attachActions = ['INIT_ATTACH', 'SET_ATTACH_POINTS', 'SET_TMPL_NAME'];\n\nfunction templatesReducer(state = initTmplsState, action) {\n  if (tmplActions.includes(action.type))\n    return Object.assign({}, state, action.data);\n\n  if (attachActions.includes(action.type)) {\n    const attach = Object.assign({}, state.attach, action.data);\n    return { ...state, attach };\n  }\n\n  if (action.type === 'TMPL_DELETE') {\n    const currentState = Object.assign({}, state);\n    const lib = currentState.lib.filter((value) => value !== action.data.tmpl);\n    return { ...currentState, lib };\n  }\n\n  return state;\n}\n\nexport default templatesReducer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { AbbreviationLookupState } from './abbreviationLookup.types';\n\nconst initialState: AbbreviationLookupState = {\n  isOpen: false,\n};\n\nconst ABBREVIATION_LOOKUP_ACTIONS = {\n  ABBR_LOOKUP_INIT: 'ABBR_LOOKUP_INIT',\n  ABBR_LOOKUP_SHOW: 'ABBR_LOOKUP_SHOW',\n  ABBR_LOOKUP_CLOSE: 'ABBR_LOOKUP_CLOSE',\n} as const;\n\nexport const initAbbreviationLookup = (key: string) => ({\n  type: ABBREVIATION_LOOKUP_ACTIONS.ABBR_LOOKUP_INIT,\n  data: key,\n});\n\nexport const showAbbreviationLookup = (key: string) => ({\n  type: ABBREVIATION_LOOKUP_ACTIONS.ABBR_LOOKUP_SHOW,\n  data: key,\n});\n\nexport const closeAbbreviationLookup = () => ({\n  type: ABBREVIATION_LOOKUP_ACTIONS.ABBR_LOOKUP_CLOSE,\n});\n\ntype AbbrLookupAction =\n  | ReturnType<typeof initAbbreviationLookup>\n  | ReturnType<typeof showAbbreviationLookup>\n  | ReturnType<typeof closeAbbreviationLookup>;\n\nfunction abbreviationLookupReducer(\n  state: AbbreviationLookupState = initialState,\n  action: AbbrLookupAction,\n): AbbreviationLookupState {\n  switch (action.type) {\n    case ABBREVIATION_LOOKUP_ACTIONS.ABBR_LOOKUP_INIT: {\n      return {\n        isOpen: false,\n        lookupValue: action.data,\n      };\n    }\n\n    case ABBREVIATION_LOOKUP_ACTIONS.ABBR_LOOKUP_SHOW: {\n      return {\n        isOpen: true,\n        lookupValue: `${state.lookupValue}${action.data}`,\n      };\n    }\n\n    case ABBREVIATION_LOOKUP_ACTIONS.ABBR_LOOKUP_CLOSE: {\n      return {\n        isOpen: false,\n        lookupValue: undefined,\n      };\n    }\n\n    default:\n      return state;\n  }\n}\n\nexport default abbreviationLookupReducer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { CommonState } from './common.types';\n\nconst initialState: CommonState = {\n  cursorPosition: {\n    x: 0,\n    y: 0,\n  },\n};\n\nconst COMMON_ACTIONS = {\n  COMMON_UPDATE_CURSOR_POSITION: 'COMMON_UPDATE_CURSOR_POSITION',\n} as const;\n\nexport const updateCursorPosition = (x: number, y: number) => ({\n  type: COMMON_ACTIONS.COMMON_UPDATE_CURSOR_POSITION,\n  data: {\n    x,\n    y,\n  },\n});\n\ntype CommonAction = ReturnType<typeof updateCursorPosition>;\n\nfunction commonReducer(\n  state: CommonState = initialState,\n  action: CommonAction,\n): CommonState {\n  switch (action.type) {\n    case COMMON_ACTIONS.COMMON_UPDATE_CURSOR_POSITION: {\n      return {\n        ...state,\n        cursorPosition: {\n          x: action.data.x,\n          y: action.data.y,\n        },\n      };\n    }\n\n    default:\n      return state;\n  }\n}\n\nexport default commonReducer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { isEmpty, isEqual, pickBy } from 'lodash/fp';\nimport { SettingsManager } from 'ketcher-core';\nimport actions from '../../action';\n\nfunction execute(activeTool, { action, editor, server, options }) {\n  if (action.tool) {\n    if (editor.tool(action.tool, action.opts)) {\n      return action;\n    }\n  } else if (typeof action === 'function') {\n    action(editor, server, options);\n  } else {\n    console.info('no action');\n  }\n  return activeTool;\n}\n\nfunction selected(actObj, activeTool, { editor, server }) {\n  if (typeof actObj.selected === 'function')\n    return actObj.selected(editor, server);\n  else if (actObj.action && actObj.action.tool)\n    return isEqual(activeTool, actObj.action);\n  return false;\n}\n\nfunction disabled(actObj, { editor, server, options }) {\n  if (typeof actObj.disabled === 'function')\n    return actObj.disabled(editor, server, options);\n  return false;\n}\n\nfunction hidden(actObj, { options }) {\n  if (typeof actObj.hidden === 'function') return actObj.hidden(options);\n  return false;\n}\n\nfunction status(actionName, activeTool, params) {\n  const actObj = actions[actionName];\n  return pickBy((x) => x, {\n    selected: selected(actObj, activeTool, params),\n    disabled: disabled(actObj, params),\n    hidden: hidden(actObj, params),\n  });\n}\n\n// TODO need a refactoring for this reducer since it uses (probably unintentionally falling through switch-case)\n// F.e. when it gets action: INIT it will call all cases below - INIT+ACTION+UPDATE\n/* eslint-disable no-fallthrough */\nexport default function (state = null, { type, action, ...params }) {\n  let activeTool;\n  switch (type) {\n    case 'INIT': {\n      const savedSelectedTool = SettingsManager.selectionTool;\n      action = savedSelectedTool || actions['select-rectangle'].action;\n    }\n\n    case 'ACTION': {\n      activeTool = execute(state && state.activeTool, {\n        ...params,\n        action,\n      });\n      if (activeTool.tool === 'select') {\n        SettingsManager.selectionTool = activeTool;\n      }\n    }\n\n    case 'UPDATE':\n      return Object.keys(actions).reduce(\n        (res, actionName) => {\n          const value = status(actionName, res.activeTool, params);\n          if (!isEmpty(value)) res[actionName] = value;\n          return res;\n        },\n        { activeTool: activeTool || state.activeTool },\n      );\n\n    default:\n      return state;\n  }\n}\n/* eslint-enable no-fallthrough */\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport * as CFB from 'cfb';\n\nexport function fileOpener(server) {\n  return new Promise((resolve, reject) => {\n    // TODO: refactor return\n    if (global.FileReader) {\n      resolve(throughFileReader);\n    } else if (global.ActiveXObject) {\n      try {\n        const fso = new ActiveXObject('Scripting.FileSystemObject'); // eslint-disable-line no-undef\n        resolve((file) => Promise.resolve(throughFileSystemObject(fso, file)));\n      } catch (e) {\n        reject(e);\n      }\n    } else if (server) {\n      resolve(\n        server.then(() => {\n          throw Error(\"Server doesn't still support echo method\");\n          // return resolve(throughForm2IframePosting);\n        }),\n      );\n    } else {\n      reject(new Error('Your browser does not support opening files locally'));\n    }\n  });\n}\n\nfunction arrayBufferToBase64(buffer) {\n  let binary = '';\n  const bytes = new Uint8Array(buffer);\n  const len = bytes.byteLength;\n  for (let i = 0; i < len; i++) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n  return btoa(binary);\n}\n\nfunction throughFileReader(file) {\n  const CDX = 'cdx';\n  const PPTX = 'pptx';\n  let fileType;\n  if (file.name.endsWith('cdx') && !file.name.endsWith('b64cdx')) {\n    fileType = CDX;\n  } else if (file.name.endsWith('pptx')) {\n    fileType = PPTX;\n  }\n\n  return new Promise((resolve, reject) => {\n    const rd = new FileReader(); // eslint-disable-line no-undef\n\n    rd.onload = (e) => {\n      let content, structures;\n      let cfb;\n      switch (fileType) {\n        case CDX:\n          content = rd.result.split(',').at(-1);\n          break;\n        case PPTX:\n          cfb = CFB.read(e.target.result, { type: 'binary' });\n          structures = [];\n          cfb.FullPaths.forEach((path) => {\n            if (path.endsWith('.bin')) {\n              const ole = CFB.find(cfb, path);\n              const sdf = CFB.find(CFB.parse(ole?.content), 'CONTENTS');\n              const base64String = arrayBufferToBase64(sdf?.content);\n              if (base64String.startsWith('VmpDRDAxMDAEAw')) {\n                structures.push(base64String);\n              }\n            }\n          });\n          content = { structures, isPPTX: true };\n          break;\n        default:\n          content = rd.result;\n          break;\n      }\n      if (file.msClose) file.msClose();\n      resolve(content);\n    };\n\n    rd.onerror = (event) => {\n      reject(event);\n    };\n    switch (fileType) {\n      case CDX:\n        rd.readAsDataURL(file);\n        break;\n      case PPTX:\n        rd.readAsBinaryString(file);\n        break;\n      default:\n        rd.readAsText(file, 'UTF-8');\n        break;\n    }\n  });\n}\n\nfunction throughFileSystemObject(fso, file) {\n  // IE9 and below\n  const fd = fso.OpenTextFile(file.name, 1);\n  const content = fd.ReadAll();\n  fd.Close();\n  return content;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport _ from 'lodash';\nimport { escapeRegExp, filter as _filter, flow, reduce } from 'lodash/fp';\nimport { Option } from '../component/form/Select';\n\nconst GREEK_SIMBOLS = {\n  Alpha: 'A',\n  alpha: 'ฮฑ',\n  Beta: 'B',\n  beta: 'ฮฒ',\n  Gamma: 'ะ',\n  gamma: 'ฮณ',\n};\n\nconst greekRe = new RegExp(\n  '\\\\b' + Object.keys(GREEK_SIMBOLS).join('\\\\b|\\\\b') + '\\\\b',\n  'g',\n);\n\nexport function greekify(str: string): string {\n  return str.replace(greekRe, (sym) => GREEK_SIMBOLS[sym]);\n}\n\nexport function filterLib(lib, filter: string) {\n  const trimmedFilter = filter.trim();\n  const re = new RegExp(escapeRegExp(greekify(trimmedFilter)), 'i');\n  return flow(\n    _filter(\n      (item: any) =>\n        !trimmedFilter ||\n        re.test(greekify(item.struct.name)) ||\n        re.test(greekify(item.props.group)),\n    ),\n    reduce((res, item) => {\n      if (!res[item.props.group]) res[item.props.group] = [item];\n      else res[item.props.group].push(item);\n      return res;\n    }, {}),\n  )(lib);\n}\n\nexport function filterFGLib(lib, filter) {\n  const trimmedFilter = filter.trim();\n  const re = new RegExp(escapeRegExp(greekify(trimmedFilter)), 'i');\n  const searchFunction = (item) => {\n    const fields = [\n      item.struct.name,\n      item.props.abbreviation,\n      item.props.name,\n    ].filter(Boolean);\n    return fields.some((field) => re.test(greekify(field)));\n  };\n  return flow(\n    _filter((item: any) => !trimmedFilter || searchFunction(item)),\n    reduce((res, item) => {\n      if (!res[item.props.group]) res[item.props.group] = [item];\n      else res[item.props.group].push(item);\n      return res;\n    }, {}),\n  )(lib);\n}\n\nexport const getSelectOptionsFromSchema = (schema): Array<Option> => {\n  return schema.enum.reduce((options, value, index) => {\n    options.push({\n      value,\n      label: schema?.enumNames?.[index] ?? value,\n    });\n\n    return options;\n  }, []);\n};\n\n/**\n * Creates a function, which is not called if the current argument is the same as the last one\n * @param func function to be debounced\n * @param delay delay in ms\n * @param skipArguments indexes in arguments array to skip for comparison\n * @returns debounced function, which is not called with previous argument\n */\nexport function memoizedDebounce(\n  func,\n  delay = 0,\n  skipArguments: number[] = [],\n) {\n  let lastArgs;\n  const debouncedFunction = _.debounce(func, delay);\n  const getArgumentsToCompare = (args) =>\n    args?.filter((_, index: number) => !skipArguments.includes(index)) || [];\n  return function (...args) {\n    const lastArgsToCompare = getArgumentsToCompare(lastArgs);\n    const argsToCompare = getArgumentsToCompare(args);\n    if (lastArgs && _.isEqual(argsToCompare, lastArgsToCompare)) {\n      return;\n    }\n    lastArgs = args;\n    debouncedFunction(...args);\n  };\n}\n\nexport { fileOpener } from './fileOpener';\n","import assert from 'assert';\nimport {\n  Bond,\n  MonomerMicromolecule,\n  SGroup,\n  Struct,\n  UnresolvedMonomer,\n} from 'ketcher-core';\nimport Editor from '../Editor';\n\nlet showTooltipTimer: ReturnType<typeof setTimeout> | null = null;\n\nexport const TOOLTIP_DELAY = 300;\n\ntype InfoPanelData = {\n  groupStruct: Struct;\n  sGroup: SGroup;\n  event: PointerEvent;\n};\n\n/**\n * Why?\n * We need somehow display sgroup attachment points (tooltips, preview, templates),\n * But due to current rendering approach for sgroups (ungrouping sgroups)\n * - we have to use RGroup attachment points on atoms for this purposes\n */\nfunction convertSGroupAttachmentPointsToRGroupAttachmentPoints(\n  struct: Struct,\n  sGroup: SGroup,\n  atomsIdMapping: Map<number, number>,\n) {\n  sGroup.getAttachmentPoints().forEach((attachmentPoint) => {\n    const atomId = atomsIdMapping.get(attachmentPoint.atomId);\n    assert(atomId != null);\n    const attachmentPointAtom = struct.atoms.get(atomId);\n    assert(attachmentPointAtom != null);\n    attachmentPointAtom.setRGAttachmentPointForDisplayPurpose();\n    const rgroupAttachmentPoint =\n      attachmentPoint.convertToRGroupAttachmentPointForDisplayPurpose(atomId);\n    struct.rgroupAttachmentPoints.add(rgroupAttachmentPoint);\n  });\n}\n\nfunction makeStruct(editor: Editor, sGroup: SGroup) {\n  const existingStruct = editor.struct();\n  const struct = new Struct();\n\n  const atomsIdMapping = makeAtoms(sGroup, existingStruct, struct);\n  makeRGroupAttachmentPoints(sGroup, existingStruct, struct, atomsIdMapping);\n  makeBonds(sGroup, existingStruct, struct, atomsIdMapping);\n\n  if (!(sGroup instanceof MonomerMicromolecule)) {\n    convertSGroupAttachmentPointsToRGroupAttachmentPoints(\n      struct,\n      sGroup,\n      atomsIdMapping,\n    );\n  }\n\n  return struct;\n}\n\nfunction makeBonds(\n  sGroup: SGroup,\n  existingStruct: Struct,\n  struct: Struct,\n  atomsIdMapping: Map<number, number>,\n) {\n  Array.from(existingStruct.bonds).forEach((value) => {\n    const [_, bond] = value as [number, Bond];\n    const clonedBond = bond.clone(atomsIdMapping);\n    const isInsideSGroup =\n      sGroup.atoms.includes(bond.begin) || sGroup.atoms.includes(bond.end);\n    if (isInsideSGroup) {\n      struct.bonds.add(clonedBond);\n    }\n  });\n}\n\nfunction makeRGroupAttachmentPoints(\n  sGroup: SGroup,\n  existingStruct: Struct,\n  struct: Struct,\n  atomsIdMapping: Map<number, number>,\n) {\n  sGroup.atoms.forEach((atomId: number) => {\n    const rgroupAttachmentPointIds =\n      existingStruct.getRGroupAttachmentPointsByAtomId(atomId);\n    rgroupAttachmentPointIds.forEach((id) => {\n      const rgroupAttachmentPoint =\n        existingStruct.rgroupAttachmentPoints.get(id);\n      assert(rgroupAttachmentPoint != null);\n      struct.rgroupAttachmentPoints.add(\n        rgroupAttachmentPoint.clone(atomsIdMapping),\n      );\n    });\n  });\n}\n\nfunction makeAtoms(sGroup: SGroup, existingStruct: Struct, struct: Struct) {\n  const atomsIdMapping = new Map();\n  sGroup.atoms.forEach((atomId: number) => {\n    const atom = existingStruct.atoms.get(atomId);\n    assert(atom != null);\n    const atomIdInTooltip = struct.atoms.add(atom.clone());\n    atomsIdMapping.set(atomId, atomIdInTooltip);\n  });\n  return atomsIdMapping;\n}\n\nfunction hideTooltip(editor: Editor) {\n  editor.event.showInfo.dispatch(null);\n\n  if (showTooltipTimer) {\n    clearTimeout(showTooltipTimer);\n  }\n}\n\nfunction showTooltip(editor: Editor, infoPanelData: InfoPanelData | null) {\n  hideTooltip(editor);\n\n  if (\n    infoPanelData?.sGroup instanceof MonomerMicromolecule &&\n    infoPanelData.sGroup.monomer instanceof UnresolvedMonomer\n  ) {\n    return;\n  }\n\n  showTooltipTimer = setTimeout(() => {\n    editor.event.showInfo.dispatch(infoPanelData);\n  }, TOOLTIP_DELAY);\n}\n\nexport function setFunctionalGroupsTooltip({\n  editor,\n  event,\n  isShow,\n}: {\n  editor: Editor;\n  event?: PointerEvent;\n  isShow: boolean;\n}) {\n  if (!isShow) {\n    hideTooltip(editor);\n\n    return;\n  }\n\n  let infoPanelData: null | InfoPanelData = null;\n  const checkFunctionGroupTypes = ['sgroups', 'functionalGroups'];\n  const closestCollapsibleStructures = editor.findItem(\n    event,\n    checkFunctionGroupTypes,\n  );\n  if (closestCollapsibleStructures && event) {\n    const sGroup = editor\n      .struct()\n      ?.sgroups.get(closestCollapsibleStructures.id);\n    const isSGroupPresent = sGroup?.hovering;\n    const isShowingTooltip =\n      !sGroup?.data.expanded ||\n      SGroup.isDataSGroup(sGroup) ||\n      SGroup.isQuerySGroup(sGroup);\n    if (isSGroupPresent && isShowingTooltip) {\n      const groupName = sGroup.data.name;\n      const groupStruct = makeStruct(editor, sGroup);\n      groupStruct.name = groupName;\n      infoPanelData = {\n        groupStruct,\n        event,\n        sGroup,\n      };\n    }\n  }\n  showTooltip(editor, infoPanelData);\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { AnyAction } from 'redux';\nimport { appUpdate } from '../options';\nimport {\n  FunctionalGroupsProvider,\n  SdfItem,\n  SdfSerializer,\n  Struct,\n} from 'ketcher-core';\nimport templatesRawData from '../../../../templates/fg.sdf';\nimport { memoizedDebounce } from '../../utils';\nimport { TOOLTIP_DELAY } from '../../../editor/utils/functionalGroupsTooltip';\nimport { MODES } from 'src/constants';\n\ninterface FGState {\n  lib: [];\n  functionalGroupInfo: any;\n  mode: string;\n}\n\nconst initialState: FGState = {\n  lib: [],\n  functionalGroupInfo: null,\n  mode: MODES.FG,\n};\n\nconst functionalGroupsReducer = (\n  state = initialState,\n  { type, payload }: AnyAction,\n) => {\n  switch (type) {\n    case 'FG_INIT':\n      return { ...state, ...payload };\n\n    case 'FG_HIGHLIGHT':\n      return { ...state, functionalGroupInfo: payload };\n\n    default:\n      return state;\n  }\n};\n\nexport const initFGroups = (lib: SdfItem[]) => ({\n  type: 'FG_INIT',\n  payload: { lib },\n});\nconst highlightFGroup = (group: any) => ({\n  type: 'FG_HIGHLIGHT',\n  payload: group,\n});\n\nfunction notDebouncedHighlightFG(dispatch, group: any) {\n  dispatch(highlightFGroup(group));\n}\n\nexport const highlightFG = memoizedDebounce(\n  notDebouncedHighlightFG,\n  TOOLTIP_DELAY / 3,\n  [0],\n);\n\nexport function initFGTemplates() {\n  return async (dispatch) => {\n    const provider = FunctionalGroupsProvider.getInstance();\n    const sdfSerializer = new SdfSerializer();\n    const templates = sdfSerializer.deserialize(templatesRawData);\n    const functionalGroups = templates.reduce(\n      (acc: Struct[], { struct }) => [...acc, struct],\n      [],\n    );\n    provider.setFunctionalGroupsList(functionalGroups);\n    dispatch(initFGroups(templates));\n    dispatch(appUpdate({ functionalGroups: true }));\n  };\n}\n\nexport default functionalGroupsReducer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { AnyAction } from 'redux';\nimport { appUpdate } from '../options';\nimport {\n  SaltsAndSolventsProvider,\n  FunctionalGroupsProvider,\n  SdfItem,\n  SdfSerializer,\n  Struct,\n} from 'ketcher-core';\nimport templatesRawData from '../../../../templates/salts-and-solvents.sdf';\nimport { MODES } from 'src/constants';\n\ninterface SaltsAndSolventsState {\n  lib: [];\n  mode: string;\n}\n\nconst initialState: SaltsAndSolventsState = {\n  lib: [],\n  mode: MODES.FG,\n};\n\nconst saltsAndSolventsReducer = (\n  state = initialState,\n  { type, payload }: AnyAction,\n) => {\n  switch (type) {\n    case 'SALTS_AND_SOLVENTS_INIT':\n      return { ...state, ...payload };\n\n    default:\n      return state;\n  }\n};\n\nexport const initSaltsAndSolvents = (lib: SdfItem[]) => ({\n  type: 'SALTS_AND_SOLVENTS_INIT',\n  payload: { lib },\n});\n\nexport function initSaltsAndSolventsTemplates() {\n  return async (dispatch) => {\n    const saltsAndSolventsProvider = SaltsAndSolventsProvider.getInstance();\n    const functionalGroupsProvider = FunctionalGroupsProvider.getInstance();\n    const sdfSerializer = new SdfSerializer();\n    const templates = sdfSerializer.deserialize(templatesRawData);\n    const saltsAndSolvents = templates.reduce(\n      (acc: Struct[], { struct, props }) => {\n        struct.abbreviation = String(props.abbreviation);\n        acc.push(struct);\n        return acc;\n      },\n      [],\n    );\n    saltsAndSolventsProvider.setSaltsAndSolventsList(saltsAndSolvents);\n    functionalGroupsProvider.addToFunctionalGroupsList(saltsAndSolvents);\n    dispatch(initSaltsAndSolvents(templates));\n    dispatch(appUpdate({ saltsAndSolvents: true }));\n  };\n}\n\nexport default saltsAndSolventsReducer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { capitalize, isEqual, throttle } from 'lodash/fp';\n\nimport { basicAtoms } from '../../action/atoms';\nimport tools from '../../action/tools';\n\nconst initial = {\n  freqAtoms: [],\n  currentAtom: 0,\n  opened: null,\n  visibleTools: {\n    select: 'select-rectangle',\n  },\n};\nconst MAX_ATOMS = 7;\n\nfunction updateVisibleTools(visibleTool, activeTool) {\n  const regExp = /(bond)(-)(common|stereo|query)/;\n  const menuHeight = window.innerHeight;\n\n  return Object.keys(visibleTool).reduce(\n    (res, key) => {\n      if (key === 'bond' && menuHeight > 700) return res; // TODO remove me after update styles\n      if (key === 'transform' && menuHeight > 800) return res;\n      if (key === 'rgroup' && menuHeight > 850) return res;\n      if (key === 'shape' && menuHeight > 900) return res;\n      if (!key.match(regExp) || menuHeight > 700) res[key] = visibleTool[key];\n      return res;\n    },\n    { ...activeTool },\n  );\n}\n\nexport function initResize() {\n  return function (dispatch, getState) {\n    const onResize = throttle(250, () => {\n      const state = getState();\n      state.editor.render.update();\n      dispatch({ type: 'CLEAR_VISIBLE', data: state.actionState.activeTool });\n    });\n    addEventListener('resize', onResize); // eslint-disable-line\n  };\n}\n\n/* REDUCER */\nexport default function (state = initial, action) {\n  const { type, data } = action;\n\n  switch (type) {\n    case 'ACTION': {\n      const visibleTool = toolInMenu(action.action);\n      return visibleTool\n        ? {\n            ...state,\n            opened: null,\n            visibleTools: { ...state.visibleTools, ...visibleTool },\n          }\n        : { ...state, opened: null };\n    }\n    case 'ADD_ATOMS': {\n      const newState = addFreqAtom(data, state.freqAtoms, state.currentAtom);\n      return { ...state, ...newState };\n    }\n    case 'CLEAR_VISIBLE': {\n      const activeTool = toolInMenu(action.data);\n      const correctTools = updateVisibleTools(state.visibleTools, activeTool);\n      return { ...state, opened: null, visibleTools: { ...correctTools } };\n    }\n    case 'OPENED': {\n      return data.isSelected && state.opened\n        ? { ...state, opened: null }\n        : { ...state, opened: data.menuName };\n    }\n    case 'UPDATE':\n      return { ...state, opened: null };\n    case 'MODAL_OPEN':\n      return { ...state, opened: null };\n    default:\n      return state;\n  }\n}\n/* ------- */\n\nfunction addFreqAtom(label, freqAtoms, index) {\n  label = capitalize(label);\n  if (basicAtoms.indexOf(label) > -1 || freqAtoms.indexOf(label) !== -1)\n    return { freqAtoms };\n\n  freqAtoms[index] = label;\n  index = (index + 1) % MAX_ATOMS;\n\n  return { freqAtoms, currentAtom: index };\n}\n\nexport function addAtoms(atomLabel) {\n  return {\n    type: 'ADD_ATOMS',\n    data: atomLabel,\n  };\n}\n\nfunction toolInMenu(action) {\n  const tool = Object.keys(tools).find((toolName) =>\n    isEqual(action, tools[toolName].action),\n  );\n\n  const sel = document.getElementById(tool);\n  const dropdown = sel && hiddenAncestor(sel);\n\n  return dropdown && dropdown.id !== '' ? { [dropdown.id]: sel.id } : null;\n}\n\nexport function hiddenAncestor(el, base) {\n  base = base || document.body;\n  let findEl = el;\n\n  while (\n    findEl &&\n    window.getComputedStyle(findEl).overflow !== 'hidden' &&\n    !findEl.classList.contains('opened')\n  ) {\n    if (findEl === base) return null;\n    findEl = findEl.parentNode;\n  }\n\n  return findEl;\n}\n","import { Reducer } from 'react';\n\nexport interface FloatingToolsState {\n  visible: boolean;\n  rotateHandlePosition: { x: number; y: number };\n}\n\nexport type FloatingToolsPayload = Partial<FloatingToolsState>;\n\nexport interface FloatingToolsAction {\n  type: 'UPDATE_FLOATING_TOOLS';\n  payload: Partial<FloatingToolsState>;\n}\n\nconst initialState: FloatingToolsState = {\n  visible: false,\n  rotateHandlePosition: { x: 0, y: 0 },\n};\n\nexport const updateFloatingTools = (payload: FloatingToolsPayload) => {\n  const action: FloatingToolsAction = {\n    type: 'UPDATE_FLOATING_TOOLS',\n    payload,\n  };\n  return action;\n};\n\nconst floatingToolsReducer: Reducer<FloatingToolsState, FloatingToolsAction> = (\n  state = initialState,\n  { type, payload },\n) => {\n  switch (type) {\n    case 'UPDATE_FLOATING_TOOLS':\n      return { ...state, ...payload };\n    default:\n      return state;\n  }\n};\n\nexport default floatingToolsReducer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { applyMiddleware, combineReducers, createStore } from 'redux';\nimport { load, onAction } from './shared';\nimport optionsReducer, { initOptionsState } from './options';\nimport templatesReducer, { initTmplsState } from './templates';\nimport abbreviationLookupReducer from './abbreviationLookup';\nimport commonReducer from './common';\n\nimport actionStateReducer from './action';\nimport functionalGroupsReducer from './functionalGroups';\nimport saltsAndSolventsReducer from './saltsAndSolvents';\nimport { logger } from 'redux-logger';\nimport modalReducer from './modal';\nimport { pick } from 'lodash/fp';\nimport requestReducer from './request';\nimport thunk from 'redux-thunk';\nimport toolbarReducer from './toolbar';\nimport floatingToolsReducer from './floatingTools';\n\nexport { onAction, load };\n\nexport const SET_SERVER = 'SET_SERVER';\n\nconst shared = combineReducers({\n  common: commonReducer,\n  actionState: actionStateReducer,\n  toolbar: toolbarReducer,\n  modal: modalReducer,\n  abbreviationLookup: abbreviationLookupReducer,\n  server: (store = null) => store,\n  editor: (store = null) => store,\n  options: optionsReducer,\n  templates: templatesReducer,\n  functionalGroups: functionalGroupsReducer,\n  saltsAndSolvents: saltsAndSolventsReducer,\n  requestsStatuses: requestReducer,\n  floatingTools: floatingToolsReducer,\n});\n\nfunction getRootReducer(setEditor) {\n  return function root(state, action) {\n    // TODO need a refactoring for this reducer since it uses (probably unintentionally falling through switch-case)\n    // F.e. when it gets action: INIT it will call all cases below - INIT+UPDATE\n    /* eslint-disable no-fallthrough */\n    switch (action.type) {\n      case 'INIT': {\n        setEditor(action.editor);\n      }\n\n      case 'UPDATE': {\n        const {\n          /* eslint-disable @typescript-eslint/no-unused-vars */\n          type,\n          /* eslint-enable @typescript-eslint/no-unused-vars */\n          ...data\n        } = action;\n        if (data) state = { ...state, ...data };\n      }\n\n      case SET_SERVER: {\n        state = {\n          ...state,\n          server: action.server || state.server,\n        };\n      }\n    }\n    /* eslint-enable no-fallthrough */\n\n    const sh = shared(state, {\n      ...action,\n      ...pick(['editor', 'server', 'options'], state),\n    });\n\n    const finalState =\n      sh === state.shared\n        ? state\n        : {\n            ...state,\n            ...sh,\n          };\n\n    // TODO: temporary solution. Need to review work with redux store\n    global.currentState = finalState;\n    return finalState;\n  };\n}\n\nexport default function (options, server, setEditor) {\n  const { buttons = {}, customButtons, ...restOptions } = options;\n\n  // TODO: redux localStorage here\n  const initState = {\n    actionState: null,\n    editor: null,\n    modal: null,\n    options: Object.assign(initOptionsState(), {\n      app: restOptions,\n      buttons,\n      customButtons,\n    }),\n    server: server || Promise.reject(new Error('Standalone mode!')),\n    templates: initTmplsState,\n  };\n\n  const middleware = [thunk];\n  if (\n    process.env.NODE_ENV !== 'production' &&\n    process.env.KETCHER_ENABLE_REDUX_LOGGER === 'true'\n  ) {\n    middleware.push(logger);\n  }\n\n  const rootReducer = getRootReducer(setEditor);\n  return createStore(rootReducer, initState, applyMiddleware(...middleware));\n}\n\nexport function setServer(server) {\n  return {\n    type: SET_SERVER,\n    server,\n  };\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  BottomToolbar,\n  BottomToolbarCallProps,\n  BottomToolbarProps,\n} from './BottomToolbar';\n\nimport { ComponentType } from 'react';\nimport { Dispatch } from 'redux';\nimport { connect } from 'react-redux';\nimport { onAction } from '../../../state';\n\ntype StateProps = Omit<BottomToolbarProps, 'className'>;\ntype OwnProps = Pick<BottomToolbarProps, 'className'>;\nconst disableableButtons = [];\n\nconst mapStateToProps = (state): StateProps => ({\n  active: state.actionState && state.actionState.activeTool,\n  status: state.actionState || {},\n  opened: state.toolbar.opened,\n  indigoVerification: state.requestsStatuses.indigoVerification,\n  disableableButtons,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): BottomToolbarCallProps => ({\n  onAction: (action) => dispatch(onAction(action)),\n  onOpen: (menuName, isSelected) =>\n    dispatch({\n      type: 'OPENED',\n      data: { menuName, isSelected },\n    }),\n});\n\nconst BottomToolbarContainer: ComponentType<OwnProps> = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(BottomToolbar);\n\nexport { BottomToolbarContainer };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { ToolbarItem, ToolbarItemVariant } from '../../toolbar.types';\n\nfunction makeItems(ids: ToolbarItemVariant[]): ToolbarItem[] {\n  return ids.map((id) => ({ id }));\n}\n\nexport { makeItems };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { GroupDescriptor } from '../../ToolbarGroupItem/ToolbarMultiToolItem/variants/variants.types';\nimport { ToolbarItem } from '../../toolbar.types';\nimport { makeItems } from '../../ToolbarGroupItem/utils';\n\nconst bondCommon: ToolbarItem[] = makeItems([\n  'bond-single',\n  'bond-double',\n  'bond-triple',\n]);\nconst bondStereo: ToolbarItem[] = makeItems([\n  'bond-up',\n  'bond-down',\n  'bond-updown',\n  'bond-crossed',\n]);\nconst bondQuery: ToolbarItem[] = makeItems([\n  'bond-any',\n  'bond-aromatic',\n  'bond-singledouble',\n  'bond-singlearomatic',\n  'bond-doublearomatic',\n]);\nconst bondSpecial: ToolbarItem[] = makeItems(['bond-dative', 'bond-hydrogen']);\n\nconst groups = [bondCommon, bondStereo, bondQuery, bondSpecial];\nconst groupOptions = groups.flat();\nconst groupDescriptors = groups.reduce((accum, group, index) => {\n  const start = accum[index - 1]?.end || 0;\n\n  accum.push({\n    start,\n    end: start + group.length,\n  });\n\n  return accum;\n}, [] as GroupDescriptor[]);\n\nexport {\n  bondCommon,\n  bondStereo,\n  bondQuery,\n  bondSpecial,\n  groupOptions,\n  groupDescriptors,\n};\n","import { MULTITAIL_ARROW_TOOL_NAME } from 'ketcher-core';\nimport { bondCommon, bondQuery, bondSpecial, bondStereo } from './Bond/options';\nimport { makeItems } from '../ToolbarGroupItem/utils';\nimport { ToolbarItem } from '../toolbar.types';\n\nconst rGroupOptions: ToolbarItem[] = makeItems([\n  'rgroup-label',\n  'rgroup-fragment',\n  'rgroup-attpoints',\n]);\n\nconst shapeOptions: ToolbarItem[] = makeItems([\n  'shape-ellipse',\n  'shape-rectangle',\n  'shape-line',\n]);\n\nconst selectOptions: ToolbarItem[] = makeItems([\n  'select-rectangle',\n  'select-lasso',\n  'select-fragment',\n]);\n\nconst arrowsOptions: ToolbarItem[] = makeItems([\n  'reaction-arrow-open-angle',\n  'reaction-arrow-filled-triangle',\n  'reaction-arrow-filled-bow',\n  'reaction-arrow-dashed-open-angle',\n  'reaction-arrow-failed',\n  'reaction-arrow-retrosynthetic',\n  'reaction-arrow-both-ends-filled-triangle',\n  'reaction-arrow-equilibrium-filled-half-bow',\n  'reaction-arrow-equilibrium-filled-triangle',\n  'reaction-arrow-equilibrium-open-angle',\n  'reaction-arrow-unbalanced-equilibrium-filled-half-bow',\n  'reaction-arrow-unbalanced-equilibrium-open-half-angle',\n  'reaction-arrow-unbalanced-equilibrium-large-filled-half-bow',\n  'reaction-arrow-unbalanced-equilibrium-filled-half-triangle',\n\n  'reaction-arrow-elliptical-arc-arrow-filled-bow',\n  'reaction-arrow-elliptical-arc-arrow-filled-triangle',\n  'reaction-arrow-elliptical-arc-arrow-open-angle',\n  'reaction-arrow-elliptical-arc-arrow-open-half-angle',\n\n  MULTITAIL_ARROW_TOOL_NAME,\n]);\n\nconst mappingOptions: ToolbarItem[] = makeItems([\n  'reaction-map',\n  'reaction-unmap',\n  'reaction-automap',\n]);\n\nexport {\n  rGroupOptions,\n  bondCommon,\n  bondQuery,\n  bondSpecial,\n  bondStereo,\n  shapeOptions,\n  selectOptions,\n  arrowsOptions,\n  mappingOptions,\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport React from 'react';\nimport SettingsContext from './../contexts/settingsContext';\n\nexport function useSettingsContext() {\n  return React.useContext(SettingsContext);\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { RefCallback, RefObject, useMemo, useState } from 'react';\n\nimport { throttle } from 'lodash';\nimport useResizeObserver from 'use-resize-observer/polyfilled';\n\nconst throttleMilliseconds = 100;\n\ntype Size = {\n  width: number | undefined;\n  height: number | undefined;\n};\n\ntype Options<THTMLElement extends HTMLElement> = {\n  ref?: RefObject<THTMLElement> | THTMLElement | null | undefined;\n};\n\ntype HookResponse<THTMLElement extends HTMLElement> = {\n  ref: RefCallback<THTMLElement>;\n  width: number | undefined;\n  height: number | undefined;\n};\n\nfunction useThrottleResizeObserver<THTMLElement extends HTMLElement>(\n  options: Options<THTMLElement> = {},\n): HookResponse<THTMLElement> {\n  const [size, setSize] = useState<Size>({\n    height: undefined,\n    width: undefined,\n  });\n\n  const onResize = useMemo(() => throttle(setSize, throttleMilliseconds), []);\n\n  const { ref } = useResizeObserver<THTMLElement>({ onResize, ...options });\n  return { ref, ...size };\n}\n\nexport { useThrottleResizeObserver as useResizeObserver };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport FormContext from './../contexts/formContext';\nimport React from 'react';\n\nexport function useFormContext() {\n  return React.useContext(FormContext);\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport AppContext from '../contexts/appContext';\nimport React from 'react';\n\nexport const useAppContext = () => React.useContext(AppContext);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useEffect, useRef } from 'react';\n\nexport const useInterval = (callback: () => void, delay: number | null) => {\n  const savedCallback = useRef(callback);\n\n  // Remember the latest callback if it changes.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  useEffect(() => {\n    // Don't schedule if no delay is specified.\n    if (delay === null) {\n      return;\n    }\n\n    const id = setInterval(() => savedCallback.current(), delay);\n\n    return () => clearInterval(id);\n  }, [delay]);\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useDispatch } from 'react-redux';\nimport { indigoVerification } from '../script/ui/state/request';\nimport { Ketcher, KetcherAsyncEvents } from 'ketcher-core';\nimport { useEffect } from 'react';\nimport { useAppContext } from './useAppContext';\nimport { ketcherInitEventName } from '../constants';\n\nexport const useSubscriptionOnEvents = () => {\n  const dispatch = useDispatch();\n\n  const { getKetcherInstance, ketcherId } = useAppContext();\n\n  const loadingHandler = () => {\n    dispatch(indigoVerification(true));\n  };\n  const actionResultHandler = () => {\n    dispatch(indigoVerification(false));\n  };\n\n  const subscribe = (ketcher: Ketcher) => {\n    ketcher.eventBus.addListener(KetcherAsyncEvents.LOADING, loadingHandler);\n    ketcher.eventBus.addListener(\n      KetcherAsyncEvents.SUCCESS,\n      actionResultHandler,\n    );\n    ketcher.eventBus.addListener(\n      KetcherAsyncEvents.FAILURE,\n      actionResultHandler,\n    );\n  };\n\n  const unsubscribe = (ketcher: Ketcher) => {\n    ketcher.eventBus.removeListener(KetcherAsyncEvents.LOADING, loadingHandler);\n    ketcher.eventBus.removeListener(\n      KetcherAsyncEvents.SUCCESS,\n      actionResultHandler,\n    );\n    ketcher.eventBus.removeListener(\n      KetcherAsyncEvents.FAILURE,\n      actionResultHandler,\n    );\n  };\n\n  useEffect(() => {\n    const subscribeOnInit = () => {\n      subscribe(getKetcherInstance());\n    };\n\n    const unsubscribeOnUnMount = () => {\n      unsubscribe(getKetcherInstance());\n    };\n\n    const initEventName = ketcherInitEventName(ketcherId);\n    window.addEventListener(initEventName, subscribeOnInit);\n    return () => {\n      unsubscribeOnUnMount();\n      window.removeEventListener(initEventName, subscribeOnInit);\n    };\n  }, []);\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport classes from './ArrowScroll.module.less';\nimport clsx from 'clsx';\nimport { useEffect, useState } from 'react';\nimport { useInterval } from '../../../../../hooks';\n\ninterface ArrowScrollProps {\n  startInView: boolean;\n  endInView: boolean;\n  scrollUp: any;\n  scrollDown: any;\n}\n\nconst ArrowScroll = ({\n  startInView,\n  endInView,\n  scrollUp,\n  scrollDown,\n}: ArrowScrollProps) => {\n  const [isScrollDown, setScrollDown] = useState(false);\n  const [isScrollUp, setScrollUp] = useState(false);\n  useInterval(scrollDown, isScrollDown ? 100 : null);\n  useInterval(scrollUp, isScrollUp ? 100 : null);\n\n  useEffect(() => {\n    return () => {\n      setScrollUp(false);\n    };\n  }, [startInView]);\n\n  useEffect(() => {\n    return () => {\n      setScrollDown(false);\n    };\n  }, [endInView]);\n\n  return (\n    <div className={classes.scroll}>\n      {endInView ? (\n        <></>\n      ) : (\n        <button\n          onClick={() => scrollDown()}\n          onMouseUp={() => setScrollDown(false)}\n          onMouseDown={() => setScrollDown(true)}\n          className={clsx(classes.button, classes.down)}\n        >\n          โผ\n        </button>\n      )}\n      {startInView ? (\n        <></>\n      ) : (\n        <button\n          onClick={() => scrollUp()}\n          onMouseUp={() => setScrollUp(false)}\n          onMouseDown={() => setScrollUp(true)}\n          className={clsx(classes.button, classes.up)}\n        >\n          โฒ\n        </button>\n      )}\n    </div>\n  );\n};\n\nexport { ArrowScroll };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nconst mediaSizes = {\n  topSeparatorsShowingWidth: 1080,\n  bondCollapsableHeight: 770,\n  rGroupCollapsableHeight: 1000,\n  shapeCollapsableHeight: 1000,\n  transformCollapsableHeight: 870,\n};\n\nexport { mediaSizes };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  ToolbarGroupItemCallProps,\n  ToolbarGroupItemProps,\n} from '../../ToolbarGroupItem';\nimport {\n  bondCommon,\n  bondQuery,\n  bondSpecial,\n  bondStereo,\n  groupDescriptors,\n  groupOptions,\n} from './options';\n\nimport { ToolbarMultiToolItem } from '../../ToolbarGroupItem/ToolbarMultiToolItem';\nimport { mediaSizes } from '../../mediaSizes';\n\ninterface BondProps extends Omit<ToolbarGroupItemProps, 'id' | 'options'> {\n  height?: number;\n}\ntype BondCallProps = ToolbarGroupItemCallProps;\n\ntype Props = BondProps & BondCallProps;\n\nconst Bond = (props: Props) => {\n  const { height, ...rest } = props;\n\n  if (height && height <= mediaSizes.bondCollapsableHeight) {\n    return (\n      <ToolbarMultiToolItem\n        id=\"bonds\"\n        options={groupOptions}\n        variant=\"grouped\"\n        groups={groupDescriptors}\n        {...rest}\n      />\n    );\n  }\n\n  return (\n    <>\n      <ToolbarMultiToolItem id=\"bond-common\" options={bondCommon} {...rest} />\n      <ToolbarMultiToolItem id=\"bond-stereo\" options={bondStereo} {...rest} />\n      <ToolbarMultiToolItem id=\"bond-query\" options={bondQuery} {...rest} />\n      <ToolbarMultiToolItem id=\"bond-special\" options={bondSpecial} {...rest} />\n    </>\n  );\n};\n\nexport type { BondProps, BondCallProps };\nexport { Bond };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  ToolbarGroupItem,\n  ToolbarGroupItemCallProps,\n  ToolbarGroupItemProps,\n} from '../../ToolbarGroupItem';\n\nimport { rGroupOptions } from '../leftToolbarOptions';\n\ninterface RGroupProps extends Omit<ToolbarGroupItemProps, 'id' | 'options'> {\n  height?: number;\n}\ntype RGroupCallProps = ToolbarGroupItemCallProps;\n\ntype Props = RGroupProps & RGroupCallProps;\n\nconst RGroup = (props: Props) => {\n  return <ToolbarGroupItem id=\"rgroup\" options={rGroupOptions} {...props} />;\n};\n\nexport type { RGroupProps, RGroupCallProps };\nexport { RGroup };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  ToolbarGroupItem,\n  ToolbarGroupItemCallProps,\n  ToolbarGroupItemProps,\n} from '../../ToolbarGroupItem';\n\nimport { shapeOptions } from '../leftToolbarOptions';\n\ninterface ShapeProps extends Omit<ToolbarGroupItemProps, 'id' | 'options'> {\n  height?: number;\n}\ntype ShapeCallProps = ToolbarGroupItemCallProps;\n\ntype Props = ShapeProps & ShapeCallProps;\n\nconst Shape = (props: Props) => {\n  return <ToolbarGroupItem id=\"shapes\" options={shapeOptions} {...props} />;\n};\n\nexport type { ShapeProps, ShapeCallProps };\nexport { Shape };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { FC, MutableRefObject, useRef } from 'react';\nimport { IMAGE_KEY } from 'ketcher-core';\nimport {\n  ToolbarGroupItem,\n  ToolbarGroupItemCallProps,\n  ToolbarGroupItemProps,\n} from '../ToolbarGroupItem';\nimport { ToolbarItem, ToolbarItemVariant } from '../toolbar.types';\nimport {\n  arrowsOptions,\n  bondCommon,\n  bondQuery,\n  bondSpecial,\n  bondStereo,\n  mappingOptions,\n  rGroupOptions,\n  selectOptions,\n  shapeOptions,\n} from './leftToolbarOptions';\n\nimport { ArrowScroll } from '../ArrowScroll';\nimport { Bond } from './Bond';\nimport { RGroup } from './RGroup';\nimport { Shape } from './Shape';\nimport classes from './LeftToolbar.module.less';\nimport clsx from 'clsx';\nimport { useInView } from 'react-intersection-observer';\nimport { useResizeObserver } from '../../../../../hooks';\n\ninterface LeftToolbarProps\n  extends Omit<ToolbarGroupItemProps, 'id' | 'options'> {\n  className?: string;\n}\n\ntype LeftToolbarCallProps = ToolbarGroupItemCallProps;\n\ntype Props = LeftToolbarProps & LeftToolbarCallProps;\n\nconst LeftToolbar = (props: Props) => {\n  const { className, ...rest } = props;\n  const { ref, height } = useResizeObserver<HTMLDivElement>();\n  const scrollRef = useRef() as MutableRefObject<HTMLDivElement>;\n  const [startRef, startInView] = useInView({ threshold: 1 });\n  const [endRef, endInView] = useInView({ threshold: 1 });\n  const sizeRef = useRef() as MutableRefObject<HTMLDivElement>;\n\n  type ItemProps = {\n    id: ToolbarItemVariant;\n    options?: ToolbarItem[];\n    dataTestId?: string;\n  };\n  const Item = ({ id, options, dataTestId }: ItemProps) =>\n    ToolbarGroupItem({ id, options, dataTestId, ...rest });\n\n  const scrollUp = () => {\n    scrollRef.current.scrollTop -= sizeRef.current.offsetHeight;\n  };\n\n  const scrollDown = () => {\n    scrollRef.current.scrollTop += sizeRef.current.offsetHeight;\n  };\n\n  const status = rest.status;\n\n  type GroupItem = ItemProps;\n\n  const Group: FC<{ items?: GroupItem[]; className?: string }> = ({\n    items,\n    className,\n  }) => {\n    const visibleItems: GroupItem[] = [];\n    if (items) {\n      items.forEach((item) => {\n        let visible = true;\n        if (status[item.id]?.hidden) {\n          visible = false;\n        } else if (item.options?.every((option) => status[option.id]?.hidden)) {\n          visible = false;\n        }\n        if (visible) visibleItems.push(item);\n      });\n    }\n\n    return visibleItems.length ? (\n      <div className={clsx(classes.group, className)}>\n        {visibleItems.map((item) => {\n          switch (item.id) {\n            case 'bond-common':\n              return <Bond {...rest} height={height} key={item.id} />;\n            case 'rgroup':\n              return <RGroup {...rest} key={item.id} />;\n            case 'shapes':\n              return <Shape {...rest} key={item.id} />;\n            case 'bonds':\n              return (\n                <Item\n                  id={item.id}\n                  options={item.options}\n                  key={item.id}\n                  dataTestId=\"bonds\"\n                />\n              );\n            default:\n              return <Item id={item.id} options={item.options} key={item.id} />;\n          }\n        })}\n      </div>\n    ) : null;\n  };\n\n  return (\n    <div\n      data-testid=\"left-toolbar\"\n      className={clsx(classes.root, className)}\n      ref={ref}\n    >\n      <div\n        className={classes.buttons}\n        ref={scrollRef}\n        data-testid=\"left-toolbar-buttons\"\n      >\n        <div className={classes.listener} ref={startRef}>\n          <Group\n            className={classes.groupItem}\n            items={[\n              { id: 'hand' },\n              { id: 'select', options: selectOptions },\n              { id: 'erase' },\n            ]}\n          />\n        </div>\n\n        <Group\n          className={classes.groupItem}\n          items={[\n            {\n              id: 'bonds',\n              options: [\n                ...bondCommon,\n                ...bondQuery,\n                ...bondSpecial,\n                ...bondStereo,\n              ],\n            },\n            { id: 'chain' },\n            { id: 'enhanced-stereo' },\n            { id: 'charge-plus' },\n            { id: 'charge-minus' },\n          ]}\n        />\n        <div className={classes.listener} ref={sizeRef}>\n          <Group\n            className={classes.groupItem}\n            items={[{ id: 'sgroup' }, { id: 'rgroup', options: rGroupOptions }]}\n          />\n        </div>\n\n        <Group\n          className={classes.groupItem}\n          items={[\n            { id: 'reaction-plus' },\n            { id: 'arrows', options: arrowsOptions },\n            {\n              id: 'reaction-mapping-tools',\n              options: mappingOptions,\n            },\n          ]}\n        />\n\n        <div ref={endRef}>\n          <Group\n            className={classes.groupItem}\n            items={[\n              { id: 'shapes', options: shapeOptions },\n              { id: 'text' },\n              { id: IMAGE_KEY },\n            ]}\n          />\n        </div>\n      </div>\n      {height && scrollRef?.current?.scrollHeight > height && (\n        <ArrowScroll\n          startInView={startInView}\n          endInView={endInView}\n          scrollUp={scrollUp}\n          scrollDown={scrollDown}\n        />\n      )}\n    </div>\n  );\n};\n\nexport type { LeftToolbarProps, LeftToolbarCallProps };\nexport { LeftToolbar };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  LeftToolbar,\n  LeftToolbarCallProps,\n  LeftToolbarProps,\n} from './LeftToolbar';\n\nimport { Dispatch } from 'redux';\nimport { connect } from 'react-redux';\nimport { onAction } from '../../../state';\n\ntype StateProps = Omit<LeftToolbarProps, 'className'>;\nconst disableableButtons = [];\nconst mapStateToProps = (state: any): StateProps => ({\n  status: state.actionState || {},\n  opened: state.toolbar.opened,\n  indigoVerification: state.requestsStatuses.indigoVerification,\n  disableableButtons,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): LeftToolbarCallProps => ({\n  onAction: (action) => dispatch(onAction(action)),\n  onOpen: (menuName, isSelected) =>\n    dispatch({\n      type: 'OPENED',\n      data: { menuName, isSelected },\n    }),\n});\n\nconst LeftToolbarContainer = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(LeftToolbar);\n\nexport { LeftToolbarContainer };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport classes from './Atom.module.less';\nimport clsx from 'clsx';\n\nfunction Atom({ el, shortcut, selected, ...props }) {\n  return (\n    <button\n      title={shortcut ? `${el.title} (${shortcut})` : el.title}\n      className={clsx(classes.atom, {\n        selected,\n      })}\n      value={el.number}\n      data-testid={`${el.label}-button`}\n      {...props}\n    >\n      <span>{el.label}</span>\n    </button>\n  );\n}\n\nexport default Atom;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { ElementColor, Elements, shortcutStr } from 'ketcher-core';\nimport { atomCuts } from '../../../../action/atoms';\n\nimport Atom from '../../../../component/view/Atom';\nimport { Tools, UiActionAction } from '../../../../action';\nimport { forwardRef } from 'react';\nimport style from '../../../../../../components/styles/consts';\nimport styled from '@emotion/styled';\n\ninterface AtomsListProps {\n  atoms: string[];\n  status: Tools;\n  active?: {\n    tool?: string;\n    opts: {\n      label: string;\n    };\n  };\n}\n\ninterface AtomsListCallProps {\n  onAction: (action: UiActionAction) => void;\n}\n\ntype Props = AtomsListProps & AtomsListCallProps;\n\nconst StyledAtom = styled(Atom)((props: any) => {\n  const atomColor = props?.el?.label ? ElementColor[props.el.label] : '#000';\n  return `\n       color: ${atomColor};\n       border: 1px solid transparent;\n       background-color: transparent;\n       cursor: pointer;\n       &:hover {\n         background-color: ${style.color.primaryWhite};\n       }\n       &:active {\n        border-color: ${atomColor};\n        background-color: ${style.color.primaryWhite};\n       }\n       &.selected {\n        background-color: ${style.color.primaryWhite};\n        border-color: ${style.color.green};\n         &:hover {\n          background-color: ${style.color.primaryWhite};\n         }\n       }\n       &:disabled, &:disabled:active, &:disabled:hover {\n        cursor: not-allowed;\n        color: #333;\n        opacity: 0.4;\n        border: none;\n        border-color: none;\n        background-color: transparent;\n       }\n   `;\n});\n\nconst AtomsList = forwardRef<HTMLDivElement, Props>((props: Props, ref) => {\n  const { atoms, active, status, onAction } = props;\n  const isAtom = active && active.tool === 'atom';\n\n  return (\n    <div ref={ref}>\n      {atoms.map((label) => {\n        const element = Elements.get(label);\n        const shortcut =\n          atoms.indexOf(label) > -1 ? shortcutStr(atomCuts[label]) : null;\n        const isSelected = isAtom && active && active.opts.label === label;\n        const id = `atom-${label.toLowerCase()}`;\n        return (\n          <StyledAtom\n            key={label}\n            el={element}\n            shortcut={shortcut}\n            className={isSelected ? 'selected' : ''}\n            selected={isSelected}\n            disabled={status[id]?.disabled}\n            onClick={() => onAction({ tool: 'atom', opts: { label } })}\n          />\n        );\n      })}\n    </div>\n  );\n});\n\nexport type { AtomsListProps, AtomsListCallProps };\nexport { AtomsList };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport styled from '@emotion/styled';\nimport style from '../../../../../components/styles/consts';\n\nconst VerticalDivider = styled('hr')`\n  margin: 0px 6px;\n  flex-shrink: 0;\n  height: 45%;\n  align-self: center;\n  border-width: 0px thin 0px 0px;\n  border-style: solid;\n  border-color: ${style.color.darkGrey};\n`;\n\nconst HorizontalDividerElement = styled('hr')`\n  margin: 6px 0px;\n  -webkit-flex-shrink: 0;\n  -ms-flex-negative: 0;\n  flex-shrink: 0;\n  width: 70%;\n  -webkit-align-self: center;\n  -ms-flex-item-align: center;\n  align-self: center;\n  border: 1px solid;\n  border-color: ${style.color.grey};\n`;\n\nexport const Divider = () => <VerticalDivider />;\n\nexport const HorizontalDivider = () => <HorizontalDividerElement />;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { FC, MutableRefObject, PropsWithChildren, useRef } from 'react';\nimport {\n  ToolbarGroupItem,\n  ToolbarGroupItemCallProps,\n  ToolbarGroupItemProps,\n} from '../ToolbarGroupItem';\n\nimport { ArrowScroll } from '../ArrowScroll';\nimport { AtomsList } from './AtomsList';\nimport { basicAtoms } from '../../../action/atoms';\nimport classes from './RightToolbar.module.less';\nimport clsx from 'clsx';\nimport { useInView } from 'react-intersection-observer';\nimport { useResizeObserver } from '../../../../../hooks';\nimport { HorizontalDivider } from '../TopToolbar/Divider';\n\nconst Group: FC<{ className?: string } & PropsWithChildren> = ({\n  children,\n  className,\n}) => <div className={clsx(classes.group, className)}>{children}</div>;\n\ninterface RightToolbarProps\n  extends Omit<ToolbarGroupItemProps, 'id' | 'options'> {\n  className?: string;\n  active?: {\n    opts: any;\n    tool: string;\n  };\n  freqAtoms: any[];\n}\n\ntype RightToolbarCallProps = ToolbarGroupItemCallProps;\n\ntype Props = RightToolbarProps & RightToolbarCallProps;\n\nconst RightToolbar = (props: Props) => {\n  const { className, ...rest } = props;\n  const { active, onAction, freqAtoms, status } = rest;\n  const { ref, height } = useResizeObserver<HTMLDivElement>();\n  const [startRef, startInView] = useInView({ threshold: 1 });\n  const [endRef, endInView] = useInView({ threshold: 1 });\n  const sizeRef = useRef() as MutableRefObject<HTMLDivElement>;\n  const scrollRef = useRef() as MutableRefObject<HTMLDivElement>;\n\n  const scrollUp = () => {\n    scrollRef.current.scrollTop -= sizeRef.current.offsetHeight;\n  };\n\n  const scrollDown = () => {\n    scrollRef.current.scrollTop += sizeRef.current.offsetHeight;\n  };\n\n  return (\n    <div\n      data-testid=\"right-toolbar\"\n      className={clsx(classes.root, className)}\n      ref={ref}\n    >\n      <div ref={scrollRef} className={classes.buttons}>\n        <div ref={startRef}>\n          <Group\n            className={clsx(\n              classes.atomsList,\n              classes.buttons,\n              classes.groupItem,\n            )}\n          >\n            <AtomsList\n              atoms={basicAtoms.slice(0, 1)}\n              active={active}\n              onAction={onAction}\n              status={status}\n            />\n            <AtomsList\n              atoms={basicAtoms.slice(1, 5)}\n              active={active}\n              onAction={onAction}\n              status={status}\n            />\n            <HorizontalDivider></HorizontalDivider>\n            <AtomsList\n              atoms={basicAtoms.slice(5)}\n              active={active}\n              onAction={onAction}\n              status={status}\n            />\n            <AtomsList\n              atoms={freqAtoms}\n              status={status}\n              active={active}\n              onAction={onAction}\n            />\n            <ToolbarGroupItem id=\"period-table\" {...rest} />\n          </Group>\n        </div>\n\n        <div ref={endRef}>\n          <Group className={classes.groupItem}>\n            <div ref={sizeRef}>\n              <ToolbarGroupItem id=\"any-atom\" {...rest} />\n              <div className={classes.button}>\n                <ToolbarGroupItem id=\"extended-table\" {...rest} />\n              </div>\n            </div>\n          </Group>\n        </div>\n      </div>\n      {height && scrollRef?.current?.scrollHeight > height && (\n        <ArrowScroll\n          startInView={startInView}\n          endInView={endInView}\n          scrollUp={scrollUp}\n          scrollDown={scrollDown}\n        />\n      )}\n    </div>\n  );\n};\n\nexport type { RightToolbarProps, RightToolbarCallProps };\nexport { RightToolbar };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  RightToolbar,\n  RightToolbarCallProps,\n  RightToolbarProps,\n} from './RightToolbar';\n\nimport { ComponentType } from 'react';\nimport { Dispatch } from 'redux';\nimport { connect } from 'react-redux';\nimport { onAction } from '../../../state';\n\ntype StateProps = Omit<RightToolbarProps, 'className'>;\ntype OwnProps = Pick<RightToolbarProps, 'className'>;\nconst disableableButtons = [];\n\nconst mapStateToProps = (state): StateProps => ({\n  active: state.actionState && state.actionState.activeTool,\n  status: state.actionState || {},\n  freqAtoms: state.toolbar.freqAtoms,\n  opened: state.toolbar.opened,\n  indigoVerification: state.requestsStatuses.indigoVerification,\n  disableableButtons,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): RightToolbarCallProps => ({\n  onAction: (action) => dispatch(onAction(action)),\n  onOpen: (menuName, isSelected) =>\n    dispatch({\n      type: 'OPENED',\n      data: { menuName, isSelected },\n    }),\n});\n\nconst RightToolbarContainer: ComponentType<OwnProps> = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(RightToolbar);\n\nexport { RightToolbarContainer };\nexport default RightToolbarContainer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport styled from '@emotion/styled';\nimport { IconButton, IconButtonCustomIcon } from 'components';\nimport { css } from '@emotion/react';\n\nconst TopToolbarIconStyles = css`\n  border-radius: 4px;\n  padding: 2px;\n  width: 28px;\n  height: 28px;\n\n  @media only screen {\n    @container (min-width: 1024px) {\n      height: 32px;\n      width: 32px;\n      padding: 4px;\n    }\n  }\n  @media only screen {\n    @container (min-width: 1920px) {\n      height: 40px;\n      width: 40px;\n      padding: 5px;\n    }\n  }\n`;\n\nexport const TopToolbarIconButton = styled(IconButton)`\n  ${TopToolbarIconStyles}\n`;\n\nexport const TopToolbarCustomIconButton = styled(IconButtonCustomIcon)`\n  ${TopToolbarIconStyles}\n`;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { TopToolbarIconButton } from './TopToolbarIconButton';\n\ninterface FileControlsProps {\n  onFileOpen: () => void;\n  onSave: () => void;\n  shortcuts: { [key in string]: string };\n  hiddenButtons: string[];\n}\n\nexport const FileControls = ({\n  onFileOpen,\n  onSave,\n  shortcuts,\n  hiddenButtons,\n}: FileControlsProps) => {\n  return (\n    <>\n      <TopToolbarIconButton\n        title=\"Open...\"\n        onClick={onFileOpen}\n        iconName=\"open\"\n        shortcut={shortcuts.open}\n        isHidden={hiddenButtons.includes('open')}\n        testId=\"open-file-button\"\n      />\n      <TopToolbarIconButton\n        title=\"Save as...\"\n        onClick={onSave}\n        iconName=\"save\"\n        shortcut={shortcuts.save}\n        isHidden={hiddenButtons.includes('save')}\n        testId=\"save-file-button\"\n      />\n    </>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { ClickAwayListener, Collapse, IconButton } from '@mui/material';\nimport styled from '@emotion/styled';\nimport { Icon } from 'components';\n\nconst ElementAndDropdown = styled('div')`\n  position: relative;\n`;\n\nconst DropDownContent = styled('div')`\n  display: flex;\n  position: absolute;\n  left: 5px;\n  border-radius: 2px;\n  flex-direction: column;\n  z-index: 20;\n  white-space: nowrap;\n  word-break: keep-all;\n  padding: 2px;\n  background: white; // TODO use variable\n  border: 1px solid #cad3dd; // TODO use variable\n  border-radius: 5px;\n  box-shadow: 0 6px 12px rgb(0 0 0 / 18%);\n`;\n\nconst DropDownButton = styled(IconButton)`\n  position: absolute;\n  padding: 0;\n  right: 0;\n  bottom: 0;\n\n  &.disabled {\n    cursor: not-allowed;\n    opacity: 0.5;\n    background-color: initial;\n    color: #333;\n    pointer-events: auto;\n  }\n`;\n\nconst DropDownArrow = styled(Icon)`\n  display: block;\n  width: 7px;\n  height: 7px;\n  margin: 1px;\n\n  &:hover {\n    fill: #005662;\n    transform: none;\n    box-shadow: none;\n    transition: none;\n    background: none;\n  }\n\n  &svg {\n    width: 100%;\n    height: 100%;\n  }\n\n  &svg path {\n    fill: inherit;\n  }\n`;\n\ninterface ElementWithDropdownProps {\n  topElement?: JSX.Element;\n  dropDownElements: JSX.Element[];\n  onToolOpen: () => void;\n}\n\nconst MenuItemWithDropdown = ({\n  topElement,\n  dropDownElements,\n  onToolOpen,\n}: ElementWithDropdownProps) => {\n  const [isExpanded, setIsExpanded] = useState<boolean>(false);\n\n  const collapse = () => {\n    setIsExpanded(false);\n  };\n\n  const expand = () => {\n    onToolOpen();\n    setIsExpanded(true);\n  };\n\n  return (\n    <ElementAndDropdown>\n      {topElement && topElement}\n      {dropDownElements.filter((element) => !element.props.isHidden).length !==\n        0 && (\n        <DropDownButton\n          onClick={expand}\n          data-testid=\"copy-button-dropdown-triangle\"\n          className={`expanded ${topElement?.props.disabled ? 'disabled' : ''}`}\n        >\n          {!isExpanded && <DropDownArrow name=\"dropdown\" />}\n        </DropDownButton>\n      )}\n      <Collapse in={isExpanded} timeout=\"auto\" onClick={collapse} unmountOnExit>\n        <ClickAwayListener onClickAway={collapse}>\n          <DropDownContent>{dropDownElements}</DropDownContent>\n        </ClickAwayListener>\n      </Collapse>\n    </ElementAndDropdown>\n  );\n};\n\n// TODO: refactor, workaround to fix top toolbar dropdowns and left toolbar dropdowns overlapping\nconst mapDispatchToProps = (dispatch) => ({\n  onToolOpen: () =>\n    dispatch({\n      type: 'OPENED',\n      data: { menuName: null, isSelected: null },\n    }),\n});\n\nexport const ElementWithDropdown = connect(\n  null,\n  mapDispatchToProps,\n)(MenuItemWithDropdown);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { ElementWithDropdown } from './ElementWithDropdown';\nimport { TopToolbarIconButton } from './TopToolbarIconButton';\n\ninterface ClipboardControlsProps {\n  onCopy: () => void;\n  onCopyMol: () => void;\n  onCopyKet: () => void;\n  onCopyImage: () => void;\n  onPaste: () => void;\n  onCut: () => void;\n  disabledButtons: string[];\n  hiddenButtons: string[];\n  shortcuts: { [key in string]: string };\n}\n\nexport const ClipboardControls = ({\n  onCopy,\n  onCopyMol,\n  onCopyKet,\n  onCopyImage,\n  onPaste,\n  onCut,\n  shortcuts,\n  disabledButtons,\n  hiddenButtons,\n}: ClipboardControlsProps) => {\n  const copyButtons = [\n    {\n      name: 'copy',\n      title: 'Copy',\n      handler: onCopy,\n    },\n    {\n      name: 'copy-mol',\n      title: 'Copy as MOL',\n      handler: onCopyMol,\n    },\n    {\n      name: 'copy-ket',\n      title: 'Copy as KET',\n      handler: onCopyKet,\n    },\n    {\n      name: 'copy-image',\n      title: 'Copy Image',\n      handler: onCopyImage,\n    },\n  ];\n\n  const getButtonElement = (button) => (\n    <TopToolbarIconButton\n      title={button.title}\n      onClick={button.handler}\n      iconName={button.name}\n      shortcut={shortcuts[button.name]}\n      disabled={disabledButtons.includes(button.name)}\n      isHidden={hiddenButtons.includes(button.name)}\n      key={button.name}\n    />\n  );\n\n  const firstButtonObj = copyButtons.find(\n    (button) => !hiddenButtons.includes(button.name),\n  );\n  const collapsibleElements = copyButtons\n    .filter((button) => button !== firstButtonObj)\n    .map((button) => getButtonElement(button));\n\n  return (\n    <>\n      {!hiddenButtons.includes('copies') && (\n        <ElementWithDropdown\n          topElement={getButtonElement(firstButtonObj)}\n          dropDownElements={collapsibleElements}\n        />\n      )}\n      <TopToolbarIconButton\n        title=\"Paste\"\n        onClick={onPaste}\n        iconName=\"paste\"\n        shortcut={shortcuts.paste}\n        disabled={disabledButtons.includes('paste')}\n        isHidden={hiddenButtons.includes('paste')}\n      />\n      <TopToolbarIconButton\n        title=\"Cut\"\n        onClick={onCut}\n        iconName=\"cut\"\n        shortcut={shortcuts.cut}\n        disabled={disabledButtons.includes('cut')}\n        isHidden={hiddenButtons.includes('cut')}\n      />\n    </>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Divider } from './Divider';\nimport { TopToolbarIconButton } from './TopToolbarIconButton';\n\ninterface UndoRedoProps {\n  disabledButtons: string[];\n  hiddenButtons: string[];\n  shortcuts: { [key in string]: string };\n  onUndo: () => void;\n  onRedo: () => void;\n}\n\nexport const UndoRedo = ({\n  onUndo,\n  onRedo,\n  disabledButtons,\n  hiddenButtons,\n  shortcuts,\n}: UndoRedoProps) => {\n  return (\n    <>\n      <Divider />\n      <TopToolbarIconButton\n        title=\"Undo\"\n        onClick={onUndo}\n        iconName=\"undo\"\n        disabled={disabledButtons.includes('undo')}\n        isHidden={hiddenButtons.includes('undo')}\n        shortcut={shortcuts.undo}\n        testId=\"undo\"\n      />\n      <TopToolbarIconButton\n        title=\"Redo\"\n        onClick={onRedo}\n        iconName=\"redo\"\n        disabled={disabledButtons.includes('redo')}\n        isHidden={hiddenButtons.includes('redo')}\n        shortcut={shortcuts.redo}\n        testId=\"redo\"\n      />\n      <Divider />\n    </>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  FocusEvent,\n  KeyboardEvent,\n  useEffect,\n  useCallback,\n  RefObject,\n} from 'react';\nimport styled from '@emotion/styled';\n\nconst StyledInput = styled('input')`\n  border: 1px solid #cad3dd;\n  border-radius: 4px;\n  padding: 3px 8px;\n  color: #585858;\n  font-size: 14px;\n  line-height: 16px;\n  caret-color: #43b5c0;\n  margin-bottom: 8px;\n\n  &:hover {\n    border-color: #43b5c0;\n  }\n\n  &:active,\n  &:focus {\n    border-color: #167782;\n    outline: none;\n  }\n\n  &::after,\n  &::before {\n    display: none;\n  }\n`;\n\nconst onFocusHandler = (event: FocusEvent<HTMLInputElement>) => {\n  const el = event.target;\n  el.select();\n};\n\nexport const updateInputString = (\n  zoom: number,\n  inputElement: HTMLInputElement | null,\n) => {\n  if (!inputElement) return;\n  inputElement.value = `${zoom}%`;\n};\n\nexport interface ZoomInputProps {\n  onZoomSubmit: () => void;\n  currentZoom: number;\n  inputRef: RefObject<HTMLInputElement>;\n  shortcuts: { [key in string]: string };\n}\n\nexport const ZoomInput = ({\n  onZoomSubmit,\n  currentZoom,\n  inputRef,\n  shortcuts,\n}: ZoomInputProps) => {\n  useEffect(() => {\n    const inputEl = inputRef.current;\n    updateInputString(currentZoom, inputEl);\n    if (document.activeElement === inputEl) {\n      inputEl?.select();\n    }\n  }, [currentZoom, inputRef]);\n\n  const onKeyDown = useCallback(\n    (event: KeyboardEvent<HTMLInputElement>) => {\n      const inputEl = inputRef.current;\n      if (!inputEl) {\n        return;\n      }\n\n      // Prevent bubbling of keyDown events to capture input and Enter, allow bubbling of shortcuts\n      const zoomShortcuts = [shortcuts['zoom-out'], shortcuts['zoom-in']];\n      if (!zoomShortcuts.includes(event.key)) {\n        event.nativeEvent.stopImmediatePropagation();\n      }\n\n      if (event.key === 'Enter') {\n        onZoomSubmit();\n        inputEl.select();\n      }\n    },\n    [onZoomSubmit, inputRef, shortcuts],\n  );\n\n  // Focus on input field upon mounting\n  useEffect(() => {\n    const inputEl = inputRef.current;\n    inputEl?.focus();\n    inputEl?.select();\n  }, [inputRef]);\n\n  return (\n    <StyledInput\n      ref={inputRef}\n      data-testid=\"zoom-value\"\n      onFocus={onFocusHandler}\n      onKeyDown={onKeyDown}\n    />\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useState, useRef, useCallback } from 'react';\nimport styled from '@emotion/styled';\nimport { Button, Popover } from '@mui/material';\n\nimport { zoomList } from 'src/script/ui/action/zoom';\nimport { ZoomInput, updateInputString } from './ZoomInput';\nimport { Icon } from 'components';\nimport {\n  KETCHER_ROOT_NODE_CSS_SELECTOR,\n  KETCHER_MACROMOLECULES_ROOT_NODE_SELECTOR,\n} from 'src/constants';\n\nconst ElementAndDropdown = styled('div')`\n  position: relative;\n`;\n\nconst DropDownButton = styled(Button)`\n  display: flex;\n  color: #000000;\n  padding-right: 0;\n  padding-left: 0;\n\n  & svg {\n    margin-left: 2px;\n    width: 16px;\n    height: 16px;\n  }\n`;\n\nconst ZoomLabel = styled('span')`\n  width: 35px;\n`;\n\nconst Dropdown = styled(Popover)`\n  & .MuiPopover-paper {\n    padding: 8px;\n    width: 175px;\n    border: none;\n    border-radius: 0px 0px 4px 4px;\n    box-shadow: 0px 30px 48px -17px rgba(160, 165, 174, 0.3);\n    box-sizing: border-box;\n  }\n`;\n\nconst DropDownContent = styled('div')`\n  display: flex;\n  flex-direction: column;\n  white-space: nowrap;\n  word-break: keep-all;\n  background: white;\n`;\n\nconst ZoomControlButton = styled(Button)`\n  display: flex;\n  justify-content: space-between;\n  font-weight: 400;\n  font-size: 12px;\n  line-height: 14px;\n  padding: 7px 8px;\n  text-transform: none;\n  color: #333333;\n`;\n\nconst ShortcutLabel = styled('span')`\n  color: #cad3dd;\n`;\n\nconst getIntegerFromString = (zoomInput: string | undefined): number => {\n  const zoomNumber = parseInt(zoomInput || '');\n  if (isNaN(zoomNumber)) {\n    return 0;\n  }\n  return zoomNumber;\n};\n\nconst getValidZoom = (zoom: number, currentZoom: number): number => {\n  if (zoom === 0) {\n    return currentZoom;\n  }\n\n  const minAllowed = Math.min(...zoomList) * 100;\n  const maxAllowed = Math.max(...zoomList) * 100;\n\n  if (zoom < minAllowed) {\n    return minAllowed;\n  }\n  if (zoom > maxAllowed) {\n    return maxAllowed;\n  }\n  return zoom;\n};\n\ninterface ZoomProps {\n  currentZoom: number;\n  onZoom: (arg: number) => void;\n  onZoomIn: VoidFunction;\n  onZoomOut: VoidFunction;\n  disabledButtons: string[];\n  hiddenButtons: string[];\n  shortcuts: { [key in string]: string };\n}\n\nexport const ZoomControls = ({\n  currentZoom,\n  onZoom,\n  onZoomIn,\n  onZoomOut,\n  disabledButtons,\n  hiddenButtons,\n  shortcuts,\n}: ZoomProps) => {\n  const [isExpanded, setIsExpanded] = useState<boolean>(false);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const onZoomSubmit = useCallback(() => {\n    const inputEl = inputRef.current;\n    if (!inputEl) {\n      return;\n    }\n    const userInput = getIntegerFromString(inputEl.value);\n    if (userInput && userInput !== currentZoom) {\n      const zoomToSet = getValidZoom(userInput, currentZoom);\n      updateInputString(zoomToSet, inputEl);\n      onZoom(zoomToSet);\n    } else {\n      updateInputString(currentZoom, inputEl);\n    }\n  }, [onZoom, currentZoom]);\n\n  const onClose = (_, reason) => {\n    if (reason === 'backdropClick') {\n      onZoomSubmit();\n    }\n    setIsExpanded(false);\n  };\n\n  const onExpand = () => {\n    setIsExpanded(true);\n  };\n\n  const resetZoom = () => {\n    onZoom(100);\n  };\n\n  return (\n    <ElementAndDropdown ref={containerRef}>\n      <DropDownButton onClick={onExpand}>\n        <ZoomLabel data-testid=\"zoom-input\">\n          {Math.round(currentZoom)}%\n        </ZoomLabel>\n        <Icon name=\"chevron\" />\n      </DropDownButton>\n\n      <Dropdown\n        open={isExpanded}\n        onClose={onClose}\n        anchorEl={containerRef.current}\n        container={\n          document.querySelector(KETCHER_ROOT_NODE_CSS_SELECTOR) ||\n          document.querySelector(KETCHER_MACROMOLECULES_ROOT_NODE_SELECTOR)\n        }\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n      >\n        <DropDownContent>\n          <ZoomInput\n            onZoomSubmit={onZoomSubmit}\n            inputRef={inputRef}\n            currentZoom={currentZoom}\n            shortcuts={shortcuts}\n          />\n          {!hiddenButtons.includes('zoom-out') && (\n            <ZoomControlButton\n              data-testid=\"zoom-out\"\n              title=\"Zoom Out\"\n              onClick={onZoomOut}\n              disabled={disabledButtons.includes('zoom-out')}\n            >\n              <span>Zoom out</span>\n              <ShortcutLabel>{shortcuts['zoom-out']}</ShortcutLabel>\n            </ZoomControlButton>\n          )}\n          {!hiddenButtons.includes('zoom-in') && (\n            <ZoomControlButton\n              data-testid=\"zoom-in\"\n              title=\"Zoom In\"\n              onClick={onZoomIn}\n              disabled={disabledButtons.includes('zoom-in')}\n            >\n              <span>Zoom in</span>\n              <ShortcutLabel>{shortcuts['zoom-in']}</ShortcutLabel>\n            </ZoomControlButton>\n          )}\n          <ZoomControlButton\n            data-testid=\"zoom-default\"\n            title=\"Zoom 100%\"\n            onClick={resetZoom}\n          >\n            <span>Zoom 100%</span>\n            <ShortcutLabel>{shortcuts.zoom}</ShortcutLabel>\n          </ZoomControlButton>\n        </DropDownContent>\n      </Dropdown>\n    </ElementAndDropdown>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport styled from '@emotion/styled';\nimport { shortcutStr } from 'ketcher-core';\nimport { TopToolbarIconButton } from './TopToolbarIconButton';\n\ninterface SystemControlsProps {\n  disabledButtons: string[];\n  hiddenButtons: string[];\n  className?: string;\n  onSettingsOpen: () => void;\n  onAboutOpen: () => void;\n  onHistoryClick: () => void;\n  onFullscreen: () => void;\n  onHelp: () => void;\n}\n\nconst getIfFullScreen = () => {\n  return !!(\n    document.fullscreenElement ||\n    document.mozFullScreenElement ||\n    document.webkitFullscreenElement ||\n    document.msFullscreenElement\n  );\n};\n\nconst ControlsPanel = styled('div')`\n  display: flex;\n  align-items: center;\n  flex-grow: 0;\n  justify-content: flex-end;\n`;\n\nexport const SystemControls = ({\n  disabledButtons,\n  hiddenButtons,\n  onSettingsOpen,\n  // onHistoryClick,\n  onFullscreen,\n  onHelp,\n  onAboutOpen,\n  className,\n}: SystemControlsProps) => {\n  return (\n    <ControlsPanel className={className}>\n      {/* Uncomment upon History log implementation */}\n      {/* <IconButton\n        title=\"History\"\n        onClick={onHistoryClick}\n        iconName=\"history\"\n        disabled={disabledButtons.includes('history')}\n        isHidden={hiddenButtons.includes('history')}\n      /> */}\n      <TopToolbarIconButton\n        title=\"Settings\"\n        onClick={onSettingsOpen}\n        iconName=\"settings\"\n        disabled={disabledButtons.includes('settings')}\n        isHidden={hiddenButtons.includes('settings')}\n        testId=\"settings-button\"\n      />\n      <TopToolbarIconButton\n        title={`Help (${shortcutStr(['?', '&', 'Shift+/'])})`}\n        onClick={onHelp}\n        iconName=\"help\"\n        disabled={disabledButtons.includes('help')}\n        isHidden={hiddenButtons.includes('help')}\n        testId=\"help-button\"\n      />\n      {/* @TODO Temporary About button, when design is ready, reimplement */}\n      <TopToolbarIconButton\n        title=\"About\"\n        onClick={onAboutOpen}\n        iconName=\"about\"\n        disabled={disabledButtons.includes('about')}\n        isHidden={hiddenButtons.includes('about')}\n        testId=\"about-button\"\n      />\n      <TopToolbarIconButton\n        title=\"Fullscreen mode\"\n        onClick={onFullscreen}\n        iconName={getIfFullScreen() ? 'fullscreen-exit' : 'fullscreen-enter'}\n        disabled={disabledButtons.includes('fullscreen')}\n        isHidden={hiddenButtons.includes('fullscreen')}\n        testId=\"fullscreen-mode-button\"\n      />\n    </ControlsPanel>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { ElementWithDropdown } from './ElementWithDropdown';\nimport { TopToolbarIconButton } from './TopToolbarIconButton';\n\ninterface ExternalFuncProps {\n  isCollapsed: boolean;\n  onLayout: () => void;\n  onClean: () => void;\n  onAromatize: () => void;\n  onDearomatize: () => void;\n  onCalculate: () => void;\n  onCheck: () => void;\n  onAnalyse: () => void;\n  onMiew: () => void;\n  onToggleExplicitHydrogens: () => void;\n  disabledButtons: string[];\n  hiddenButtons: string[];\n  indigoVerification: boolean;\n  shortcuts: { [key in string]: string };\n}\n\nexport const ExternalFuncControls = ({\n  isCollapsed,\n  onLayout,\n  onClean,\n  onAromatize,\n  onDearomatize,\n  onCalculate,\n  onCheck,\n  onAnalyse,\n  onMiew,\n  onToggleExplicitHydrogens,\n  disabledButtons,\n  indigoVerification,\n  hiddenButtons,\n  shortcuts,\n}: ExternalFuncProps) => {\n  const externalFuncButtons = [\n    {\n      name: 'arom',\n      title: 'Aromatize',\n      handler: onAromatize,\n    },\n    {\n      name: 'dearom',\n      title: 'Dearomatize',\n      handler: onDearomatize,\n    },\n    {\n      name: 'layout',\n      title: 'Layout',\n      handler: onLayout,\n    },\n    {\n      name: 'clean',\n      title: 'Clean Up',\n      handler: onClean,\n    },\n    {\n      name: 'cip',\n      title: 'Calculate CIP',\n      handler: onCalculate,\n    },\n    {\n      name: 'check',\n      title: 'Check Structure',\n      handler: onCheck,\n    },\n    {\n      name: 'analyse',\n      title: 'Calculated Values',\n      handler: onAnalyse,\n    },\n    {\n      name: 'explicit-hydrogens',\n      title: 'Add/Remove explicit hydrogens',\n      handler: onToggleExplicitHydrogens,\n    },\n    {\n      name: 'miew',\n      title: '3D Viewer',\n      handler: onMiew,\n    },\n  ];\n\n  const getButtonElement = (button) => (\n    <TopToolbarIconButton\n      title={button.title}\n      onClick={button.handler}\n      iconName={button.name}\n      shortcut={shortcuts[button.name]}\n      disabled={indigoVerification || disabledButtons.includes(button.name)}\n      isHidden={hiddenButtons.includes(button.name)}\n      key={button.name}\n    />\n  );\n\n  const firstButtonObj = externalFuncButtons.find(\n    (button) => !hiddenButtons.includes(button.name),\n  );\n\n  const collapsibleElements = externalFuncButtons\n    .filter((button) => button !== firstButtonObj)\n    .map((button) => getButtonElement(button));\n\n  if (isCollapsed) {\n    return (\n      <ElementWithDropdown\n        topElement={getButtonElement(firstButtonObj)}\n        dropDownElements={collapsibleElements}\n      />\n    );\n  }\n\n  return (\n    <>\n      {firstButtonObj && getButtonElement(firstButtonObj)}\n      {<>{collapsibleElements}</>}\n    </>\n  );\n};\n","import { CustomButton } from '../../../../builders/ketcher/CustomButtons';\nimport { Divider } from './Divider';\nimport { TopToolbarCustomIconButton } from './TopToolbarIconButton';\nimport { ElementWithDropdown } from './ElementWithDropdown';\n\ninterface CustomButtonElementProps {\n  customButton: CustomButton;\n  onClick: (name: string) => void;\n}\n\ninterface CustomButtonsProps {\n  customButtons: Array<CustomButton>;\n  isCollapsed: boolean;\n  onCustomAction: (name: string) => void;\n}\n\nconst CustomButtonElement = ({\n  customButton,\n  onClick,\n}: CustomButtonElementProps) => (\n  <TopToolbarCustomIconButton\n    link={customButton.imageLink}\n    onClick={() => onClick(customButton.id)}\n    title={customButton.title}\n  />\n);\n\nexport const CustomButtons = ({\n  isCollapsed,\n  customButtons,\n  onCustomAction,\n}: CustomButtonsProps) => {\n  if (customButtons.length === 0) {\n    return null;\n  }\n\n  if (isCollapsed) {\n    return (\n      <>\n        <Divider />\n        <ElementWithDropdown\n          topElement={\n            <CustomButtonElement\n              customButton={customButtons[0]}\n              onClick={onCustomAction}\n            />\n          }\n          dropDownElements={customButtons.slice(1).map((customButton) => (\n            <CustomButtonElement\n              key={customButton.id}\n              customButton={customButton}\n              onClick={onCustomAction}\n            />\n          ))}\n        />\n      </>\n    );\n  }\n\n  return (\n    <>\n      <Divider />\n      {customButtons.map((customButton) => (\n        <CustomButtonElement\n          key={customButton.id}\n          customButton={customButton}\n          onClick={onCustomAction}\n        />\n      ))}\n    </>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport styled from '@emotion/styled';\n\nimport { useResizeObserver } from 'src/hooks';\nimport { FileControls } from './FileControls';\nimport { ClipboardControls } from './ClipboardControls';\nimport { UndoRedo } from './UndoRedo';\nimport { ZoomControls } from './ZoomControls';\n\nimport { SystemControls } from './SystemControls';\nimport { ExternalFuncControls } from './ExternalFuncControls';\nimport { Divider } from './Divider';\nimport { TopToolbarIconButton } from './TopToolbarIconButton';\nimport { CustomButtons } from './CustomButtons';\nimport { ketcherProvider } from 'ketcher-core';\nimport { useCallback, useMemo } from 'react';\nimport { CustomButton } from '../../../../builders/ketcher/CustomButtons';\n\ntype VoidFunction = () => void;\n\nexport interface PanelProps {\n  className: string;\n  disabledButtons: string[];\n  indigoVerification: boolean;\n  hiddenButtons: string[];\n  shortcuts: { [key in string]: string };\n  onClear: VoidFunction;\n  onFileOpen: VoidFunction;\n  onSave: VoidFunction;\n  onUndo: VoidFunction;\n  onRedo: VoidFunction;\n  onCopy: VoidFunction;\n  onCopyMol: VoidFunction;\n  onCopyKet: VoidFunction;\n  onCopyImage: VoidFunction;\n  onCut: VoidFunction;\n  onPaste: VoidFunction;\n  currentZoom: number | undefined;\n  onZoom: (zoom: number) => void;\n  onZoomIn: VoidFunction;\n  onZoomOut: VoidFunction;\n  onSettingsOpen: VoidFunction;\n  onLayout: VoidFunction;\n  onClean: VoidFunction;\n  onAromatize: VoidFunction;\n  onDearomatize: VoidFunction;\n  onCalculate: VoidFunction;\n  onCheck: VoidFunction;\n  onAnalyse: VoidFunction;\n  onMiew: VoidFunction;\n  onToggleExplicitHydrogens: VoidFunction;\n  onFullscreen: VoidFunction;\n  onAbout: VoidFunction;\n  onHelp: VoidFunction;\n  togglerComponent?: JSX.Element;\n  customButtons: Array<CustomButton>;\n}\n\nconst collapseLimit = 650;\nconst CUSTOM_BUTTON_ADDITIONAL_WIDTH = 40;\n\nconst ControlsPanel = styled('div')`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0px;\n  height: 36px;\n  padding: 0px 22px;\n  background-color: #ffffff;\n  box-shadow: 0px 2px 5px rgba(103, 104, 132, 0.15);\n\n  .group {\n    display: flex;\n    flex-direction: row;\n    gap: 0px;\n  }\n\n  & * {\n    box-sizing: border-box;\n  }\n\n  @media only screen {\n    @container (min-width: 1024px) {\n      height: 40px;\n      gap: 0px;\n      padding-bottom: 0;\n      .group {\n        gap: 4px;\n      }\n    }\n  }\n\n  @media only screen {\n    @container (min-width: 1920px) {\n      height: 64px;\n      gap: 12px;\n    }\n  }\n`;\n\nconst BtnsWpapper = styled.div`\n  display: flex;\n  align-items: center;\n  height: 100%;\n`;\n\nexport const TopToolbar = ({\n  className,\n  disabledButtons,\n  indigoVerification,\n  hiddenButtons,\n  shortcuts,\n  onClear,\n  onFileOpen,\n  onSave,\n  onUndo,\n  onRedo,\n  onCopy,\n  onCopyMol,\n  onCopyKet,\n  onCopyImage,\n  onCut,\n  onPaste,\n  currentZoom,\n  onZoom,\n  onZoomIn,\n  onZoomOut,\n  onSettingsOpen,\n  onLayout,\n  onClean,\n  onAromatize,\n  onDearomatize,\n  onCalculate,\n  onCheck,\n  onAnalyse,\n  onMiew,\n  onToggleExplicitHydrogens,\n  onFullscreen,\n  onAbout,\n  onHelp,\n  togglerComponent,\n  customButtons,\n}: PanelProps) => {\n  const { ref: resizeRef, width = 50 } = useResizeObserver<HTMLDivElement>();\n  const ketcher = ketcherProvider.getKetcher();\n\n  const onCustomAction = useCallback(\n    (name: string) => ketcher.sendCustomAction(name),\n    [ketcher],\n  );\n\n  const collapseLimitWithCustomButtons = useMemo(() => {\n    return (\n      collapseLimit + customButtons.length * CUSTOM_BUTTON_ADDITIONAL_WIDTH\n    );\n  }, [customButtons.length]);\n\n  const isCollapsed = width < collapseLimitWithCustomButtons;\n\n  return (\n    <ControlsPanel\n      className={className}\n      ref={resizeRef}\n      data-testid=\"top-toolbar\"\n    >\n      <BtnsWpapper>\n        <TopToolbarIconButton\n          title=\"Clear Canvas\"\n          onClick={onClear}\n          iconName=\"clear\"\n          shortcut={shortcuts.clear}\n          isHidden={hiddenButtons.includes('clear')}\n          disabled={disabledButtons.includes('clear')}\n          testId=\"clear-canvas\"\n        />\n        <FileControls\n          onFileOpen={onFileOpen}\n          onSave={onSave}\n          shortcuts={shortcuts}\n          hiddenButtons={hiddenButtons}\n        />\n        <ClipboardControls\n          onCopy={onCopy}\n          onCopyMol={onCopyMol}\n          onCopyKet={onCopyKet}\n          onCopyImage={onCopyImage}\n          onPaste={onPaste}\n          onCut={onCut}\n          shortcuts={shortcuts}\n          disabledButtons={disabledButtons}\n          hiddenButtons={hiddenButtons}\n        />\n        <UndoRedo\n          onUndo={onUndo}\n          onRedo={onRedo}\n          disabledButtons={disabledButtons}\n          hiddenButtons={hiddenButtons}\n          shortcuts={shortcuts}\n        />\n        <ExternalFuncControls\n          onLayout={onLayout}\n          onClean={onClean}\n          onAromatize={onAromatize}\n          onDearomatize={onDearomatize}\n          onCalculate={onCalculate}\n          onCheck={onCheck}\n          onAnalyse={onAnalyse}\n          onMiew={onMiew}\n          onToggleExplicitHydrogens={onToggleExplicitHydrogens}\n          disabledButtons={disabledButtons}\n          hiddenButtons={hiddenButtons}\n          shortcuts={shortcuts}\n          indigoVerification={indigoVerification}\n          isCollapsed={isCollapsed}\n        />\n        <CustomButtons\n          isCollapsed={isCollapsed}\n          customButtons={customButtons}\n          onCustomAction={onCustomAction}\n        />\n      </BtnsWpapper>\n      <BtnsWpapper>\n        {togglerComponent}\n        {togglerComponent && <Divider />}\n\n        <SystemControls\n          onHistoryClick={() => {\n            console.log('History button clicked'); // @TODO Implement handler when History log is ready\n          }}\n          onSettingsOpen={onSettingsOpen}\n          onFullscreen={onFullscreen}\n          onHelp={onHelp}\n          onAboutOpen={onAbout}\n          disabledButtons={disabledButtons}\n          hiddenButtons={hiddenButtons}\n        />\n        <Divider />\n        {!hiddenButtons.includes('zoom-list') && (\n          <ZoomControls\n            currentZoom={currentZoom || 1}\n            onZoomIn={onZoomIn}\n            onZoomOut={onZoomOut}\n            onZoom={onZoom}\n            shortcuts={shortcuts}\n            disabledButtons={disabledButtons}\n            hiddenButtons={hiddenButtons}\n          />\n        )}\n      </BtnsWpapper>\n    </ControlsPanel>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { TopToolbar } from './TopToolbar';\n\nimport { Dispatch } from 'redux';\nimport { connect } from 'react-redux';\nimport { onAction } from '../../../state';\nimport action from 'src/script/ui/action/index';\nimport { generateMenuShortcuts } from 'ketcher-core';\nimport { removeStructAction } from 'src/script/ui/state/shared';\nimport { createSelector } from 'reselect';\n\nconst getActionState = (state) => state.actionState || {};\n\nconst selectCustomButtons = (state) => state?.options?.customButtons || [];\n\nconst disabledButtonsSelector = createSelector(\n  [getActionState],\n  (actionState) =>\n    Object.keys(actionState).reduce((acc: string[], item) => {\n      if (actionState[item]?.disabled) {\n        acc.push(item);\n      }\n      return acc;\n    }, []),\n);\nconst hiddenButtonsSelector = createSelector([getActionState], (actionState) =>\n  Object.keys(actionState).reduce((acc: string[], item) => {\n    if (actionState[item]?.hidden) {\n      acc.push(item);\n    }\n    return acc;\n  }, []),\n);\n\nconst disableableButtons = [\n  'layout',\n  'clean',\n  'arom',\n  'dearom',\n  'cip',\n  'enhanced-stereo',\n];\n\nconst shortcuts = generateMenuShortcuts<typeof action>(action);\n\nconst mapStateToProps = (state: any) => {\n  return {\n    currentZoom: Math.round(state.actionState?.zoom?.selected * 100),\n    disabledButtons: disabledButtonsSelector(state),\n    hiddenButtons: hiddenButtonsSelector(state),\n    customButtons: selectCustomButtons(state),\n    shortcuts,\n    status: state.actionState || {},\n    opened: state.toolbar.opened,\n    indigoVerification: state.requestsStatuses.indigoVerification,\n    disableableButtons,\n  };\n};\n\nconst mapDispatchToProps = (dispatch: Dispatch) => {\n  const dispatchAction = (actionName) => {\n    if (['zoom-in', 'zoom-out'].includes(actionName)) {\n      dispatch(onAction(action[actionName].action()));\n    } else {\n      dispatch(onAction(action[actionName].action));\n    }\n  };\n\n  return {\n    onClear: () => dispatchAction('clear'),\n    onFileOpen: () => dispatchAction('open'),\n    onSave: () => {\n      dispatch(removeStructAction());\n      dispatchAction('save');\n    },\n    onUndo: () => dispatchAction('undo'),\n    onRedo: () => dispatchAction('redo'),\n    onCopy: () => dispatchAction('copy'),\n    onCopyMol: () => dispatchAction('copy-mol'),\n    onCopyKet: () => dispatchAction('copy-ket'),\n    onCopyImage: () => dispatchAction('copy-image'),\n    onCut: () => dispatchAction('cut'),\n    onPaste: () => dispatchAction('paste'),\n    onZoomIn: () => dispatchAction('zoom-in'),\n    onZoomOut: () => dispatchAction('zoom-out'),\n    onZoom: (zoomValue: number) =>\n      dispatch(onAction((editor) => editor.zoom(zoomValue / 100))),\n    onSettingsOpen: () => dispatchAction('settings'),\n    onLayout: () => dispatchAction('layout'),\n    onClean: () => dispatchAction('clean'),\n    onAromatize: () => dispatchAction('arom'),\n    onDearomatize: () => dispatchAction('dearom'),\n    onCalculate: () => dispatchAction('cip'),\n    onCheck: () => dispatchAction('check'),\n    onAnalyse: () => dispatchAction('analyse'),\n    onMiew: () => dispatchAction('miew'),\n    onAction: (action) => dispatch(onAction(action)),\n    onOpen: (menuName, isSelected) =>\n      dispatch({\n        type: 'OPENED',\n        data: { menuName, isSelected },\n      }),\n    onFullscreen: () => dispatchAction('fullscreen'),\n    onHelp: () => dispatchAction('help'),\n    onAbout: () => dispatchAction('about'),\n    onToggleExplicitHydrogens: () => dispatchAction('explicit-hydrogens'),\n  };\n};\n\nconst TopToolbarContainer = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(TopToolbar);\n\nexport { TopToolbarContainer };\n","import type { FloatingToolsState } from '..';\n\nexport const getFloatingToolsVisible = (state) => {\n  const floatingTools: FloatingToolsState = state.floatingTools;\n  return floatingTools.visible;\n};\n\nexport const getFloatingToolsRotateHandlePosition = (state) => {\n  const floatingTools: FloatingToolsState = state.floatingTools;\n  return floatingTools.rotateHandlePosition;\n};\n","import action, { UiActionAction } from '../../../action';\nimport {\n  ActionButton,\n  ActionButtonProps,\n} from '../ToolbarGroupItem/ActionButton';\nimport { type ToolbarItemVariant } from '../toolbar.types';\nimport classes from './FloatingTools.module.less';\nimport { getIconName } from 'components';\n\nexport type FloatingToolsProps = {\n  visible: boolean;\n  rotateHandlePosition: { x: number; y: number };\n  status: {\n    disabled?: boolean;\n    hidden?: boolean;\n  };\n  indigoVerification: boolean;\n};\nexport type FloatingToolsCallProps = {\n  onAction: (action: UiActionAction) => void;\n};\ntype Props = FloatingToolsProps & FloatingToolsCallProps;\n\nconst FLOATING_TOOLS: readonly ToolbarItemVariant[] = [\n  'transform-flip-h',\n  'transform-flip-v',\n  'erase',\n] as const;\n\nexport const FloatingTools: React.FC<Props> = ({\n  visible,\n  rotateHandlePosition,\n  status,\n  indigoVerification,\n  onAction,\n}) => {\n  if (!visible) return null;\n\n  return (\n    <div\n      className={classes.wrapper}\n      style={{ left: rotateHandlePosition.x, top: rotateHandlePosition.y }}\n      data-testid=\"floating-tools\"\n    >\n      {FLOATING_TOOLS.map((name) => {\n        const iconName = getIconName(name === 'erase' ? 'delete' : name);\n        return (\n          iconName && (\n            <ActionButton\n              className={classes.item}\n              // Note: erase button's icon is 'delete'\n              name={iconName}\n              action={action[name]}\n              status={status[name] as ActionButtonProps['status']}\n              selected={false}\n              indigoVerification={indigoVerification}\n              onAction={onAction}\n              disableableButtons={[]}\n              key={name}\n            />\n          )\n        );\n      })}\n    </div>\n  );\n};\n","import { connect } from 'react-redux';\nimport { Dispatch } from 'redux';\nimport {\n  getFloatingToolsRotateHandlePosition,\n  getFloatingToolsVisible,\n} from 'src/script/ui/state/floatingTools/selectors';\nimport { onAction } from '../../../state';\nimport {\n  FloatingTools,\n  type FloatingToolsCallProps,\n  type FloatingToolsProps,\n} from './FloatingTools';\n\nconst mapStateToProps = (state: any): FloatingToolsProps => {\n  return {\n    visible: getFloatingToolsVisible(state),\n    rotateHandlePosition: getFloatingToolsRotateHandlePosition(state),\n    status: state.actionState || {},\n    indigoVerification: state.requestsStatuses.indigoVerification,\n  };\n};\n\nconst mapDispatchToProps = (dispatch: Dispatch): FloatingToolsCallProps => ({\n  onAction: (action) => dispatch(onAction(action)),\n});\n\nconst FloatingToolContainer = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(FloatingTools);\n\nexport { FloatingToolContainer };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport const selectIsAbbreviationLookupOpen = (state): boolean =>\n  state.abbreviationLookup.isOpen;\n\nexport const selectAbbreviationLookupValue = (state): string =>\n  state.abbreviationLookup.lookupValue ?? '';\n","import {\n  Editor,\n  Vec2,\n  EditorSelection,\n  fromMultipleMove,\n  ReAtom,\n  Scale,\n} from 'ketcher-core';\n\ntype ArrowKey = 'ArrowUp' | 'ArrowDown' | 'ArrowRight' | 'ArrowLeft';\nconst destinationVectorMapping: { [key in ArrowKey]: Vec2 } = {\n  ArrowUp: new Vec2(0, -1),\n  ArrowDown: new Vec2(0, 1),\n  ArrowRight: new Vec2(1, 0),\n  ArrowLeft: new Vec2(-1, 0),\n};\n\nexport function isArrowKey(key: string): key is ArrowKey {\n  return (\n    key === 'ArrowUp' ||\n    key === 'ArrowDown' ||\n    key === 'ArrowLeft' ||\n    key === 'ArrowRight'\n  );\n}\n\nexport function moveSelectedItems(\n  editor: Editor,\n  key: ArrowKey,\n  isShiftPressed: boolean,\n) {\n  const getFasterStep = (vec: Vec2) => vec.scaled(10);\n  const selectedItems = editor.explicitSelected();\n  const destinationVectorInCanvas = destinationVectorMapping[key];\n  const destinationVector = Scale.canvasToModel(\n    destinationVectorInCanvas,\n    editor.render.options,\n  );\n  const action = fromMultipleMove(\n    editor.render.ctab,\n    selectedItems,\n    isShiftPressed ? getFasterStep(destinationVector) : destinationVector,\n  );\n  editor.update(action, false, { resizeCanvas: true });\n  const isClose = isCloseToTheEdgeOfCanvas(selectedItems, editor, key);\n  if (isClose) {\n    const moveStep = isShiftPressed\n      ? getFasterStep(destinationVectorInCanvas)\n      : destinationVectorInCanvas;\n    editor.render.setViewBox((prev) => ({\n      ...prev,\n      minX: prev.minX + moveStep.x,\n      minY: prev.minY + moveStep.y,\n    }));\n  }\n  editor.rotateController.rerender();\n}\n\nconst EDGE_OFFSET = 50;\n\nfunction isCloseToTheEdgeOfCanvas(\n  selectedItems: EditorSelection,\n  editor: Editor,\n  key: ArrowKey,\n) {\n  if (!selectedItems.atoms) {\n    return false;\n  }\n  const restruct = editor.render.ctab;\n  let theMostTopAtom = restruct.atoms.get(selectedItems?.atoms[0]);\n  let theMostBottomAtom = restruct.atoms.get(selectedItems?.atoms[0]);\n  let theMostRightAtom = restruct.atoms.get(selectedItems?.atoms[0]);\n  let theMostLeftAtom = restruct.atoms.get(selectedItems?.atoms[0]);\n\n  selectedItems.atoms.forEach((atomId) => {\n    const atom = restruct.atoms.get(atomId);\n    const position = atom?.a.pp;\n    if (position && theMostTopAtom) {\n      theMostTopAtom =\n        position.y < theMostTopAtom.a.pp.y ? atom : theMostTopAtom;\n    }\n    if (position && theMostBottomAtom) {\n      theMostBottomAtom =\n        position.y > theMostBottomAtom.a.pp.y ? atom : theMostBottomAtom;\n    }\n    if (position && theMostRightAtom) {\n      theMostRightAtom =\n        position.x > theMostRightAtom.a.pp.x ? atom : theMostRightAtom;\n    }\n    if (position && theMostLeftAtom) {\n      theMostLeftAtom =\n        position.x < theMostLeftAtom.a.pp.x ? atom : theMostLeftAtom;\n    }\n  });\n  if (\n    theMostTopAtom &&\n    theMostBottomAtom &&\n    theMostRightAtom &&\n    theMostLeftAtom\n  ) {\n    const getScreenCoordinates = (atom: ReAtom) =>\n      Scale.modelToCanvas(atom.a.pp, editor.render.options);\n    const theMostTopAtomYCoordinate = getScreenCoordinates(theMostTopAtom).y;\n    const theMostBottomAtomYCoordinate =\n      getScreenCoordinates(theMostBottomAtom).y;\n    const theMostRightAtomXCoordinate =\n      getScreenCoordinates(theMostRightAtom).x;\n    const theMostLeftAtomXCoordinate = getScreenCoordinates(theMostLeftAtom).x;\n\n    const viewBox = editor.render.viewBox;\n    const isCloseToTop =\n      theMostTopAtomYCoordinate <= viewBox.minY + EDGE_OFFSET;\n    const isCloseToBottom =\n      theMostBottomAtomYCoordinate >=\n      viewBox.minY + viewBox.height - EDGE_OFFSET;\n    const isCloseToLeft =\n      theMostLeftAtomXCoordinate <= viewBox.minX + EDGE_OFFSET;\n    const isCloseToRight =\n      theMostRightAtomXCoordinate >= viewBox.minX + viewBox.width - EDGE_OFFSET;\n    return (\n      (isCloseToTop && key === 'ArrowUp') ||\n      (isCloseToBottom && key === 'ArrowDown') ||\n      (isCloseToLeft && key === 'ArrowLeft') ||\n      (isCloseToRight && key === 'ArrowRight')\n    );\n  }\n  return false;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  FunctionalGroup,\n  IMAGE_KEY,\n  Struct,\n  Vec2,\n  ReStruct,\n  MULTITAIL_ARROW_KEY,\n} from 'ketcher-core';\nimport assert from 'assert';\n\nfunction getElementsInRectangle(restruct: ReStruct, p0, p1) {\n  const bondList: Array<number> = [];\n  const atomList: Array<number> = [];\n  const sGroups = restruct.sgroups;\n  const functionalGroups = restruct.molecule.functionalGroups;\n  const struct: Struct = restruct.molecule;\n\n  const x0 = Math.min(p0.x, p1.x);\n  const x1 = Math.max(p0.x, p1.x);\n  const y0 = Math.min(p0.y, p1.y);\n  const y1 = Math.max(p0.y, p1.y);\n\n  const topLeftPosition = new Vec2(x0, y0);\n  const topRightPosition = new Vec2(x1, y0);\n  const bottomRightPosition = new Vec2(x1, y1);\n  const bottomLeftPosition = new Vec2(x0, y1);\n\n  const polygon = [\n    topLeftPosition,\n    topRightPosition,\n    bottomRightPosition,\n    bottomLeftPosition,\n  ];\n\n  restruct.bonds.forEach((bond, bid) => {\n    if (\n      FunctionalGroup.isBondInContractedFunctionalGroup(\n        bond.b,\n        sGroups,\n        functionalGroups,\n      )\n    ) {\n      return;\n    }\n\n    let center: Vec2;\n    if (bond.b.isExternalBondBetweenMonomers(struct)) {\n      const firstMonomer = struct.getGroupFromAtomId(bond.b.begin);\n      const secondMonomer = struct.getGroupFromAtomId(bond.b.end);\n\n      assert(firstMonomer);\n      assert(secondMonomer);\n\n      center =\n        firstMonomer.pp && secondMonomer.pp\n          ? Vec2.centre(firstMonomer.pp, secondMonomer.pp)\n          : bond.b.center;\n    } else {\n      center = bond.b.center;\n    }\n\n    if (center.x > x0 && center.x < x1 && center.y > y0 && center.y < y1) {\n      bondList.push(bid);\n    }\n  });\n\n  restruct.atoms.forEach((atom, aid) => {\n    const relatedFGId = FunctionalGroup.findFunctionalGroupByAtom(\n      functionalGroups,\n      aid,\n    );\n    const sGroup = struct.sgroups.get(relatedFGId as number);\n\n    if (struct.isAtomFromMacromolecule(aid)) {\n      if (\n        sGroup &&\n        sGroup.pp &&\n        sGroup.pp.x > x0 &&\n        sGroup.pp.x < x1 &&\n        sGroup.pp.y > y0 &&\n        sGroup.pp.y < y1\n      ) {\n        atomList.push(aid);\n      }\n    } else {\n      if (\n        atom.a.pp.x > x0 &&\n        atom.a.pp.x < x1 &&\n        atom.a.pp.y > y0 &&\n        atom.a.pp.y < y1 &&\n        (!FunctionalGroup.isAtomInContractedFunctionalGroup(\n          atom.a,\n          sGroups,\n          functionalGroups,\n          true,\n        ) ||\n          aid === sGroup?.atoms[0])\n      ) {\n        atomList.push(aid);\n      }\n    }\n  });\n\n  const rxnArrowsList: Array<number> = [];\n  const rxnPlusesList: Array<number> = [];\n  const simpleObjectsList: Array<number> = [];\n\n  // ReRxnArrow item doesn't have center method according to types but somehow it works\n  restruct.rxnArrows.forEach((item: any, id) => {\n    if (\n      item.item.center().x > x0 &&\n      item.item.center().x < x1 &&\n      item.item.center().y > y0 &&\n      item.item.center().y < y1\n    ) {\n      rxnArrowsList.push(id);\n    }\n  });\n\n  restruct.rxnPluses.forEach((item, id) => {\n    if (\n      item.item.pp.x > x0 &&\n      item.item.pp.x < x1 &&\n      item.item.pp.y > y0 &&\n      item.item.pp.y < y1\n    ) {\n      rxnPlusesList.push(id);\n    }\n  });\n\n  restruct.simpleObjects.forEach((item, id) => {\n    const referencePoints = item.getReferencePoints(true);\n    const referencePointInRectangle = referencePoints.find(\n      (point) => point.x > x0 && point.x < x1 && point.y > y0 && point.y < y1,\n    );\n    if (referencePointInRectangle) {\n      simpleObjectsList.push(id);\n    }\n  });\n\n  const enhancedFlagList: Array<number> = [];\n  // ReEnhancedFlag doesn't have pp item according to types but somehow it works\n  restruct.enhancedFlags.forEach((item: any, id) => {\n    if (!item.pp) return;\n    if (item.pp.x > x0 && item.pp.x < x1 && item.pp.y > y0 && item.pp.y < y1) {\n      enhancedFlagList.push(id);\n    }\n  });\n\n  const sgroupDataList: Array<number> = [];\n  restruct.sgroupData.forEach((item, id) => {\n    if (\n      item.sgroup.pp.x > x0 &&\n      item.sgroup.pp.x < x1 &&\n      item.sgroup.pp.y > y0 &&\n      item.sgroup.pp.y < y1\n    ) {\n      sgroupDataList.push(id);\n    }\n  });\n\n  const textsList: Array<number> = [];\n  restruct.texts.forEach((item, id) => {\n    const referencePoints = item.getReferencePoints();\n    const referencePointInRectangle = referencePoints.find((point) => {\n      return point.x > x0 && point.x < x1 && point.y > y0 && point.y < y1;\n    });\n\n    if (referencePointInRectangle) {\n      textsList.push(id);\n    }\n  });\n\n  const rgroupAttachmentPointList: number[] = [];\n  restruct.visibleRGroupAttachmentPoints.forEach((item, id) => {\n    if (\n      item.middlePoint.x > x0 &&\n      item.middlePoint.x < x1 &&\n      item.middlePoint.y > y0 &&\n      item.middlePoint.y < y1\n    ) {\n      rgroupAttachmentPointList.push(id);\n    }\n  });\n\n  const reImages = Array.from(restruct.images.entries()).reduce(\n    (acc: Array<number>, [id, item]): Array<number> => {\n      const isPointInside = Object.values(\n        item.image.getReferencePositions(),\n      ).some((point) => point.isInsidePolygon(polygon));\n      return isPointInside ? acc.concat(id) : acc;\n    },\n    [],\n  );\n\n  const reMultitailArrows = Array.from(\n    restruct.multitailArrows.entries(),\n  ).reduce((acc: Array<number>, [id, item]): Array<number> => {\n    const isPointInside = item.multitailArrow\n      .getReferencePositionsArray()\n      .some((point) => point.isInsidePolygon(polygon));\n    return isPointInside ? acc.concat(id) : acc;\n  }, []);\n\n  return {\n    atoms: atomList,\n    bonds: bondList,\n    rxnArrows: rxnArrowsList,\n    rxnPluses: rxnPlusesList,\n    enhancedFlags: enhancedFlagList,\n    sgroupData: sgroupDataList,\n    simpleObjects: simpleObjectsList,\n    texts: textsList,\n    rgroupAttachmentPoints: rgroupAttachmentPointList,\n    [IMAGE_KEY]: reImages,\n    [MULTITAIL_ARROW_KEY]: reMultitailArrows,\n  };\n}\n\nfunction getElementsInPolygon(restruct: ReStruct, rr) {\n  // eslint-disable-line max-statements\n  const bondList: Array<number> = [];\n  const atomList: Array<number> = [];\n  const r: any = [];\n  const sGroups = restruct.sgroups;\n  const functionalGroups = restruct.molecule.functionalGroups;\n  const struct: Struct = restruct.molecule;\n\n  for (let i = 0; i < rr.length; ++i) {\n    r[i] = new Vec2(rr[i].x, rr[i].y);\n  }\n\n  restruct.bonds.forEach((bond, bid) => {\n    if (\n      FunctionalGroup.isBondInContractedFunctionalGroup(\n        bond.b,\n        sGroups,\n        functionalGroups,\n      )\n    ) {\n      return;\n    }\n\n    let center: Vec2;\n    if (bond.b.isExternalBondBetweenMonomers(struct)) {\n      const firstMonomer = struct.getGroupFromAtomId(bond.b.begin);\n      const secondMonomer = struct.getGroupFromAtomId(bond.b.end);\n\n      assert(firstMonomer);\n      assert(secondMonomer);\n\n      center =\n        firstMonomer?.pp && secondMonomer?.pp\n          ? Vec2.centre(firstMonomer.pp, secondMonomer.pp)\n          : bond.b.center;\n    } else {\n      center = bond.b.center;\n    }\n\n    if (isPointInPolygon(r, center)) {\n      bondList.push(bid);\n    }\n  });\n\n  restruct.atoms.forEach((atom, aid) => {\n    const relatedFGId = FunctionalGroup.findFunctionalGroupByAtom(\n      functionalGroups,\n      aid,\n    );\n    const sGroup = struct.sgroups.get(relatedFGId as number);\n\n    if (struct.isAtomFromMacromolecule(aid)) {\n      if (sGroup && sGroup.pp && isPointInPolygon(r, sGroup.pp)) {\n        atomList.push(aid);\n      }\n    } else {\n      if (\n        isPointInPolygon(r, atom.a.pp) &&\n        (!FunctionalGroup.isAtomInContractedFunctionalGroup(\n          atom.a,\n          sGroups,\n          functionalGroups,\n          true,\n        ) ||\n          aid === sGroup?.atoms[0])\n      ) {\n        atomList.push(aid);\n      }\n    }\n  });\n\n  const rxnArrowsList: Array<number> = [];\n  const rxnPlusesList: Array<number> = [];\n  const simpleObjectsList: Array<number> = [];\n  const textsList: Array<number> = [];\n\n  restruct.rxnArrows.forEach((item, id) => {\n    const referencePoints = item.getReferencePoints();\n    const referencePointInPolygon = referencePoints.find((point) =>\n      isPointInPolygon(r, point),\n    );\n    if (referencePointInPolygon) {\n      rxnArrowsList.push(id);\n    }\n  });\n\n  restruct.rxnPluses.forEach((item, id) => {\n    if (isPointInPolygon(r, item.item.pp)) {\n      rxnPlusesList.push(id);\n    }\n  });\n\n  restruct.simpleObjects.forEach((item, id) => {\n    const referencePoints = item.getReferencePoints(true);\n    const referencePointInPolygon = referencePoints.find((point) =>\n      isPointInPolygon(r, point),\n    );\n    if (referencePointInPolygon) {\n      simpleObjectsList.push(id);\n    }\n  });\n\n  restruct.texts.forEach((item, id) => {\n    const referencePoints = item.getReferencePoints();\n    const referencePointInPolygon = referencePoints.find((point) =>\n      isPointInPolygon(r, point),\n    );\n\n    if (referencePointInPolygon) {\n      textsList.push(id);\n    }\n  });\n\n  const enhancedFlagList: Array<number> = [];\n  // ReEnhancedFlag doesn't have pp item according to types but somehow it works\n  restruct.enhancedFlags.forEach((item: any, id) => {\n    if (item.pp && isPointInPolygon(r, item.pp)) {\n      enhancedFlagList.push(id);\n    }\n  });\n\n  const sgroupDataList: Array<number> = [];\n  restruct.sgroupData.forEach((item, id) => {\n    if (isPointInPolygon(r, item.sgroup.pp)) {\n      sgroupDataList.push(id);\n    }\n  });\n\n  const rgroupAttachmentPointList: number[] = [];\n  restruct.visibleRGroupAttachmentPoints.forEach((item, id) => {\n    if (isPointInPolygon(r, item.middlePoint)) {\n      rgroupAttachmentPointList.push(id);\n    }\n  });\n\n  const reImages = Array.from(restruct.images.entries()).reduce(\n    (acc: Array<number>, [id, item]) => {\n      const isPointInside = Object.values(\n        item.image.getReferencePositions(),\n      ).some((point) => isPointInPolygon(r, point));\n      return isPointInside ? acc.concat(id) : acc;\n    },\n    [],\n  );\n\n  const reMultitailArrows = Array.from(\n    restruct.multitailArrows.entries(),\n  ).reduce((acc: Array<number>, [id, item]) => {\n    const isPointInside = item.multitailArrow\n      .getReferencePositionsArray()\n      .some((point) => isPointInPolygon(r, point));\n    return isPointInside ? acc.concat(id) : acc;\n  }, []);\n\n  return {\n    atoms: atomList,\n    bonds: bondList,\n    rxnArrows: rxnArrowsList,\n    rxnPluses: rxnPlusesList,\n    enhancedFlags: enhancedFlagList,\n    sgroupData: sgroupDataList,\n    simpleObjects: simpleObjectsList,\n    texts: textsList,\n    rgroupAttachmentPoints: rgroupAttachmentPointList,\n    [IMAGE_KEY]: reImages,\n    [MULTITAIL_ARROW_KEY]: reMultitailArrows,\n  };\n}\n\n// TODO: test me see testPolygon from\n// 'Remove unused methods from render' commit\nfunction isPointInPolygon(r, p) {\n  // eslint-disable-line max-statements\n  const d = new Vec2(0, 1);\n  const n = d.rotate(Math.PI / 2);\n  let v0 = Vec2.diff(r[r.length - 1], p);\n  let n0 = Vec2.dot(n, v0);\n  let d0 = Vec2.dot(d, v0);\n  let w0 = new Vec2(0, 0);\n  let counter = 0;\n  const eps = 1e-5;\n  let flag1 = false;\n  let flag0 = false;\n\n  for (let i = 0; i < r.length; ++i) {\n    const v1 = Vec2.diff(r[i], p);\n    const w1 = Vec2.diff(v1, v0);\n    const n1 = Vec2.dot(n, v1);\n    const d1 = Vec2.dot(d, v1);\n    flag1 = false;\n    if (n1 * n0 < 0) {\n      if (d1 * d0 > -eps) {\n        if (d0 > -eps) flag1 = true;\n        /* eslint-disable no-mixed-operators */\n      } else if (\n        (Math.abs(n0) * Math.abs(d1) - Math.abs(n1) * Math.abs(d0)) * d1 >\n        0\n      ) {\n        /* eslint-enable no-mixed-operators */\n        flag1 = true;\n      }\n    }\n    if (flag1 && flag0 && Vec2.dot(w1, n) * Vec2.dot(w0, n) >= 0) {\n      flag1 = false;\n    }\n    if (flag1) {\n      counter++;\n    }\n    v0 = v1;\n    n0 = n1;\n    d0 = d1;\n    w0 = w1;\n    flag0 = flag1;\n  }\n  return counter % 2 !== 0;\n}\n\nexport default {\n  inRectangle: getElementsInRectangle,\n  inPolygon: getElementsInPolygon,\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Scale } from 'ketcher-core';\nimport locate from './locate';\nimport Editor from '../../Editor';\n\nclass LassoHelper {\n  mode: any;\n  editor: Editor;\n  fragment: any;\n  points: any;\n  selection: any;\n\n  constructor(mode, editor, fragment) {\n    this.mode = mode;\n    this.fragment = fragment;\n    this.editor = editor;\n  }\n\n  getSelection() {\n    const rnd = this.editor.render;\n\n    if (this.mode === 0) {\n      return locate.inPolygon(rnd.ctab, this.points);\n    }\n\n    if (this.mode === 1) {\n      return locate.inRectangle(rnd.ctab, this.points[0], this.points[1]);\n    }\n\n    throw new Error('Selector mode unknown'); // eslint-disable-line no-else-return\n  }\n\n  begin(event) {\n    const rnd = this.editor.render;\n    this.points = [rnd.page2obj(event)];\n    if (this.mode === 1) {\n      this.points.push(this.points[0]);\n    }\n  }\n\n  running() {\n    return !!this.points;\n  }\n\n  addPoint(event) {\n    if (!this.points) {\n      return null;\n    }\n\n    const rnd = this.editor.render;\n\n    if (this.mode === 0) {\n      this.points.push(rnd.page2obj(event));\n    } else if (this.mode === 1) {\n      this.points = [this.points[0], rnd.page2obj(event)];\n    }\n\n    this.update();\n    return this.getSelection();\n  }\n\n  update() {\n    if (this.selection) {\n      this.selection.remove();\n      this.selection = null;\n    }\n\n    if (this.points && this.points.length > 1) {\n      const rnd = this.editor.render;\n      const dp = this.points.map((p) =>\n        Scale.modelToCanvas(p, rnd.options).add(rnd.options.offset),\n      );\n      this.selection =\n        this.mode === 0\n          ? rnd.selectionPolygon(dp)\n          : rnd.selectionRectangle(dp[0], dp[1]);\n    }\n  }\n\n  end() {\n    const ret = this.getSelection();\n    this.points = null;\n    this.update();\n    return ret;\n  }\n\n  cancel() {\n    this.points = null;\n    this.update();\n  }\n}\n\nexport default LassoHelper;\n","import { Atom, mergeMapOfItemsToSet, Struct } from 'ketcher-core';\n\ntype Items = {\n  atoms?: number[];\n  bonds?: number[];\n};\n\nfunction getGroupIdsFromItemArrays(struct: Struct, items?: Items): number[] {\n  if (!struct.sgroups.size) return [];\n\n  const groupsIds = new Set<number>();\n  if (items?.atoms) {\n    items.atoms\n      .filter((atomId) => {\n        return !Atom.isSuperatomLeavingGroupAtom(struct, atomId);\n      })\n      .forEach((atomId) => {\n        const groupId = struct.getGroupIdFromAtomId(atomId);\n        if (groupId !== null) groupsIds.add(groupId);\n      });\n  }\n  items?.bonds?.forEach((bondId) => {\n    const groupId = struct.getGroupIdFromBondId(bondId);\n    if (groupId !== null) groupsIds.add(groupId);\n  });\n\n  return Array.from(groupsIds);\n}\n\ntype MergeItems = {\n  atoms: Map<number, number>;\n  bonds: Map<number, number>;\n};\n\nfunction getGroupIdsFromItemMaps(\n  struct: Struct,\n  mergeMaps: MergeItems | null,\n): number[] {\n  const atoms =\n    mergeMaps?.atoms && Array.from(mergeMapOfItemsToSet(mergeMaps.atoms));\n  const bonds =\n    mergeMaps?.bonds && Array.from(mergeMapOfItemsToSet(mergeMaps.bonds));\n\n  return getGroupIdsFromItemArrays(struct, { atoms, bonds });\n}\n\nexport { getGroupIdsFromItemArrays, getGroupIdsFromItemMaps };\n","import { xor } from 'lodash/fp';\nimport { Atom, Bond, SGroup } from 'ketcher-core';\nimport Editor from '../../Editor';\nimport LassoHelper from '../helper/lasso';\nimport { getGroupIdsFromItemArrays } from '../helper/getGroupIdsFromItems';\n\nfunction uniqArray(dest, add, reversible: boolean) {\n  return add.reduce((_, item) => {\n    if (reversible) dest = xor(dest, [item]);\n    else if (!dest.includes(item)) dest.push(item);\n    return dest;\n  }, []);\n}\n\n// TODO: deep-merge?\nexport function selMerge(selection, add, reversible: boolean) {\n  if (add) {\n    Object.keys(add).forEach((item) => {\n      if (!selection[item]) selection[item] = add[item].slice();\n      else selection[item] = uniqArray(selection[item], add[item], reversible);\n    });\n  }\n  return selection;\n}\n\nexport function getSelectedAtoms(selection, molecule) {\n  if (selection?.atoms) {\n    return mapAtomIdsToAtoms(selection?.atoms, molecule);\n  }\n  return [];\n}\n\nexport function getSelectedBonds(selection, molecule) {\n  if (selection?.bonds) {\n    return mapBondIdsToBonds(selection?.bonds, molecule);\n  }\n  return [];\n}\n\nexport function mapAtomIdsToAtoms(atomsIds: number[], molecule): Atom[] {\n  return atomsIds.map((atomId) => {\n    const atomOrReAtom = molecule.atoms.get(atomId);\n    return atomOrReAtom.a || atomOrReAtom;\n  });\n}\n\nexport function mapBondIdsToBonds(bondsIds: number[], molecule): Bond[] {\n  return bondsIds.map((bondId) => {\n    const bondOrReBond = molecule.bonds.get(bondId);\n    return bondOrReBond?.b || bondOrReBond;\n  });\n}\n\nexport function getNewSelectedItems(editor: Editor, selectedSgroups: number[]) {\n  const newSelected: Record<'atoms' | 'bonds', number[]> = {\n    atoms: [],\n    bonds: [],\n  };\n\n  for (const sgId of selectedSgroups) {\n    const sgroup = editor.render.ctab.sgroups.get(sgId);\n    if (sgroup && !sgroup.item?.isSuperatomWithoutLabel) {\n      const sgroupAtoms = SGroup.getAtoms(editor.struct(), sgroup.item);\n      const sgroupBonds = SGroup.getBonds(editor.struct(), sgroup.item);\n      newSelected.atoms.push(...sgroupAtoms);\n      newSelected.bonds.push(...sgroupBonds);\n    }\n  }\n\n  return newSelected;\n}\n\nexport function selectElementsOnCanvas(\n  elements: { atoms: number[]; bonds: number[] },\n  editor: Editor,\n  lassoHelper: LassoHelper,\n  event: PointerEvent,\n) {\n  const sel =\n    elements.atoms.length > 0\n      ? selMerge(lassoHelper.end(), elements, false)\n      : lassoHelper.end();\n  editor.selection(\n    !event.shiftKey ? sel : selMerge(sel, editor.selection(), false),\n  );\n}\n\nexport function onSelectionStart(\n  event: PointerEvent,\n  editor: Editor,\n  lassoHelper: LassoHelper,\n) {\n  if (!event.shiftKey) editor.selection(null);\n  if (!lassoHelper.fragment) lassoHelper.begin(event);\n}\n\nexport function onSelectionMove(\n  event: PointerEvent,\n  editor: Editor,\n  lassoHelper: LassoHelper,\n): boolean {\n  if (lassoHelper.running()) {\n    const sel = lassoHelper.addPoint(event);\n\n    editor.selection(\n      !event.shiftKey ? sel : selMerge(sel, editor.selection(), false),\n    );\n    return true;\n  }\n  return false;\n}\n\nexport function onSelectionEnd(\n  event: PointerEvent,\n  editor: Editor,\n  lassoHelper: LassoHelper,\n): void {\n  if (lassoHelper.running()) {\n    const selected = editor.selection();\n    const struct = editor.render.ctab;\n    const molecule = struct.molecule;\n\n    // add all items of all selectedSGroups to selection\n    const selectedSgroups = selected\n      ? getGroupIdsFromItemArrays(molecule, selected)\n      : [];\n    const newSelected = getNewSelectedItems(editor, selectedSgroups);\n    // TODO it catches more events than needed, to be re-factored\n    selectElementsOnCanvas(newSelected, editor, lassoHelper, event);\n  } else if (lassoHelper.fragment) {\n    if (\n      !event.shiftKey &&\n      editor.render.clientArea.contains(event.target as Node)\n    )\n      editor.selection(null);\n  }\n}\n\nexport function onSelectionLeave(editor: Editor, lassoHelper: LassoHelper) {\n  if (lassoHelper.running()) {\n    editor.selection(lassoHelper.end());\n  }\n}\n","import { Tool } from '../Tool';\nimport Editor from '../../Editor';\nimport LassoHelper from '../helper/lasso';\nimport { SelectMode } from './select.types';\nimport {\n  onSelectionEnd,\n  onSelectionLeave,\n  onSelectionMove,\n  onSelectionStart,\n} from './select.helpers';\n\nexport class SelectViewOnlyTool implements Tool {\n  private readonly lassoHelper: LassoHelper;\n  constructor(private readonly editor: Editor, private mode: SelectMode) {\n    this.lassoHelper = new LassoHelper(\n      this.mode === 'lasso' ? 0 : 1,\n      editor,\n      this.mode === 'fragment',\n    );\n  }\n\n  isSelectionRunning() {\n    return this.lassoHelper.running();\n  }\n\n  mousedown(event: PointerEvent) {\n    onSelectionStart(event, this.editor, this.lassoHelper);\n  }\n\n  mousemove(event: PointerEvent) {\n    onSelectionMove(event, this.editor, this.lassoHelper);\n  }\n\n  mouseup(event: PointerEvent) {\n    onSelectionEnd(event, this.editor, this.lassoHelper);\n  }\n\n  mouseleave() {\n    onSelectionLeave(this.editor, this.lassoHelper);\n  }\n}\n","import { Editor } from '../../Editor';\n\nconst isMacroMolecule = (editor: Editor, id: number): boolean => {\n  const struct = editor.struct();\n  return struct.isFunctionalGroupFromMacromolecule(id);\n};\n\n// dragCtx is actually \"any\" in the code\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst isMergingToMacroMolecule = (editor: Editor, dragCtx: any): boolean => {\n  const funcGroups = dragCtx?.mergeItems?.atomToFunctionalGroup;\n  if (!funcGroups?.size) {\n    return false;\n  }\n  const targetObjectId = funcGroups.entries().next().value[1];\n  return isMacroMolecule(editor, targetObjectId);\n};\n\nconst isBondingWithMacroMolecule = (editor: Editor, event: MouseEvent) => {\n  const ci = editor.findItem(event, ['bonds', 'functionalGroups']);\n  const struct = editor.struct();\n\n  return struct.isTargetFromMacromolecule(ci);\n};\n\nexport {\n  isBondingWithMacroMolecule,\n  isMacroMolecule,\n  isMergingToMacroMolecule,\n};\n","import {\n  FunctionalGroup,\n  SGroup,\n  fromSgroupDeletion,\n  fromFragmentDeletion,\n  ReStruct,\n  Action,\n} from 'ketcher-core';\n\nexport function deleteFunctionalGroups(\n  sGroupsId: number[],\n  struct: ReStruct,\n  action: Action,\n): number[] {\n  const deletedAtoms: number[] = [];\n  const functionalGroups = struct.molecule.functionalGroups;\n  const sgroups = struct.sgroups;\n  sGroupsId.forEach((sGroupId) => {\n    const sGroupItem = sgroups.get(sGroupId)?.item as SGroup;\n    if (\n      FunctionalGroup.isContractedFunctionalGroup(sGroupId, functionalGroups)\n    ) {\n      const sGroupAtoms = SGroup.getAtoms(struct.molecule, sGroupItem);\n      const { atomId: positionAtomId } = sGroupItem.getContractedPosition(\n        struct.molecule,\n      );\n      const atomsWithoutAttachmentPoint = sGroupAtoms.filter(\n        (atomId) => atomId !== positionAtomId,\n      );\n\n      deletedAtoms.push(...atomsWithoutAttachmentPoint);\n      action.mergeWith(fromSgroupDeletion(struct, sGroupId));\n      action.mergeWith(\n        fromFragmentDeletion(struct, {\n          atoms: atomsWithoutAttachmentPoint,\n          bonds: SGroup.getBonds(struct, sGroupItem),\n        }),\n      );\n    }\n  });\n  return deletedAtoms;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Action,\n  Atom,\n  Bond,\n  FunctionalGroup,\n  SGroup,\n  fromAtomAddition,\n  fromAtomsAttrs,\n  fromBondAddition,\n  fromFragmentDeletion,\n  fromSgroupDeletion,\n  ElementColor,\n  vectorUtils,\n  KetcherLogger,\n} from 'ketcher-core';\n\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\nimport { deleteFunctionalGroups } from './helper/deleteFunctionalGroups';\nimport { getGroupIdsFromItemArrays } from './helper/getGroupIdsFromItems';\n\nclass AtomTool implements Tool {\n  private readonly editor: Editor;\n  private readonly atomProps: any;\n  private dragCtx: any;\n  readonly #bondProps: { stereo: number; type: number };\n  isNotActiveTool: boolean | undefined;\n\n  constructor(editor, atomProps) {\n    this.editor = editor;\n    this.atomProps = atomProps;\n    this.#bondProps = { type: 1, stereo: Bond.PATTERN.STEREO.NONE };\n\n    const editorSelection = editor.selection();\n\n    if (editorSelection) {\n      if (editorSelection.atoms) {\n        const struct = editor.render.ctab;\n        const action = new Action();\n        const selectedSGroupsId =\n          editorSelection &&\n          getGroupIdsFromItemArrays(struct.molecule, editorSelection);\n        const sgroups = struct.molecule.functionalGroups;\n        const atomsInFunctionalGroup = editorSelection.atoms\n          .filter((atomId) => {\n            return !Atom.isSuperatomLeavingGroupAtom(struct.molecule, atomId);\n          })\n          .map((atom) => {\n            return FunctionalGroup.atomsInFunctionalGroup(sgroups, atom);\n          });\n        if (atomsInFunctionalGroup.some((atom) => atom !== null)) {\n          editor.event.removeFG.dispatch({ fgIds: [...selectedSGroupsId] });\n          this.editor.hoverIcon.hide();\n          this.isNotActiveTool = true;\n          return;\n        }\n\n        const deletedAtomsInSGroups = deleteFunctionalGroups(\n          selectedSGroupsId,\n          struct,\n          action,\n        );\n        const updatedAtoms = editorSelection?.atoms?.filter(\n          (selectAtomId) =>\n            !deletedAtomsInSGroups?.includes(selectAtomId) &&\n            struct.atoms.has(selectAtomId) &&\n            !Atom.isSuperatomLeavingGroupAtom(\n              this.editor.render.ctab.molecule,\n              selectAtomId,\n            ),\n        );\n        action.mergeWith(fromAtomsAttrs(struct, updatedAtoms, atomProps, true));\n        editor.update(action);\n        editor.selection(null);\n        this.editor.hoverIcon.hide();\n      }\n      this.isNotActiveTool = true;\n    } else {\n      this.editor.hoverIcon.show();\n      this.editor.hoverIcon.label = atomProps.label;\n      this.editor.hoverIcon.fill = ElementColor[atomProps.label] ?? '#000000';\n      this.editor.hoverIcon.updatePosition();\n    }\n  }\n\n  mousedown(event) {\n    const {\n      editor,\n      editor: {\n        render: {\n          ctab: {\n            molecule,\n            molecule: { functionalGroups },\n          },\n        },\n      },\n    } = this;\n\n    editor.hover(null);\n    editor.selection(null);\n\n    const eventMaps = ['atoms', 'functionalGroups'];\n    const ci = editor.findItem(event, eventMaps);\n    const struct = editor.struct();\n\n    if (struct.isTargetFromMacromolecule(ci)) {\n      return;\n    }\n\n    if (ci?.map === 'atoms') {\n      const atomId = ci.id;\n\n      const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n        functionalGroups,\n        atomId,\n      );\n\n      if (fgId !== null) {\n        editor.event.removeFG.dispatch({ fgIds: [fgId] });\n        return;\n      }\n    }\n\n    const ciFunctionalGroupName =\n      ci?.map === 'functionalGroups'\n        ? molecule.sgroups.get(ci?.id)?.data.name\n        : undefined;\n    const isSaltOrSolvent = ciFunctionalGroupName\n      ? SGroup.isSaltOrSolvent(ciFunctionalGroupName)\n      : false;\n\n    this.dragCtx = {\n      item: ci,\n      isSaltOrSolvent,\n    };\n  }\n\n  mousemove(event) {\n    const {\n      dragCtx,\n      atomProps,\n      editor,\n      editor: {\n        render: rnd,\n        render: {\n          ctab: reStruct,\n          ctab: { molecule },\n        },\n      },\n    } = this;\n\n    const eventMaps = ['atoms', 'functionalGroups'];\n    const ci = editor.findItem(event, eventMaps);\n    const struct = editor.struct();\n\n    if (struct.isTargetFromMacromolecule(ci)) {\n      return;\n    }\n\n    if (\n      !dragCtx?.item ||\n      dragCtx?.isSaltOrSolvent ||\n      (ci?.id !== undefined && ci.id === dragCtx.item.id)\n    ) {\n      editor.hoverIcon.show();\n      editor.hoverIcon.updatePosition();\n      editor.hover(editor.findItem(event, eventMaps), null, event);\n\n      if (dragCtx?.action) {\n        const action = dragCtx.action.perform(reStruct);\n\n        delete dragCtx.action;\n\n        editor.update(action, true);\n      }\n\n      return;\n    }\n\n    editor.hoverIcon.hide();\n\n    let atomId: number | undefined;\n    if (dragCtx.item.map === 'atoms') {\n      atomId = dragCtx.item.id;\n    } else if (dragCtx.item.map === 'functionalGroups') {\n      const sGroup = molecule.sgroups.get(dragCtx.item.id);\n      atomId = sGroup?.getAttachmentAtomId();\n    }\n\n    if (atomId !== undefined) {\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      const atom = molecule.atoms.get(atomId)!;\n      let angle = vectorUtils.calcAngle(atom.pp, rnd.page2obj(event));\n      if (!event.ctrlKey) angle = vectorUtils.fracAngle(angle, null);\n      const degrees = vectorUtils.degrees(angle);\n      editor.event.message.dispatch({ info: degrees + 'ยบ' });\n      const newAtomPos = vectorUtils.calcNewAtomPos(\n        atom.pp,\n        rnd.page2obj(event),\n        event.ctrlKey,\n      );\n\n      if (dragCtx.action) {\n        dragCtx.action.perform(reStruct);\n      }\n\n      dragCtx.action = fromBondAddition(\n        rnd.ctab,\n        this.#bondProps,\n        atomId,\n        Object.assign({}, atomProps),\n        undefined,\n        newAtomPos,\n      )[0];\n\n      editor.update(dragCtx.action, true);\n    }\n  }\n\n  mouseup(event) {\n    const {\n      dragCtx,\n      atomProps,\n      editor,\n      editor: {\n        render: rnd,\n        render: {\n          ctab: reStruct,\n          ctab: {\n            molecule,\n            molecule: { functionalGroups },\n          },\n        },\n      },\n    } = this;\n\n    const ci = editor.findItem(event, ['atoms', 'bonds', 'functionalGroups']);\n    const struct = editor.struct();\n    const action = new Action();\n\n    if (struct.isTargetFromMacromolecule(ci) || !dragCtx) {\n      return;\n    }\n\n    if ((!dragCtx.item || dragCtx?.isSaltOrSolvent) && !ci) {\n      action.mergeWith(\n        fromAtomAddition(reStruct, rnd.page2obj(event), atomProps),\n      );\n    } else if (dragCtx.item && ci) {\n      if (dragCtx.item.id === ci.id) {\n        if (\n          ci.map === 'functionalGroups' &&\n          FunctionalGroup.isContractedFunctionalGroup(ci.id, functionalGroups)\n        ) {\n          const sGroup = molecule.sgroups.get(ci.id) as SGroup;\n          const { atomId: sGroupPositionAtomId } =\n            sGroup.getContractedPosition(molecule);\n\n          if (sGroupPositionAtomId !== undefined) {\n            const atomsToDelete = [...SGroup.getAtoms(molecule, sGroup)].filter(\n              (atomId) => atomId !== sGroupPositionAtomId,\n            );\n            const bondsToDelete = [...SGroup.getBonds(molecule, sGroup)];\n            action.mergeWith(fromSgroupDeletion(reStruct, ci.id));\n            action.mergeWith(\n              fromFragmentDeletion(reStruct, {\n                atoms: atomsToDelete,\n                bonds: bondsToDelete,\n              }),\n            );\n            action.mergeWith(\n              fromAtomsAttrs(reStruct, sGroupPositionAtomId, atomProps, true),\n            );\n          }\n        } else if (ci.map === 'atoms') {\n          const atomId = ci.id;\n\n          const isAttachmentPointLabel = Atom.isSuperatomLeavingGroupAtom(\n            editor.render.ctab.molecule,\n            atomId,\n          );\n\n          if (\n            !isAttachmentPointLabel &&\n            dragCtx.action === undefined &&\n            FunctionalGroup.atomsInFunctionalGroup(\n              functionalGroups,\n              atomId,\n              true,\n            ) === null\n          ) {\n            action.mergeWith(fromAtomsAttrs(reStruct, atomId, atomProps, true));\n          }\n        }\n      }\n    }\n\n    editor.event.message.dispatch({\n      info: false,\n    });\n    editor.hover(\n      this.editor.findItem(event, ['atoms', 'functionalGroups']),\n      null,\n      event,\n    );\n\n    delete this.dragCtx;\n\n    editor.update(dragCtx.action ? action.mergeWith(dragCtx.action) : action);\n  }\n}\n\nexport function atomLongtapEvent(tool, render) {\n  const { dragCtx, editor } = tool;\n  const atomid = dragCtx.item?.id;\n  const fgs = render.ctab.molecule.functionalGroups;\n  // edit atom or add atom\n  const atom =\n    atomid !== undefined && atomid !== null\n      ? render.ctab.molecule.atoms.get(atomid)\n      : new Atom({ label: '' });\n  const fgId = FunctionalGroup.findFunctionalGroupByAtom(fgs, atomid);\n  // TODO: longtab event\n  dragCtx.timeout = setTimeout(() => {\n    delete tool.dragCtx;\n    if (fgId != null) {\n      editor.event.removeFG.dispatch({ fgIds: [fgId] });\n      return;\n    }\n    editor.selection(null);\n    const res = editor.event.quickEdit.dispatch(atom);\n    Promise.resolve(res)\n      .then((newatom) => {\n        const action = atomid\n          ? fromAtomsAttrs(render.ctab, atomid, newatom, null)\n          : fromAtomAddition(render.ctab, dragCtx.xy0, newatom);\n        editor.update(action);\n      })\n      .catch((e) => {\n        KetcherLogger.error('atom.ts::atomLongtapEvent', e);\n      }); // w/o changes\n  }, 750);\n\n  dragCtx.stopTapping = function () {\n    if (dragCtx.timeout) {\n      clearTimeout(dragCtx.timeout);\n      delete dragCtx.timeout;\n    }\n  };\n}\n\nexport default AtomTool;\n","import { Struct } from 'ketcher-core';\n\n/**\n * return only such elements ids that not part of collapsed group\n * Addition: if an atom in the contracted SGroup,\n * but is an AttachmentPoint -> will be returned as well.\n */\nexport function filterNotInContractedSGroup(\n  itemsToFilter: { atoms?: number[]; bonds?: number[] },\n  struct: Struct,\n) {\n  return {\n    atoms:\n      itemsToFilter.atoms?.filter((atomId) => {\n        const groupId = struct.getGroupIdFromAtomId(atomId);\n        if (isNotCollapsedSGroup(groupId, struct)) {\n          return true;\n        } else {\n          const sGroup = struct.sgroups.get(groupId as number);\n          return sGroup?.getAttachmentAtomId() === atomId;\n        }\n      }) ?? [],\n    bonds:\n      itemsToFilter.bonds?.filter((bondId) => {\n        const groupId = struct.getGroupIdFromBondId(bondId);\n        return isNotCollapsedSGroup(groupId, struct);\n      }) ?? [],\n  };\n}\n\nfunction isNotCollapsedSGroup(groupId: number | null, struct: Struct): boolean {\n  if (groupId === null) {\n    return true;\n  }\n  const sGroup = struct.sgroups.get(groupId);\n  if (!sGroup) {\n    throw new Error(\n      `sGroup with id = \"${groupId}\" must be defined, unexpected behaviour`,\n    );\n  }\n  return sGroup.checkAttr('expanded', true);\n}\n\nexport function filterNotPartOfSuperatomWithoutLabel(\n  itemsToFilter: { atoms?: number[]; bonds?: number[] },\n  struct: Struct,\n) {\n  return {\n    atoms:\n      itemsToFilter.atoms?.filter((atomId) => {\n        return !struct.getGroupFromAtomId(atomId)?.isSuperatomWithoutLabel;\n      }) ?? [],\n    bonds:\n      itemsToFilter.bonds?.filter((bondId) => {\n        return !struct.getGroupFromBondId(bondId)?.isSuperatomWithoutLabel;\n      }) ?? [],\n  };\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Pile,\n  SgContexts,\n  checkOverlapping,\n  fromSeveralSgroupAddition,\n  fromSgroupAction,\n  fromSgroupDeletion,\n  FunctionalGroup,\n  SGroup,\n  Pool,\n  expandSGroupWithMultipleAttachmentPoint,\n  KetcherLogger,\n} from 'ketcher-core';\n\nimport LassoHelper from './helper/lasso';\nimport { isEqual } from 'lodash/fp';\nimport { selMerge } from './select';\nimport Editor, { Selection } from '../Editor';\nimport { Tool } from './Tool';\nimport { filterNotPartOfSuperatomWithoutLabel } from './helper/filterNotInCollapsedSGroup';\n\nconst searchMaps = [\n  'atoms',\n  'bonds',\n  'sgroups',\n  'functionalGroups',\n  'sgroupData',\n];\n\nclass SGroupTool implements Tool {\n  private readonly editor: Editor;\n  private readonly lassoHelper: any;\n  isNotActiveTool: boolean | undefined;\n\n  constructor(editor) {\n    this.editor = editor;\n    this.lassoHelper = new LassoHelper(1, editor, null);\n\n    this.checkSelection();\n  }\n\n  checkSelection() {\n    let selection = this.editor.selection() || {};\n    const struct = this.editor.render.ctab;\n    const molecule = struct.molecule;\n    const filteredAtomsAndBonds = filterNotPartOfSuperatomWithoutLabel(\n      { atoms: selection.atoms, bonds: selection.bonds },\n      molecule,\n    );\n\n    selection = {\n      ...selection,\n      atoms: filteredAtomsAndBonds.atoms,\n      bonds: filteredAtomsAndBonds.bonds,\n    };\n\n    selection = this.editor.selection(selection) || {};\n    this.editor.rotateController.rerender();\n    this.editor.update(true);\n\n    if (selection.atoms && selection.bonds) {\n      const selectedAtoms = this.editor.selection()?.atoms;\n\n      const sgroups: Pool<SGroup> = molecule.sgroups;\n      const newSelected: { atoms: Array<any>; bonds: Array<any> } = {\n        atoms: [],\n        bonds: [],\n      };\n      let actualSgroupId;\n      let atomsResult: Array<number> = [];\n      let extraAtoms;\n      const functionalGroups = molecule.functionalGroups;\n      const result: Array<number> = [];\n\n      const id = sgroups.find((_, sgroup) =>\n        isEqual(sgroup.atoms, selectedAtoms),\n      );\n\n      if (selectedAtoms && functionalGroups.size) {\n        for (const atom of selectedAtoms) {\n          const atomId = FunctionalGroup.atomsInFunctionalGroup(\n            functionalGroups,\n            atom,\n          );\n\n          if (atomId == null) {\n            extraAtoms = true;\n          }\n\n          const atomFromStruct = atomId !== null && struct.atoms.get(atomId)?.a;\n\n          if (atomFromStruct) {\n            for (const sgId of atomFromStruct.sgs.values()) {\n              actualSgroupId = sgId;\n            }\n          }\n\n          if (\n            atomFromStruct &&\n            (FunctionalGroup.isAtomInContractedFunctionalGroup(\n              atomFromStruct,\n              sgroups,\n              functionalGroups,\n              false,\n            ) ||\n              SGroup.isAtomInContractedSGroup(atomFromStruct, sgroups))\n          ) {\n            const sgroupAtoms =\n              actualSgroupId !== undefined &&\n              SGroup.getAtoms(molecule, sgroups.get(actualSgroupId));\n            const sgroupBonds =\n              actualSgroupId !== undefined &&\n              SGroup.getBonds(molecule, sgroups.get(actualSgroupId));\n            atom === sgroupAtoms[0] &&\n              newSelected.atoms.push(...(sgroupAtoms as Array<any>)) &&\n              newSelected.bonds.push(...(sgroupBonds as Array<any>));\n          }\n\n          if (atomFromStruct) {\n            atomsResult.push(atomId);\n          }\n        }\n      }\n\n      if (extraAtoms) {\n        atomsResult = [];\n      }\n\n      if (atomsResult && atomsResult.length > 0) {\n        for (const id of atomsResult) {\n          const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n            functionalGroups,\n            id,\n          );\n\n          if (fgId !== null && !result.includes(fgId)) {\n            result.push(fgId);\n          }\n        }\n      }\n\n      if (result.length) {\n        this.editor.selection(null);\n        this.editor.event.removeFG.dispatch({ fgIds: result });\n        return;\n      }\n\n      SGroupTool.sgroupDialog(this.editor, id);\n      this.isNotActiveTool = true;\n    }\n  }\n\n  mousedown(event) {\n    const ci = this.editor.findItem(event, searchMaps);\n    const struct = this.editor.render.ctab;\n    const sgroups = struct.sgroups;\n    const molecule = struct.molecule;\n    const functionalGroups = molecule.functionalGroups;\n    const atomResult: Array<number> = [];\n    const bondResult: Array<number> = [];\n    const result: Array<number> = [];\n\n    if (ci && functionalGroups.size && ci.map === 'atoms') {\n      const atomId = FunctionalGroup.atomsInFunctionalGroup(\n        functionalGroups,\n        ci.id,\n      );\n      const atomFromStruct = atomId !== null && struct.atoms.get(atomId)?.a;\n\n      if (\n        atomFromStruct &&\n        !(\n          FunctionalGroup.isAtomInContractedFunctionalGroup(\n            atomFromStruct,\n            sgroups,\n            functionalGroups,\n            true,\n          ) || SGroup.isAtomInContractedSGroup(atomFromStruct, sgroups)\n        )\n      ) {\n        atomResult.push(atomId);\n      }\n    }\n\n    if (ci && functionalGroups.size && ci.map === 'bonds') {\n      const bondId = FunctionalGroup.bondsInFunctionalGroup(\n        molecule,\n        functionalGroups,\n        ci.id,\n      );\n      const bondFromStruct = bondId !== null && struct.bonds.get(bondId)?.b;\n\n      if (\n        bondFromStruct &&\n        !(\n          FunctionalGroup.isBondInContractedFunctionalGroup(\n            bondFromStruct,\n            sgroups,\n            functionalGroups,\n          ) || SGroup.isBondInContractedSGroup(bondFromStruct, sgroups)\n        )\n      ) {\n        bondResult.push(bondId);\n      }\n    }\n\n    if (ci && functionalGroups.size && ci.map === 'functionalGroups') {\n      const sgroup = sgroups.get(ci.id);\n\n      if (FunctionalGroup.isFunctionalGroup(sgroup?.item)) {\n        this.editor.event.removeFG.dispatch({ fgIds: [ci.id] });\n        return;\n      }\n    }\n\n    if (atomResult.length > 0) {\n      for (const id of atomResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      if (result.length > 0) {\n        this.editor.event.removeFG.dispatch({ fgIds: result });\n        return;\n      }\n    } else if (bondResult.length > 0) {\n      for (const id of bondResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByBond(\n          molecule,\n          functionalGroups,\n          id,\n        );\n\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n\n      this.editor.event.removeFG.dispatch({ fgIds: result });\n      return;\n    }\n\n    if (!ci) {\n      //  ci.type == 'Canvas'\n      this.lassoHelper.begin(event);\n    }\n  }\n\n  mousemove(event) {\n    if (this.lassoHelper.running(event)) {\n      this.editor.selection(this.lassoHelper.addPoint(event));\n    } else {\n      this.editor.hover(this.editor.findItem(event, searchMaps), null, event);\n    }\n  }\n\n  mouseleave(event) {\n    if (this.lassoHelper.running(event)) {\n      this.lassoHelper.end(event);\n    }\n  }\n\n  mouseup(event) {\n    const struct = this.editor.render.ctab;\n    const sgroups = struct.sgroups;\n    const molecule = struct.molecule;\n    const functionalGroups = molecule.functionalGroups;\n    const ci = this.editor.findItem(event, searchMaps);\n    const selected = this.editor.selection();\n    const newSelected: Record<string, Array<any>> = { atoms: [], bonds: [] };\n    let actualSgroupId;\n    let atomsResult: Array<number> | null = [];\n    let extraAtoms;\n    let bondsResult: Array<number> | null = [];\n    let extraBonds;\n    const result: Array<number> = [];\n    if (\n      ci &&\n      ci.map === 'functionalGroups' &&\n      functionalGroups.size &&\n      FunctionalGroup.isContractedFunctionalGroup(ci.id, functionalGroups)\n    )\n      return;\n\n    if (selected && functionalGroups.size && selected.atoms) {\n      for (const atom of selected.atoms) {\n        const atomId = FunctionalGroup.atomsInFunctionalGroup(\n          functionalGroups,\n          atom,\n        );\n\n        if (atomId == null) {\n          extraAtoms = true;\n        }\n\n        const atomFromStruct = atomId !== null && struct.atoms.get(atomId)?.a;\n\n        if (atomFromStruct) {\n          for (const sgId of atomFromStruct.sgs.values()) {\n            actualSgroupId = sgId;\n          }\n        }\n\n        if (\n          atomFromStruct &&\n          (FunctionalGroup.isAtomInContractedFunctionalGroup(\n            atomFromStruct,\n            sgroups,\n            functionalGroups,\n            true,\n          ) ||\n            SGroup.isAtomInContractedSGroup(atomFromStruct, sgroups))\n        ) {\n          const sgroupAtoms =\n            actualSgroupId !== undefined &&\n            SGroup.getAtoms(molecule, struct.sgroups.get(actualSgroupId)?.item);\n          const sgroupBonds =\n            actualSgroupId !== undefined &&\n            SGroup.getBonds(molecule, struct.sgroups.get(actualSgroupId)?.item);\n          atom === sgroupAtoms[0] &&\n            newSelected.atoms.push(...(sgroupAtoms as Array<any>)) &&\n            newSelected.bonds.push(...(sgroupBonds as Array<any>));\n        }\n\n        if (atomFromStruct) {\n          atomsResult.push(atomId);\n        }\n      }\n    }\n\n    if (selected && functionalGroups.size && selected.bonds) {\n      for (const bond of selected.bonds) {\n        const bondId = FunctionalGroup.bondsInFunctionalGroup(\n          molecule,\n          functionalGroups,\n          bond,\n        );\n\n        if (bondId === null) {\n          extraBonds = true;\n        }\n\n        const bondFromStruct = bondId !== null && struct.bonds.get(bondId)?.b;\n        if (bondFromStruct) {\n          bondsResult.push(bondId);\n        }\n      }\n    }\n\n    if (atomsResult.length) {\n      atomsResult.forEach((id) => {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n\n        if (fgId === null) {\n          return;\n        }\n\n        const sgroupAtoms = SGroup.getAtoms(\n          molecule,\n          struct.sgroups.get(fgId)?.item,\n        );\n        newSelected.atoms.push(...sgroupAtoms);\n      });\n    }\n\n    if (bondsResult.length) {\n      bondsResult.forEach((id) => {\n        const fgId = FunctionalGroup.findFunctionalGroupByBond(\n          molecule,\n          functionalGroups,\n          id,\n        );\n\n        if (fgId === null) {\n          return;\n        }\n\n        const sgroupBonds = SGroup.getBonds(\n          molecule,\n          struct.sgroups.get(fgId)?.item,\n        );\n        newSelected.bonds.push(...sgroupBonds);\n      });\n    }\n\n    if (extraAtoms || extraBonds) {\n      atomsResult = null;\n      bondsResult = null;\n    }\n\n    if (atomsResult && atomsResult.length > 0) {\n      for (const id of atomsResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n    }\n\n    if (bondsResult && bondsResult.length > 0) {\n      for (const id of bondsResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByBond(\n          molecule,\n          functionalGroups,\n          id,\n        );\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n    }\n\n    if (result.length === 1) {\n      this.editor.selection(null);\n      this.lassoHelper.cancel();\n      this.editor.event.removeFG.dispatch({ fgIds: result });\n      return;\n    }\n\n    let id: number | null = null; // id of an existing group, if we're editing one\n    let selection: any = null; // atoms to include in a newly created group\n\n    if (this.lassoHelper.running(event)) {\n      // TODO it catches more events than needed, to be re-factored\n      selection =\n        newSelected.atoms.length > 0\n          ? selMerge(this.lassoHelper.end(event), newSelected, false)\n          : this.lassoHelper.end(event);\n\n      const filteredAtomsAndBonds = filterNotPartOfSuperatomWithoutLabel(\n        { atoms: selection.atoms, bonds: selection.bonds },\n        molecule,\n      );\n\n      selection = {\n        ...selection,\n        atoms: filteredAtomsAndBonds.atoms,\n        bonds: filteredAtomsAndBonds.bonds,\n      };\n\n      this.editor.selection(selection);\n    } else {\n      if (!ci) {\n        // ci.type == 'Canvas'\n        return;\n      }\n\n      this.editor.hover(this.editor.findItem(event, searchMaps), null, event);\n      if (ci.map === 'atoms') {\n        // if we click the SGroup tool on a single atom or bond, make a group out of those\n        selection = { atoms: [ci.id] };\n      } else if (ci.map === 'bonds') {\n        const bond = this.editor.render.ctab.bonds.get(ci.id);\n        selection = {\n          atoms: [bond?.b.begin, bond?.b.end],\n          bonds: [ci.id],\n        };\n      } else if (ci.map === 'sgroups' || ci.map === 'sgroupData') {\n        id = ci.id;\n      } else {\n        return;\n      }\n    }\n\n    const isAtomsOrBondsSelected =\n      selection?.atoms?.length || selection?.bonds?.length;\n    // TODO: handle click on an existing group?\n    if (id !== null || isAtomsOrBondsSelected) {\n      this.editor.selection(selection);\n      SGroupTool.sgroupDialog(this.editor, id);\n    }\n  }\n\n  cancel() {\n    if (this.lassoHelper.running()) {\n      this.lassoHelper.end();\n    }\n    this.editor.selection(null);\n  }\n\n  static sgroupDialog(editor: Editor, id: number | null) {\n    const restruct = editor.render.ctab;\n    const struct = restruct.molecule;\n    const selection = editor.selection() || {};\n    const sg = id !== null ? struct.sgroups.get(id) : null;\n\n    let attrs;\n    if (sg) {\n      attrs = sg.getAttrs();\n      if (!attrs.context)\n        attrs.context = getContextBySgroup(restruct, sg.atoms);\n    } else {\n      attrs = {\n        context: getContextBySelection(restruct, selection),\n      };\n    }\n\n    const res = editor.event.sgroupEdit.dispatch({\n      type: sg?.type,\n      attrs,\n    });\n\n    Promise.resolve(res)\n      .then((newSg) => {\n        // TODO: check before signal\n        const isQuerySGroup = SGroup.isQuerySGroup(newSg);\n        const isDataSGroup = SGroup.isDataSGroup(newSg);\n        if (\n          !isDataSGroup && // when data s-group separates\n          !isQuerySGroup &&\n          checkOverlapping(struct, selection.atoms, 'common')\n        ) {\n          editor.event.message.dispatch({\n            error: 'Partial S-group overlapping is not allowed.',\n          });\n        } else {\n          if (\n            !sg &&\n            !isDataSGroup &&\n            !isQuerySGroup &&\n            (!selection.atoms || selection.atoms.length === 0)\n          ) {\n            return;\n          }\n\n          const isDataSg =\n            sg &&\n            sg.getAttrs().context === newSg.attrs.context &&\n            !isQuerySGroup;\n\n          if (isDataSg) {\n            const action = fromSeveralSgroupAddition(\n              restruct,\n              newSg.type,\n              sg.atoms,\n              newSg.attrs,\n            ).mergeWith(fromSgroupDeletion(restruct, id));\n\n            action.mergeWith(expandSGroupWithMultipleAttachmentPoint(restruct));\n\n            editor.update(action);\n            editor.selection(selection);\n            return;\n          }\n          const result = isQuerySGroup\n            ? createQueryComponentSGroup(id, editor, newSg, selection, sg)\n            : fromContextType(id, editor, newSg, selection);\n\n          result && editor.update(result.action);\n          editor.selection(null);\n\n          const newStruct = editor.struct().clone();\n          newStruct.setImplicitHydrogen();\n          editor.struct(newStruct);\n        }\n      })\n      .catch((e) => {\n        KetcherLogger.error('sgroup.ts::SGroupTool::sgroupDialog', e);\n      });\n  }\n}\n\nfunction createQueryComponentSGroup(\n  id: number | null,\n  editor: Editor,\n  newSg,\n  selection: Selection,\n  sg: SGroup | null | undefined,\n) {\n  const struct = editor.render.ctab.molecule;\n  if (!selection.atoms && sg) {\n    if (!sg.atoms) {\n      editor.errorHandler?.('Cannot convert to a query component');\n      return;\n    }\n    selection = { atoms: sg.atoms || [] };\n  }\n  if (checkOverlapping(struct, selection.atoms, 'queryComponent')) {\n    editor.errorHandler?.(\n      'Cannot create a query component: one fragment can only be part of one query component',\n    );\n  } else {\n    return fromContextType(id, editor, newSg, selection);\n  }\n}\n\nfunction getContextBySgroup(restruct, sgAtoms) {\n  const struct = restruct.molecule;\n\n  if (sgAtoms.length === 1) {\n    return SgContexts.Atom;\n  }\n\n  if (manyComponentsSelected(restruct, sgAtoms)) {\n    return SgContexts.Multifragment;\n  }\n\n  if (singleComponentSelected(restruct, sgAtoms)) {\n    return SgContexts.Fragment;\n  }\n\n  const atomSet = new Pile(sgAtoms);\n\n  const sgBonds = Array.from(struct.bonds.values()).filter(\n    (bond: any) => atomSet.has(bond.begin) && atomSet.has(bond.end),\n  );\n\n  return anyChainedBonds(sgBonds) ? SgContexts.Group : SgContexts.Bond;\n}\n\nfunction getContextBySelection(restruct, selection) {\n  const struct = restruct.molecule;\n\n  if (selection.atoms && !selection.bonds) {\n    return SgContexts.Atom;\n  }\n\n  const bonds = selection.bonds.map((bondid) => struct.bonds.get(bondid));\n\n  if (!anyChainedBonds(bonds)) {\n    return SgContexts.Bond;\n  }\n\n  selection.atoms = selection.atoms || [];\n\n  const atomSet = new Pile(selection.atoms);\n  const allBondsSelected = bonds.every(\n    (bond) => atomSet.has(bond.begin) && atomSet.has(bond.end),\n  );\n\n  if (singleComponentSelected(restruct, selection.atoms) && allBondsSelected) {\n    return SgContexts.Fragment;\n  }\n\n  return manyComponentsSelected(restruct, selection.atoms)\n    ? SgContexts.Multifragment\n    : SgContexts.Group;\n}\n\nfunction fromContextType(id, editor, newSg, currSelection) {\n  const restruct = editor.render.ctab;\n  const sg = restruct.molecule.sgroups.get(id);\n  const sourceAtoms = (sg && sg.atoms) || currSelection.atoms || [];\n  const context = newSg.attrs.context;\n\n  if (newSg.type === SGroup.TYPES.SUP) {\n    newSg.attrs.expanded = true;\n  }\n\n  const result = fromSgroupAction(\n    context,\n    restruct,\n    newSg,\n    sourceAtoms,\n    currSelection,\n  );\n\n  result.selection = result.selection || currSelection;\n\n  if (id !== null && id !== undefined) {\n    result.action = result.action.mergeWith(fromSgroupDeletion(restruct, id));\n  }\n\n  editor.selection(result.selection);\n\n  return result;\n}\n\nfunction anyChainedBonds(bonds) {\n  if (bonds.length === 0) {\n    return true;\n  }\n\n  for (let i = 0; i < bonds.length; ++i) {\n    const fixedBond = bonds[i];\n    for (let j = 0; j < bonds.length; ++j) {\n      if (i === j) continue;\n\n      const bond = bonds[j];\n\n      if (fixedBond.end === bond.begin || fixedBond.end === bond.end) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction singleComponentSelected(restruct, atoms) {\n  return countOfSelectedComponents(restruct, atoms) === 1;\n}\n\nfunction manyComponentsSelected(restruct, atoms) {\n  return countOfSelectedComponents(restruct, atoms) > 1;\n}\n\nfunction countOfSelectedComponents(restruct, atoms): any {\n  const atomSet = new Pile(atoms);\n\n  return Array.from(restruct.connectedComponents.values()).reduce(\n    (acc: number, component) =>\n      acc + (atomSet.isSuperset(component as Pile) ? 1 : 0),\n    0,\n  );\n}\n\nexport default SGroupTool;\n","import {\n  Action,\n  fromFragmentDeletion,\n  fromItemsFuse,\n  fromSgroupDeletion,\n  ReStruct,\n  setExpandSGroup,\n  SGroup,\n  ReBond,\n} from 'ketcher-core';\nimport Editor from '../../Editor';\nimport { getGroupIdsFromItemMaps } from './getGroupIdsFromItems';\n\ntype MergeItems = {\n  atoms: Map<number, number>;\n  bonds: Map<number, number>;\n  atomToFunctionalGroup?: Map<number, number>;\n};\n\nexport function dropAndMerge(\n  editor: Editor,\n  mergeItems: any,\n  action?: Action,\n  copyAction?: Action,\n): Action {\n  const restruct = editor.render.ctab;\n  const isMerging = !!mergeItems;\n  let dropItemAction = copyAction || new Action();\n\n  if (isMerging) {\n    const expandGroupsAction = getExpandGroupsInMergeAction(\n      editor.render.ctab,\n      mergeItems,\n    );\n    dropItemAction = dropItemAction.mergeWith(expandGroupsAction);\n    if (mergeItems.atomToFunctionalGroup) {\n      const [newMergeItems, extractAttachmentAtomAction] =\n        extractAttachmentAtom(mergeItems, editor);\n      mergeItems = newMergeItems;\n      dropItemAction = dropItemAction.mergeWith(extractAttachmentAtomAction);\n    }\n    dropItemAction = fromItemsFuse(restruct, mergeItems).mergeWith(\n      dropItemAction,\n    );\n  }\n\n  if (action) {\n    dropItemAction = dropItemAction.mergeWith(action);\n  }\n\n  const bonds = editor.selection()?.bonds ?? [];\n  for (const bondId of bonds) {\n    const rebond = restruct.bonds.get(bondId);\n    if (rebond) {\n      ReBond.bondRecalc(rebond, restruct, editor.options());\n    }\n  }\n\n  editor.hover(null);\n  if (isMerging) editor.selection(null);\n\n  if (dropItemAction?.operations.length > 0) {\n    editor.update(dropItemAction, false);\n  }\n\n  return dropItemAction;\n}\n\nfunction getExpandGroupsInMergeAction(\n  restruct: ReStruct,\n  mergeItems: MergeItems,\n): Action {\n  const action = new Action();\n  const groupsInMerge = getGroupIdsFromItemMaps(restruct.molecule, mergeItems);\n  if (groupsInMerge.length) {\n    groupsInMerge.forEach((groupId) => {\n      action.mergeWith(setExpandSGroup(restruct, groupId, { expanded: true }));\n    });\n  }\n\n  return action;\n}\n\n/**\n * @example\n * const mergeItems = {\n *   atomToFunctionalGroup: { 3 => 1 } // Drag atom-3 and drop on functional-group-1\n * }\n * // Given functional-group-1's attachment atom is atom-0\n * const [\n *   newMergeItems, // { atoms: { 3 => 0 } }\n *   action // action to remove non-attachment atoms and that S-Group\n * ] = extractAttachmentAtom(mergeItems)\n */\nfunction extractAttachmentAtom(mergeItems: MergeItems, editor: Editor) {\n  const struct = editor.struct();\n  const reStruct = editor.render.ctab;\n\n  const newMergeItems = {\n    atoms: new Map(mergeItems.atoms),\n    bonds: new Map(mergeItems.bonds),\n  };\n\n  const action = new Action();\n\n  mergeItems.atomToFunctionalGroup?.forEach((functionalGroupId, srcAtomId) => {\n    const sGroup = struct.sgroups.get(functionalGroupId) as SGroup;\n\n    const { atomId: positionAtomId } = sGroup.getContractedPosition(\n      reStruct.molecule,\n    );\n\n    if (positionAtomId !== undefined) {\n      const atomsToDelete = [...SGroup.getAtoms(struct, sGroup)].filter(\n        (atomId) => atomId !== positionAtomId,\n      );\n      const bondsToDelete = [...SGroup.getBonds(struct, sGroup)];\n      action.mergeWith(fromSgroupDeletion(reStruct, functionalGroupId));\n      action.mergeWith(\n        fromFragmentDeletion(reStruct, {\n          atoms: atomsToDelete,\n          bonds: bondsToDelete,\n        }),\n      );\n      newMergeItems.atoms.set(srcAtomId, positionAtomId);\n    }\n  });\n\n  return [newMergeItems, action] as const;\n}\n","function castAtomPropToType(property, value) {\n  const typesMapping = {\n    exactChangeFlag: Number,\n    unsaturatedAtom: Number,\n  };\n  if (typesMapping[property]) {\n    return typesMapping[property](value);\n  }\n  return value;\n}\n\nexport function updateOnlyChangedProperties(\n  unchangedElement,\n  userChangedElement,\n) {\n  const updatedKeys = Object.getOwnPropertyNames(userChangedElement).filter(\n    (key) => userChangedElement[key] !== '',\n  );\n  return Object.getOwnPropertyNames(unchangedElement).reduce(\n    (updatedElement, key) => {\n      updatedElement[key] = updatedKeys.includes(key)\n        ? castAtomPropToType(key, userChangedElement[key])\n        : unchangedElement[key];\n      return updatedElement;\n    },\n    {},\n  );\n}\n","import {\n  Action,\n  Atom,\n  AtomPropertiesInContextMenu,\n  AtomQueryProperties,\n  fromAtomsAttrs,\n  KetcherLogger,\n} from 'ketcher-core';\nimport { updateOnlyChangedProperties } from './utils';\n\nexport function isAtomsArray(selectedElements: Atom | Atom[]): boolean {\n  return (\n    Array.isArray(selectedElements) &&\n    selectedElements?.every((element) => element instanceof Atom)\n  );\n}\n\nexport function updateSelectedAtoms({\n  atoms,\n  changeAtomPromise,\n  editor,\n}: {\n  atoms: number[];\n  editor;\n  changeAtomPromise:\n    | Promise<Atom>\n    | PromiseLike<AtomPropertiesInContextMenu | AtomQueryProperties>;\n}) {\n  const action = new Action();\n  const struct = editor.render.ctab;\n  const { molecule } = struct;\n  if (atoms) {\n    Promise.resolve(changeAtomPromise)\n      .then((userChangedAtom) => {\n        // TODO: deep compare to not produce dummy, e.g.\n        // atom.label != attrs.label || !atom.atomList.equals(attrs.atomList)\n        atoms.forEach((atomId) => {\n          const unchangedAtom = molecule.atoms.get(atomId);\n          const atomWithChangedProperties = updateOnlyChangedProperties(\n            unchangedAtom,\n            userChangedAtom,\n          );\n          action.mergeWith(\n            fromAtomsAttrs(struct, atomId, atomWithChangedProperties, false),\n          );\n        });\n        editor.update(action);\n      })\n      .catch((e) => {\n        KetcherLogger.error('atoms.ts::updateSelectedAtoms', e);\n      });\n  }\n}\n","import { Action, Bond, fromBondsAttrs, KetcherLogger } from 'ketcher-core';\nimport { updateOnlyChangedProperties } from './utils';\n\nexport function updateSelectedBonds({\n  bonds,\n  changeBondPromise,\n  editor,\n}: {\n  bonds: number[];\n  changeBondPromise: Promise<Bond>;\n  editor;\n}) {\n  const action = new Action();\n  const struct = editor.render.ctab;\n  const { molecule } = struct;\n  if (bonds) {\n    Promise.resolve(changeBondPromise)\n      .then((userChangedBond) => {\n        bonds.forEach((bondId) => {\n          const unchangedBond = molecule.bonds.get(bondId);\n          const bondWithChangedProperties = updateOnlyChangedProperties(\n            unchangedBond,\n            userChangedBond,\n          );\n          action.mergeWith(\n            fromBondsAttrs(\n              struct,\n              bondId,\n              bondWithChangedProperties as Bond,\n              false,\n            ),\n          );\n        });\n        editor.update(action);\n      })\n      .catch((e) => {\n        KetcherLogger.error('bonds.ts::updateSelectedBonds', e);\n      });\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { OperationType } from 'ketcher-core';\n\ntype Position = {\n  x: number;\n  y: number;\n};\n\ntype ArrowPosition = [Position, Position];\n\ntype Data = {\n  operation: any;\n  id?: number;\n  label?: string;\n  position?: Position | ArrowPosition;\n  attribute?: any;\n  from?: any;\n  to?: any;\n  atomId?: any;\n  fragId?: any;\n  sGroupId?: any;\n  type?: any;\n  mode?: any;\n};\n\nexport function customOnChangeHandler(action, handler) {\n  const data: Data[] = [];\n  if (action === undefined) {\n    return handler();\n  } else {\n    if (window.isPolymerEditorTurnedOn) {\n      return handleMacroChanges(handler);\n    } else {\n      return handleMicroChanges(action, handler);\n    }\n  }\n\n  function handleMacroChanges(handler) {\n    return handler();\n  }\n\n  function handleMicroChanges(action, handler) {\n    action.operations.reverse().forEach((operation) => {\n      const op = operation._inverted;\n      switch (op.type) {\n        case OperationType.ATOM_ADD:\n        case OperationType.ATOM_DELETE:\n          data.push({\n            operation: op.type,\n            id: op.data.aid,\n            label: op.data.atom.label ? op.data.atom.label : '',\n            position: {\n              x: +op.data.pos.x.toFixed(2),\n              y: +op.data.pos.y.toFixed(2),\n            },\n          });\n          break;\n\n        case OperationType.ATOM_ATTR:\n          data.push({\n            operation: operation.type,\n            id: operation.data.aid,\n            attribute: operation.data.attribute,\n            from: operation.data.value,\n            to: operation.data2.value,\n          });\n          break;\n\n        case OperationType.ATOM_MOVE:\n          data.push({\n            operation: op.type,\n            id: op.data.aid,\n            position: {\n              x: +op.data.d.x.toFixed(2),\n              y: +op.data.d.y.toFixed(2),\n            },\n          });\n          break;\n\n        case OperationType.BOND_ADD:\n        case OperationType.BOND_DELETE:\n          data.push({\n            operation: op.type,\n            id: op.data.bid,\n          });\n          break;\n\n        case OperationType.FRAGMENT_ADD:\n        case OperationType.FRAGMENT_DELETE:\n          data.push({\n            operation: op.type,\n            id: op.frid,\n          });\n          break;\n\n        case OperationType.FRAGMENT_ADD_STEREO_ATOM:\n        case OperationType.FRAGMENT_DELETE_STEREO_ATOM:\n          data.push({\n            operation: op.type,\n            atomId: op.data.aid,\n            fragId: op.data.frid,\n          });\n          break;\n\n        case OperationType.S_GROUP_ATOM_ADD:\n        case OperationType.S_GROUP_ATOM_REMOVE:\n          data.push({\n            operation: op.type,\n            atomId: op.data.aid,\n            sGroupId: op.data.sgid,\n          });\n          break;\n\n        case OperationType.S_GROUP_CREATE:\n        case OperationType.S_GROUP_DELETE:\n          data.push({\n            operation: op.type,\n            type: op.data.type,\n            sGroupId: op.data.sgid,\n          });\n          break;\n\n        case OperationType.RXN_ARROW_ADD:\n        case OperationType.RXN_ARROW_DELETE:\n          data.push({\n            operation: op.type,\n            id: op.data.id,\n            mode: op.data.mode,\n            position: op.data.pos.map((pos) => ({\n              x: +pos.x.toFixed(2),\n              y: +pos.y.toFixed(2),\n            })),\n          });\n          break;\n\n        case OperationType.RXN_ARROW_RESIZE:\n          data.push({\n            operation: op.type,\n            id: op.data.id,\n          });\n          break;\n\n        case OperationType.RXN_ARROW_MOVE:\n          data.push({\n            operation: op.type,\n            id: op.data.id,\n            position: {\n              x: +op.data.d.x.toFixed(2),\n              y: +op.data.d.y.toFixed(2),\n            },\n          });\n          break;\n\n        case OperationType.R_GROUP_FRAGMENT:\n          data.push({\n            operation: operation.type,\n            id: op.frid,\n          });\n          break;\n\n        case OperationType.SIMPLE_OBJECT_ADD:\n        case OperationType.SIMPLE_OBJECT_DELETE:\n          data.push({\n            operation: op.type,\n            id: op.data.id,\n            mode: op.data.mode,\n          });\n          break;\n\n        case OperationType.SIMPLE_OBJECT_RESIZE:\n          data.push({\n            operation: op.type,\n            id: op.data.id,\n          });\n          break;\n\n        case OperationType.SIMPLE_OBJECT_MOVE:\n          data.push({\n            operation: operation.type,\n            id: operation.data.id,\n            position: {\n              x: +operation.data.d.x.toFixed(2),\n              y: +operation.data.d.y.toFixed(2),\n            },\n          });\n          break;\n\n        default:\n          data.push({\n            operation: op.type,\n          });\n      }\n    });\n\n    return handler(data);\n  }\n}\n","import { ReStruct, Vec2 } from 'ketcher-core';\n\nexport function getSelectionMap(structure: ReStruct) {\n  return Object.keys(ReStruct.maps).reduce((result, map) => {\n    result[map] = Array.from(structure[map].keys());\n    return result;\n  }, {});\n}\n\nexport function getStructCenter(reStruct: ReStruct, selection?) {\n  const bb = reStruct.getVBoxObj(selection || {});\n  return Vec2.lc2(bb.p0, 0.5, bb.p1, 0.5);\n}\n","export const handleMovingPosibilityCursor = (\n  item: unknown,\n  canvas: SVGElement,\n  cursor: string,\n) => {\n  const isCursorShown = canvas.getAttribute('cursor');\n  if (!item && isCursorShown) {\n    canvas.removeAttribute('cursor');\n  }\n  // Previously this code had condition on 'isCursorShown' which prevented different cursor for the same item\n  if (item) {\n    canvas.setAttribute('cursor', cursor);\n  }\n};\n","import { ClosestItemWithMap } from '../shared/closest.types';\nimport {\n  IMAGE_KEY,\n  imageReferencePositionToCursor,\n  MULTITAIL_ARROW_KEY,\n  multitailArrowReferenceLinesToCursor,\n  multitailReferencePositionToCursor,\n  ImageReferencePositionInfo,\n  MultitailArrowReferencePosition,\n  Render,\n} from 'ketcher-core';\n\nexport function getItemCursor(\n  render: Render,\n  item?: ClosestItemWithMap | null,\n): string {\n  const defaultCursor = render.options.movingStyle.cursor as string;\n  if (!item) {\n    return defaultCursor;\n  }\n  switch (item.map) {\n    case MULTITAIL_ARROW_KEY: {\n      const closestItem = (\n        item as ClosestItemWithMap<MultitailArrowReferencePosition>\n      ).ref;\n      if (!closestItem) {\n        return defaultCursor;\n      }\n      return closestItem.isLine\n        ? multitailArrowReferenceLinesToCursor[closestItem.name]\n        : multitailReferencePositionToCursor[closestItem.name];\n    }\n    case IMAGE_KEY: {\n      const closestItem = (\n        item as ClosestItemWithMap<ImageReferencePositionInfo>\n      ).ref;\n      return closestItem\n        ? imageReferencePositionToCursor[closestItem.name]\n        : defaultCursor;\n    }\n    default:\n      return defaultCursor;\n  }\n}\n","import Editor from '../../Editor';\nimport { CoordinateTransformation, Vec2 } from 'ketcher-core';\n\nexport abstract class ArrowTool {\n  // eslint-disable-next-line no-useless-constructor\n  constructor(protected readonly editor: Editor) {}\n\n  protected get render() {\n    return this.editor.render;\n  }\n\n  protected get reStruct() {\n    return this.render.ctab;\n  }\n\n  protected getOffset(event: PointerEvent, original: Vec2): Vec2 {\n    return CoordinateTransformation.pageToModel(event, this.render).sub(\n      original,\n    );\n  }\n}\n","import {\n  ArrowMoveTool,\n  CommonArrowDragContext,\n  MultitailArrowClosestItem,\n} from './arrow.types';\nimport {\n  CoordinateTransformation,\n  MultitailArrowRefName,\n  fromMultitailArrowHeadTailMove,\n  fromMultitailArrowHeadTailsResize,\n  fromMultitailArrowMove,\n  Action,\n} from 'ketcher-core';\nimport { ArrowTool } from './arrowTool';\n\nexport class MultitailArrowMoveTool\n  extends ArrowTool\n  implements ArrowMoveTool<MultitailArrowClosestItem>\n{\n  mousedown(event: PointerEvent, closestItem: MultitailArrowClosestItem) {\n    return {\n      originalPosition: CoordinateTransformation.pageToModel(\n        event,\n        this.editor.render,\n      ),\n      action: null,\n      closestItem,\n    };\n  }\n\n  mousemove(\n    event: PointerEvent,\n    dragContext: CommonArrowDragContext<MultitailArrowClosestItem>,\n  ): Action {\n    const { closestItem, originalPosition } = dragContext;\n    const current = CoordinateTransformation.pageToModel(event, this.render);\n    const offset = current.sub(originalPosition);\n    const ref = closestItem.ref;\n    if (ref && ref.name !== MultitailArrowRefName.SPINE) {\n      if (ref.isLine) {\n        return fromMultitailArrowHeadTailMove(\n          this.reStruct,\n          closestItem.id,\n          ref,\n          offset.y,\n        );\n      } else {\n        return fromMultitailArrowHeadTailsResize(\n          this.reStruct,\n          dragContext.closestItem.id,\n          ref,\n          offset.x,\n        );\n      }\n    } else {\n      return fromMultitailArrowMove(this.reStruct, closestItem.id, offset);\n    }\n  }\n\n  mouseup(\n    event: PointerEvent,\n    dragContext: CommonArrowDragContext<MultitailArrowClosestItem>,\n  ) {\n    const { action, closestItem } = dragContext;\n    if (\n      action &&\n      closestItem.ref &&\n      closestItem.ref.isLine &&\n      closestItem.ref.name === 'tails'\n    ) {\n      const current = CoordinateTransformation.pageToModel(event, this.render);\n      const offset = current.sub(dragContext.originalPosition);\n      action.perform(this.reStruct);\n      return fromMultitailArrowHeadTailMove(\n        this.reStruct,\n        closestItem.id,\n        closestItem.ref,\n        offset.y,\n        true,\n      );\n    }\n    return action;\n  }\n}\n","import {\n  ArrowMoveTool,\n  CommonArrowDragContext,\n  ReactionArrowClosestItem,\n} from './arrow.types';\nimport {\n  CoordinateTransformation,\n  fromArrowResizing,\n  fromMultipleMove,\n} from 'ketcher-core';\nimport assert from 'assert';\nimport { ArrowTool } from './arrowTool';\n\nexport class ReactionArrowMoveTool\n  extends ArrowTool\n  implements ArrowMoveTool<ReactionArrowClosestItem>\n{\n  private updateResizingState(\n    closestItem: ReactionArrowClosestItem,\n    isResizing: boolean,\n  ) {\n    if (closestItem.map === 'rxnArrows') {\n      const reArrow = this.reStruct.rxnArrows.get(closestItem.id);\n      assert(reArrow != null);\n      reArrow.isResizing = isResizing;\n    }\n  }\n\n  mousedown(event: PointerEvent, closestItem: ReactionArrowClosestItem) {\n    return {\n      originalPosition: CoordinateTransformation.pageToModel(\n        event,\n        this.editor.render,\n      ),\n      action: null,\n      closestItem,\n    };\n  }\n\n  mousemove(\n    event: PointerEvent,\n    dragContext: CommonArrowDragContext<ReactionArrowClosestItem>,\n  ) {\n    const { closestItem, originalPosition } = dragContext;\n    const current = CoordinateTransformation.pageToModel(event, this.render);\n    const offset = this.getOffset(event, originalPosition);\n    if (!closestItem.ref) {\n      return fromMultipleMove(\n        this.reStruct,\n        this.editor.selection() || {},\n        offset,\n      );\n    } else {\n      this.updateResizingState(closestItem, true);\n      const isSnappingEnabled = !event.ctrlKey;\n      return fromArrowResizing(\n        this.reStruct,\n        closestItem.id,\n        offset,\n        current,\n        closestItem.ref,\n        isSnappingEnabled,\n      );\n    }\n  }\n\n  mouseup(\n    _event: PointerEvent,\n    dragContext: CommonArrowDragContext<ReactionArrowClosestItem>,\n  ) {\n    if (dragContext.action) {\n      this.updateResizingState(dragContext.closestItem, false);\n    }\n    return dragContext.action;\n  }\n}\n","import { Editor, fromPaste, Struct, Vec2 } from 'ketcher-core';\n\nexport const createCopyOfSelected = (editor: Editor, point: Vec2) => {\n  const restruct = editor.render.ctab;\n\n  const struct: Struct = editor.structSelected();\n  struct.findConnectedComponents();\n  struct.setImplicitHydrogen();\n  struct.setStereoLabelsToAtoms();\n  struct.markFragments();\n\n  const [action, , items] = fromPaste(restruct, struct, point);\n  editor.update(action, true);\n  return { action, items };\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport {\n  CoordinateTransformation,\n  fromImageResize,\n  fromItemsFuse,\n  fromMultipleMove,\n  fromSimpleObjectResizing,\n  fromTextDeletion,\n  fromTextUpdating,\n  FunctionalGroup,\n  getHoverToFuse,\n  getItemsToFuse,\n  IMAGE_KEY,\n  KetcherLogger,\n  MULTITAIL_ARROW_KEY,\n  isControlKey,\n  ReSGroup,\n  ReStruct,\n  SGroup,\n  Vec2,\n  vectorUtils,\n} from 'ketcher-core';\n\nimport LassoHelper from '../helper/lasso';\nimport { isMergingToMacroMolecule } from '../helper/isMacroMolecule';\nimport { atomLongtapEvent } from '../atom';\nimport SGroupTool from '../sgroup';\nimport { Editor } from '../../Editor';\nimport { dropAndMerge } from '../helper/dropAndMerge';\nimport { getGroupIdsFromItemArrays } from '../helper/getGroupIdsFromItems';\nimport { updateSelectedAtoms } from '../../../ui/state/modal/atoms';\nimport { updateSelectedBonds } from '../../../ui/state/modal/bonds';\nimport { filterNotInContractedSGroup } from '../helper/filterNotInCollapsedSGroup';\nimport { Tool } from '../Tool';\nimport { handleMovingPosibilityCursor } from '../../utils';\nimport { getItemCursor } from '../../utils/getItemCursor';\nimport {\n  ArrowMoveTool,\n  MultitailArrowClosestItem,\n  ReactionArrowClosestItem,\n} from '../arrow/arrow.types';\nimport { MultitailArrowMoveTool } from '../arrow/multitailArrowMoveTool';\nimport { ReactionArrowMoveTool } from '../arrow/reactionArrowMoveTool';\nimport {\n  getNewSelectedItems,\n  getSelectedAtoms,\n  getSelectedBonds,\n  onSelectionEnd,\n  onSelectionLeave,\n  onSelectionMove,\n  onSelectionStart,\n  selMerge,\n} from './select.helpers';\nimport { SelectMode } from './select.types';\nimport { createCopyOfSelected } from 'src/script/ui/action/createCopyOfSelected';\n\nenum Direction {\n  LEFT,\n  TOP,\n  RIGHT,\n  DOWN,\n}\n\nclass SelectTool implements Tool {\n  readonly #mode: SelectMode;\n  readonly #lassoHelper: LassoHelper;\n  private readonly editor: Editor;\n  private dragCtx: any;\n  private previousMouseMoveEvent?: PointerEvent;\n  isMouseDown = false;\n  isReadyForCopy = false;\n  isCopied = false;\n  readonly isMoving = false;\n  private multitailArrowMoveTool: ArrowMoveTool<MultitailArrowClosestItem>;\n  private reactionArrowMoveTool: ArrowMoveTool<ReactionArrowClosestItem>;\n\n  constructor(editor: Editor, mode: SelectMode) {\n    this.editor = editor;\n    this.multitailArrowMoveTool = new MultitailArrowMoveTool(editor);\n    this.reactionArrowMoveTool = new ReactionArrowMoveTool(editor);\n    this.#mode = mode;\n    this.#lassoHelper = new LassoHelper(\n      this.#mode === 'lasso' ? 0 : 1,\n      editor,\n      this.#mode === 'fragment',\n    );\n  }\n\n  isSelectionRunning() {\n    return this.#lassoHelper.running();\n  }\n\n  mousedown(event: PointerEvent) {\n    this.isMouseDown = true;\n    const rnd = this.editor.render;\n    const ctab = rnd.ctab;\n    const molecule = ctab.molecule;\n\n    const map = getMapsForClosestItem(\n      this.#lassoHelper.fragment || event.altKey,\n    );\n    const ci = this.editor.findItem(event, map, null);\n    let selection = this.editor.selection();\n    if (ci != null && !isSelected(selection, ci)) {\n      const selected = {\n        ...(ci?.map === 'atoms' && { atoms: [ci.id] }),\n        ...(ci?.map === 'bonds' && { bonds: [ci.id] }),\n      };\n      const selectedSgroups = ci\n        ? getGroupIdsFromItemArrays(molecule, selected)\n        : [];\n      const newSelected = getNewSelectedItems(this.editor, selectedSgroups);\n      if (newSelected.atoms?.length || newSelected.bonds?.length) {\n        this.editor.selection(newSelected);\n      }\n    }\n    const currentPosition = CoordinateTransformation.pageToModel(\n      event,\n      this.editor.render,\n    );\n\n    if (!ci) {\n      onSelectionStart(event, this.editor, this.#lassoHelper);\n      return true;\n    }\n\n    if (ci.map === MULTITAIL_ARROW_KEY && ci.ref) {\n      this.dragCtx = this.multitailArrowMoveTool.mousedown(\n        event,\n        ci as MultitailArrowClosestItem,\n      );\n    } else if (ci.map === 'rxnArrows' && ci.ref) {\n      this.dragCtx = this.reactionArrowMoveTool.mousedown(\n        event,\n        ci as ReactionArrowClosestItem,\n      );\n    } else {\n      this.dragCtx = {\n        item: ci,\n        xy0: currentPosition,\n      };\n    }\n\n    if (!ci || (ci.map === 'atoms' && !event.ctrlKey)) {\n      atomLongtapEvent(this, rnd);\n    }\n\n    let sel = closestToSel(ci);\n    const sgroups = ctab.sgroups.get(ci.id);\n    selection = this.editor.selection();\n    if (ci.map === 'frags') {\n      const frag = ctab.frags.get(ci.id);\n      sel = {\n        atoms: frag.fragGetAtoms(ctab, ci.id),\n        bonds: frag.fragGetBonds(ctab, ci.id),\n      };\n    } else if (\n      (ci.map === 'sgroups' || ci.map === 'functionalGroups') &&\n      sgroups\n    ) {\n      const sgroup = sgroups.item;\n      sel = {\n        atoms: SGroup.getAtoms(molecule, sgroup),\n        bonds: SGroup.getBonds(molecule, sgroup),\n      };\n    } else if (ci.map === 'rgroups') {\n      const rgroup = ctab.rgroups.get(ci.id);\n      sel = {\n        atoms: rgroup.getAtoms(rnd),\n        bonds: rgroup.getBonds(rnd),\n      };\n    } else if (ci.map === 'sgroupData') {\n      if (isSelected(selection, ci)) return true;\n    }\n\n    if (event.shiftKey) {\n      this.editor.selection(selMerge(sel, selection, true));\n    } else {\n      this.editor.selection(null);\n      this.editor.selection(isSelected(selection, ci) ? selection : sel);\n    }\n\n    this.handleMoveCloseToEdgeOfCanvas();\n\n    this.isReadyForCopy = false;\n    this.isCopied = false;\n    if (isControlKey(event) && this.dragCtx) {\n      this.isReadyForCopy = true;\n    }\n\n    return true;\n  }\n\n  mousemove(event: PointerEvent) {\n    this.previousMouseMoveEvent = event;\n    const editor = this.editor;\n    const rnd = editor.render;\n    const restruct = editor.render.ctab;\n    const dragCtx = this.dragCtx;\n\n    if (this.isReadyForCopy && !this.isCopied) {\n      const point = CoordinateTransformation.pageToModel(event, rnd);\n      const { action, items } = createCopyOfSelected(editor, point);\n      editor.selection(items);\n\n      this.dragCtx.copyAction = action;\n      this.isCopied = true;\n      return;\n    }\n\n    if (dragCtx?.stopTapping) dragCtx.stopTapping();\n\n    if (dragCtx?.closestItem) {\n      if (dragCtx.action) {\n        dragCtx.action.perform(restruct);\n      }\n\n      if (dragCtx.closestItem.map === 'rxnArrows') {\n        this.dragCtx.action = this.reactionArrowMoveTool.mousemove(\n          event,\n          this.dragCtx,\n        );\n      } else if (dragCtx.closestItem.map === MULTITAIL_ARROW_KEY) {\n        this.dragCtx.action = this.multitailArrowMoveTool.mousemove(\n          event,\n          this.dragCtx,\n        );\n      }\n      if (dragCtx.action) {\n        editor.update(dragCtx.action, true);\n        return true;\n      }\n    }\n\n    if (dragCtx?.item) {\n      const atoms = restruct.molecule.atoms;\n      const selection = editor.selection();\n\n      /* handle atoms */\n      const shouldDisplayDegree =\n        dragCtx.item.map === 'atoms' &&\n        atoms?.get(dragCtx.item.id)?.neighbors.length === 1 &&\n        selection?.atoms?.length === 1 &&\n        !selection.bonds;\n      if (shouldDisplayDegree) {\n        // moving selected objects\n        const pos = rnd.page2obj(event);\n        const angle = vectorUtils.calcAngle(dragCtx.xy0, pos);\n        const degrees = vectorUtils.degrees(angle);\n        editor.event.message.dispatch({ info: degrees + 'ยบ' });\n      }\n      /* end */\n\n      /* handle image resize */\n      if (dragCtx.item.map === IMAGE_KEY && dragCtx.item.ref) {\n        if (dragCtx.action) dragCtx.action.perform(rnd.ctab);\n        const position = CoordinateTransformation.pageToModel(event, rnd);\n        dragCtx.action = fromImageResize(\n          rnd.ctab,\n          dragCtx.item.id,\n          position,\n          dragCtx.item.ref,\n        );\n        editor.update(dragCtx.action, true);\n        return true;\n      }\n      /* end + fullstop */\n\n      /* handle simpleObjects */\n      if (dragCtx.item.map === 'simpleObjects' && dragCtx.item.ref) {\n        if (dragCtx.action) dragCtx.action.perform(rnd.ctab);\n        const props = getResizingProps(editor, dragCtx, event);\n        dragCtx.action = fromSimpleObjectResizing(...props, event.shiftKey);\n        editor.update(dragCtx.action, true);\n        return true;\n      }\n      /* end + fullstop */\n\n      /* handle functionalGroups */\n      if (dragCtx.item.map === 'functionalGroups' && !dragCtx.action) {\n        editor.event.showInfo.dispatch(null);\n      }\n      /* end */\n\n      if (dragCtx.action) {\n        dragCtx.action.perform(restruct);\n      }\n\n      const expSel = editor.explicitSelected();\n      dragCtx.action = fromMultipleMove(\n        restruct,\n        expSel,\n        editor.render.page2obj(event).sub(dragCtx.xy0),\n      );\n\n      const visibleSelectedItems = filterNotInContractedSGroup(\n        expSel,\n        this.editor.struct(),\n      );\n      dragCtx.mergeItems = getItemsToFuse(editor, visibleSelectedItems);\n      editor.hover(getHoverToFuse(dragCtx.mergeItems));\n\n      editor.update(dragCtx.action, true);\n      return true;\n    }\n\n    const isSelectionRunning = onSelectionMove(\n      event,\n      this.editor,\n      this.#lassoHelper,\n    );\n    if (isSelectionRunning) {\n      return true;\n    }\n\n    const maps = getMapsForClosestItem(\n      this.#lassoHelper.fragment || event.altKey,\n    );\n    const item = editor.findItem(event, maps, null);\n    editor.hover(item, null, event);\n    handleMovingPosibilityCursor(\n      item,\n      this.editor.render.paper.canvas,\n      getItemCursor(this.editor.render, item),\n    );\n\n    return true;\n  }\n\n  mouseup(event: PointerEvent) {\n    if (!this.isMouseDown) {\n      return;\n    }\n    this.isMouseDown = false;\n    this.isReadyForCopy = false;\n\n    const editor = this.editor;\n    const selected = editor.selection();\n    const struct = editor.render.ctab;\n    const molecule = struct.molecule;\n\n    // add all items of all selectedSGroups to selection\n    const selectedSgroups = selected\n      ? getGroupIdsFromItemArrays(molecule, selected)\n      : [];\n\n    if (this.dragCtx?.stopTapping) this.dragCtx.stopTapping();\n\n    /* ignore salts and solvents */\n    const possibleSaltOrSolvent = struct.sgroups.get(\n      selectedSgroups[selectedSgroups.length - 1],\n    );\n    const isDraggingSaltOrSolventOnStructure = SGroup.isSaltOrSolvent(\n      possibleSaltOrSolvent?.item?.data?.name,\n    );\n    const isDraggingCustomSgroupOnStructure =\n      SGroup.isSuperAtom(possibleSaltOrSolvent?.item) &&\n      !FunctionalGroup.isFunctionalGroup(possibleSaltOrSolvent?.item);\n    if (\n      this.dragCtx &&\n      (isDraggingCustomSgroupOnStructure ||\n        isDraggingSaltOrSolventOnStructure ||\n        this.isDraggingStructureOnSaltOrSolvent(this.dragCtx, struct.sgroups))\n    ) {\n      preventSaltAndSolventsMerge(struct, this.dragCtx, editor);\n      delete this.dragCtx;\n    }\n    /* end */\n    if (this.dragCtx?.closestItem) {\n      if (this.dragCtx.closestItem.map === 'rxnArrows') {\n        this.dragCtx.action = this.reactionArrowMoveTool.mouseup(\n          event,\n          this.dragCtx,\n        );\n      } else if (this.dragCtx.closestItem.map === MULTITAIL_ARROW_KEY) {\n        this.dragCtx.action = this.multitailArrowMoveTool.mouseup(\n          event,\n          this.dragCtx,\n        );\n      }\n      if (this.dragCtx.action) {\n        this.editor.update(this.dragCtx.action);\n        this.editor.update(true);\n      }\n    }\n\n    if (this.dragCtx?.item) {\n      if (!isMergingToMacroMolecule(this.editor, this.dragCtx)) {\n        dropAndMerge(\n          editor,\n          this.dragCtx.mergeItems,\n          this.dragCtx.action,\n          this.dragCtx.copyAction,\n        );\n      }\n    } else {\n      onSelectionEnd(event, this.editor, this.#lassoHelper);\n    }\n    this.dragCtx = null;\n    editor.event.message.dispatch({\n      info: false,\n    });\n\n    this.editor.rotateController.rerender();\n  }\n\n  dblclick(event) {\n    const editor = this.editor;\n    const struct = editor.render.ctab;\n    const { molecule, sgroups } = struct;\n    const functionalGroups = molecule.functionalGroups;\n    const ci = editor.findItem(\n      event,\n      ['atoms', 'bonds', 'sgroups', 'functionalGroups', 'sgroupData', 'texts'],\n      null,\n    );\n\n    const atomResult: any[] = [];\n    const bondResult: any[] = [];\n    const result: any[] = [];\n    if (ci && functionalGroups && ci.map === 'atoms') {\n      const atomId = FunctionalGroup.atomsInFunctionalGroup(\n        functionalGroups,\n        ci.id,\n      );\n      const atomFromStruct = atomId !== null && struct.atoms.get(atomId)?.a;\n      if (\n        atomFromStruct &&\n        !FunctionalGroup.isAtomInContractedFunctionalGroup(\n          // TODO: examine if this code is really needed, seems like its a hack\n          atomFromStruct,\n          sgroups,\n          functionalGroups,\n          true,\n        )\n      )\n        atomResult.push(atomId);\n    }\n    if (ci && functionalGroups && ci.map === 'bonds') {\n      const bondId = FunctionalGroup.bondsInFunctionalGroup(\n        molecule,\n        functionalGroups,\n        ci.id,\n      );\n      const bondFromStruct = bondId !== null && struct.bonds.get(bondId)?.b;\n      if (\n        bondFromStruct &&\n        !FunctionalGroup.isBondInContractedFunctionalGroup(\n          // TODO: examine if this code is really needed, seems like its a hack\n          bondFromStruct,\n          sgroups,\n          functionalGroups,\n        )\n      )\n        bondResult.push(bondId);\n    }\n    if (atomResult.length > 0) {\n      for (const id of atomResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      editor.event.removeFG.dispatch({ fgIds: result });\n      return;\n    } else if (bondResult.length > 0) {\n      for (const id of bondResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByBond(\n          molecule,\n          functionalGroups,\n          id,\n        );\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      this.editor.event.removeFG.dispatch({ fgIds: result });\n      return;\n    }\n    if (!ci) return;\n\n    const selection = this.editor.selection();\n\n    if (ci.map === 'atoms') {\n      const atoms = getSelectedAtoms(selection, molecule);\n      const changeAtomPromise = editor.event.elementEdit.dispatch(atoms);\n      updateSelectedAtoms({\n        atoms: selection?.atoms || [],\n        editor,\n        changeAtomPromise,\n      });\n    } else if (ci.map === 'bonds') {\n      const bonds = getSelectedBonds(selection, molecule);\n      const changeBondPromise = editor.event.bondEdit.dispatch(bonds);\n      updateSelectedBonds({\n        bonds: selection?.bonds || [],\n        changeBondPromise,\n        editor,\n      });\n    } else if (\n      (ci.map === 'sgroups' &&\n        !FunctionalGroup.isFunctionalGroup(molecule.sgroups.get(ci.id))) ||\n      ci.map === 'sgroupData'\n    ) {\n      editor.selection(closestToSel(ci));\n      SGroupTool.sgroupDialog(editor, ci.id);\n    } else if (ci.map === 'texts') {\n      editor.selection(closestToSel(ci));\n      const text = molecule.texts.get(ci.id);\n      const dialog = editor.event.elementEdit.dispatch({\n        ...text,\n        type: 'text',\n      });\n\n      dialog\n        .then(({ content }) => {\n          if (!content) {\n            editor.update(fromTextDeletion(struct, ci.id));\n          } else if (content !== text?.content) {\n            editor.update(fromTextUpdating(struct, ci.id, content));\n          }\n        })\n        .catch((e) => {\n          KetcherLogger.error('select.ts::SelectTool::dblclick', e);\n        });\n    }\n    return true;\n  }\n\n  mouseleave() {\n    if (this.dragCtx && this.dragCtx.stopTapping) this.dragCtx.stopTapping();\n\n    if (this.dragCtx && this.dragCtx.action) {\n      const action = this.dragCtx.action;\n      this.editor.update(action);\n    }\n    onSelectionLeave(this.editor, this.#lassoHelper);\n\n    delete this.dragCtx;\n\n    this.editor.hover(null);\n  }\n\n  private isDraggingStructureOnSaltOrSolvent(\n    dragCtx,\n    sgroups: Map<number, ReSGroup>,\n  ) {\n    let isDraggingOnSaltOrSolventAtom;\n    let isDraggingOnSaltOrSolventBond;\n    if (dragCtx?.mergeItems) {\n      const mergeAtoms = Array.from(dragCtx.mergeItems.atoms.values());\n      const mergeBonds = Array.from(dragCtx.mergeItems.bonds.values());\n      const sgroupsOnCanvas = Array.from(sgroups.values())\n        .map(({ item }) => item)\n        .filter((sgroup): sgroup is SGroup => !!sgroup);\n      isDraggingOnSaltOrSolventAtom = mergeAtoms.some((atomId) =>\n        SGroup.isAtomInSaltOrSolvent(atomId as number, sgroupsOnCanvas),\n      );\n      isDraggingOnSaltOrSolventBond = mergeBonds.some((bondId) =>\n        SGroup.isBondInSaltOrSolvent(bondId as number, sgroupsOnCanvas),\n      );\n    }\n    return isDraggingOnSaltOrSolventAtom || isDraggingOnSaltOrSolventBond;\n  }\n\n  private isCloseToEdgeOfCanvas(event: PointerEvent) {\n    const EDGE_OFFSET = 50;\n    const mousePositionInCanvas = CoordinateTransformation.pageToCanvas(\n      event,\n      this.editor.render,\n    );\n    const viewBox = this.editor.render.viewBox;\n\n    const closeEdges: Direction[] = [];\n    let isClose = false;\n\n    if (mousePositionInCanvas.x < viewBox.minX + EDGE_OFFSET) {\n      isClose = true;\n      closeEdges.push(Direction.LEFT);\n    }\n    if (mousePositionInCanvas.x > viewBox.minX + viewBox.width - EDGE_OFFSET) {\n      isClose = true;\n      closeEdges.push(Direction.RIGHT);\n    }\n    if (mousePositionInCanvas.y < viewBox.minY + EDGE_OFFSET) {\n      isClose = true;\n      closeEdges.push(Direction.TOP);\n    }\n    if (mousePositionInCanvas.y > viewBox.minY + viewBox.height - EDGE_OFFSET) {\n      isClose = true;\n      closeEdges.push(Direction.DOWN);\n    }\n\n    return [isClose, closeEdges] as const;\n  }\n\n  private handleMoveCloseToEdgeOfCanvas() {\n    const event = this.previousMouseMoveEvent;\n    if (!event) {\n      return;\n    }\n\n    const [isCloseToSomeEdgeOfScreen, closeEdges] =\n      this.isCloseToEdgeOfCanvas(event);\n\n    if (isCloseToSomeEdgeOfScreen) {\n      this.mousemove(event);\n      this.moveViewBox(closeEdges);\n    }\n\n    if (this.isMouseDown) {\n      requestAnimationFrame(() => this.handleMoveCloseToEdgeOfCanvas());\n    }\n  }\n\n  private moveViewBox(closeEdges: Direction[]) {\n    const MOVE_STEP = 5;\n    const render = this.editor.render;\n    if (closeEdges.includes(Direction.RIGHT)) {\n      render.setViewBox((prev) => ({\n        ...prev,\n        minX: prev.minX + MOVE_STEP,\n      }));\n    }\n    if (closeEdges.includes(Direction.LEFT)) {\n      render.setViewBox((prev) => ({\n        ...prev,\n        minX: prev.minX - MOVE_STEP,\n      }));\n    }\n    if (closeEdges.includes(Direction.DOWN)) {\n      render.setViewBox((prev) => ({\n        ...prev,\n        minY: prev.minY + MOVE_STEP,\n      }));\n    }\n    if (closeEdges.includes(Direction.TOP)) {\n      render.setViewBox((prev) => ({\n        ...prev,\n        minY: prev.minY - MOVE_STEP,\n      }));\n    }\n  }\n}\n\nfunction closestToSel(ci) {\n  const res = {};\n  res[ci.map] = [ci.id];\n  return res;\n}\n\nfunction isSelected(selection, item) {\n  return (\n    selection && selection[item.map] && selection[item.map].includes(item.id)\n  );\n}\n\nfunction preventSaltAndSolventsMerge(\n  struct: ReStruct,\n  dragCtx,\n  editor: Editor,\n) {\n  const action = dragCtx.action\n    ? fromItemsFuse(struct, null).mergeWith(dragCtx.action)\n    : fromItemsFuse(struct, null);\n  editor.hover(null);\n  if (dragCtx.mergeItems) {\n    editor.selection(null);\n  }\n  editor.update(action);\n  editor.event.message.dispatch({\n    info: false,\n  });\n}\n\nfunction getMapsForClosestItem(selectFragment: boolean) {\n  return [\n    'sgroups',\n    'functionalGroups',\n    'sgroupData',\n    'rgroups',\n    'rgroupAttachmentPoints',\n    'rxnArrows',\n    MULTITAIL_ARROW_KEY,\n    'rxnPluses',\n    'enhancedFlags',\n    'simpleObjects',\n    'texts',\n    IMAGE_KEY,\n    ...(selectFragment ? ['frags'] : ['atoms', 'bonds']),\n  ];\n}\n\nfunction getResizingProps(\n  editor: Editor,\n  dragCtx,\n  event,\n): [ReStruct, number, Vec2, Vec2, any] {\n  const current = editor.render.page2obj(event);\n  const diff = current.sub(dragCtx.xy0);\n  return [editor.render.ctab, dragCtx.item.id, diff, current, dragCtx.item.ref];\n}\n\nexport default SelectTool;\n","import { Tool } from '../Tool';\nimport { Editor } from '../../Editor';\nimport { SelectViewOnlyTool } from './selectViewOnly';\nimport SelectTool from './select';\nimport { SelectMode } from './select.types';\n\nexport * from './select.helpers';\n\nexport class SelectCommonTool implements Tool {\n  constructor(editor: Editor, mode: SelectMode) {\n    const isViewOnlyMode = editor.render.options.viewOnlyMode === true;\n    return isViewOnlyMode\n      ? new SelectViewOnlyTool(editor, mode)\n      : new SelectTool(editor, mode);\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Vec2,\n  fromItemsFuse,\n  fromTemplateOnAtom,\n  fromTemplateOnBondAction,\n  getItemsToFuse,\n  Action,\n  fromTemplateOnCanvas,\n  fromMultipleMove,\n} from 'ketcher-core';\nimport Editor from '../Editor';\nimport { MODES } from 'src/constants';\nimport { getAngleFromEvent, getBondFlipSign } from './template';\n\nconst PREVIEW_DELAY = 300;\ntype ClosestItemType = { map: string; id: number; dist: number };\n\nfunction getUniqueCiId(ci: ClosestItemType) {\n  return `${ci.id}-${ci.map}`;\n}\n\nclass TemplatePreview {\n  private readonly editor: Editor;\n  private readonly template;\n  private readonly mode: 'fg' | null;\n  private floatingPreviewAction: Action | null;\n  private connectedPreviewAction: Action | null;\n  private connectedPreviewTimeout: ReturnType<typeof setTimeout> | null = null;\n  private lastPreviewId: string | null;\n\n  private floatingPreview: {\n    atoms: number[];\n    bonds: number[];\n  } | null;\n\n  private position: Vec2;\n  private previousPosition: Vec2;\n\n  constructor(editor: Editor, template, mode) {\n    this.editor = editor;\n    this.template = template;\n    this.floatingPreviewAction = new Action();\n    this.connectedPreviewAction = null;\n    this.connectedPreviewTimeout = null;\n    this.lastPreviewId = null;\n    this.mode = mode;\n    this.floatingPreview = null;\n    this.position = new Vec2();\n    this.previousPosition = new Vec2();\n  }\n\n  private get struct() {\n    return this.restruct.molecule;\n  }\n\n  private get restruct() {\n    return this.editor.render.ctab;\n  }\n\n  private get isModeFunctionalGroup(): boolean {\n    return this.mode === MODES.FG;\n  }\n\n  hidePreview() {\n    this.hideConnectedPreview();\n    this.hideFloatingPreview();\n  }\n\n  private getPreviewTarget() {\n    const ci: ClosestItemType | null = this.editor.findItem(event, [\n      'atoms',\n      'bonds',\n    ]);\n\n    if (ci && this.restruct.molecule[ci.map].get(ci.id)?.isPreview === false) {\n      return ci;\n    } else {\n      return null;\n    }\n  }\n\n  movePreview(event: PointerEvent) {\n    this.position = this.editor.render.page2obj(event);\n\n    const struct = this.editor.struct();\n    const previewTarget = this.getPreviewTarget();\n    const isMouseAwayFromAtomsAndBonds = !previewTarget;\n    const isPreviewTargetChanged =\n      previewTarget && this.lastPreviewId !== getUniqueCiId(previewTarget);\n\n    const shouldHidePreview =\n      isMouseAwayFromAtomsAndBonds || isPreviewTargetChanged;\n\n    const shouldShowPreview =\n      previewTarget &&\n      !struct.isTargetFromMacromolecule(previewTarget) &&\n      !this.connectedPreviewAction &&\n      !this.connectedPreviewTimeout;\n\n    if (shouldHidePreview) {\n      this.hideConnectedPreview();\n    }\n    if (shouldShowPreview) {\n      this.lastPreviewId = getUniqueCiId(previewTarget);\n      this.connectedPreviewTimeout = setTimeout(() => {\n        this.previousPosition = this.position;\n        this.hideFloatingPreview();\n        this.showConnectedPreview(event, previewTarget);\n      }, PREVIEW_DELAY);\n    } else if (shouldHidePreview) {\n      if (!this.floatingPreview) {\n        this.showFloatingPreview(this.position);\n        this.previousPosition = this.position;\n        this.editor.render.update(false, null);\n      } else {\n        this.moveFloatingPreview();\n      }\n    }\n  }\n\n  private moveFloatingPreview() {\n    const dist = this.position.sub(this.previousPosition);\n    this.previousPosition = this.position;\n    fromMultipleMove(this.restruct, this.floatingPreview, dist);\n    this.editor.render.update(false, null);\n  }\n\n  private showFloatingPreview(position: Vec2) {\n    [this.floatingPreviewAction, this.floatingPreview] = fromTemplateOnCanvas(\n      this.restruct,\n      this.template,\n      position,\n    );\n\n    this.editor.render.update(true, null);\n  }\n\n  private hideFloatingPreview() {\n    if (this.floatingPreviewAction) {\n      const action = this.floatingPreviewAction.perform(this.restruct);\n      this.editor.update(action, true);\n      this.floatingPreviewAction = null;\n      this.floatingPreview = null;\n    }\n  }\n\n  public hideConnectedPreview() {\n    if (this.connectedPreviewAction) {\n      this.connectedPreviewAction.perform(this.restruct);\n      this.connectedPreviewAction = null;\n      this.editor.render.update();\n    }\n    if (this.connectedPreviewTimeout) {\n      clearTimeout(this.connectedPreviewTimeout);\n      this.connectedPreviewTimeout = null;\n    }\n  }\n\n  private showConnectedPreview(event: MouseEvent, ci: ClosestItemType) {\n    if (ci.map === 'bonds' && !this.isModeFunctionalGroup) {\n      const bond = this.struct.bonds.get(ci.id);\n\n      if (!bond) {\n        return;\n      }\n\n      const sign1 = getBondFlipSign(this.struct, bond);\n      const sign2 = this.template.sign;\n      const shouldFlip = sign1 * sign2 > 0;\n\n      const promise = fromTemplateOnBondAction(\n        this.restruct,\n        this.template,\n        ci.id,\n        this.editor.event,\n        shouldFlip,\n        true,\n        true,\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      ) as Promise<any>;\n\n      promise.then(([action, pasteItems]) => {\n        if (!this.isModeFunctionalGroup) {\n          const mergeItems = getItemsToFuse(this.editor, pasteItems);\n          action = fromItemsFuse(this.restruct, mergeItems).mergeWith(action);\n          this.editor.update(action, true);\n          this.connectedPreviewAction = action;\n        }\n      });\n    } else if (ci.map === 'atoms') {\n      const angle = getAngleFromEvent(event, ci, this.restruct);\n\n      let [action, pasteItems] = fromTemplateOnAtom(\n        this.restruct,\n        this.template,\n        ci.id,\n        angle,\n        false,\n        true,\n      );\n\n      if (pasteItems && !this.isModeFunctionalGroup) {\n        const mergeItems = getItemsToFuse(this.editor, pasteItems);\n        action = fromItemsFuse(this.restruct, mergeItems).mergeWith(action);\n      }\n\n      this.editor.update(action, true);\n      this.connectedPreviewAction = action;\n    }\n  }\n}\n\nexport default TemplatePreview;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Vec2,\n  fromItemsFuse,\n  fromTemplateOnAtom,\n  fromTemplateOnBondAction,\n  fromTemplateOnCanvas,\n  getHoverToFuse,\n  getItemsToFuse,\n  FunctionalGroup,\n  SGroup,\n  ReStruct,\n  Struct,\n  fromFragmentDeletion,\n  fromSgroupDeletion,\n  Action,\n  vectorUtils,\n  Bond,\n  BondAttr,\n  AtomAttr,\n  MonomerMicromolecule,\n} from 'ketcher-core';\nimport Editor from '../Editor';\nimport { getGroupIdsFromItemArrays } from './helper/getGroupIdsFromItems';\nimport { MODES } from 'src/constants';\nimport { Tool } from './Tool';\nimport TemplatePreview from './templatePreview';\n\nexport function getBondFlipSign(struct: Struct, bond: Bond): number {\n  const xy0 = new Vec2();\n  const frid = struct.atoms.get(bond?.begin as number)?.fragment;\n  const frIds = struct.getFragmentIds(frid as number);\n  let count = 0;\n\n  let loop = struct.halfBonds.get(bond?.hb1 as number)?.loop;\n\n  if (loop && loop < 0) {\n    loop = struct.halfBonds.get(bond?.hb2 as number)?.loop;\n  }\n\n  if (loop && loop >= 0) {\n    const loopHbs = struct.loops.get(loop)?.hbs;\n    loopHbs?.forEach((hb) => {\n      const halfBondBegin = struct.halfBonds.get(hb)?.begin;\n\n      if (halfBondBegin) {\n        const hbbAtom = struct.atoms.get(halfBondBegin);\n\n        if (hbbAtom) {\n          xy0.add_(hbbAtom.pp); // eslint-disable-line no-underscore-dangle\n          count++;\n        }\n      }\n    });\n  } else {\n    frIds.forEach((id) => {\n      const atomById = struct.atoms.get(id);\n\n      if (atomById) {\n        xy0.add_(atomById.pp); // eslint-disable-line no-underscore-dangle\n        count++;\n      }\n    });\n  }\n\n  const v0 = xy0.scaled(1 / count);\n  return getSign(struct, bond, v0) || 1;\n}\n\nexport function getAngleFromEvent(event, ci, restruct) {\n  const degree = restruct.atoms.get(ci.id)?.a.neighbors.length;\n  let angle;\n  if (degree && degree > 1) {\n    // common case\n    angle = null;\n  } else if (degree === 1) {\n    // on chain end\n    const atom = restruct.molecule.atoms.get(ci.id);\n    const neiId =\n      atom && restruct.molecule.halfBonds.get(atom.neighbors[0])?.end;\n    const nei: any =\n      (neiId || neiId === 0) && restruct.molecule.atoms.get(neiId);\n\n    angle = event.ctrlKey\n      ? vectorUtils.calcAngle(nei?.pp, atom?.pp)\n      : vectorUtils.fracAngle(vectorUtils.calcAngle(nei.pp, atom?.pp), null);\n  } else {\n    // on single atom\n    angle = 0;\n  }\n  return angle;\n}\n\nclass TemplateTool implements Tool {\n  private readonly editor: Editor;\n  private readonly mode: any;\n  private readonly template: any;\n  private readonly findItems: Array<string>;\n  public templatePreview: TemplatePreview | null;\n  private dragCtx: any;\n  private targetGroupsIds: Array<number> = [];\n  private readonly isSaltOrSolvent: boolean;\n  private event: Event | undefined;\n\n  constructor(editor: Editor, tmpl) {\n    this.editor = editor;\n    this.mode = getTemplateMode(tmpl);\n    this.editor.selection(null);\n    this.isSaltOrSolvent = SGroup.isSaltOrSolvent(tmpl.struct.name);\n    const sGroup = tmpl.struct.sgroups.values().next().value as\n      | SGroup\n      | undefined;\n    this.template = {\n      aid: parseInt(tmpl.aid) || sGroup?.getAttachmentAtomId() || 0,\n      bid: parseInt(tmpl.bid) || 0,\n    };\n\n    this.templatePreview = new TemplatePreview(\n      editor,\n      this.template,\n      this.mode,\n    );\n\n    const frag = tmpl.struct;\n    frag.rescale();\n\n    const xy0 = new Vec2();\n    frag.atoms.forEach((atom) => {\n      xy0.add_(atom.pp); // eslint-disable-line no-underscore-dangle\n    });\n\n    this.template.molecule = frag; // preloaded struct\n    this.findItems = [];\n    this.template.xy0 = xy0.scaled(1 / (frag.atoms.size || 1)); // template center\n\n    const atom = frag.atoms.get(this.template.aid);\n    if (atom) {\n      this.template.angle0 = vectorUtils.calcAngle(atom.pp, this.template.xy0); // center tilt\n      this.findItems.push('atoms');\n    }\n\n    const bond = frag.bonds.get(this.template.bid);\n    if (bond && !this.isModeFunctionalGroup) {\n      // template location sign against attachment bond\n      this.template.sign = getSign(frag, bond, this.template.xy0);\n      this.findItems.push('bonds');\n    }\n\n    const sGroupSize = frag.sgroups.size;\n    if (sGroupSize) {\n      this.findItems.push('functionalGroups');\n    }\n  }\n\n  private get struct() {\n    return this.editor.render.ctab.molecule;\n  }\n\n  private get functionalGroups() {\n    return this.struct.functionalGroups;\n  }\n\n  private get isModeFunctionalGroup(): boolean {\n    return this.mode === MODES.FG;\n  }\n\n  private get closestItem() {\n    return this.editor.findItem(this.event, [\n      'atoms',\n      'bonds',\n      'sgroups',\n      'functionalGroups',\n    ]);\n  }\n\n  private get isNeedToShowRemoveAbbreviationPopup(): boolean {\n    const targetId = this.findKeyOfRelatedGroupId(\n      this.closestItem?.id as number,\n    );\n    const functionalGroup = this.functionalGroups.get(targetId!);\n\n    if (functionalGroup?.relatedSGroup instanceof MonomerMicromolecule) {\n      return false;\n    }\n\n    const isTargetExpanded = functionalGroup?.isExpanded;\n    const isTargetAtomOrBond =\n      this.targetGroupsIds.length && !this.isModeFunctionalGroup;\n\n    return Boolean(isTargetExpanded || isTargetAtomOrBond);\n  }\n\n  private findKeyOfRelatedGroupId(clickedClosestItemId: number): number {\n    let targetId;\n\n    const relatedGroupId = FunctionalGroup.findFunctionalGroupByAtom(\n      this.functionalGroups,\n      clickedClosestItemId,\n    );\n\n    this.functionalGroups.forEach((fg, key) => {\n      if (fg.relatedSGroupId === relatedGroupId) {\n        targetId = key;\n      }\n    });\n\n    return targetId;\n  }\n\n  private showRemoveAbbreviationPopup(): Promise<void> {\n    return this.editor.event.removeFG\n      .dispatch({ fgIds: this.targetGroupsIds })\n      .then(() => {\n        // case when we remove abbreviation group, click on benzene ring and try to add it\n        this.targetGroupsIds.length = 0;\n        return Promise.resolve();\n      });\n  }\n\n  async mousedown(event: MouseEvent) {\n    const target = this.editor.findItem(event, this.findItems);\n    const struct = this.editor.struct();\n\n    this.event = event;\n\n    this.templatePreview?.hidePreview();\n\n    if (this.functionalGroups.size) {\n      this.targetGroupsIds = getGroupIdsFromItemArrays(this.struct, {\n        ...(this.closestItem?.map === 'atoms' && {\n          atoms: [this.closestItem.id],\n        }),\n        ...(this.closestItem?.map === 'bonds' && {\n          bonds: [this.closestItem.id],\n        }),\n      });\n\n      if (\n        // if point is functional group/sgroup and it is not expanded\n        (this.closestItem?.map === 'functionalGroups' ||\n          this.closestItem?.map === 'sgroups') &&\n        FunctionalGroup.isContractedFunctionalGroup(\n          this.closestItem.id,\n          this.functionalGroups,\n        )\n      ) {\n        this.targetGroupsIds.push(this.closestItem.id);\n      }\n    }\n\n    if (struct.isTargetFromMacromolecule(target)) {\n      return;\n    }\n\n    if (this.isNeedToShowRemoveAbbreviationPopup) {\n      await this.showRemoveAbbreviationPopup();\n\n      return;\n    }\n\n    this.editor.hover(null);\n\n    this.dragCtx = {\n      xy0: this.editor.render.page2obj(event),\n      item: this.editor.findItem(this.event, this.findItems),\n    };\n\n    const dragCtx = this.dragCtx;\n    const ci = dragCtx.item;\n\n    if (!ci) {\n      //  ci.type == 'Canvas'\n      delete dragCtx.item;\n      return;\n    }\n\n    if (ci.map === 'bonds' && !this.isModeFunctionalGroup) {\n      // calculate fragment center\n      const bond = this.struct.bonds.get(ci.id)!;\n\n      // calculate default template flip\n      dragCtx.sign1 = getBondFlipSign(this.struct, bond);\n      dragCtx.sign2 = this.template.sign;\n    }\n  }\n\n  mousemove(event) {\n    if (!this.dragCtx) {\n      this.editor.hover(\n        this.editor.findItem(event, this.findItems),\n        null,\n        event,\n      );\n\n      this.templatePreview?.movePreview(event);\n\n      return true;\n    }\n\n    if (this.isSaltOrSolvent) {\n      delete this.dragCtx.item;\n      return true;\n    }\n\n    const eventPosition = this.editor.render.page2obj(event);\n    const dragCtx = this.dragCtx;\n    const ci = dragCtx.item;\n    let targetPos: Vec2 | null | undefined = null;\n    /* moving when attached to bond */\n    if (ci && ci.map === 'bonds' && !this.isModeFunctionalGroup) {\n      const bond = this.struct.bonds.get(ci.id);\n      let sign = getSign(this.struct, bond, eventPosition);\n\n      if (dragCtx.sign1 * this.template.sign > 0) {\n        sign = -sign;\n      }\n\n      if (sign !== dragCtx.sign2 || !dragCtx.action) {\n        if (dragCtx.action) {\n          dragCtx.action.perform(this.editor.render.ctab);\n        } // undo previous action\n\n        dragCtx.sign2 = sign;\n        const [action, pasteItems] = fromTemplateOnBondAction(\n          this.editor.render.ctab,\n          this.template,\n          ci.id,\n          this.editor.event,\n          dragCtx.sign1 * dragCtx.sign2 > 0,\n          false,\n        ) as Array<any>;\n\n        dragCtx.action = action;\n        this.editor.update(dragCtx.action, true);\n\n        dragCtx.mergeItems = getItemsToFuse(this.editor, pasteItems);\n        this.editor.hover(getHoverToFuse(dragCtx.mergeItems));\n      }\n      return true;\n    }\n    /* end */\n\n    let extraBond: boolean | null = null;\n    // calc initial pos and is extra bond needed\n    if (!ci) {\n      //  ci.type == 'Canvas'\n      targetPos = dragCtx.xy0;\n    } else if (ci.map === 'atoms' || ci.map === 'functionalGroups') {\n      const atomId = getTargetAtomId(this.struct, ci);\n\n      if (atomId !== undefined) {\n        const atom = this.struct.atoms.get(atomId);\n        targetPos = atom?.pp;\n\n        if (targetPos) {\n          extraBond = this.isModeFunctionalGroup\n            ? true\n            : Vec2.dist(targetPos, eventPosition) > 1;\n        }\n      }\n    }\n\n    if (!targetPos) {\n      return true;\n    }\n\n    // calc angle\n    let angle = vectorUtils.calcAngle(targetPos, eventPosition);\n\n    if (!event.ctrlKey) {\n      angle = vectorUtils.fracAngle(angle, null);\n    }\n\n    const degrees = vectorUtils.degrees(angle);\n    this.editor.event.message.dispatch({ info: degrees + 'ยบ' });\n\n    // check if anything changed since last time\n    if (\n      // eslint-disable-next-line no-prototype-builtins\n      dragCtx.hasOwnProperty('angle') &&\n      dragCtx.angle === degrees &&\n      // eslint-disable-next-line no-prototype-builtins\n      (!dragCtx.hasOwnProperty('extra_bond') ||\n        dragCtx.extra_bond === extraBond)\n    ) {\n      return true;\n    }\n\n    // undo previous action\n    if (dragCtx.action) {\n      dragCtx.action.perform(this.editor.render.ctab);\n    }\n\n    // create new action\n    dragCtx.angle = degrees;\n    let action: Action | null = null;\n\n    if (!ci) {\n      const isAddingFunctionalGroup = this.template?.molecule?.sgroups.size;\n      if (isAddingFunctionalGroup) {\n        // skip, b/c we dont want to do any additional actions (e.g. rotating for s-groups)\n        return true;\n      }\n      [action] = fromTemplateOnCanvas(\n        this.editor.render.ctab,\n        this.template,\n        targetPos,\n        angle,\n      );\n    } else if (ci?.map === 'atoms' || ci?.map === 'functionalGroups') {\n      const atomId = getTargetAtomId(this.struct, ci);\n      [action] = fromTemplateOnAtom(\n        this.editor.render.ctab,\n        this.template,\n        atomId,\n        angle,\n        extraBond,\n      );\n      dragCtx.extra_bond = extraBond;\n    }\n    dragCtx.action = action;\n\n    this.editor.update(dragCtx.action, true);\n\n    // TODO: refactor after #2195 comes into effect\n    if (this.targetGroupsIds.length) this.targetGroupsIds.length = 0;\n\n    return true;\n  }\n\n  mouseup(event?) {\n    const dragCtx = this.dragCtx;\n\n    if (!dragCtx) {\n      return true;\n    }\n\n    delete this.dragCtx;\n\n    const restruct = this.editor.render.ctab;\n    let ci = dragCtx.item;\n\n    /* after moving around bond */\n    if (\n      dragCtx.action &&\n      ci &&\n      ci.map === 'bonds' &&\n      !this.isModeFunctionalGroup\n    ) {\n      dragCtx.action.perform(restruct); // revert drag action\n\n      const promise = fromTemplateOnBondAction(\n        restruct,\n        this.template,\n        ci.id,\n        this.editor.event,\n        dragCtx.sign1 * dragCtx.sign2 > 0,\n        true,\n      ) as Promise<any>;\n\n      promise.then(([action, pasteItems]) => {\n        const mergeItems = getItemsToFuse(this.editor, pasteItems);\n        action = fromItemsFuse(restruct, mergeItems).mergeWith(action);\n        this.editor.update(action);\n      });\n      return true;\n    }\n    /* end */\n\n    let action, functionalGroupRemoveAction;\n\n    if (\n      ci?.map === 'functionalGroups' &&\n      FunctionalGroup.isContractedFunctionalGroup(\n        ci.id,\n        this.functionalGroups,\n      ) &&\n      this.isModeFunctionalGroup &&\n      this.targetGroupsIds.length\n    ) {\n      const restruct = this.editor.render.ctab;\n      const functionalGroupToReplace = this.struct.sgroups.get(ci.id)!;\n\n      if (\n        this.isSaltOrSolvent &&\n        functionalGroupToReplace.isGroupAttached(this.struct)\n      ) {\n        addOnCanvasWithoutMerge({\n          restruct,\n          template: this.template,\n          dragCtx,\n          editor: this.editor,\n          event,\n        });\n        return true;\n      }\n\n      functionalGroupRemoveAction = new Action();\n      const { atomId: sGroupPositionAtomId } =\n        functionalGroupToReplace.getContractedPosition(restruct.molecule);\n      const atomsWithoutAttachmentAtom = SGroup.getAtoms(\n        this.struct,\n        functionalGroupToReplace,\n      ).filter((id) => id !== sGroupPositionAtomId);\n\n      functionalGroupRemoveAction.mergeWith(\n        fromSgroupDeletion(restruct, ci.id),\n      );\n      functionalGroupRemoveAction.mergeWith(\n        fromFragmentDeletion(restruct, { atoms: atomsWithoutAttachmentAtom }),\n      );\n\n      ci = { map: 'atoms', id: sGroupPositionAtomId };\n    }\n\n    if (!dragCtx.action) {\n      if (!ci) {\n        addOnCanvasWithoutMerge({\n          restruct,\n          template: this.template,\n          dragCtx,\n          editor: this.editor,\n          event,\n        });\n        return true;\n      } else if (ci.map === 'atoms') {\n        const degree = restruct.atoms.get(ci.id)?.a.neighbors.length;\n\n        if (degree && degree >= 1 && this.isSaltOrSolvent) {\n          addOnCanvasWithoutMerge({\n            restruct,\n            template: this.template,\n            dragCtx,\n            editor: this.editor,\n            event,\n          });\n          return true;\n        }\n\n        const angle = getAngleFromEvent(event, ci, restruct);\n\n        [action] = fromTemplateOnAtom(\n          restruct,\n          this.template,\n          ci.id,\n          angle,\n          false,\n        );\n        if (functionalGroupRemoveAction) {\n          action = functionalGroupRemoveAction.mergeWith(action);\n        }\n        dragCtx.action = action;\n      } else if (ci.map === 'bonds' && !this.isModeFunctionalGroup) {\n        const promise = fromTemplateOnBondAction(\n          restruct,\n          this.template,\n          ci.id,\n          this.editor.event,\n          dragCtx.sign1 * dragCtx.sign2 > 0,\n          true,\n        ) as Promise<any>;\n\n        promise.then(([action, pasteItems]) => {\n          if (!this.isModeFunctionalGroup) {\n            const mergeItems = getItemsToFuse(this.editor, pasteItems);\n            action = fromItemsFuse(restruct, mergeItems).mergeWith(action);\n            this.editor.update(action);\n          }\n        });\n\n        return true;\n      }\n    }\n    for (const id of restruct.molecule.bonds.keys()) {\n      new BondAttr(id, 'isPreview', false).perform(restruct);\n    }\n\n    for (const id of restruct.molecule.atoms.keys()) {\n      new AtomAttr(id, 'isPreview', false).perform(restruct);\n    }\n    const completeAction = dragCtx.action;\n    if (completeAction && !completeAction.isDummy()) {\n      this.editor.update(completeAction);\n    }\n    this.editor.hover(this.editor.findItem(event, null), null, event);\n    return true;\n  }\n\n  cancel() {\n    this.templatePreview?.hidePreview();\n    this.mouseup();\n  }\n\n  mouseleave() {\n    this.cancel();\n  }\n\n  mouseLeaveClientArea() {\n    this.templatePreview?.hidePreview();\n  }\n}\n\nfunction addOnCanvasWithoutMerge({\n  restruct,\n  template,\n  dragCtx,\n  editor,\n  event,\n}: {\n  restruct: ReStruct;\n  template: Struct;\n  dragCtx;\n  editor: Editor;\n  event: PointerEvent;\n}) {\n  const [action] = fromTemplateOnCanvas(\n    restruct,\n    template,\n    dragCtx.xy0,\n    0,\n    false,\n  );\n  editor.update(action);\n  editor.selection(null);\n  editor.hover(editor.findItem(event, null), null, event);\n  editor.event.message.dispatch({\n    info: false,\n  });\n}\n\nfunction getTemplateMode(tmpl) {\n  if (tmpl.mode) {\n    return tmpl.mode;\n  }\n\n  if (['Functional Groups', 'Salts and Solvents'].includes(tmpl.props?.group)) {\n    return MODES.FG;\n  }\n\n  return null;\n}\n\nexport function getSign(molecule, bond, v) {\n  const begin = molecule.atoms.get(bond.begin).pp;\n  const end = molecule.atoms.get(bond.end).pp;\n\n  const sign = Vec2.cross(Vec2.diff(begin, end), Vec2.diff(v, end));\n\n  if (sign > 0) {\n    return 1;\n  }\n\n  if (sign < 0) {\n    return -1;\n  }\n\n  return 0;\n}\n\nfunction getTargetAtomId(struct: Struct, ci): number | void {\n  if (ci.map === 'atoms') {\n    return ci.id;\n  }\n\n  if (ci.map === 'functionalGroups') {\n    const group = struct.sgroups.get(ci.id);\n    return group?.getAttachmentAtomId();\n  }\n}\n\nexport default TemplateTool;\n","import { Dispatch } from 'redux';\nimport {\n  fromAtomAddition,\n  fromAtomsAttrs,\n  fromBondAddition,\n  fromBondsAttrs,\n  fromFragmentDeletion,\n  FunctionalGroup,\n  Atom,\n  Action,\n  KetcherLogger,\n} from 'ketcher-core';\nimport { STRUCT_TYPE } from 'src/constants';\nimport { openDialog } from './modal';\nimport { getSelectedAtoms } from '../../editor/tool/select';\nimport { onAction } from './shared';\nimport { Editor } from '../../editor';\nimport { updateSelectedAtoms } from 'src/script/ui/state/modal/atoms';\nimport { fromAtom, toAtom, fromBond, toBond } from '../data/convert/structconv';\nimport SGroupTool from '../../editor/tool/sgroup';\nimport { deleteFunctionalGroups } from '../../editor/tool/helper/deleteFunctionalGroups';\nimport TemplateTool from '../../editor/tool/template';\n\ntype TNewAction = {\n  tool?: string;\n  dialog?: string;\n  opts?: any;\n};\n\ntype HandlersProps = {\n  hoveredItemId: number;\n  newAction: TNewAction;\n  editor: Editor;\n  dispatch: Dispatch;\n};\n\ntype HandleHotkeyOverItemProps = {\n  hoveredItem: Record<string, number>;\n  newAction: TNewAction;\n  editor: Editor;\n  dispatch: Dispatch;\n};\n\nexport function handleHotkeyOverItem(props: HandleHotkeyOverItemProps) {\n  if (props.newAction.tool === 'eraser') {\n    handleEraser(props);\n  } else if (props.newAction.dialog) {\n    handleDialog(props);\n  } else if (props.newAction.tool) {\n    handleTool(props);\n  } else {\n    handleOtherActions(props);\n  }\n}\n\nfunction handleOtherActions({\n  dispatch,\n  newAction,\n}: HandleHotkeyOverItemProps) {\n  dispatch(onAction(newAction));\n}\n\nfunction eraseItem({\n  editor,\n  item,\n}: {\n  editor: Editor;\n  item: Record<string, number[]>;\n}) {\n  const action = fromFragmentDeletion(editor.render.ctab, item);\n\n  editor.update(action);\n  editor.hover(null);\n}\n\nfunction handleEraser({\n  editor,\n  hoveredItem,\n  newAction,\n  dispatch,\n}: HandleHotkeyOverItemProps) {\n  const item = mapItemsToArrays(hoveredItem);\n  const itemType = Object.keys(hoveredItem)[0];\n  const activeTool = editor.tool();\n\n  if (activeTool instanceof TemplateTool) {\n    activeTool.templatePreview?.hideConnectedPreview();\n  }\n\n  if ([STRUCT_TYPE.atoms, STRUCT_TYPE.bonds].includes(itemType)) {\n    isFunctionalGroupChange(\n      { editor, hoveredItemId: item[itemType][0], newAction, dispatch },\n      itemType,\n    ).then((res) => {\n      res && eraseItem({ editor, item });\n    });\n  } else {\n    eraseItem({ editor, item });\n  }\n}\n\nfunction handleDialog({\n  hoveredItem,\n  newAction,\n  editor,\n  dispatch,\n}: HandleHotkeyOverItemProps) {\n  const dialogType = Object.keys(hoveredItem)[0];\n  const dialogHandler = getDialogHandler(dialogType);\n  const hoveredItemId = hoveredItem[dialogType];\n\n  if (dialogHandler) {\n    const props: HandlersProps = {\n      hoveredItemId,\n      newAction,\n      editor,\n      dispatch,\n    };\n    return dialogHandler(props);\n  }\n}\n\nfunction getDialogHandler(itemType: string) {\n  const dialogs = {\n    atoms: (props: HandlersProps) => handleAtomPropsDialog(props),\n    bonds: (props: HandlersProps) => handleBondPropsDialog(props),\n  };\n\n  const dialog = dialogs[itemType];\n  return dialog;\n}\n\nfunction handleAtomPropsDialog({\n  hoveredItemId,\n  newAction,\n  editor,\n  dispatch,\n}: HandlersProps) {\n  const selection = editor.selection();\n  const atomsSelected = selection?.atoms;\n  const restruct = editor.render.ctab;\n\n  if (atomsSelected && atomsSelected.includes(hoveredItemId)) {\n    const atoms = getSelectedAtoms(selection, restruct.molecule);\n    const changeAtomPromise = editor.event.elementEdit.dispatch(atoms);\n\n    updateSelectedAtoms({\n      atoms: selection.atoms || [],\n      editor,\n      changeAtomPromise,\n    });\n  } else {\n    const atomFromStruct = restruct.atoms.get(hoveredItemId);\n    const convertedAtomForModal = fromAtom(atomFromStruct?.a);\n\n    openDialog(dispatch, newAction.dialog, convertedAtomForModal)\n      .then((res) => {\n        const updatedAtom = fromAtomsAttrs(\n          restruct,\n          hoveredItemId,\n          toAtom(res),\n          false,\n        );\n\n        editor.update(updatedAtom);\n      })\n      .catch((e) => {\n        KetcherLogger.error(\n          'handleHotkeysOverItem.ts::handleAtomPropsDialog',\n          e,\n        );\n      });\n  }\n}\n\nfunction handleBondPropsDialog({\n  hoveredItemId,\n  newAction,\n  editor,\n  dispatch,\n}: HandlersProps) {\n  const restruct = editor.render.ctab;\n  const bondFromStruct = restruct.bonds.get(hoveredItemId);\n  const convertedBondForModal = fromBond(bondFromStruct?.b);\n\n  openDialog(dispatch, newAction.dialog, convertedBondForModal)\n    .then((res) => {\n      const updatedBond = fromBondsAttrs(\n        restruct,\n        hoveredItemId,\n        toBond(res),\n        false,\n      );\n\n      editor.update(updatedBond);\n    })\n    .catch((e) => {\n      KetcherLogger.error(\n        'handleHoutkeysOverItem.ts::handleBondPropsDialog',\n        e,\n      );\n    });\n}\n\nfunction handleTool({\n  hoveredItem,\n  newAction,\n  editor,\n  dispatch,\n}: HandleHotkeyOverItemProps) {\n  for (const item in hoveredItem) {\n    const toolHandler = getToolHandler(item, newAction.tool);\n    const isChangeStructureTool = newAction.tool !== 'hand';\n    const hoveredItemId = hoveredItem[item];\n\n    if (toolHandler) {\n      const props: HandlersProps = {\n        hoveredItemId,\n        editor,\n        newAction,\n        dispatch,\n      };\n      isFunctionalGroupChange(props, item).then((result) => {\n        if (!result && isChangeStructureTool) return;\n        toolHandler(props);\n      });\n    }\n  }\n}\n\nasync function isFunctionalGroupChange(\n  props: HandlersProps,\n  type: string,\n): Promise<boolean> {\n  if (type === 'sgroups') return true;\n  return await isChangingFunctionalGroup(props, type);\n}\n\nfunction getToolHandler(itemType: string, toolName = '') {\n  const items = {\n    atoms: {\n      atom: (props: HandlersProps) => handleAtomTool(props),\n      bond: (props: HandlersProps) => handleBondTool(props),\n      charge: (props: HandlersProps) => handleChargeTool(props),\n      rgroupatom: (props: HandlersProps) => handleRGroupAtomTool(props),\n      sgroup: ({ editor, hoveredItemId }: HandlersProps) => {\n        SGroupTool.sgroupDialog(editor, hoveredItemId);\n      },\n      hand: ({ dispatch }: HandlersProps) =>\n        dispatch(onAction({ tool: 'hand' })),\n    },\n    sgroups: {\n      atom: (props: HandlersProps) => handleSgroupsTool(props),\n    },\n    _default: {},\n  };\n\n  const item = items[itemType];\n\n  if (item) {\n    return item[toolName];\n  }\n  return items._default[toolName];\n}\n\nfunction handleAtomTool({ hoveredItemId, newAction, editor }: HandlersProps) {\n  const atomProps = { ...newAction.opts };\n  const updatedAtoms = fromAtomsAttrs(\n    editor.render.ctab,\n    hoveredItemId,\n    atomProps,\n    true,\n  );\n  editor.update(updatedAtoms);\n}\n\nfunction handleSgroupsTool({\n  hoveredItemId,\n  newAction,\n  editor,\n}: HandlersProps) {\n  const atomProps = { ...newAction.opts };\n  const action = new Action();\n  const ctab = editor.render.ctab;\n  const sGroup = ctab.molecule.sgroups.get(hoveredItemId);\n  if (sGroup == null) {\n    throw new Error(\n      `unexpected error, sgroup with id \"${hoveredItemId}\" is not found`,\n    );\n  }\n  const { atomId: SGroupPositionAtomId } = sGroup.getContractedPosition(\n    ctab.molecule,\n  );\n  deleteFunctionalGroups([hoveredItemId], ctab, action);\n  action.mergeWith(\n    fromAtomsAttrs(editor.render.ctab, SGroupPositionAtomId, atomProps, true),\n  );\n  editor.update(action);\n}\n\nfunction handleBondTool({ hoveredItemId, newAction, editor }: HandlersProps) {\n  const newBond = fromBondAddition(\n    editor.render.ctab,\n    newAction.opts,\n    hoveredItemId,\n    { label: 'C' },\n  )[0];\n  editor.update(newBond);\n}\n\nfunction handleChargeTool({ hoveredItemId, newAction, editor }: HandlersProps) {\n  const existingAtom = editor.render.ctab.atoms.get(hoveredItemId)?.a;\n  if (existingAtom) {\n    const updatedAtom = fromAtomsAttrs(\n      editor.render.ctab,\n      hoveredItemId,\n      {\n        charge: existingAtom.charge + newAction.opts,\n      },\n      null,\n    );\n    editor.update(updatedAtom);\n  }\n}\n\nfunction mapItemsToArrays(\n  items: Record<string, number>,\n): Record<string, number[]> {\n  const mappedItems = {};\n  for (const item in items) {\n    mappedItems[item] = [items[item]];\n  }\n  return mappedItems;\n}\n\nasync function handleRGroupAtomTool({ hoveredItemId, editor }: HandlersProps) {\n  const struct = editor.render.ctab.molecule;\n  const atom =\n    hoveredItemId || hoveredItemId === 0\n      ? struct.atoms.get(hoveredItemId)\n      : null;\n  const rglabel = atom ? atom.rglabel : 0;\n  const label = atom ? atom.label : 'R#';\n\n  try {\n    let element = await editor.event.elementEdit.dispatch({\n      label: 'R#',\n      rglabel,\n      fragId: atom ? atom.fragment : null,\n    });\n    element = Object.assign({}, Atom.attrlist, element);\n\n    if (!hoveredItemId && hoveredItemId !== 0 && element.rglabel) {\n      editor.update(fromAtomAddition(editor.render.ctab, null, element));\n    } else if (rglabel !== element.rglabel) {\n      if (!element.rglabel && label !== 'R#') {\n        element.label = label;\n      }\n\n      editor.update(\n        fromAtomsAttrs(editor.render.ctab, hoveredItemId, element, false),\n      );\n    }\n  } catch (e) {\n    KetcherLogger.error('handleHotkeysOverItem.ts::handleRGroupAtomTool', e);\n  } // w/o changes\n}\n\nfunction getFunctionalGroupIdByItem(\n  editor: Editor,\n  hoveredItemId: number,\n  type: string,\n): number | null {\n  const molecule = editor.render.ctab.molecule;\n  const functionalGroups = molecule.functionalGroups;\n\n  return type === 'atoms'\n    ? FunctionalGroup.findFunctionalGroupByAtom(functionalGroups, hoveredItemId)\n    : FunctionalGroup.findFunctionalGroupByBond(\n        molecule,\n        functionalGroups,\n        hoveredItemId,\n      );\n}\n\nasync function isChangingFunctionalGroup(\n  { hoveredItemId, editor }: HandlersProps,\n  type: string,\n) {\n  const fgId = getFunctionalGroupIdByItem(editor, hoveredItemId, type);\n\n  if (fgId !== null) {\n    await editor.event.removeFG.dispatch({ fgIds: [fgId] });\n\n    return false;\n  }\n\n  return true;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport * as clipArea from '../component/cliparea/cliparea';\n\nimport {\n  KetSerializer,\n  formatProperties,\n  ChemicalMimeType,\n  KetcherLogger,\n  ketcherProvider,\n  SupportedFormat,\n  Editor,\n  getStructure,\n  MolSerializer,\n  runAsyncAction,\n  SettingsManager,\n  keyNorm,\n  initHotKeys,\n  getStructStringFromClipboardData,\n} from 'ketcher-core';\nimport { debounce, isEqual } from 'lodash/fp';\nimport { load, onAction, removeStructAction } from './shared';\n\nimport actions from '../action';\nimport { isIE } from 'react-device-detect';\nimport {\n  selectAbbreviationLookupValue,\n  selectIsAbbreviationLookupOpen,\n} from './abbreviationLookup/selectors';\nimport {\n  closeAbbreviationLookup,\n  initAbbreviationLookup,\n  showAbbreviationLookup,\n} from './abbreviationLookup';\nimport { isArrowKey, moveSelectedItems } from './moveSelectedItems';\nimport { handleHotkeyOverItem } from './handleHotkeysOverItem';\n\nlet keydownListener: ((event: KeyboardEvent) => void) | null = null;\n\nexport function initKeydownListener(element) {\n  return function (dispatch, getState) {\n    const hotKeys = initHotKeys(actions);\n\n    keydownListener = (event) => keyHandle(dispatch, getState, hotKeys, event);\n    element.addEventListener('keydown', keydownListener);\n  };\n}\n\nexport function removeKeydownListener(element) {\n  return function () {\n    if (keydownListener) {\n      element.removeEventListener('keydown', keydownListener);\n    }\n  };\n}\n\nfunction removeNotRenderedStruct(actionTool, group, dispatch) {\n  const affectedTools = ['paste', 'template'];\n  if (affectedTools.includes(actionTool.tool) && group?.includes('save')) {\n    dispatch(removeStructAction());\n  }\n}\n\nlet abbreviationLookupTimeoutId: number | undefined;\nconst ABBREVIATION_LOOKUP_TYPING_TIMEOUT = 1000;\nconst shortcutKeys = [\n  '1',\n  '2',\n  '3',\n  '4',\n  't',\n  'h',\n  'n',\n  'o',\n  's',\n  'p',\n  'f',\n  'i',\n  'b',\n  '+',\n  '-',\n];\n\n/* HotKeys */\nfunction keyHandle(dispatch, getState, hotKeys, event) {\n  const state = getState();\n\n  if (state.modal || selectIsAbbreviationLookupOpen(state)) return;\n\n  const { editor } = state;\n  const { render } = editor;\n  const actionState = state.actionState;\n  const actionTool = actionState.activeTool;\n\n  const key = keyNorm(event);\n\n  let group: any = null;\n\n  const hoveredItem = getHoveredItem(render.ctab);\n\n  if (key && key.length === 1 && !hoveredItem) {\n    const currentlyPressedKeys = selectAbbreviationLookupValue(state);\n    const isShortcutKey = shortcutKeys.includes(key?.toLowerCase());\n    const isTheSameKey = key === currentlyPressedKeys;\n    const isAbbreviationLookupShown =\n      (!isTheSameKey || !isShortcutKey) && currentlyPressedKeys;\n    if (isAbbreviationLookupShown) {\n      dispatch(showAbbreviationLookup(event.key));\n      clearTimeout(abbreviationLookupTimeoutId);\n      abbreviationLookupTimeoutId = undefined;\n\n      const resetAction = SettingsManager.getSettings().selectionTool;\n      dispatch(onAction(resetAction));\n\n      event.preventDefault();\n      return;\n    } else {\n      abbreviationLookupTimeoutId = window.setTimeout(() => {\n        dispatch(closeAbbreviationLookup());\n        abbreviationLookupTimeoutId = undefined;\n      }, ABBREVIATION_LOOKUP_TYPING_TIMEOUT);\n\n      dispatch(initAbbreviationLookup(event.key));\n    }\n  }\n\n  if (key && key.length === 1 && key.match('/')) {\n    const hotkeyDialogTypes = {\n      atoms: actions['atom-props'].action,\n      bonds: actions['bond-props'].action,\n    };\n\n    if (!hoveredItem) {\n      return;\n    }\n    const dialogType = Object.keys(hoveredItem)[0];\n\n    if (Object.hasOwn(hotkeyDialogTypes, dialogType)) {\n      handleHotkeyOverItem({\n        hoveredItem,\n        newAction: hotkeyDialogTypes[dialogType],\n        editor,\n        dispatch,\n      });\n    }\n\n    event.preventDefault();\n  } else if (editor.rotateController.isRotating && key === 'Escape') {\n    editor.rotateController.revert();\n  } else if ((group = keyNorm.lookup(hotKeys, event)) !== undefined) {\n    const index = checkGroupOnTool(group, actionTool); // index currentTool in group || -1\n    const groupLength = group !== null ? group.length : 1;\n    const newIndex = (index + 1) % groupLength;\n\n    const actName = group[newIndex];\n    if (actionState[actName] && actionState[actName].disabled === true) {\n      event.preventDefault();\n      return;\n    }\n    // Removing from what should be saved - structure, which was added to paste tool,\n    // but not yet rendered on canvas\n    removeNotRenderedStruct(actionTool, group, dispatch);\n\n    if (clipArea.actions.indexOf(actName) === -1) {\n      let newAction = ['zoom-in', 'zoom-out'].includes(actName)\n        ? actions[actName].action()\n        : actions[actName].action;\n      const hoveredItem = getHoveredItem(render.ctab);\n      // check if atom is currently hovered over\n      // in this case we do not want to activate the corresponding tool\n      // and just insert the atom directly\n      if (\n        hoveredItem &&\n        newAction.tool !== 'select' &&\n        newAction.dialog !== 'templates'\n      ) {\n        newAction = getCurrentAction(group[index]) || newAction;\n        handleHotkeyOverItem({\n          hoveredItem,\n          newAction,\n          editor,\n          dispatch,\n        });\n      } else {\n        if (newAction.tool === 'select') {\n          if (key === 'Escape') {\n            newAction = SettingsManager.getSettings().selectionTool;\n          } else if (index === -1) {\n            newAction = {};\n          }\n        }\n        dispatch(onAction(newAction));\n      }\n\n      event.preventDefault();\n    } else if (isIE) {\n      clipArea.exec(event);\n    }\n  } else if (isArrowKey(event.key)) {\n    moveSelectedItems(editor, event.key, event.shiftKey);\n  }\n}\n\nfunction getCurrentAction(prevActName) {\n  return actions[prevActName]?.action;\n}\n\nfunction getHoveredItem(\n  ctab: Record<string, Map<number, Record<string, unknown>>>,\n): Record<string, number> | null {\n  const hoveredItem = {};\n\n  for (const ctabItem in ctab) {\n    if (Object.keys(hoveredItem).length) {\n      break;\n    }\n\n    if (!(ctab[ctabItem] instanceof Map)) {\n      continue;\n    }\n\n    ctab[ctabItem].forEach((item, id) => {\n      if (item.hover) {\n        hoveredItem[ctabItem] = id;\n      }\n    });\n  }\n\n  return Object.keys(hoveredItem).length ? hoveredItem : null;\n}\n\nfunction checkGroupOnTool(group, actionTool) {\n  let index = group.indexOf(actionTool.tool);\n\n  group.forEach((actName, i) => {\n    if (isEqual(actions[actName].action, actionTool)) index = i;\n  });\n\n  return index;\n}\n\nconst rxnTextPlain = /\\$RXN\\n+\\s+0\\s+0\\s+0\\n*/;\n\n/* ClipArea */\nexport function initClipboard(dispatch) {\n  const formats = Object.keys(formatProperties).map(\n    (format) => formatProperties[format].mime,\n  );\n\n  const debAction = debounce(0, (action) => dispatch(onAction(action)));\n  const loadStruct = debounce(0, (structStr, opts) =>\n    dispatch(load(structStr, opts)),\n  );\n\n  return {\n    formats,\n    focused() {\n      const state = global.currentState;\n      return !state.modal;\n    },\n    onLegacyCut() {\n      const state = global.currentState;\n      const editor = state.editor;\n      const data = legacyClipData(editor);\n      if (data) debAction({ tool: 'eraser', opts: 1 });\n      else editor.selection(null);\n      return data;\n    },\n    async onCut() {\n      const ketcherInstance = ketcherProvider.getKetcher();\n      const result = await runAsyncAction(async () => {\n        const state = global.currentState;\n        const editor = state.editor;\n\n        const data = await clipData(editor);\n        if (data) debAction({ tool: 'eraser', opts: 1 });\n        else editor.selection(null);\n        return data;\n      }, ketcherInstance.eventBus);\n      return result;\n    },\n    async onCopy() {\n      const ketcherInstance = ketcherProvider.getKetcher();\n      const result = await runAsyncAction(async () => {\n        const state = global.currentState;\n        const editor = state.editor;\n        const data = await clipData(editor);\n        editor.selection(null);\n        return data;\n      }, ketcherInstance.eventBus);\n      return result;\n    },\n    async onPaste(data, isSmarts: boolean) {\n      const ketcherInstance = ketcherProvider.getKetcher();\n      const result = await runAsyncAction(async () => {\n        const structStr = await getStructStringFromClipboardData(data);\n        if (structStr || !rxnTextPlain.test(data['text/plain'])) {\n          if (isSmarts) {\n            loadStruct(structStr, {\n              fragment: true,\n              isPaste: true,\n              'input-format': ChemicalMimeType.DaylightSmarts,\n            });\n          } else {\n            loadStruct(structStr, { fragment: true, isPaste: true });\n          }\n        }\n      }, ketcherInstance.eventBus);\n      return result;\n    },\n    onLegacyPaste(data, isSmarts: boolean) {\n      const structStr =\n        data[ChemicalMimeType.KET] ||\n        data[ChemicalMimeType.Mol] ||\n        data[ChemicalMimeType.Rxn] ||\n        data['text/plain'];\n\n      if (structStr || !rxnTextPlain.test(data['text/plain'])) {\n        if (isSmarts) {\n          loadStruct(structStr, {\n            fragment: true,\n            isPaste: true,\n            'input-format': ChemicalMimeType.DaylightSmarts,\n          });\n        } else {\n          loadStruct(structStr, { fragment: true, isPaste: true });\n        }\n      }\n    },\n  };\n}\n\nfunction isAbleToCopy(editor: Editor): boolean {\n  const struct = editor.structSelected();\n  const errorHandler = editor.errorHandler;\n\n  if (struct.isBlank()) {\n    return false;\n  }\n  const simpleObjectOrText = Boolean(\n    struct.simpleObjects.size || struct.texts.size,\n  );\n  if (simpleObjectOrText && isIE && errorHandler) {\n    errorHandler(\n      'The structure you are trying to copy contains Simple object or/and Text object.' +\n        'To copy Simple object or Text object in Internet Explorer try \"Copy as KET\" button',\n    );\n    return false;\n  }\n\n  return true;\n}\n\nasync function clipData(editor: Editor) {\n  if (!isAbleToCopy(editor)) {\n    return null;\n  }\n\n  const res = {};\n  const struct = editor.structSelected();\n  const errorHandler = editor.errorHandler;\n\n  try {\n    const serializer = new KetSerializer();\n    const ket = serializer.serialize(struct);\n    const ketcherInstance = ketcherProvider.getKetcher();\n\n    const data = await getStructure(\n      SupportedFormat.molAuto,\n      ketcherInstance.formatterFactory,\n      struct,\n    );\n\n    res[ChemicalMimeType.KET] = ket;\n\n    const type = struct.isReaction\n      ? ChemicalMimeType.Mol\n      : ChemicalMimeType.Rxn;\n\n    res['text/plain'] = data;\n    res[type] = data;\n\n    return res;\n  } catch (e: any) {\n    KetcherLogger.error('hotkeys.ts::clipData', e);\n    errorHandler && errorHandler(e.message);\n  }\n\n  return null;\n}\n\nfunction legacyClipData(editor: Editor) {\n  if (!isAbleToCopy(editor)) {\n    return null;\n  }\n\n  const res = {};\n  const struct = editor.structSelected();\n  const errorHandler = editor.errorHandler;\n  const molSerializer = new MolSerializer();\n  try {\n    const serializer = new KetSerializer();\n    const ket = serializer.serialize(struct);\n    res[ChemicalMimeType.KET] = ket;\n\n    const type = struct.isReaction\n      ? ChemicalMimeType.Mol\n      : ChemicalMimeType.Rxn;\n    const data = molSerializer.serialize(struct);\n    res['text/plain'] = data;\n    res[type] = data;\n\n    return res;\n  } catch (e: any) {\n    KetcherLogger.error('hotkeys.ts::legacyClipData', e);\n    errorHandler && errorHandler(e.message);\n  }\n\n  return null;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport ClipArea from '../component/cliparea/cliparea';\nimport { connect } from 'react-redux';\nimport { initClipboard } from '../state/hotkeys';\n\nconst AppClipArea = connect(null, (dispatch) => dispatch(initClipboard as any))(\n  ClipArea,\n);\n\nexport default AppClipArea;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useEffect, useRef } from 'react';\nimport { useSettingsContext } from '../../../../hooks';\n\ninterface AppHiddenCallProps {\n  onInitTmpls: (cacheEl, url) => void;\n}\n\ntype Props = AppHiddenCallProps;\n// todo: come up with better name\nconst AppHidden = (props: Props) => {\n  const { onInitTmpls } = props;\n\n  const ref = useRef(null);\n  const { staticResourcesUrl } = useSettingsContext();\n\n  useEffect(() => {\n    if (typeof requestIdleCallback === 'function') {\n      requestIdleCallback(() => onInitTmpls(ref.current, staticResourcesUrl));\n    } else {\n      onInitTmpls(ref.current, staticResourcesUrl);\n    }\n  }, []);\n\n  return <div style={{ display: 'none' }} ref={ref} />;\n};\n\nexport type { AppHiddenCallProps };\nexport { AppHidden };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { AppHidden, AppHiddenCallProps } from './AppHidden';\n\nimport { Dispatch } from 'redux';\nimport { connect } from 'react-redux';\nimport { initTmplLib } from '../../state/templates';\n\nconst mapDispatchToProps = (dispatch: Dispatch): AppHiddenCallProps => ({\n  onInitTmpls: (cacheEl, url) => {\n    initTmplLib(dispatch, url, cacheEl);\n  },\n});\n\nconst AppHiddenContainer = connect(null, mapDispatchToProps)(AppHidden);\n\nexport { AppHiddenContainer };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nconst mediaSizes = {\n  smallWidth: 600,\n  smallHeight: 600,\n};\n\nexport default mediaSizes;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport styles from './LoadingCircles.module.less';\n\nexport const LoadingCircles = () => (\n  <div className={`${styles.container} loading-spinner`}>\n    <span />\n    <span />\n    <span />\n  </div>\n);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Fragment,\n  FunctionalGroup,\n  Vec2,\n  Scale,\n  SGroup,\n  ReStruct,\n  Atom,\n  Bond,\n  IMAGE_KEY,\n  ImageReferencePositionInfo,\n  MULTITAIL_ARROW_KEY,\n} from 'ketcher-core';\nimport { ClosestItem, ClosestItemWithMap } from './closest.types';\n\nconst SELECTION_DISTANCE_COEFFICIENT = 0.4;\nconst SELECTION_WITHIN_TEXT = 0;\n\nconst findMaps = {\n  atoms: findClosestAtom,\n  bonds: findClosestBond,\n  enhancedFlags: findClosestEnhancedFlag,\n  sgroupData: findClosestDataSGroupData,\n  sgroups: findClosestSGroup,\n  functionalGroups: findClosestFG,\n  rxnArrows: findClosestRxnArrow,\n  rxnPluses: findClosestRxnPlus,\n  frags: findClosestFrag,\n  rgroups: findClosestRGroup,\n  rgroupAttachmentPoints: findClosestRgroupAttachmentPoints,\n  simpleObjects: findClosestSimpleObject,\n  texts: findClosestText,\n  [MULTITAIL_ARROW_KEY]: findClosestMultitailArrow,\n  [IMAGE_KEY]: findClosestImage,\n};\n\ntype ClosestReturnType<T = Vec2> = ClosestItem<T> | null;\ntype RefPoint = Vec2 | null;\n\nfunction rectangleContainsPoint(startX, startY, width, height, x, y) {\n  return (\n    startX <= x && x <= startX + width && startY <= y && y <= startY + height\n  );\n}\n\nfunction findClosestText(restruct: ReStruct, cursorPosition: Vec2) {\n  let minDist = Number.POSITIVE_INFINITY;\n  let ret: ClosestReturnType = null;\n\n  restruct.texts.forEach((text, id) => {\n    const referencePoints = text.getReferencePoints();\n    const topX = referencePoints[0].x;\n    const topY = referencePoints[0].y;\n    const bottomX = referencePoints[2].x;\n    const bottomY = referencePoints[2].y;\n\n    const distances: Array<number> = [];\n\n    if (cursorPosition.x >= topX && cursorPosition.x <= bottomX) {\n      if (cursorPosition.y < topY) {\n        distances.push(topY - cursorPosition.y);\n      } else if (cursorPosition.y > bottomY) {\n        distances.push(cursorPosition.y - bottomY);\n      } else {\n        distances.push(cursorPosition.y - topY, bottomY - cursorPosition.y);\n      }\n    }\n\n    if (cursorPosition.x < topX && cursorPosition.y < topY) {\n      distances.push(Vec2.dist(new Vec2(topX, topY), cursorPosition));\n    }\n\n    if (cursorPosition.x > bottomX && cursorPosition.y > bottomY) {\n      distances.push(Vec2.dist(new Vec2(bottomX, bottomY), cursorPosition));\n    }\n\n    if (cursorPosition.x < topX && cursorPosition.y > bottomY) {\n      distances.push(Vec2.dist(new Vec2(topX, bottomY), cursorPosition));\n    }\n\n    if (cursorPosition.x > bottomX && cursorPosition.y < topY) {\n      distances.push(Vec2.dist(new Vec2(bottomX, topY), cursorPosition));\n    }\n\n    if (cursorPosition.y >= topY && cursorPosition.y <= bottomY) {\n      if (cursorPosition.x < topX) {\n        distances.push(topX - cursorPosition.x);\n      } else if (cursorPosition.x > bottomX) {\n        distances.push(cursorPosition.x - bottomX);\n      } else {\n        distances.push(SELECTION_WITHIN_TEXT);\n      }\n    }\n\n    const dist = Math.min(...distances);\n\n    if (dist < SELECTION_DISTANCE_COEFFICIENT && (!ret || dist < minDist)) {\n      minDist = dist;\n      ret = { id, dist: minDist };\n    }\n  });\n  return ret;\n}\n\nfunction findClosestSimpleObject(restruct: ReStruct, pos: Vec2) {\n  let minDist = Number.POSITIVE_INFINITY;\n  let refPoint: RefPoint = null;\n  let ret: ClosestReturnType = null;\n\n  restruct.simpleObjects.forEach((simpleObject, id) => {\n    const dist = simpleObject.calcDistance(\n      pos,\n      restruct.render.options.microModeScale,\n    );\n\n    if (dist.minDist < 0.3 && (!ret || dist.minDist < minDist)) {\n      minDist = dist.minDist;\n      refPoint = dist.refPoint;\n\n      ret = { id, dist: minDist, ref: refPoint };\n    }\n  });\n  return ret;\n}\n\nfunction findClosestAtom(restruct: ReStruct, pos: Vec2, skip, minDist) {\n  let closestAtom: null | number = null;\n  const maxMinDist = SELECTION_DISTANCE_COEFFICIENT;\n  const skipId = skip && skip.map === 'atoms' ? skip.id : null;\n  const sGroups = restruct.sgroups;\n  const functionalGroups = restruct.molecule.functionalGroups;\n\n  minDist = minDist || maxMinDist;\n  minDist = Math.min(minDist, maxMinDist);\n\n  restruct.atoms.forEach((atom, aid) => {\n    if (\n      FunctionalGroup.isAtomInContractedFunctionalGroup(\n        atom.a,\n        sGroups,\n        functionalGroups,\n        true,\n      ) ||\n      Atom.isHiddenLeavingGroupAtom(restruct.molecule, aid)\n    ) {\n      return;\n    }\n    const isSkippedAtom = aid === skipId || atom.a.isPreview;\n    if (isSkippedAtom) {\n      return;\n    }\n\n    const dist = Vec2.dist(pos, atom.a.pp);\n\n    if (dist < minDist) {\n      closestAtom = aid;\n      minDist = dist;\n    }\n  });\n\n  if (closestAtom !== null) {\n    return {\n      id: closestAtom,\n      dist: minDist,\n    };\n  }\n\n  return null;\n}\n\nfunction findClosestBond(\n  restruct: ReStruct,\n  pos: Vec2,\n  skip,\n  minDist,\n  options,\n) {\n  // eslint-disable-line max-params\n  let closestBond: number | null = null;\n  let closestBondCenter: number | null = null;\n  const maxMinDist = 0.8 * SELECTION_DISTANCE_COEFFICIENT;\n  const skipId = skip && skip.map === 'bonds' ? skip.id : null;\n  const sGroups = restruct.sgroups;\n  const functionalGroups = restruct.molecule.functionalGroups;\n\n  minDist = minDist || maxMinDist;\n  minDist = Math.min(minDist, maxMinDist);\n\n  let minCDist = minDist;\n\n  restruct.bonds.forEach((bond, bid) => {\n    const isSkippedBond = bid === skipId || bond.b.isPreview;\n    if (isSkippedBond) {\n      return;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const p1 = restruct.atoms.get(bond.b.begin)!.a.pp;\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const p2 = restruct.atoms.get(bond.b.end)!.a.pp;\n\n    if (\n      FunctionalGroup.isBondInContractedFunctionalGroup(\n        bond.b,\n        sGroups,\n        functionalGroups,\n      ) ||\n      SGroup.isBondInContractedSGroup(bond.b, sGroups) ||\n      Bond.isBondToHiddenLeavingGroup(restruct.molecule, bond.b)\n    ) {\n      return;\n    }\n\n    const mid = Vec2.lc2(p1, 0.5, p2, 0.5);\n    const cdist = Vec2.dist(pos, mid);\n\n    const { render } = restruct;\n    const hitboxPoints = bond.getSelectionPoints(render);\n    const position = Scale.modelToCanvas(pos, options);\n    const isPosInsidePolygon = position.isInsidePolygon(hitboxPoints);\n\n    if (isPosInsidePolygon) {\n      minCDist = cdist;\n      closestBondCenter = bid;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const hb = restruct.molecule.halfBonds.get(bond.b.hb1 as number)!;\n    const dir = hb.dir;\n    const norm = hb.norm;\n\n    const inStripe =\n      Vec2.dot(pos.sub(p1), dir) * Vec2.dot(pos.sub(p2), dir) < 0;\n\n    if (inStripe) {\n      const dist = Math.abs(Vec2.dot(pos.sub(p1), norm));\n\n      if (dist < minDist) {\n        closestBond = bid;\n        minDist = dist;\n      }\n    }\n  });\n\n  if (closestBondCenter !== null) {\n    return {\n      id: closestBondCenter,\n      dist: minCDist,\n    };\n  }\n\n  if (\n    closestBond !== null &&\n    minDist > SELECTION_DISTANCE_COEFFICIENT * options.microModeScale\n  ) {\n    return {\n      id: closestBond,\n      dist: minDist,\n    };\n  }\n\n  return null;\n}\n\nfunction findClosestEnhancedFlag(\n  restruct: ReStruct,\n  pos: Vec2,\n  _skip,\n  _minDist,\n  options,\n) {\n  let minDist;\n  let ret: ClosestReturnType = null;\n  restruct.enhancedFlags.forEach((_item, id) => {\n    const fragment = restruct.molecule.frags.get(id);\n\n    if (!fragment || !fragment.enhancedStereoFlag || !options.showStereoFlags)\n      return;\n\n    const p = fragment.stereoFlagPosition\n      ? new Vec2(fragment.stereoFlagPosition.x, fragment.stereoFlagPosition.y)\n      : Fragment.getDefaultStereoFlagPosition(restruct.molecule, id);\n    if (!p || Math.abs(pos.x - p.x) >= 1.0) return;\n\n    const dist = Math.abs(pos.y - p.y);\n\n    if (dist < 0.3 && (!ret || dist < minDist)) {\n      minDist = dist;\n      ret = { id, dist: minDist };\n    }\n  });\n  return ret;\n}\n\nfunction findClosestDataSGroupData(restruct: ReStruct, pos: Vec2) {\n  let minDist = Number.POSITIVE_INFINITY;\n  let ret: ClosestReturnType = null;\n\n  restruct.sgroupData.forEach((item, id) => {\n    if (item.sgroup.type !== 'DAT') throw new Error('Data group expected');\n\n    if (item.sgroup.data.fieldName !== 'MRV_IMPLICIT_H') {\n      const box = item.sgroup.dataArea;\n      const inBox =\n        box.p0.y < pos.y &&\n        box.p1.y > pos.y &&\n        box.p0.x < pos.x &&\n        box.p1.x > pos.x;\n      const xDist = Math.min(\n        Math.abs(box.p0.x - pos.x),\n        Math.abs(box.p1.x - pos.x),\n      );\n\n      if (inBox && (ret === null || xDist < minDist)) {\n        ret = { id, dist: xDist };\n        minDist = xDist;\n      }\n    }\n  });\n\n  return ret;\n}\n\nfunction findClosestFrag(\n  restruct: ReStruct,\n  pos: Vec2,\n  skip,\n  minDist,\n  options,\n) {\n  minDist = Math.min(\n    minDist || SELECTION_DISTANCE_COEFFICIENT,\n    SELECTION_DISTANCE_COEFFICIENT,\n  );\n\n  const struct = restruct.molecule;\n\n  const closestAtom = findClosestAtom(restruct, pos, skip, minDist);\n\n  if (closestAtom) {\n    return {\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      id: struct.atoms.get(closestAtom.id)!.fragment,\n      dist: closestAtom.dist,\n    };\n  }\n\n  const closestBond = findClosestBond(restruct, pos, skip, minDist, options);\n\n  if (closestBond) {\n    // eslint-disable-next-line\n    const atomId = struct.bonds.get(closestBond.id)!.begin;\n    return {\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      id: struct.atoms.get(atomId)!.fragment,\n      dist: closestBond.dist,\n    };\n  }\n\n  return null;\n}\n\nfunction findClosestRGroup(restruct: ReStruct, pos: Vec2, skip, minDist) {\n  minDist = Math.min(\n    minDist || SELECTION_DISTANCE_COEFFICIENT,\n    SELECTION_DISTANCE_COEFFICIENT,\n  );\n\n  let ret: ClosestReturnType = null;\n\n  restruct.rgroups.forEach((rgroup, rgid) => {\n    if (\n      rgid !== skip &&\n      rgroup.labelBox &&\n      rgroup.labelBox.contains(pos, 0.5)\n    ) {\n      const dist = Vec2.dist(rgroup.labelBox.centre(), pos);\n\n      if (!ret || dist < minDist) {\n        minDist = dist;\n        ret = { id: rgid, dist: minDist };\n      }\n    }\n  });\n\n  return ret;\n}\n\n/**\n * @param {ReStruct} restruct\n * @param {Vec2} cursorPosition\n * @param {number} minDistToOtherItems\n */\nfunction findClosestRgroupAttachmentPoints(\n  restruct: ReStruct,\n  cursorPosition: Vec2,\n  _skip,\n  minDistToOtherItems,\n) {\n  let minDist = minDistToOtherItems ?? Number.POSITIVE_INFINITY;\n  /** @type {number | undefined} */\n  let closestItemId;\n\n  restruct.visibleRGroupAttachmentPoints.forEach((reItem, id) => {\n    // Remove readonly from getOutlinePoints return type\n    const itemOutlinePoints = [...reItem.getOutlinePoints()];\n    const isCursorInsideOutline =\n      cursorPosition.isInsidePolygon(itemOutlinePoints);\n    if (isCursorInsideOutline) {\n      const dist = reItem.getDistanceTo(cursorPosition);\n      if (dist < minDist) {\n        minDist = dist;\n        closestItemId = id;\n      }\n    }\n  });\n\n  return closestItemId === undefined\n    ? null\n    : {\n        id: closestItemId,\n        dist: minDist,\n      };\n}\n\nfunction findClosestRxnArrow(restruct: ReStruct, pos: Vec2) {\n  let minDist = Number.POSITIVE_INFINITY;\n  let refPoint: RefPoint = null;\n  let ret: ClosestReturnType = null;\n\n  restruct.rxnArrows.forEach((rxnArrow, id) => {\n    const dist = rxnArrow.calcDistance(\n      pos,\n      restruct.render.options.microModeScale,\n    );\n\n    if (dist.minDist < 0.3 && (!ret || dist.minDist < minDist)) {\n      minDist = dist.minDist;\n      refPoint = dist.refPoint;\n\n      ret = { id, dist: minDist, ref: refPoint };\n    }\n  });\n  return ret;\n}\n\nfunction findClosestRxnPlus(restruct: ReStruct, pos: Vec2) {\n  let minDist = Number.POSITIVE_INFINITY;\n  let ret: ClosestReturnType = null;\n\n  restruct.rxnPluses.forEach((plus, id) => {\n    const p = plus.item.pp;\n    const dist = Math.max(Math.abs(pos.x - p.x), Math.abs(pos.y - p.y));\n\n    if (dist < 0.3 && (!ret || dist < minDist)) {\n      minDist = dist;\n      ret = { id, dist: minDist };\n    }\n  });\n\n  return ret;\n}\n\nfunction findClosestSGroup(restruct: ReStruct, pos: Vec2) {\n  let ret: number | null = null;\n  let minDist = SELECTION_DISTANCE_COEFFICIENT;\n\n  restruct.molecule.sgroups.forEach((sg, sgid) => {\n    if (sg.isSuperatomWithoutLabel) {\n      return;\n    }\n\n    if (sg.isContracted()) {\n      const sGroupPosition = sg.pp;\n      if (sGroupPosition) {\n        const dist = Vec2.dist(pos, sGroupPosition);\n        if (dist < minDist) {\n          ret = sgid;\n          minDist = dist;\n        }\n      }\n\n      return;\n    }\n\n    const d = sg.bracketDirection;\n    const n = d.rotateSC(1, 0);\n    const pg = new Vec2(Vec2.dot(pos, d), Vec2.dot(pos, n));\n\n    sg.areas.forEach((box) => {\n      const inBox =\n        box.p0.y < pg.y &&\n        box.p1.y > pg.y &&\n        box.p0.x < pg.x &&\n        box.p1.x > pg.x;\n      const xDist = Math.min(\n        Math.abs(box.p0.x - pg.x),\n        Math.abs(box.p1.x - pg.x),\n      );\n\n      if (inBox && (ret === null || xDist < minDist)) {\n        ret = sgid;\n        minDist = xDist;\n      }\n    });\n  });\n\n  if (ret !== null) {\n    return {\n      id: ret,\n      dist: minDist,\n    };\n  }\n\n  return null;\n}\n\nfunction findClosestFG(restruct: ReStruct, pos: Vec2, skip) {\n  const sGroups = restruct.sgroups;\n  const skipId = skip && skip.map === 'functionalGroups' ? skip.id : null;\n  for (const [reSGroupId, reSGroup] of sGroups.entries()) {\n    if (reSGroupId === skipId) continue;\n\n    const { startX, startY, width, height } =\n      reSGroup.getTextHighlightDimensions(0, restruct.render);\n    const { x, y } = Scale.modelToCanvas(pos, restruct.render.options);\n    if (rectangleContainsPoint(startX, startY, width, height, x, y)) {\n      const centerX = startX + width / 2;\n      const centerY = startY + height / 2;\n      const rectangleCenter = new Vec2(centerX, centerY);\n      const cursorPosition = new Vec2(x, y);\n\n      const dist = Vec2.dist(rectangleCenter, cursorPosition);\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      const { id } = reSGroup.item!;\n      return { id, dist };\n    }\n  }\n  return null;\n}\n\nfunction findClosestItem(\n  restruct: ReStruct,\n  pos: Vec2,\n  maps,\n  skip,\n  options,\n): ClosestItemWithMap | null {\n  // eslint-disable-line max-params\n  maps = maps || Object.keys(findMaps);\n\n  let priorityItem = null;\n\n  const closestItem = maps.reduce((res, mp) => {\n    const minDist = res ? res.dist : null;\n    const item = findMaps[mp](restruct, pos, skip, minDist, options);\n\n    if (item !== null) {\n      const enrichedItem = {\n        map: mp,\n        ...item,\n      };\n\n      if (mp === 'sgroupData') {\n        priorityItem = enrichedItem;\n      } else if (res === null || item.dist < res.dist) {\n        return enrichedItem;\n      }\n    }\n\n    return res;\n  }, null);\n\n  return priorityItem || closestItem;\n}\n\n/**\n * @param restruct { ReStruct }\n * @param selected { object }\n * @param maps { Array<string> }\n * @param options { RenderOption }\n * @return {{\n * \t\tatoms: Map<number, number>?\n * \t\tbonds: Map<number, number>?\n *    atomToFunctionalGroup: Map<number, number>?\n * }}\n */\nfunction findCloseMerge(\n  restruct: ReStruct,\n  selected,\n  maps = ['atoms', 'bonds'],\n  options,\n) {\n  const pos = {\n    atoms: new Map(), // aid -> position\n    bonds: new Map(), // bid -> position\n  };\n\n  const struct = restruct.molecule;\n\n  selected.atoms.forEach((aid) => {\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    pos.atoms.set(aid, struct.atoms.get(aid)!.pp);\n  });\n\n  selected.bonds.forEach((bid) => {\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const bond = struct.bonds.get(bid)!;\n    pos.bonds.set(\n      bid,\n      Vec2.lc2(\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        struct.atoms.get(bond.begin)!.pp,\n        0.5,\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        struct.atoms.get(bond.end)!.pp,\n        0.5,\n      ),\n    );\n  });\n\n  const result = {\n    atoms: new Map(),\n    atomToFunctionalGroup: new Map(),\n  };\n\n  maps.forEach((map) => {\n    if (map === 'atoms') {\n      Array.from(pos.atoms.keys()).forEach((atomId) => {\n        const atomPosition = pos.atoms.get(atomId);\n        mergeAtomToAtom(atomId, restruct, atomPosition, selected, result) ||\n          mergeAtomToFunctionalGroup(atomId, restruct, atomPosition, result);\n      });\n    } else {\n      result[map] = Array.from(pos[map].keys()).reduce(\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (res: Map<any, any>, srcId) => {\n          const skip = { map, id: srcId };\n          const item = findMaps[map](\n            restruct,\n            pos[map].get(srcId),\n            skip,\n            null,\n            options,\n          );\n\n          if (item && !selected[map].includes(item.id)) {\n            res.set(srcId, item.id);\n          }\n\n          return res;\n        },\n        new Map(),\n      );\n    }\n  });\n\n  return result;\n}\n\nfunction mergeAtomToAtom(\n  atomId,\n  restruct: ReStruct,\n  atomPosition: Vec2,\n  selected,\n  result,\n) {\n  const skip = { map: 'atoms', id: atomId };\n  const closestAtom = findClosestAtom(restruct, atomPosition, skip, null);\n\n  if (closestAtom && !selected.atoms.includes(closestAtom.id)) {\n    result.atoms.set(atomId, closestAtom.id);\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * @param atomId { number }\n * @param restruct { ReStruct }\n * @param atomPosition { Vec2 }\n * @param result { Object } Mutating arguments!!!\n * @return {boolean}\n */\nfunction mergeAtomToFunctionalGroup(\n  atomId,\n  restruct: ReStruct,\n  atomPosition: Vec2,\n  result,\n) {\n  const sgroup = restruct.molecule.getGroupFromAtomId(atomId);\n  const isAttachmentAtom = atomId === sgroup?.getAttachmentAtomId();\n  if (isAttachmentAtom) {\n    return false;\n  }\n\n  const closestFunctionalGroup = findClosestFG(restruct, atomPosition, null);\n  if (closestFunctionalGroup) {\n    result.atomToFunctionalGroup.set(atomId, closestFunctionalGroup.id);\n    return true;\n  }\n\n  return false;\n}\n\nfunction findClosestImage(reStruct: ReStruct, cursorPosition: Vec2) {\n  const renderOptions = reStruct.render.options;\n  const canvasScaledPosition = Scale.modelToCanvas(\n    cursorPosition,\n    renderOptions,\n  );\n  const maxDistance =\n    renderOptions.microModeScale * SELECTION_DISTANCE_COEFFICIENT;\n  return Array.from(reStruct.images.entries()).reduce(\n    (acc: ClosestReturnType<ImageReferencePositionInfo>, [id, item]) => {\n      const distanceToPoint = item.calculateDistanceToPoint(\n        canvasScaledPosition,\n        renderOptions,\n      );\n      if (distanceToPoint <= maxDistance) {\n        if (acc && acc.dist < distanceToPoint) {\n          return acc;\n        }\n        // We would like to grab items under the images and those items should have higher priority then images\n        // So we wanna make sure that those items can be grabbed without pixel-perfect pixel-hunting\n        const dist = Math.max(distanceToPoint, maxDistance / 3);\n        const closestPosition = item.calculateClosestReferencePosition(\n          canvasScaledPosition,\n          renderOptions,\n        );\n        const includeRef = closestPosition.distance < maxDistance;\n        return {\n          id,\n          dist: dist / renderOptions.microModeScale,\n          ref: includeRef ? closestPosition.ref : null,\n        };\n      }\n      return acc;\n    },\n    null,\n  );\n}\n\nfunction findClosestMultitailArrow(reStruct: ReStruct, cursorPosition: Vec2) {\n  const renderOptions = reStruct.render.options;\n  const canvasScaledPosition = Scale.modelToCanvas(\n    cursorPosition,\n    renderOptions,\n  );\n  const maxDistance =\n    renderOptions.microModeScale * SELECTION_DISTANCE_COEFFICIENT;\n\n  return Array.from(reStruct.multitailArrows.entries()).reduce(\n    (acc: ClosestReturnType<unknown>, [id, item]) => {\n      const { distance, ref } = item.calculateDistanceToPoint(\n        canvasScaledPosition,\n        renderOptions,\n        maxDistance,\n      );\n      if (distance <= maxDistance && (!acc || acc.dist > distance)) {\n        return { id, dist: distance / renderOptions.microModeScale, ref };\n      }\n      return acc;\n    },\n    null,\n  );\n}\n\nexport default {\n  atom: findClosestAtom, // used in Actions\n  item: findClosestItem,\n  merge: findCloseMerge,\n};\n","import {\n  Atom,\n  Editor,\n  fromAtomsAttrs,\n  fromRGroupAttachmentPointUpdate,\n  KetcherLogger,\n} from 'ketcher-core';\n\nexport async function editRGroupAttachmentPoint(\n  editor: Editor,\n  atom: Atom,\n  atomId: number,\n) {\n  try {\n    const newAtom = await editor.event.elementEdit.dispatch({\n      attachmentPoints: atom.attachmentPoints,\n    });\n\n    const previousAttachmentPoints = atom?.attachmentPoints;\n    const currentAttachmentPoints = newAtom.attachmentPoints;\n    if (previousAttachmentPoints !== currentAttachmentPoints) {\n      const actionFromAtomsAttrs = fromAtomsAttrs(\n        editor.render.ctab,\n        atomId,\n        newAtom,\n        null,\n      );\n      const actionFromRGroupAttachmentPointUpdate =\n        fromRGroupAttachmentPointUpdate(\n          editor.render.ctab,\n          atomId,\n          currentAttachmentPoints,\n        );\n      const action = actionFromAtomsAttrs.mergeWith(\n        actionFromRGroupAttachmentPointUpdate,\n      );\n      editor.update(action);\n    }\n  } catch (e) {\n    KetcherLogger.error('apoint.utils.ts::editRGroupAttachmentPoint', e);\n    // close modal without any operations\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport assert from 'assert';\nimport { Atom, FunctionalGroup } from 'ketcher-core';\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\nimport { editRGroupAttachmentPoint } from './apoint.utils';\n\nclass APointTool implements Tool {\n  private readonly editor: Editor;\n\n  constructor(editor) {\n    this.editor = editor;\n    this.editor.selection(null);\n  }\n\n  mousemove(event) {\n    const struct = this.editor.render.ctab.molecule;\n    const closestItem = this.editor.findItem(event, [\n      'atoms',\n      'rgroupAttachmentPoints',\n    ]);\n    if (closestItem?.map === 'atoms') {\n      const atom = struct.atoms.get(closestItem.id);\n      if (atom?.label !== 'R#' && atom?.rglabel === null) {\n        this.editor.hover(closestItem, null, event);\n      }\n    } else if (closestItem?.map === 'rgroupAttachmentPoints') {\n      this.editor.hover(closestItem, null, event);\n    } else {\n      this.editor.hover(null);\n    }\n  }\n\n  click(event) {\n    const editor = this.editor;\n    const struct = editor.render.ctab;\n    const molecule = struct.molecule;\n    const functionalGroups = molecule.functionalGroups;\n    const ci = editor.findItem(event, ['atoms']);\n    const atomResult: Array<number> = [];\n    const result: Array<number> = [];\n\n    if (ci && functionalGroups.size && ci.map === 'atoms') {\n      const atomId = FunctionalGroup.atomsInFunctionalGroup(\n        functionalGroups,\n        ci.id,\n      );\n      const isAtomSuperatomLeavingGroup = Atom.isSuperatomLeavingGroupAtom(\n        molecule,\n        ci.id,\n      );\n      if (isAtomSuperatomLeavingGroup) {\n        return;\n      }\n\n      if (atomId !== null) {\n        atomResult.push(atomId);\n      }\n    }\n\n    if (atomResult.length > 0) {\n      for (const id of atomResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      if (result.length > 0) {\n        this.editor.event.removeFG.dispatch({ fgIds: result });\n        return;\n      }\n    }\n\n    if (ci && ci.map === 'atoms') {\n      this.editor.hover(null);\n      const atom = molecule.atoms.get(ci.id);\n      assert(atom != null);\n\n      if (!atom.isRGroupAttachmentPointEditDisabled) {\n        editRGroupAttachmentPoint(editor, atom, ci.id);\n      }\n\n      return true;\n    }\n    return true;\n  }\n}\n\nexport default APointTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Elements, FunctionalGroup } from 'ketcher-core';\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\n\nclass AttachTool implements Tool {\n  private readonly attach: { atomid: number; bondid: number };\n  private readonly editor: Editor;\n\n  constructor(editor, attachPoints) {\n    this.attach = {\n      atomid: attachPoints.atomid || 0,\n      bondid: attachPoints.bondid || 0,\n    };\n    this.editor = editor;\n    this.editor.selection({\n      atoms: [this.attach.atomid],\n      bonds: [this.attach.bondid],\n    });\n  }\n\n  mousemove(event) {\n    const rnd = this.editor.render;\n\n    const ci = this.editor.findItem(event, ['atoms', 'bonds']);\n    const struct = rnd.ctab.molecule;\n    if (\n      ci &&\n      ((ci.map === 'atoms' &&\n        Elements.get(struct.atoms.get(ci.id)?.label as string)) ||\n        ci.map === 'bonds')\n    ) {\n      this.editor.hover(ci);\n    } else {\n      this.editor.hover(null);\n    }\n    return true;\n  }\n\n  click(event) {\n    const editor = this.editor;\n    const rnd = editor.render;\n    const molecule = rnd.ctab.molecule;\n    const functionalGroups = molecule.functionalGroups;\n    const ci = editor.findItem(event, ['atoms', 'bonds']);\n    const atomResult: Array<number> = [];\n    const bondResult: Array<number> = [];\n    const result: Array<number> = [];\n\n    if (ci && functionalGroups.size && ci.map === 'atoms') {\n      const atomId = FunctionalGroup.atomsInFunctionalGroup(\n        functionalGroups,\n        ci.id,\n      );\n\n      if (atomId !== null) {\n        atomResult.push(atomId);\n      }\n    }\n\n    if (ci && functionalGroups.size && ci.map === 'bonds') {\n      const bondId = FunctionalGroup.bondsInFunctionalGroup(\n        molecule,\n        functionalGroups,\n        ci.id,\n      );\n\n      if (bondId !== null) {\n        bondResult.push(bondId);\n      }\n    }\n\n    if (atomResult.length > 0) {\n      for (const id of atomResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      this.editor.event.removeFG.dispatch({ fgIds: result });\n      return;\n    } else if (bondResult.length > 0) {\n      for (const id of bondResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByBond(\n          molecule,\n          functionalGroups,\n          id,\n        );\n\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      this.editor.event.removeFG.dispatch({ fgIds: result });\n      return;\n    }\n\n    if (\n      ci &&\n      ((ci.map === 'atoms' &&\n        Elements.get(molecule.atoms.get(ci.id)?.label as string)) ||\n        ci.map === 'bonds')\n    ) {\n      if (ci.map === 'atoms') {\n        this.attach.atomid = ci.id;\n      } else this.attach.bondid = ci.id;\n\n      this.editor.selection({\n        atoms: [this.attach.atomid],\n        bonds: [this.attach.bondid],\n      });\n      this.editor.event.attachEdit.dispatch(this.attach);\n    }\n    return true;\n  }\n}\n\nexport default AttachTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Bond,\n  Vec2,\n  bondChangingAction,\n  fromBondAddition,\n  fromBondsAttrs,\n  FunctionalGroup,\n  SGroup,\n  fromOneBondDeletion,\n  Struct,\n  vectorUtils,\n  Atom,\n} from 'ketcher-core';\n\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\nimport { isBondingWithMacroMolecule } from './helper/isMacroMolecule';\n\nclass BondTool implements Tool {\n  private readonly editor: Editor;\n  private readonly atomProps: { label: string };\n  private readonly bondProps: any;\n  private dragCtx: any;\n  isNotActiveTool: boolean | undefined;\n\n  constructor(editor, bondProps) {\n    this.editor = editor;\n    this.atomProps = { label: 'C' };\n    this.bondProps = bondProps;\n    if (editor.selection() && editor.selection()?.bonds) {\n      const action = fromBondsAttrs(\n        editor.render.ctab,\n        editor.selection().bonds,\n        bondProps,\n      );\n      editor.update(action);\n      editor.selection(null);\n      this.isNotActiveTool = true;\n    }\n  }\n\n  mousedown(event) {\n    if (this.dragCtx) return;\n    if (isBondingWithMacroMolecule(this.editor, event)) {\n      return;\n    }\n    const struct = this.editor.render.ctab;\n    const molecule = struct.molecule;\n    const functionalGroups = molecule.functionalGroups;\n    const ci = this.editor.findItem(event, [\n      'atoms',\n      'bonds',\n      'functionalGroups',\n    ]);\n    const atomResult: Array<number> = [];\n    const bondResult: Array<number> = [];\n    const result: Array<number> = [];\n    if (ci && functionalGroups.size && ci.map === 'atoms') {\n      const atomId = FunctionalGroup.atomsInFunctionalGroup(\n        functionalGroups,\n        ci.id,\n      );\n      if (atomId !== null) atomResult.push(atomId);\n    }\n    if (ci && functionalGroups.size && ci.map === 'bonds') {\n      const bondId = FunctionalGroup.bondsInFunctionalGroup(\n        molecule,\n        functionalGroups,\n        ci.id,\n      );\n      if (bondId !== null) bondResult.push(bondId);\n    }\n    if (atomResult.length > 0) {\n      for (const id of atomResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      if (result.length) {\n        this.editor.event.removeFG.dispatch({ fgIds: result });\n        return;\n      }\n    } else if (bondResult.length > 0) {\n      for (const id of bondResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByBond(\n          molecule,\n          functionalGroups,\n          id,\n        );\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      if (result.length) {\n        this.editor.event.removeFG.dispatch({ fgIds: result });\n        return;\n      }\n    }\n\n    let attachmentAtomId: number | undefined;\n    if (ci?.map === 'functionalGroups') {\n      const sgroup = molecule.sgroups.get(ci.id);\n      attachmentAtomId = sgroup?.getAttachmentAtomId();\n    }\n\n    const rnd = this.editor.render;\n    this.editor.hover(null);\n    this.editor.selection(null);\n    this.dragCtx = {\n      xy0: rnd.page2obj(event),\n      item:\n        attachmentAtomId === undefined\n          ? ci\n          : {\n              map: 'atoms',\n              id: attachmentAtomId,\n            },\n    };\n\n    if (!this.dragCtx.item)\n      // ci.type == 'Canvas'\n      delete this.dragCtx.item;\n    return true;\n  }\n\n  mousemove(event) {\n    const struct = this.editor.render.ctab;\n    const molecule = struct.molecule;\n    const functionalGroups = molecule.functionalGroups;\n    const editor = this.editor;\n    const rnd = editor.render;\n    if (isBondingWithMacroMolecule(this.editor, event)) {\n      return true;\n    }\n    if ('dragCtx' in this) {\n      const dragCtx = this.dragCtx;\n\n      const pos = rnd.page2obj(event);\n      let angle = vectorUtils.calcAngle(dragCtx.xy0, pos);\n      if (!event.ctrlKey) angle = vectorUtils.fracAngle(angle, null);\n\n      const degrees = vectorUtils.degrees(angle);\n      this.editor.event.message.dispatch({ info: degrees + 'ยบ' });\n\n      if (!('item' in dragCtx) || dragCtx.item.map === 'atoms') {\n        if ('action' in dragCtx) dragCtx.action.perform(rnd.ctab);\n        let beginAtom;\n        let endAtom;\n        let beginPos;\n        let endPos;\n        if ('item' in dragCtx && dragCtx.item.map === 'atoms') {\n          // first mousedown event intersect with any atom\n          beginAtom = dragCtx.item.id;\n          endAtom = editor.findItem(event, ['atoms'], dragCtx.item);\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n          const closestSGroup = editor.findItem(event, ['functionalGroups'])!;\n          const sgroup = molecule.sgroups.get(closestSGroup?.id);\n\n          if (sgroup) {\n            const closestAttachmentAtomId = sgroup.getAttachmentAtomId();\n\n            if (sgroup.isContracted()) {\n              const hasAttachmentPoint = closestAttachmentAtomId === undefined;\n              const isBeginFunctionalGroupItself =\n                closestAttachmentAtomId === beginAtom;\n              if (!hasAttachmentPoint && !isBeginFunctionalGroupItself) {\n                endAtom = {\n                  id: closestAttachmentAtomId,\n                  map: 'atoms',\n                };\n              }\n            }\n\n            if (endAtom) {\n              if (endAtom.id !== closestAttachmentAtomId) {\n                this.editor.event.removeFG.dispatch({ fgIds: [sgroup.id] });\n                endAtom = null;\n              }\n            }\n          }\n        } else {\n          // first mousedown event intersect with any canvas\n          beginAtom = this.atomProps;\n          beginPos = dragCtx.xy0;\n          endAtom = editor.findItem(event, ['atoms', 'functionalGroups']);\n          const atomResult: Array<number> = [];\n          const result: Array<number> = [];\n          if (\n            endAtom &&\n            endAtom.map === 'atoms' &&\n            functionalGroups.size &&\n            this.dragCtx\n          ) {\n            const atomId = FunctionalGroup.atomsInFunctionalGroup(\n              functionalGroups,\n              endAtom.id,\n            );\n            if (atomId !== null) atomResult.push(atomId);\n          } else if (endAtom?.map === 'functionalGroups') {\n            const functionalGroup = molecule.functionalGroups.get(endAtom.id);\n            if (!SGroup.isSaltOrSolvent(functionalGroup?.name || '')) {\n              const attachmentAtomId =\n                functionalGroup?.relatedSGroup.getAttachmentAtomId();\n              endAtom =\n                attachmentAtomId === undefined\n                  ? null\n                  : {\n                      map: 'atoms',\n                      id: attachmentAtomId,\n                    };\n            }\n          }\n          if (atomResult.length > 0) {\n            for (const id of atomResult) {\n              const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n                functionalGroups,\n                id,\n              );\n              fgId !== null && !result.includes(fgId) && result.push(fgId);\n            }\n          }\n          if (result.length > 0) {\n            this.editor.event.removeFG.dispatch({ fgIds: result });\n            delete this.dragCtx;\n            return;\n          }\n        }\n        let dist = Number.MAX_VALUE;\n        if (endAtom?.map === 'atoms') {\n          // after mousedown events is appered, cursor is moved and then cursor intersects any atoms\n          endAtom = endAtom.id;\n        } else {\n          endAtom = this.atomProps;\n          const xy1 = rnd.page2obj(event);\n          dist = Vec2.dist(dragCtx.xy0, xy1);\n          if (beginPos) {\n            // rotation only, leght of bond = 1;\n            endPos = vectorUtils.calcNewAtomPos(beginPos, xy1, event.ctrlKey);\n          } else {\n            // first mousedown event intersect with any atom and\n            // rotation only, leght of bond = 1;\n            const atom = rnd.ctab.molecule.atoms.get(beginAtom);\n            endPos = vectorUtils.calcNewAtomPos(\n              // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n              atom!.pp.get_xy0(),\n              xy1,\n              event.ctrlKey,\n            );\n          }\n        }\n        // don't rotate the bond if the distance between the start and end point is too small\n        if (dist > 0.3) {\n          const [existingBondId, bond] = this.getExistingBond(\n            molecule,\n            beginAtom,\n            endAtom,\n          );\n          dragCtx.action = fromBondAddition(\n            rnd.ctab,\n            this.bondProps,\n            beginAtom,\n            endAtom,\n            beginPos,\n            endPos,\n          )[0];\n          if (existingBondId !== null) {\n            this.dragCtx.existedBond = bond;\n            this.dragCtx.action.mergeWith(\n              fromOneBondDeletion(rnd.ctab, existingBondId),\n            );\n          }\n        } else {\n          delete dragCtx.action;\n        }\n        this.restoreBondWhenHoveringOnCanvas(event);\n        this.editor.update(dragCtx.action, true);\n        return true;\n      }\n    }\n    this.editor.hover(\n      this.editor.findItem(event, ['atoms', 'bonds', 'functionalGroups']),\n      null,\n      event,\n    );\n    return true;\n  }\n\n  mouseup(event) {\n    if ('dragCtx' in this) {\n      const dragCtx = this.dragCtx;\n      const render = this.editor.render;\n      const struct = render.ctab.molecule;\n      if ('action' in dragCtx) {\n        this.restoreBondWhenHoveringOnCanvas(event);\n        this.editor.update(dragCtx.action);\n      } else if (!('item' in dragCtx)) {\n        const editorOptions = this.editor.options();\n        const QUARTER_OF_BOND_WIDTH = 20;\n        const QUARTER_OF_BOND_HEIGHT = 5;\n        const xy = render.page2obj({\n          clientX: event.clientX + QUARTER_OF_BOND_WIDTH * editorOptions.zoom,\n          clientY: event.clientY - QUARTER_OF_BOND_HEIGHT * editorOptions.zoom,\n        });\n        const v = new Vec2(1.0 / 2, 0).rotate(\n          this.bondProps.type === Bond.PATTERN.TYPE.SINGLE ? -Math.PI / 6 : 0,\n        );\n        const bondAddition = fromBondAddition(\n          render.ctab,\n          this.bondProps,\n          { label: 'C' },\n          { label: 'C' },\n          Vec2.diff(xy, v),\n          Vec2.sum(xy, v),\n        );\n\n        this.editor.update(bondAddition[0]);\n      } else if (dragCtx.item.map === 'atoms') {\n        // click on atom\n        const isAtomSuperatomLeavingGroup = Atom.isSuperatomLeavingGroupAtom(\n          struct,\n          dragCtx.item.id,\n        );\n        if (!isAtomSuperatomLeavingGroup) {\n          this.editor.update(\n            fromBondAddition(render.ctab, this.bondProps, dragCtx.item.id, {\n              label: 'C',\n            })[0],\n          );\n          delete this.dragCtx.existedBond;\n        }\n      } else if (dragCtx.item.map === 'bonds') {\n        const bondProps = Object.assign({}, this.bondProps);\n        const bond = struct.bonds.get(dragCtx.item.id) as Bond;\n\n        this.editor.update(\n          bondChangingAction(render.ctab, dragCtx.item.id, bond, bondProps),\n        );\n      }\n      delete this.dragCtx;\n    }\n    this.editor.event.message.dispatch({\n      info: false,\n    });\n    this.editor.hover(\n      this.editor.findItem(event, ['atoms', 'bonds']),\n      null,\n      event,\n    );\n    return true;\n  }\n\n  /*\n    If we want to add a new bond, we need to delete previous one\n    But we can change our mind, then deleted bond needs to be restored\n  */\n  restoreBondWhenHoveringOnCanvas(event) {\n    if (!this.dragCtx.existedBond) {\n      return;\n    }\n    const isHoveringOverAtom = this.editor.findItem(event, ['atoms']);\n    if (!isHoveringOverAtom) {\n      const { begin, end } = this.dragCtx.existedBond;\n      const bondEnd = this.dragCtx.item.id === begin ? end : begin;\n      this.dragCtx.action.mergeWith(\n        fromBondAddition(\n          this.editor.render.ctab,\n          this.dragCtx.existedBond,\n          this.dragCtx.item.id,\n          bondEnd,\n        )[0],\n      );\n      delete this.dragCtx.existedBond;\n    }\n  }\n\n  getExistingBond(struct: Struct, begin: number, end: number) {\n    for (const [bondId, bond] of struct.bonds.entries()) {\n      const alreadyHasBondInOtherDirection =\n        (bond.begin === end && bond.end === begin) ||\n        (bond.begin === begin && bond.end === end);\n      if (alreadyHasBondInOtherDirection) {\n        return [bondId, bond] as const;\n      }\n    }\n    return [null, null] as const;\n  }\n}\n\nexport default BondTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Bond,\n  Vec2,\n  bondChangingAction,\n  fromChain,\n  fromItemsFuse,\n  getHoverToFuse,\n  getItemsToFuse,\n  FunctionalGroup,\n  SGroup,\n  vectorUtils,\n} from 'ketcher-core';\n\nimport { atomLongtapEvent } from './atom';\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\nimport { isBondingWithMacroMolecule } from './helper/isMacroMolecule';\n\nclass ChainTool implements Tool {\n  private readonly editor: Editor;\n  private dragCtx: any;\n\n  constructor(editor) {\n    this.editor = editor;\n    this.editor.selection(null);\n  }\n\n  mousedown(event) {\n    if (this.dragCtx) return;\n    if (isBondingWithMacroMolecule(this.editor, event)) {\n      return;\n    }\n    const struct = this.editor.render.ctab;\n    const molecule = struct.molecule;\n    const functionalGroups = molecule.functionalGroups;\n    const rnd = this.editor.render;\n    const ci = this.editor.findItem(event, [\n      'atoms',\n      'bonds',\n      'functionalGroups',\n    ]);\n    const atomResult: Array<number> = [];\n    const bondResult: Array<number> = [];\n    const result: Array<number> = [];\n\n    if (ci && functionalGroups.size && ci.map === 'atoms') {\n      const atomId = FunctionalGroup.atomsInFunctionalGroup(\n        functionalGroups,\n        ci.id,\n      );\n\n      if (atomId !== null) {\n        atomResult.push(atomId);\n      }\n    }\n\n    if (ci && functionalGroups.size && ci.map === 'bonds') {\n      const bondId = FunctionalGroup.bondsInFunctionalGroup(\n        molecule,\n        functionalGroups,\n        ci.id,\n      );\n\n      if (bondId !== null) {\n        bondResult.push(bondId);\n      }\n    }\n\n    if (atomResult.length > 0) {\n      for (const id of atomResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      if (result.length) {\n        this.editor.event.removeFG.dispatch({ fgIds: result });\n        return;\n      }\n    } else if (bondResult.length > 0) {\n      for (const id of bondResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByBond(\n          molecule,\n          functionalGroups,\n          id,\n        );\n\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      if (result.length) {\n        this.editor.event.removeFG.dispatch({ fgIds: result });\n        return;\n      }\n    }\n\n    this.editor.hover(null);\n    this.dragCtx = {\n      xy0: rnd.page2obj(event),\n      item: ci,\n    };\n\n    if (ci && ci.map === 'atoms') {\n      this.editor.selection({ atoms: [ci.id] }); // for change atom\n      // this event has to be stopped in others events by `tool.dragCtx.stopTapping()`\n      atomLongtapEvent(this, rnd);\n    }\n\n    if (ci?.map === 'functionalGroups') {\n      const functionalGroup = molecule.functionalGroups.get(ci.id);\n      if (!SGroup.isSaltOrSolvent(functionalGroup?.name || '')) {\n        const sGroupId = ci.id;\n        const sGroup = molecule.sgroups.get(sGroupId);\n        const attachmentAtomId = sGroup?.getAttachmentAtomId();\n        this.dragCtx.item = {\n          map: 'atoms',\n          id: attachmentAtomId,\n        };\n      }\n    }\n\n    if (!this.dragCtx.item)\n      // ci.type == 'Canvas'\n      delete this.dragCtx.item;\n    return true;\n  }\n\n  mousemove(event) {\n    const editor = this.editor;\n    const restruct = editor.render.ctab;\n    const dragCtx = this.dragCtx;\n\n    editor.hover(\n      this.editor.findItem(event, ['atoms', 'bonds', 'functionalGroups']),\n      null,\n      event,\n    );\n    if (!dragCtx) {\n      return true;\n    }\n\n    if (dragCtx && dragCtx.stopTapping) {\n      dragCtx.stopTapping();\n    }\n\n    editor.selection(null);\n\n    if (!dragCtx.item || dragCtx.item.map === 'atoms') {\n      if (dragCtx.action) {\n        dragCtx.action.perform(restruct);\n      }\n\n      const atoms = restruct.molecule.atoms;\n\n      const pos0 = dragCtx.item ? atoms.get(dragCtx.item.id)?.pp : dragCtx.xy0;\n\n      const pos1 = editor.render.page2obj(event);\n      const sectCount = Math.ceil(Vec2.diff(pos1, pos0).length());\n\n      const angle = event.ctrlKey\n        ? vectorUtils.calcAngle(pos0, pos1)\n        : vectorUtils.fracAngle(pos0, pos1);\n\n      const [action, newItems] = fromChain(\n        restruct,\n        pos0,\n        angle,\n        sectCount,\n        dragCtx.item ? dragCtx.item.id : null,\n      );\n\n      editor.event.message.dispatch({\n        info: sectCount + ' sectors',\n      });\n\n      dragCtx.action = action;\n      editor.update(dragCtx.action, true);\n\n      dragCtx.mergeItems = getItemsToFuse(editor, newItems);\n      editor.hover(getHoverToFuse(dragCtx.mergeItems));\n\n      return true;\n    }\n\n    return true;\n  }\n\n  mouseup() {\n    const struct = this.editor.render.ctab;\n    const molecule = struct.molecule;\n    const functionalGroups = molecule.functionalGroups;\n    let atom;\n    const atomResult: Array<number> = [];\n    const result: Array<number> = [];\n\n    if (this.dragCtx && this.dragCtx.mergeItems && functionalGroups.size) {\n      atom = this.dragCtx.mergeItems.atoms.values().next().value;\n    }\n    if (atom) {\n      const atomId = FunctionalGroup.atomsInFunctionalGroup(\n        functionalGroups,\n        atom,\n      );\n\n      if (atomId !== null) {\n        atomResult.push(atomId);\n      }\n    }\n\n    if (atomResult.length > 0) {\n      for (const id of atomResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      this.editor.event.removeFG.dispatch({ fgIds: result });\n      return;\n    }\n    const dragCtx = this.dragCtx;\n\n    if (!dragCtx) {\n      return true;\n    }\n\n    delete this.dragCtx;\n\n    const editor = this.editor;\n\n    if (dragCtx.stopTapping) {\n      dragCtx.stopTapping();\n    }\n\n    if (!dragCtx.action && dragCtx.item && dragCtx.item.map === 'bonds') {\n      const bond = molecule.bonds.get(dragCtx.item.id) as Bond;\n\n      dragCtx.action = bondChangingAction(struct, dragCtx.item.id, bond, {\n        type: Bond.PATTERN.TYPE.SINGLE,\n        stereo: Bond.PATTERN.STEREO.NONE,\n      });\n    } else {\n      dragCtx.action = dragCtx.action\n        ? fromItemsFuse(struct, dragCtx.mergeItems).mergeWith(dragCtx.action)\n        : fromItemsFuse(struct, dragCtx.mergeItems);\n    }\n\n    editor.selection(null);\n    editor.hover(null);\n\n    if (dragCtx.action) {\n      editor.update(dragCtx.action);\n    }\n\n    editor.event.message.dispatch({\n      info: false,\n    });\n\n    return true;\n  }\n\n  cancel() {\n    this.mouseup();\n  }\n\n  mouseleave() {\n    this.mouseup();\n  }\n}\n\nexport default ChainTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Atom, Elements, fromAtomsAttrs, FunctionalGroup } from 'ketcher-core';\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\n\nclass ChargeTool implements Tool {\n  private readonly editor: Editor;\n  private readonly charge: any;\n\n  constructor(editor, charge) {\n    this.editor = editor;\n    this.editor.selection(null);\n    this.charge = charge;\n  }\n\n  mousemove(event) {\n    const struct = this.editor.render.ctab;\n    const molecule = struct.molecule;\n    const ci = this.editor.findItem(event, ['atoms']);\n    if (\n      ci &&\n      ci.map === 'atoms' &&\n      Elements.get(molecule.atoms.get(ci.id)?.label as number | string)\n    ) {\n      this.editor.hover(ci);\n    } else {\n      this.editor.hover(null, null, event);\n    }\n    return true;\n  }\n\n  click(event) {\n    const editor = this.editor;\n    const struct = this.editor.render.ctab;\n    const molecule = struct.molecule;\n    const functionalGroups = molecule.functionalGroups;\n    const rnd = editor.render;\n    const ci = editor.findItem(event, ['atoms', 'bonds']);\n    const atomResult: Array<number> = [];\n    const result: Array<number> = [];\n\n    if (ci && functionalGroups.size && ci.map === 'atoms') {\n      const atomId = FunctionalGroup.atomsInFunctionalGroup(\n        functionalGroups,\n        ci.id,\n      );\n      const isAtomSuperatomLeavingGroup = Atom.isSuperatomLeavingGroupAtom(\n        molecule,\n        ci.id,\n      );\n      if (isAtomSuperatomLeavingGroup) {\n        return;\n      }\n\n      if (atomId !== null) {\n        atomResult.push(atomId);\n      }\n    }\n\n    if (atomResult.length > 0) {\n      for (const id of atomResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      if (result.length > 0) {\n        this.editor.event.removeFG.dispatch({ fgIds: result });\n        return;\n      }\n    }\n\n    if (\n      ci &&\n      ci.map === 'atoms' &&\n      Elements.get(molecule.atoms.get(ci.id)?.label as string | number)\n    ) {\n      this.editor.hover(ci);\n      this.editor.update(\n        fromAtomsAttrs(\n          rnd.ctab,\n          ci.id,\n          {\n            charge: molecule.atoms.get(ci.id)?.charge + this.charge,\n          },\n          null,\n        ),\n      );\n    }\n    return true;\n  }\n}\n\nexport default ChargeTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  findStereoAtoms,\n  fromAtomsAttrs,\n  fromStereoFlagUpdate,\n} from 'ketcher-core';\n\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\n\nclass EnhancedStereoTool implements Tool {\n  private readonly editor: Editor;\n  private readonly stereoAtoms: Array<number>;\n  isNotActiveTool: true;\n\n  constructor(editor) {\n    const selection = editor.selection();\n    this.editor = editor;\n    this.isNotActiveTool = true;\n\n    this.stereoAtoms = findStereoAtoms(\n      editor.struct(),\n      selection\n        ? selection.atoms || []\n        : Array.from(editor.struct().atoms.keys()),\n    );\n\n    if (this.stereoAtoms.length === 0) {\n      return;\n    }\n\n    EnhancedStereoTool.changeAtomsStereoAction(\n      this.editor,\n      this.stereoAtoms,\n    ).then((action) => action && editor.update(action));\n  }\n\n  static changeAtomsStereoAction(editor: Editor, stereoAtoms: Array<number>) {\n    const struct = editor.struct();\n    const restruct = editor.render.ctab;\n    const stereoLabels = stereoAtoms.map((stereoAtom) => {\n      const atom = struct.atoms.get(stereoAtom);\n      return atom && atom.stereoLabel;\n    });\n    const hasAnotherLabel = stereoLabels.some(\n      (stereoLabel) => stereoLabel !== stereoLabels[0],\n    );\n    const res = editor.event.enhancedStereoEdit.dispatch({\n      stereoLabel: hasAnotherLabel ? null : stereoLabels[0],\n    });\n\n    return res.then((stereoLabel) => {\n      if (!stereoLabel) {\n        return null;\n      }\n\n      const action = stereoAtoms.reduce(\n        (acc, stereoAtom) => {\n          const frid = struct.atoms.get(stereoAtom)?.fragment;\n          const frag =\n            frid !== undefined ? restruct.molecule.frags.get(frid) : null;\n\n          if (frag && frag.stereoAtoms) {\n            return acc.mergeWith(fromStereoFlagUpdate(restruct, frid));\n          }\n          return acc;\n        },\n        fromAtomsAttrs(\n          restruct,\n          stereoAtoms,\n          {\n            stereoLabel,\n          },\n          false,\n        ),\n      );\n      action.operations.reverse();\n      return action;\n    });\n  }\n}\n\nexport default EnhancedStereoTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  fromArrowDeletion,\n  fromFragmentDeletion,\n  fromOneAtomDeletion,\n  fromOneBondDeletion,\n  fromPlusDeletion,\n  fromImageDeletion,\n  fromRGroupAttachmentPointDeletion,\n  fromSgroupDeletion,\n  fromSimpleObjectDeletion,\n  fromTextDeletion,\n  FunctionalGroup,\n  SGroup,\n  IMAGE_KEY,\n  MULTITAIL_ARROW_KEY,\n  fromMultitailArrowDeletion,\n  MonomerMicromolecule,\n} from 'ketcher-core';\n\nimport LassoHelper from './helper/lasso';\nimport { selMerge } from './select';\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\n\nclass EraserTool implements Tool {\n  private readonly editor: Editor;\n  private readonly maps: Array<string>;\n  private readonly lassoHelper: LassoHelper;\n  isNotActiveTool: boolean | undefined;\n\n  constructor(editor, mode) {\n    this.editor = editor;\n    this.maps = [\n      'atoms',\n      'bonds',\n      'rxnArrows',\n      'rxnPluses',\n      'sgroups',\n      'functionalGroups',\n      'sgroupData',\n      'simpleObjects',\n      'texts',\n      'rgroupAttachmentPoints',\n      IMAGE_KEY,\n      MULTITAIL_ARROW_KEY,\n    ];\n    this.lassoHelper = new LassoHelper(mode || 0, editor, null);\n\n    if (editor.selection()) {\n      const action = fromFragmentDeletion(\n        editor.render.ctab,\n        editor.selection(),\n      );\n      editor.update(action);\n      editor.selection(null);\n      this.isNotActiveTool = true;\n    }\n  }\n\n  mousedown(event) {\n    const ci = this.editor.findItem(event, this.maps);\n\n    if (!ci) {\n      //  ci.type == 'Canvas'\n      this.lassoHelper.begin(event);\n    }\n  }\n\n  mousemove(event) {\n    if (this.lassoHelper.running()) {\n      this.editor.selection(this.lassoHelper.addPoint(event));\n    } else {\n      this.editor.hover(this.editor.findItem(event, this.maps), null, event);\n    }\n  }\n\n  mouseup() {\n    const struct = this.editor.render.ctab;\n    const sgroups = struct.sgroups;\n    const molecule = struct.molecule;\n    const functionalGroups = molecule.functionalGroups;\n    const selected = this.editor.selection();\n    const newSelected: Record<string, any> = { atoms: [], bonds: [] };\n    let actualSgroupId;\n    const atomsResult: Array<number> = [];\n    const bondsResult: Array<number> = [];\n    const preResult: Array<number> = [];\n\n    if (selected && functionalGroups.size && selected.atoms) {\n      for (const atom of selected.atoms) {\n        const atomId = FunctionalGroup.atomsInFunctionalGroup(\n          functionalGroups,\n          atom,\n        );\n        const atomFromStruct = atomId !== null && struct.atoms.get(atomId)?.a;\n\n        if (atomFromStruct) {\n          for (const sgId of atomFromStruct.sgs.values()) {\n            actualSgroupId = sgId;\n          }\n        }\n\n        if (\n          atomFromStruct &&\n          FunctionalGroup.isAtomInContractedFunctionalGroup(\n            atomFromStruct,\n            sgroups,\n            functionalGroups,\n            true,\n          )\n        ) {\n          const sgroupAtoms =\n            actualSgroupId !== undefined &&\n            SGroup.getAtoms(molecule, struct.sgroups.get(actualSgroupId)?.item);\n          const sgroupBonds =\n            actualSgroupId !== undefined &&\n            SGroup.getBonds(molecule, struct.sgroups.get(actualSgroupId)?.item);\n          atom === sgroupAtoms[0] &&\n            newSelected.atoms.push(...(sgroupAtoms as Array<any>)) &&\n            newSelected.bonds.push(...(sgroupBonds as Array<any>));\n        }\n\n        if (\n          atomFromStruct &&\n          !FunctionalGroup.isAtomInContractedFunctionalGroup(\n            atomFromStruct,\n            sgroups,\n            functionalGroups,\n            true,\n          )\n        ) {\n          atomsResult.push(atomId);\n        }\n      }\n    }\n\n    if (selected && functionalGroups.size && selected.bonds) {\n      for (const bond of selected.bonds) {\n        const bondId = FunctionalGroup.bondsInFunctionalGroup(\n          molecule,\n          functionalGroups,\n          bond,\n        );\n        const bondFromStruct = bondId !== null && struct.bonds.get(bondId)?.b;\n\n        if (\n          bondFromStruct &&\n          !FunctionalGroup.isBondInContractedFunctionalGroup(\n            bondFromStruct,\n            sgroups,\n            functionalGroups,\n          )\n        ) {\n          bondsResult.push(bondId);\n        }\n      }\n    }\n\n    if (selected && functionalGroups.size && selected.rgroupAttachmentPoints) {\n      for (const rgroupAttachmentPointId of selected.rgroupAttachmentPoints) {\n        const attachedAtomId =\n          FunctionalGroup.isRGroupAttachmentPointInsideFunctionalGroup(\n            molecule,\n            rgroupAttachmentPointId,\n          );\n        if (attachedAtomId !== null) {\n          atomsResult.push(attachedAtomId);\n        }\n      }\n    }\n\n    if (atomsResult.length > 0) {\n      for (const id of atomsResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n        fgId !== null && !preResult.includes(fgId) && preResult.push(fgId);\n      }\n    }\n\n    if (bondsResult.length > 0) {\n      for (const id of bondsResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByBond(\n          molecule,\n          functionalGroups,\n          id,\n        );\n        fgId !== null && !preResult.includes(fgId) && preResult.push(fgId);\n      }\n    }\n\n    if (preResult.length > 0) {\n      const result: Array<number> = [];\n      preResult.forEach((fgId) => {\n        const sgAtoms = sgroups.get(fgId)?.item?.atoms;\n        sgAtoms.forEach((atom) => {\n          !atomsResult.includes(atom) &&\n            !result.includes(fgId) &&\n            result.push(fgId);\n        });\n      });\n\n      if (result.length > 0) {\n        this.editor.selection(null);\n        this.editor.event.removeFG.dispatch({ fgIds: result });\n        this.lassoHelper.cancel();\n      }\n    }\n\n    // eslint-disable-line max-statements\n    const rnd = this.editor.render;\n\n    if (this.lassoHelper.running()) {\n      // TODO it catches more events than needed, to be re-factored\n      const sel =\n        newSelected.atoms.length > 0\n          ? selMerge(this.lassoHelper.end(), newSelected, false)\n          : this.lassoHelper.end();\n      this.editor.update(fromFragmentDeletion(rnd.ctab, sel));\n      this.editor.selection(null);\n    }\n  }\n\n  click(event) {\n    const rnd = this.editor.render;\n    const restruct = rnd.ctab;\n    const sgroups = restruct.sgroups;\n    const molecule = restruct.molecule;\n    const functionalGroups = molecule.functionalGroups;\n    const ci = this.editor.findItem(event, this.maps);\n    const atomResult: Array<number> = [];\n    const bondResult: Array<number> = [];\n    const result: Array<number> = [];\n\n    if (\n      ci &&\n      functionalGroups &&\n      ci.map === 'functionalGroups' &&\n      !FunctionalGroup.isContractedFunctionalGroup(ci.id, functionalGroups)\n    ) {\n      const sGroup = sgroups.get(ci.id);\n\n      if (FunctionalGroup.isFunctionalGroup(sGroup?.item)) {\n        result.push(ci.id);\n      }\n    } else if (ci && functionalGroups && ci.map === 'atoms') {\n      const atomId = FunctionalGroup.atomsInFunctionalGroup(\n        functionalGroups,\n        ci.id,\n      );\n      const atomFromStruct = atomId !== null && restruct.atoms.get(atomId)?.a;\n\n      if (\n        atomFromStruct &&\n        !FunctionalGroup.isAtomInContractedFunctionalGroup(\n          atomFromStruct,\n          sgroups,\n          functionalGroups,\n          true,\n        )\n      ) {\n        atomResult.push(atomId);\n      }\n    } else if (ci && functionalGroups && ci.map === 'bonds') {\n      const bondId = FunctionalGroup.bondsInFunctionalGroup(\n        molecule,\n        functionalGroups,\n        ci.id,\n      );\n      const bondFromStruct = bondId !== null && restruct.bonds.get(bondId)?.b;\n\n      if (\n        bondFromStruct &&\n        !FunctionalGroup.isBondInContractedFunctionalGroup(\n          bondFromStruct,\n          sgroups,\n          functionalGroups,\n        )\n      ) {\n        bondResult.push(bondId);\n      }\n    } else if (functionalGroups && ci?.map === 'rgroupAttachmentPoints') {\n      const attachedAtomId =\n        FunctionalGroup.isRGroupAttachmentPointInsideFunctionalGroup(\n          molecule,\n          ci.id,\n        );\n      if (attachedAtomId !== null) {\n        atomResult.push(attachedAtomId);\n      }\n    }\n\n    if (atomResult.length) {\n      for (const id of atomResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n    } else if (bondResult.length) {\n      for (const id of bondResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByBond(\n          molecule,\n          functionalGroups,\n          id,\n        );\n\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n    }\n\n    if (result.length) {\n      this.editor.event.removeFG.dispatch({ fgIds: result });\n      return;\n    }\n\n    if (!ci) return; // ci.type == 'Canvas'\n\n    this.editor.hover(null);\n\n    if (ci.map === 'atoms') {\n      this.editor.update(fromOneAtomDeletion(restruct, ci.id));\n    } else if (ci.map === 'bonds') {\n      this.editor.update(fromOneBondDeletion(restruct, ci.id));\n    } else if (\n      (ci.map === 'sgroups' || ci.map === 'functionalGroups') &&\n      FunctionalGroup.isContractedFunctionalGroup(ci.id, functionalGroups)\n    ) {\n      const sGroup = sgroups.get(ci.id);\n\n      this.editor.update(\n        fromFragmentDeletion(rnd.ctab, {\n          atoms: [...SGroup.getAtoms(molecule, sGroup?.item)],\n          bonds: [...SGroup.getBonds(molecule, sGroup?.item)],\n        }),\n      );\n    } else if (ci.map === 'sgroups' || ci.map === 'sgroupData') {\n      const sGroup = sgroups.get(ci.id);\n\n      if (\n        FunctionalGroup.isFunctionalGroup(sGroup?.item) ||\n        sGroup?.item instanceof MonomerMicromolecule\n      ) {\n        this.editor.event.removeFG.dispatch({ fgIds: [ci.id] });\n      } else {\n        this.editor.update(fromSgroupDeletion(restruct, ci.id));\n      }\n    } else if (ci.map === 'rxnArrows') {\n      this.editor.update(fromArrowDeletion(restruct, ci.id));\n    } else if (ci.map === 'rxnPluses') {\n      this.editor.update(fromPlusDeletion(restruct, ci.id));\n    } else if (ci.map === 'simpleObjects') {\n      this.editor.update(fromSimpleObjectDeletion(restruct, ci.id));\n    } else if (ci.map === 'texts') {\n      this.editor.update(fromTextDeletion(restruct, ci.id));\n    } else if (ci.map === 'rgroupAttachmentPoints') {\n      this.editor.update(fromRGroupAttachmentPointDeletion(restruct, ci.id));\n    } else if (ci.map === IMAGE_KEY) {\n      this.editor.update(fromImageDeletion(restruct, ci.id));\n    } else if (ci.map === MULTITAIL_ARROW_KEY) {\n      this.editor.update(fromMultitailArrowDeletion(restruct, ci.id));\n    } else {\n      // TODO re-factoring needed - should be \"map-independent\"\n      console.error(\n        'EraserTool: unable to delete the object ' + ci.map + '[' + ci.id + ']',\n      );\n      return;\n    }\n    this.editor.selection(null);\n  }\n\n  mouseleave() {\n    this.mouseup();\n  }\n\n  cancel() {\n    if (this.lassoHelper.running()) {\n      this.lassoHelper.end();\n    }\n\n    this.editor.selection(null);\n  }\n}\n\nexport default EraserTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport Editor from '../Editor';\nimport { Vec2 } from 'ketcher-core';\nimport { Tool } from './Tool';\n\nclass HandTool implements Tool {\n  private readonly editor: Editor;\n  private begPos: Vec2 | null = null;\n  private endPos: Vec2 | null = null;\n\n  constructor(editor) {\n    this.editor = editor;\n    const { clientX, clientY } = this.editor.lastEvent || {\n      clientX: 0,\n      clientY: 0,\n    };\n    this.editor.event.cursor.dispatch({\n      status: 'enable',\n      cursorPosition: { clientX, clientY },\n    });\n  }\n\n  mousedown(event) {\n    const { clientX, clientY } = event;\n    this.begPos = new Vec2(clientX, clientY);\n  }\n\n  mousemove(event) {\n    this.editor.event.cursor.dispatch({ status: 'move' });\n    this.editor.hover(\n      this.editor.findItem(event, ['atoms', 'bonds'], null),\n      null,\n      event,\n    );\n\n    if (this.begPos == null) {\n      return;\n    }\n    const { clientX, clientY } = event;\n    this.endPos = new Vec2(clientX, clientY);\n\n    const rnd = this.editor.render;\n    const diff = Vec2.diff(this.endPos, this.begPos).scaled(\n      1 / rnd.options.zoom,\n    );\n    this.begPos = this.endPos;\n\n    rnd.setViewBox((prev) => ({\n      ...prev,\n      minX: prev.minX - diff.x,\n      minY: prev.minY - diff.y,\n    }));\n  }\n\n  mouseup(event) {\n    if (this.begPos === null) return;\n    const rnd = this.editor.render;\n    this.endPos = rnd.page2obj(event);\n    this.begPos = null;\n    this.endPos = null;\n    rnd.update(false);\n  }\n\n  mouseover() {\n    this.editor.event.cursor.dispatch({ status: 'mouseover' });\n  }\n\n  mouseLeaveClientArea() {\n    this.begPos = null;\n    this.endPos = null;\n    this.editor.event.cursor.dispatch({ status: 'leave' });\n  }\n\n  cancel() {\n    this.editor.event.cursor.dispatch({ status: 'disable' });\n  }\n}\n\nexport default HandTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  expandSGroupWithMultipleAttachmentPoint,\n  fromItemsFuse,\n  fromPaste,\n  fromTemplateOnAtom,\n  getHoverToFuse,\n  getItemsToFuse,\n  notifyItemsToMergeInitializationComplete,\n  SGroup,\n  Struct,\n  Vec2,\n  vectorUtils,\n} from 'ketcher-core';\nimport Editor from '../Editor';\nimport { dropAndMerge } from './helper/dropAndMerge';\nimport { getGroupIdsFromItemArrays } from './helper/getGroupIdsFromItems';\nimport { filterNotInContractedSGroup } from './helper/filterNotInCollapsedSGroup';\nimport { Tool } from './Tool';\nimport { debounce } from 'lodash';\n\nlet isMovePreviewCalculationInProgress = false;\n\nconst debouncedSetAndHoverMergeItems = debounce(function (\n  editor,\n  pasteItems,\n  pasteToolInstance,\n  needResetTool = false,\n) {\n  const mergeItems = getItemsToFuse(editor, pasteItems);\n  editor.hover(\n    getHoverToFuse(mergeItems),\n    needResetTool ? pasteToolInstance : undefined,\n  );\n  pasteToolInstance.setMergeItems(mergeItems);\n  notifyItemsToMergeInitializationComplete();\n},\n50);\n\nclass PasteTool implements Tool {\n  private readonly editor: Editor;\n  private readonly struct: Struct;\n  private action: any;\n  private dragCtx: any;\n  private mergeItems: any;\n  private readonly isSingleContractedGroup: boolean;\n\n  constructor(editor, struct) {\n    this.editor = editor;\n    this.editor.selection(null);\n    this.struct = struct;\n\n    this.isSingleContractedGroup =\n      struct.isSingleGroup() && !struct.functionalGroups.get(0)?.isExpanded;\n\n    const rnd = this.editor.render;\n    const { clientHeight, clientWidth } = rnd.clientArea;\n    const point = this.editor.lastEvent\n      ? rnd.page2obj(this.editor.lastEvent)\n      : rnd.page2obj({\n          pageX: clientWidth / 2,\n          pageY: clientHeight / 2,\n        } as MouseEvent);\n\n    const [action, pasteItems] = fromPaste(rnd.ctab, this.struct, point);\n    this.action = action;\n    this.editor.update(this.action, true);\n\n    action.mergeWith(expandSGroupWithMultipleAttachmentPoint(this.restruct));\n\n    this.editor.update(this.action, true);\n\n    debouncedSetAndHoverMergeItems(this.editor, pasteItems, this, true);\n  }\n\n  public setMergeItems(mergeItems) {\n    this.mergeItems = mergeItems;\n  }\n\n  private get restruct() {\n    return this.editor.render.ctab;\n  }\n\n  mousedown(event) {\n    if (\n      !this.isSingleContractedGroup ||\n      SGroup.isSaltOrSolvent(this.struct.sgroups.get(0)?.data.name)\n    ) {\n      return;\n    }\n\n    if (this.action) {\n      // remove pasted group from canvas to find closest group correctly\n      this.action?.perform(this.restruct);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const closestGroupItem = this.editor.findItem(event, ['functionalGroups'])!;\n    const closestGroup = this.editor.struct().sgroups.get(closestGroupItem?.id);\n\n    // not dropping on a group (tmp, should be removed when dealing with other entities)\n    if (!closestGroupItem || SGroup.isSaltOrSolvent(closestGroup?.data.name)) {\n      // recreate action and continue as usual\n      const [action] = fromPaste(\n        this.restruct,\n        this.struct,\n        this.editor.render.page2obj(event),\n      );\n      this.action = action;\n      return;\n    }\n\n    // remove action to prevent error when trying to \"perform\" it again in mousemove\n    this.action = null;\n\n    this.dragCtx = {\n      xy0: this.editor.render.page2obj(event),\n      item: closestGroupItem,\n    };\n  }\n\n  mousemove(event) {\n    this.mergeItems = null;\n    this.editor.hover(null);\n    if (isMovePreviewCalculationInProgress) {\n      return;\n    }\n    isMovePreviewCalculationInProgress = true;\n    if (this.action) {\n      this.action?.perform(this.restruct);\n    }\n\n    if (this.dragCtx) {\n      // template-like logic for group-on-group actions\n      let pos0: Vec2 | null | undefined = null;\n      const pos1 = this.editor.render.page2obj(event);\n\n      const extraBond = true;\n\n      const struct = this.editor.struct();\n      const targetGroup = struct.sgroups.get(this.dragCtx.item.id);\n      const atomId = targetGroup?.getAttachmentAtomId();\n\n      if (atomId !== undefined) {\n        const atom = this.editor.struct().atoms.get(atomId);\n        pos0 = atom?.pp;\n      }\n\n      // calc angle\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      let angle = vectorUtils.calcAngle(pos0!, pos1);\n\n      if (!event.ctrlKey) {\n        angle = vectorUtils.fracAngle(angle, null);\n      }\n\n      const degrees = vectorUtils.degrees(angle);\n\n      // check if anything changed since last time\n      if (\n        // TODO fix the ignored rule\n        // eslint-disable-next-line no-prototype-builtins\n        this.dragCtx.hasOwnProperty('angle') &&\n        this.dragCtx.angle === degrees\n      ) {\n        requestAnimationFrame(() => {\n          isMovePreviewCalculationInProgress = false;\n        });\n        return;\n      }\n\n      if (this.dragCtx.action) {\n        this.dragCtx.action.perform(this.restruct);\n      }\n\n      this.dragCtx.angle = degrees;\n\n      const [action] = fromTemplateOnAtom(\n        this.restruct,\n        prepareTemplateFromSingleGroup(this.struct),\n        atomId,\n        angle,\n        extraBond,\n      );\n\n      this.dragCtx.action = action;\n      this.editor.update(this.dragCtx.action, true);\n    } else {\n      // common paste logic\n      const [action, pasteItems] = fromPaste(\n        this.restruct,\n        this.struct,\n        this.editor.render.page2obj(event),\n      );\n      this.action = action;\n      this.editor.update(this.action, true);\n      const visiblePasteItems = filterNotInContractedSGroup(\n        pasteItems,\n        this.editor.struct(),\n      );\n\n      debouncedSetAndHoverMergeItems(this.editor, visiblePasteItems, this);\n    }\n\n    requestAnimationFrame(() => {\n      isMovePreviewCalculationInProgress = false;\n    });\n  }\n\n  mouseup() {\n    const idsOfItemsMerged = this.mergeItems && {\n      ...(this.mergeItems.atoms && {\n        atoms: Array.from(this.mergeItems.atoms.values()),\n      }),\n      ...(this.mergeItems.bonds && {\n        bonds: Array.from(this.mergeItems.bonds.values()),\n      }),\n    };\n\n    const groupsIdsInvolvedInMerge = getGroupIdsFromItemArrays(\n      this.editor.struct(),\n      idsOfItemsMerged,\n    );\n\n    if (groupsIdsInvolvedInMerge.length) {\n      this.editor.event.removeFG.dispatch({ fgIds: groupsIdsInvolvedInMerge });\n      return;\n    }\n\n    if (this.dragCtx) {\n      const dragCtx = this.dragCtx;\n      delete this.dragCtx;\n\n      dragCtx.action = dragCtx.action\n        ? fromItemsFuse(this.restruct, dragCtx.mergeItems).mergeWith(\n            dragCtx.action,\n          )\n        : fromItemsFuse(this.restruct, dragCtx.mergeItems);\n\n      this.editor.hover(null);\n      this.editor.update(dragCtx.action);\n      this.editor.event.message.dispatch({ info: false });\n    } else {\n      // need to delete action first, because editor.update calls this.cancel() and thus action revert ๐คฆโโ๏ธ\n      const action = this.action;\n      delete this.action;\n      if (!this.isSingleContractedGroup || !this.mergeItems) {\n        dropAndMerge(this.editor, this.mergeItems, action);\n      }\n    }\n  }\n\n  cancel() {\n    const rnd = this.editor.render;\n    this.editor.hover(null);\n\n    if (this.action) {\n      this.action.perform(rnd.ctab); // revert the action\n      delete this.action;\n      rnd.update();\n    }\n  }\n\n  mouseleave() {\n    this.cancel();\n  }\n\n  mouseLeaveClientArea() {\n    this.cancel();\n  }\n}\n\ntype Template = {\n  aid?: number;\n  molecule?: Struct;\n  xy0?: Vec2;\n  angle0?: number;\n};\n\n/** Adds position and angle info to the molecule, similar to Template tool native behavior */\nfunction prepareTemplateFromSingleGroup(molecule: Struct): Template | null {\n  const template: Template = {};\n  const sgroup = molecule.sgroups.get(0);\n  const xy0 = new Vec2();\n\n  molecule.atoms.forEach((atom) => {\n    xy0.add_(atom.pp); // eslint-disable-line no-underscore-dangle\n  });\n\n  template.aid = sgroup?.getAttachmentAtomId() || 0;\n  template.molecule = molecule;\n  template.xy0 = xy0.scaled(1 / (molecule.atoms.size || 1)); // template center\n\n  const atom = molecule.atoms.get(template.aid);\n  if (atom) {\n    template.angle0 = vectorUtils.calcAngle(atom.pp, template.xy0); // center tilt\n  }\n\n  return template;\n}\n\nexport default PasteTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Atom,\n  fromAtomAddition,\n  fromAtomsAttrs,\n  FunctionalGroup,\n  KetcherLogger,\n} from 'ketcher-core';\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\n\nclass RGroupAtomTool implements Tool {\n  private readonly editor: Editor;\n\n  constructor(editor) {\n    // TODO: map atoms with labels\n    editor.selection(null);\n    this.editor = editor;\n  }\n\n  mousemove(event) {\n    const struct = this.editor.render.ctab.molecule;\n    const ci = this.editor.findItem(event, ['atoms']);\n\n    if (ci) {\n      const atom = struct.atoms.get(ci.id);\n      if (atom?.attachmentPoints === null) {\n        this.editor.hover(ci, null, event);\n      }\n    } else {\n      this.editor.hover(null);\n    }\n  }\n\n  click(event) {\n    const struct = this.editor.render.ctab;\n    const molecule = struct.molecule;\n    const functionalGroups = molecule.functionalGroups;\n    const rnd = this.editor.render;\n    const ci = this.editor.findItem(event, ['atoms']);\n    const atomResult: Array<number> = [];\n    const result: Array<number> = [];\n\n    if (ci && functionalGroups && ci.map === 'atoms') {\n      const atomId = FunctionalGroup.atomsInFunctionalGroup(\n        functionalGroups,\n        ci.id,\n      );\n      const isAtomSuperatomLeavingGroup = Atom.isSuperatomLeavingGroupAtom(\n        molecule,\n        ci.id,\n      );\n      if (isAtomSuperatomLeavingGroup) {\n        return;\n      }\n      if (atomId !== null) {\n        atomResult.push(atomId);\n      }\n    }\n\n    if (atomResult.length > 0) {\n      for (const id of atomResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      if (result.length > 0) {\n        this.editor.event.removeFG.dispatch({ fgIds: result });\n        return;\n      }\n    }\n\n    if (!ci) {\n      //  ci.type == 'Canvas'\n      this.editor.hover(null);\n      propsDialog(this.editor, null, rnd.page2obj(event));\n      return true;\n    } else if (ci.map === 'atoms') {\n      const struct = this.editor.render.ctab.molecule;\n      const atom = struct.atoms.get(ci.id);\n      this.editor.hover(this.editor.findItem(event, ['atoms']), null, event);\n\n      if (atom?.attachmentPoints !== null) {\n        return;\n      }\n\n      propsDialog(this.editor, ci.id, null);\n      return true;\n    }\n    return true;\n  }\n}\n\nfunction propsDialog(editor, id, pos) {\n  const struct = editor.render.ctab.molecule;\n  const atom = id || id === 0 ? struct.atoms.get(id) : null;\n  const rglabel = atom ? atom.rglabel : 0;\n  const label = atom ? atom.label : 'R#';\n\n  const res = editor.event.elementEdit.dispatch({\n    label: 'R#',\n    rglabel,\n    fragId: atom ? atom.fragment : null,\n  });\n\n  Promise.resolve(res)\n    .then((elem) => {\n      // TODO review: using Atom.attrlist as a source of default property values\n      elem = Object.assign({}, Atom.attrlist, elem);\n\n      if (!id && id !== 0 && elem.rglabel) {\n        editor.update(fromAtomAddition(editor.render.ctab, pos, elem));\n      } else if (rglabel !== elem.rglabel) {\n        elem.aam = atom.aam; // WTF??\n        elem.attachmentPoints = atom.attachmentPoints;\n\n        if (!elem.rglabel && label !== 'R#') {\n          elem.label = label;\n        }\n\n        editor.update(fromAtomsAttrs(editor.render.ctab, id, elem, false));\n      }\n    })\n    .catch((e) => {\n      KetcherLogger.error('rgroupatom.ts:propsDialog', e);\n    }); // w/o changes\n}\n\nexport default RGroupAtomTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  RGroup,\n  fromRGroupAttrs,\n  fromRGroupFragment,\n  fromUpdateIfThen,\n  FunctionalGroup,\n  KetcherLogger,\n} from 'ketcher-core';\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\n\nclass RGroupFragmentTool implements Tool {\n  private readonly editor: Editor;\n\n  constructor(editor) {\n    // TODO: check if it's a fragments already\n    editor.selection(null);\n    this.editor = editor;\n  }\n\n  mousemove(event) {\n    this.editor.hover(\n      this.editor.findItem(event, ['frags', 'rgroups']),\n      null,\n      event,\n    );\n  }\n\n  click(event) {\n    const struct = this.editor.render.ctab;\n    const molecule = struct.molecule;\n    const functionalGroups = molecule.functionalGroups;\n    const editor = this.editor;\n    const ci = editor.findItem(event, ['frags', 'rgroups']);\n    const ce = editor.findItem(event, ['atoms', 'bonds']);\n    const atomResult: Array<number> = [];\n    const bondResult: Array<number> = [];\n    const result: Array<number> = [];\n\n    if (ce && functionalGroups && ce.map === 'atoms') {\n      const atomId = FunctionalGroup.atomsInFunctionalGroup(\n        functionalGroups,\n        ce.id,\n      );\n\n      if (atomId !== null) {\n        atomResult.push(atomId);\n      }\n    }\n\n    if (ce && functionalGroups && ce.map === 'bonds') {\n      const bondId = FunctionalGroup.bondsInFunctionalGroup(\n        molecule,\n        functionalGroups,\n        ce.id,\n      );\n\n      if (bondId !== null) {\n        bondResult.push(bondId);\n      }\n    }\n\n    if (atomResult.length > 0) {\n      for (const id of atomResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByAtom(\n          functionalGroups,\n          id,\n        );\n\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      if (result.length > 0) {\n        this.editor.event.removeFG.dispatch({ fgIds: result });\n        return;\n      }\n    } else if (bondResult.length > 0) {\n      for (const id of bondResult) {\n        const fgId = FunctionalGroup.findFunctionalGroupByBond(\n          molecule,\n          functionalGroups,\n          id,\n        );\n\n        if (fgId !== null && !result.includes(fgId)) {\n          result.push(fgId);\n        }\n      }\n      this.editor.event.removeFG.dispatch({ fgIds: result });\n      return;\n    }\n\n    if (!ci) {\n      return true;\n    }\n\n    this.editor.hover(null);\n\n    const label =\n      ci.map === 'rgroups'\n        ? ci.id\n        : RGroup.findRGroupByFragment(molecule.rgroups, ci.id);\n\n    const rg = Object.assign(\n      { label },\n      ci.map === 'frags' ? { fragId: ci.id } : molecule.rgroups.get(ci.id),\n    );\n\n    const res = editor.event.rgroupEdit.dispatch(rg);\n\n    Promise.resolve(res)\n      .then((newRg) => {\n        let action;\n\n        if (ci.map !== 'rgroups') {\n          const rgidOld = RGroup.findRGroupByFragment(\n            struct.molecule.rgroups,\n            ci.id,\n          );\n          action = fromRGroupFragment(struct, newRg.label, ci.id).mergeWith(\n            fromUpdateIfThen(struct, newRg.label, rgidOld),\n          );\n        } else {\n          action = fromRGroupAttrs(struct, ci.id, newRg);\n        }\n\n        editor.update(action);\n      })\n      .catch((e) => {\n        KetcherLogger.error('rgroupfragment.ts::RGroupFragmentTool::click', e);\n      }); // w/o changes\n\n    return true;\n  }\n\n  cancel() {\n    this.editor.hover(null);\n  }\n}\n\nexport default RGroupFragmentTool;\n","import {\n  Vec2,\n  CoordinateTransformation,\n  RxnArrowMode,\n  Action,\n  fromArrowAddition,\n  fromArrowDeletion,\n  fromArrowResizing,\n} from 'ketcher-core';\nimport { Editor } from '../../Editor';\nimport assert from 'assert';\nimport { ArrowAddTool } from './arrow.types';\n\ninterface BaseDragContext {\n  p0: Vec2;\n}\n\ninterface InitialDragContext extends BaseDragContext {\n  p0: Vec2;\n  action: null;\n  itemId: null;\n}\n\ninterface DragContextInProgress extends BaseDragContext {\n  action: Action;\n  itemId: number;\n}\n\ntype ReactionArrowDragContext = InitialDragContext | DragContextInProgress;\n\nexport class ReactionArrowAddTool implements ArrowAddTool {\n  static MIN_LENGTH = 0.5;\n  static DEFAULT_LENGTH = 1;\n\n  private dragCtx: ReactionArrowDragContext | null = null;\n\n  // eslint-disable-next-line no-useless-constructor\n  constructor(private editor: Editor, private mode: RxnArrowMode) {}\n\n  private get render() {\n    return this.editor.render;\n  }\n\n  private get reStruct() {\n    return this.render.ctab;\n  }\n\n  mousedown(event: MouseEvent) {\n    this.dragCtx = {\n      p0: CoordinateTransformation.pageToModel(event, this.render),\n      action: null,\n      itemId: null,\n    };\n  }\n\n  mousemove(event: MouseEvent) {\n    if (!this.dragCtx) return;\n    const current = CoordinateTransformation.pageToModel(event, this.render);\n    const diff = current.sub(this.dragCtx.p0);\n    if (!this.dragCtx.action) {\n      const action = fromArrowAddition(\n        this.reStruct,\n        [this.dragCtx.p0, this.dragCtx.p0],\n        this.mode,\n      );\n      // TODO: need to rework  actions/operations logic\n      this.dragCtx = {\n        ...this.dragCtx,\n        itemId: action.operations[0].data.id,\n        action,\n      };\n      this.editor.update(this.dragCtx.action, true);\n    } else {\n      this.dragCtx.action.perform(this.reStruct);\n    }\n\n    this.updateResizingState(this.dragCtx.itemId, true);\n    const isSnappingEnabled = !event.ctrlKey;\n    this.dragCtx.action = fromArrowResizing(\n      this.reStruct,\n      this.dragCtx.itemId,\n      diff,\n      current,\n      null,\n      isSnappingEnabled,\n    );\n    this.editor.update(this.dragCtx.action, true);\n  }\n\n  mouseup(event: MouseEvent) {\n    if (!this.dragCtx) return;\n    if (this.dragCtx.action) {\n      this.dragCtx = this.addNewArrowWithDragging(this.dragCtx);\n      this.editor.update(this.dragCtx.action);\n    } else {\n      this.addNewArrowWithClicking(event);\n    }\n    this.dragCtx = null;\n  }\n\n  private getArrowWithMinimalLengthEnd(start: Vec2, end: Vec2 | null): Vec2 {\n    if (!end) {\n      return new Vec2(start.x + ReactionArrowAddTool.DEFAULT_LENGTH, start.y);\n    }\n    const length = Vec2.dist(start, end);\n    return length < ReactionArrowAddTool.MIN_LENGTH\n      ? new Vec2(\n          Vec2.findSecondPoint(\n            start,\n            ReactionArrowAddTool.DEFAULT_LENGTH,\n            Vec2.oxAngleForVector(start, end),\n          ),\n        )\n      : end;\n  }\n\n  private addNewArrowWithDragging(\n    dragContext: DragContextInProgress,\n  ): DragContextInProgress {\n    const item = this.reStruct.molecule.rxnArrows.get(dragContext.itemId);\n    assert(item != null);\n    let [p0, p1] = item.pos;\n    p1 = this.getArrowWithMinimalLengthEnd(p0, p1);\n    this.editor.update(\n      fromArrowDeletion(this.reStruct, dragContext.itemId),\n      true,\n    );\n    return {\n      ...dragContext,\n      action: fromArrowAddition(this.reStruct, [p0, p1], this.mode),\n    };\n  }\n\n  private addNewArrowWithClicking(event) {\n    const ci = this.editor.findItem(event, ['rxnArrows']);\n    const p0 = this.render.page2obj(event);\n\n    if (!ci) {\n      const pos = [p0, this.getArrowWithMinimalLengthEnd(p0, null)];\n      this.editor.update(fromArrowAddition(this.reStruct, pos, this.mode));\n    }\n  }\n\n  private updateResizingState(arrowId: number, isResizing: boolean) {\n    const reArrow = this.reStruct.rxnArrows.get(arrowId);\n    assert(reArrow != null);\n    reArrow.isResizing = isResizing;\n  }\n}\n","import {\n  CoordinateTransformation,\n  Vec2,\n  fromMultitailArrowCreation,\n} from 'ketcher-core';\nimport { ArrowAddTool } from './arrow.types';\nimport Editor from '../../Editor';\n\nexport class MultitailArrowAddTool implements ArrowAddTool {\n  static MIN_HEIGHT = 2.5;\n  static MIN_WIDTH = 1.2;\n\n  // eslint-disable-next-line no-useless-constructor\n  constructor(private editor: Editor) {}\n\n  private get render() {\n    return this.editor.render;\n  }\n\n  private get reStruct() {\n    return this.render.ctab;\n  }\n\n  mousedown() {\n    // should be empty\n  }\n\n  mousemove() {\n    // should be empty\n  }\n\n  mouseup(event: MouseEvent) {\n    const click = CoordinateTransformation.pageToModel(event, this.render);\n    const start = new Vec2(click.x, click.y - MultitailArrowAddTool.MIN_HEIGHT);\n    const end = this.getArrowWithMinimalSizeEnd(start);\n\n    this.editor.update(fromMultitailArrowCreation(this.reStruct, start, end));\n  }\n\n  private getArrowWithMinimalSizeEnd(start: Vec2): Vec2 {\n    return new Vec2(\n      start.x + MultitailArrowAddTool.MIN_WIDTH,\n      start.y + MultitailArrowAddTool.MIN_HEIGHT,\n    );\n  }\n}\n","import { Tool } from '../Tool';\nimport Editor from '../../Editor';\nimport {\n  MULTITAIL_ARROW_KEY,\n  MULTITAIL_ARROW_TOOL_NAME,\n  RxnArrowMode,\n} from 'ketcher-core';\nimport {\n  ArrowAddTool,\n  ArrowMoveTool,\n  CommonArrowDragContext,\n  MultitailArrowClosestItem,\n  ReactionArrowClosestItem,\n} from './arrow.types';\nimport { ReactionArrowAddTool } from './reactionArrowAdd';\nimport { MultitailArrowAddTool } from './multitailArrowAdd';\nimport { handleMovingPosibilityCursor } from '../../utils';\nimport { MultitailArrowMoveTool } from './multitailArrowMoveTool';\nimport { ArrowTool } from './arrowTool';\nimport { ReactionArrowMoveTool } from './reactionArrowMoveTool';\nimport { getItemCursor } from '../../utils/getItemCursor';\n\nexport class CommonArrowTool extends ArrowTool implements Tool {\n  static isDragContextMultitail(\n    dragContext: CommonArrowDragContext<\n      MultitailArrowClosestItem | ReactionArrowClosestItem\n    >,\n  ): dragContext is CommonArrowDragContext<MultitailArrowClosestItem> {\n    return dragContext.closestItem.map === MULTITAIL_ARROW_KEY;\n  }\n\n  static isDragContextReaction(\n    dragContext: CommonArrowDragContext<\n      MultitailArrowClosestItem | ReactionArrowClosestItem\n    >,\n  ): dragContext is CommonArrowDragContext<ReactionArrowClosestItem> {\n    return dragContext.closestItem.map === 'rxnArrows';\n  }\n\n  private dragContext:\n    | CommonArrowDragContext<\n        MultitailArrowClosestItem | ReactionArrowClosestItem\n      >\n    | 'add'\n    | null = null;\n\n  private addTool: ArrowAddTool;\n  private multitailMoveTool: ArrowMoveTool<MultitailArrowClosestItem>;\n  private reactionMoveTool: ArrowMoveTool<ReactionArrowClosestItem>;\n\n  constructor(\n    editor: Editor,\n    mode: RxnArrowMode | typeof MULTITAIL_ARROW_TOOL_NAME,\n  ) {\n    super(editor);\n    this.multitailMoveTool = new MultitailArrowMoveTool(this.editor);\n    this.reactionMoveTool = new ReactionArrowMoveTool(this.editor);\n    this.editor.selection(null);\n    this.addTool =\n      mode === MULTITAIL_ARROW_TOOL_NAME\n        ? new MultitailArrowAddTool(this.editor)\n        : new ReactionArrowAddTool(this.editor, mode);\n  }\n\n  mousedown(event: PointerEvent) {\n    const closestItem = this.editor.findItem(event, [\n      'rxnArrows',\n      MULTITAIL_ARROW_KEY,\n    ]) as ReactionArrowClosestItem | MultitailArrowClosestItem;\n\n    if (closestItem) {\n      this.dragContext =\n        closestItem.map === MULTITAIL_ARROW_KEY\n          ? this.multitailMoveTool.mousedown(event, closestItem)\n          : this.reactionMoveTool.mousedown(event, closestItem);\n\n      this.editor.hover(null);\n      this.editor.selection({ [closestItem.map]: [closestItem.id] });\n    } else {\n      this.dragContext = 'add';\n      this.addTool.mousedown(event);\n      this.editor.selection(null);\n    }\n  }\n\n  mousemove(event: PointerEvent) {\n    if (!this.dragContext) {\n      const closestItem = this.editor.findItem(event, [\n        'rxnArrows',\n        MULTITAIL_ARROW_KEY,\n      ]) as ReactionArrowClosestItem | MultitailArrowClosestItem;\n      this.editor.hover(closestItem, null, event);\n      handleMovingPosibilityCursor(\n        closestItem,\n        this.render.paper.canvas,\n        getItemCursor(this.render, closestItem),\n      );\n      return;\n    }\n    if (this.dragContext === 'add') {\n      return this.addTool.mousemove(event);\n    }\n\n    if (this.dragContext.action) {\n      this.dragContext.action.perform(this.reStruct);\n    }\n    if (CommonArrowTool.isDragContextMultitail(this.dragContext)) {\n      this.dragContext.action = this.multitailMoveTool.mousemove(\n        event,\n        this.dragContext,\n      );\n    } else {\n      // Otherwise build fails during prod build but not dev\n      const dragContext = this\n        .dragContext as CommonArrowDragContext<ReactionArrowClosestItem>;\n      dragContext.action = this.reactionMoveTool.mousemove(event, dragContext);\n    }\n    if (this.dragContext.action) {\n      this.editor.update(this.dragContext.action, true);\n    }\n  }\n\n  mouseup(event: PointerEvent) {\n    try {\n      if (!this.dragContext) return;\n      if (this.dragContext === 'add') {\n        return this.addTool.mouseup(event);\n      }\n      if (CommonArrowTool.isDragContextMultitail(this.dragContext)) {\n        this.dragContext.action = this.multitailMoveTool.mouseup(\n          event,\n          this.dragContext,\n        );\n      } else {\n        // Otherwise build fails during prod build but not dev\n        const dragContext = this\n          .dragContext as CommonArrowDragContext<ReactionArrowClosestItem>;\n        dragContext.action = this.reactionMoveTool.mouseup(event, dragContext);\n      }\n      const { action } = this.dragContext;\n      if (action) {\n        this.editor.update(true);\n        this.editor.update(action);\n      }\n    } finally {\n      this.dragContext = null;\n    }\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Action, Scale, fromAtomsAttrs } from 'ketcher-core';\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\n\nclass ReactionMapTool implements Tool {\n  private readonly editor: Editor;\n  private dragCtx: any;\n  private line: any;\n\n  constructor(editor) {\n    this.editor = editor;\n    this.editor.selection(null);\n  }\n\n  mousedown(event) {\n    const rnd = this.editor.render;\n\n    const closestItem = this.editor.findItem(event, ['atoms']);\n\n    if (closestItem?.map === 'atoms') {\n      this.editor.hover(null);\n      this.dragCtx = {\n        item: closestItem,\n        xy0: rnd.page2obj(event),\n      };\n    }\n  }\n\n  mousemove(event) {\n    const editor = this.editor;\n    const rnd = editor.render;\n\n    if ('dragCtx' in this) {\n      const closestItem = this.editor.findItem(\n        event,\n        ['atoms'],\n        this.dragCtx.item,\n      );\n      const atoms = rnd.ctab.molecule.atoms;\n\n      if (closestItem?.map === 'atoms') {\n        editor.hover(closestItem);\n        this.updateLine(\n          atoms.get(this.dragCtx.item.id)?.pp,\n          atoms.get(closestItem.id)?.pp,\n        );\n      } else {\n        editor.hover(null);\n        this.updateLine(\n          atoms.get(this.dragCtx.item.id)?.pp,\n          rnd.page2obj(event),\n        );\n      }\n    } else {\n      editor.hover(editor.findItem(event, ['atoms']), null, event);\n    }\n  }\n\n  updateLine(p1, p2) {\n    if (this.line) {\n      this.line.remove();\n      this.line = null;\n    }\n\n    if (p1 && p2) {\n      const rnd = this.editor.render;\n      this.line = rnd.selectionLine(\n        Scale.modelToCanvas(p1, rnd.options).add(rnd.options.offset),\n        Scale.modelToCanvas(p2, rnd.options).add(rnd.options.offset),\n      );\n    }\n  }\n\n  mouseup(event) {\n    if ('dragCtx' in this) {\n      const rnd = this.editor.render;\n      const closestItem = this.editor.findItem(event, ['atoms']);\n\n      if (closestItem?.map === 'atoms') {\n        const action = new Action();\n        const atoms = rnd.ctab.molecule.atoms;\n        const atom1 = atoms.get(this.dragCtx.item.id);\n        const atom2 = atoms.get(closestItem.id);\n        const aam1 = atom1?.aam;\n        const aam2 = atom2?.aam;\n\n        if (!aam1 || aam1 !== aam2) {\n          if ((aam1 && aam1 !== aam2) || (!aam1 && aam2)) {\n            // eslint-disable-line no-mixed-operators\n            atoms.forEach((atom, aid) => {\n              if (\n                aid !== this.dragCtx.item.id &&\n                ((aam1 && atom.aam === aam1) || (aam2 && atom.aam === aam2))\n              )\n                action.mergeWith(\n                  fromAtomsAttrs(rnd.ctab, aid, { aam: 0 }, null),\n                );\n            });\n          }\n\n          if (aam1) {\n            action.mergeWith(\n              fromAtomsAttrs(rnd.ctab, closestItem.id, { aam: aam1 }, null),\n            );\n          } else {\n            let aam = 0;\n            atoms.forEach((atom) => {\n              aam = Math.max(aam, atom.aam || 0);\n            });\n            action.mergeWith(\n              fromAtomsAttrs(\n                rnd.ctab,\n                this.dragCtx.item.id,\n                { aam: aam + 1 },\n                null,\n              ),\n            );\n            action.mergeWith(\n              fromAtomsAttrs(rnd.ctab, closestItem.id, { aam: aam + 1 }, null),\n            );\n          }\n          this.editor.update(action);\n        }\n      }\n      this.updateLine(null, null);\n      delete this.dragCtx;\n    }\n    this.editor.hover(this.editor.findItem(event, ['atoms']), null, event);\n  }\n}\n\nexport default ReactionMapTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { fromMultipleMove, fromPlusAddition } from 'ketcher-core';\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\nimport { handleMovingPosibilityCursor } from '../utils';\n\nclass ReactionPlusTool implements Tool {\n  private readonly editor: Editor;\n  private dragCtx: any;\n\n  constructor(editor) {\n    this.editor = editor;\n    this.editor.selection(null);\n  }\n\n  mousedown(event) {\n    const rnd = this.editor.render;\n    const ci = this.editor.findItem(event, ['rxnPluses']);\n\n    if (ci && ci.map === 'rxnPluses') {\n      this.editor.hover(null);\n      this.editor.selection({ rxnPluses: [ci.id] });\n      this.dragCtx = { xy0: rnd.page2obj(event) };\n    }\n  }\n\n  mousemove(event) {\n    const editor = this.editor;\n    const rnd = editor.render;\n\n    if ('dragCtx' in this) {\n      if (this.dragCtx.action) {\n        this.dragCtx.action.perform(rnd.ctab);\n      }\n\n      this.dragCtx.action = fromMultipleMove(\n        rnd.ctab,\n        this.editor.selection() || {},\n        rnd.page2obj(event).sub(this.dragCtx.xy0),\n      );\n      editor.update(this.dragCtx.action, true);\n    } else {\n      const item = editor.findItem(event, ['rxnPluses']);\n      editor.hover(item, null, event);\n\n      handleMovingPosibilityCursor(\n        item,\n        editor.render.paper.canvas,\n        editor.render.options.movingStyle.cursor as string,\n      );\n    }\n  }\n\n  mouseup() {\n    if (!this.dragCtx) {\n      return true;\n    }\n\n    if (this.dragCtx.action) {\n      this.editor.update(this.dragCtx.action); // TODO investigate, subsequent undo/redo fails\n    }\n\n    delete this.dragCtx;\n    return true;\n  }\n\n  click(event) {\n    const rnd = this.editor.render;\n    const ci = this.editor.findItem(event, ['rxnPluses']);\n\n    if (!ci) {\n      this.editor.update(fromPlusAddition(rnd.ctab, rnd.page2obj(event)));\n    }\n  }\n}\n\nexport default ReactionPlusTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Action, fromAtomsAttrs } from 'ketcher-core';\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\n\nclass ReactionUnmapTool implements Tool {\n  private readonly editor: Editor;\n\n  constructor(editor) {\n    this.editor = editor;\n    this.editor.selection(null);\n  }\n\n  mousemove(event) {\n    const ci = this.editor.findItem(event, ['atoms']);\n\n    if (ci && ci.map === 'atoms') {\n      this.editor.hover(\n        this.editor.render.ctab.molecule.atoms.get(ci.id)?.aam ? ci : null,\n        null,\n        event,\n      );\n    } else {\n      this.editor.hover(null);\n    }\n  }\n\n  mouseup(event) {\n    const ci = this.editor.findItem(event, ['atoms']);\n    const atoms = this.editor.render.ctab.molecule.atoms;\n\n    if (ci && ci.map === 'atoms' && atoms.get(ci.id)?.aam) {\n      const action = new Action();\n      const aam = atoms.get(ci.id)?.aam;\n      atoms.forEach((atom, aid) => {\n        if (atom.aam === aam) {\n          action.mergeWith(\n            fromAtomsAttrs(this.editor.render.ctab, aid, { aam: 0 }, null),\n          );\n        }\n      });\n      this.editor.update(action);\n    }\n    this.editor.hover(this.editor.findItem(event, ['atoms']), null, event);\n  }\n}\n\nexport default ReactionUnmapTool;\n","/**\n * @param {number} angle angle (in radians) from the X axis\n * @returns {number} normalized angle (in radians) from the X axis\n * @example\n * normalizeAngleRelativeToXAxis(PI / 2) === PI / 2\n * normalizeAngleRelativeToXAxis(PI) === PI\n * normalizeAngleRelativeToXAxis(3/2 * PI) === -PI / 2\n * normalizeAngleRelativeToXAxis(2 * PI) === 0\n * normalizeAngleRelativeToXAxis(3 * PI) === PI\n */\nexport function normalizeAngle(angle) {\n  const angleWithinFullCircle = angle % (2 * Math.PI);\n  if (angleWithinFullCircle > Math.PI) {\n    return angleWithinFullCircle - 2 * Math.PI;\n  }\n  if (angleWithinFullCircle <= -Math.PI) {\n    return angleWithinFullCircle + 2 * Math.PI;\n  }\n  return angleWithinFullCircle;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Action,\n  Atom,\n  Bond,\n  FlipDirection,\n  FunctionalGroup,\n  Vec2,\n  fromFlip,\n  fromItemsFuse,\n  fromRotate,\n  getHoverToFuse,\n  getItemsToFuse,\n  isAttachmentBond,\n  vectorUtils,\n} from 'ketcher-core';\nimport assert from 'assert';\nimport { intersection, throttle } from 'lodash';\nimport Editor, { Selection } from '../Editor';\nimport { Tool } from './Tool';\nimport { normalizeAngle } from '../utils/normalizeAngle';\n\ntype SnapMode = 'one-bond' | 'multiple-bonds';\ntype SnapInfo = {\n  snapMode: SnapMode;\n  rotatableHalfBondAngle: number;\n  absoluteSnapAngles: number[];\n  snapAngleToHalfBonds: Map<number, number[]>;\n  snapAngleDrawingProps: {\n    isSnapping: boolean;\n    absoluteAngle: number;\n    relativeAngle: number;\n  } | null;\n};\n\nconst SNAP_ANGLES_RELATIVE_TO_FIXED_BOND = [\n  Math.PI / 2,\n  -Math.PI / 2,\n  (2 * Math.PI) / 3,\n  -(2 * Math.PI) / 3,\n  Math.PI,\n]; // 90, -90, 120, -120, 180 degrees\nconst MAX_SNAP_DELTA = Math.PI / 18; // 10 degrees\nconst ANGLE_INDICATOR_VISIBLE_DELTA = Math.PI / 9; // 20 degrees\n\nclass RotateTool implements Tool {\n  private readonly editor: Editor;\n  dragCtx: any;\n  isNotActiveTool = true;\n  private centerAtomId?: number;\n  private snapInfo: SnapInfo | null = null;\n\n  constructor(editor: Editor, flipDirection?: FlipDirection) {\n    this.editor = editor;\n\n    if (flipDirection) {\n      const selectionCenter = this.getCenter();\n      const canvasCenter = this.reStruct.getVBoxObj().centre();\n      const action = fromFlip(\n        this.reStruct,\n        this.selection,\n        flipDirection,\n        selectionCenter || canvasCenter,\n      );\n      editor.update(action);\n      editor.rotateController.rerender();\n    }\n  }\n\n  private get reStruct() {\n    return this.editor.render.ctab;\n  }\n\n  private get struct() {\n    return this.reStruct.molecule;\n  }\n\n  private get selection() {\n    return this.editor.selection();\n  }\n\n  public get snapAngleDrawingProps() {\n    if (this.snapInfo?.snapAngleDrawingProps) {\n      return {\n        snapMode: this.snapInfo.snapMode,\n        ...this.snapInfo.snapAngleDrawingProps,\n      };\n    }\n    return null;\n  }\n\n  mousedownHandle(handleCenter: Vec2, center: Vec2) {\n    this.dragCtx = {\n      xy0: center,\n      angle1: vectorUtils.calcAngle(center, handleCenter),\n    };\n    this.initSnapInfo();\n  }\n\n  getCenter() {\n    if (!this.selection) {\n      return;\n    }\n\n    let center: Vec2 | undefined;\n    const visibleAtoms = this.struct.getSelectedVisibleAtoms(this.selection);\n\n    const attachmentBonds = this.struct.bonds.filter((_bondId, bond) => {\n      assert(this.selection != null);\n      return isAttachmentBond(bond, this.selection);\n    });\n\n    if (attachmentBonds.size > 1) {\n      /**\n       *  Handle multiple attachment bonds with one intersection:\n       *               0    (selected atom)\n       *             / | \\  (bonds)\n       */\n      const bondPoints: [number, number][] = [];\n      attachmentBonds.forEach((bond) => {\n        bondPoints.push([bond.begin, bond.end]);\n      });\n      const intersectionAtoms = intersection(...bondPoints);\n      if (\n        intersectionAtoms.length === 1 &&\n        visibleAtoms.includes(intersectionAtoms[0])\n      ) {\n        this.centerAtomId = intersectionAtoms[0];\n        center = this.struct.atoms.get(this.centerAtomId)?.pp;\n      }\n    } else if (attachmentBonds.size === 1) {\n      /**\n       * Handle one attachment bond:\n       * 1. the bond is unselected\n       *          0  (selected atom) --> center\n       *          |  (unselected bond)\n       *          o  (unselected atom)\n       * 2. the bond is selected\n       *          0  (selected atom)\n       *          |  (selected bond)\n       *          o  (unselected atom) --> center\n       */\n      const attachmentBondId = attachmentBonds.keys().next().value as number;\n      const attachmentBond = attachmentBonds.get(attachmentBondId) as Bond;\n      this.centerAtomId = [attachmentBond.begin, attachmentBond.end].find(\n        (atomId) =>\n          this.selection?.bonds?.includes(attachmentBondId)\n            ? !visibleAtoms.includes(atomId)\n            : visibleAtoms.includes(atomId),\n      ) as number;\n      center = this.struct.atoms.get(this.centerAtomId)?.pp;\n    }\n\n    const { texts, rxnArrows, rxnPluses } = this.selection;\n    if (\n      !center &&\n      (visibleAtoms.length ||\n        texts?.length ||\n        rxnArrows?.length ||\n        rxnPluses?.length)\n    ) {\n      center = this.reStruct.getSelectionBoxCenter({\n        atoms: visibleAtoms,\n        texts,\n        rxnArrows,\n        rxnPluses,\n      });\n    }\n\n    return center;\n  }\n\n  mousemove = throttle((event) => {\n    if (!this.dragCtx) {\n      this.editor.hover(null, null, event);\n      return true;\n    }\n\n    const dragCtx = this.dragCtx;\n\n    const mousePos = this.editor.render.page2obj(event);\n    const mouseMoveAngle =\n      vectorUtils.calcAngle(dragCtx.xy0, mousePos) - dragCtx.angle1;\n\n    let rotateAngle = mouseMoveAngle;\n    this.reStruct.clearSnappingBonds();\n    if (this.snapInfo) {\n      this.snapInfo.snapAngleDrawingProps = null;\n    }\n    if (!event.ctrlKey) {\n      const [isSnapping, rotateAngleWithSnapping] = this.snap(mouseMoveAngle);\n      rotateAngle = isSnapping\n        ? rotateAngleWithSnapping\n        : vectorUtils.fracAngle(mouseMoveAngle, null);\n    }\n\n    const rotateAngleInDegrees = vectorUtils.degrees(rotateAngle);\n    if ('angle' in dragCtx && dragCtx.angle === rotateAngleInDegrees) {\n      return true;\n    }\n\n    if ('action' in dragCtx) {\n      dragCtx.action.perform(this.reStruct);\n    }\n\n    dragCtx.angle = rotateAngleInDegrees;\n    dragCtx.action = fromRotate(\n      this.reStruct,\n      this.selection,\n      dragCtx.xy0,\n      rotateAngle,\n    );\n\n    this.editor.event.message.dispatch({ info: rotateAngleInDegrees + 'ยบ' });\n\n    const expSel = this.editor.explicitSelected();\n    dragCtx.mergeItems = getItemsToFuse(this.editor, expSel);\n    this.editor.hover(getHoverToFuse(dragCtx.mergeItems), null, event);\n\n    this.editor.update(dragCtx.action, true);\n    return true;\n  }, 40); // 25fps\n\n  mouseup() {\n    if (!this.dragCtx) {\n      return true;\n    }\n\n    this.reStruct.clearSnappingBonds();\n    this.editor.update(true);\n\n    const dragCtx = this.dragCtx;\n\n    let isMergingSGroup = false;\n\n    const { atoms, bonds } = dragCtx.mergeItems ?? {};\n\n    atoms?.forEach((dst: number, src: number) => {\n      if (\n        this.struct.isAtomFromMacromolecule(src) ||\n        this.struct.isAtomFromMacromolecule(dst)\n      ) {\n        isMergingSGroup = true;\n      }\n    });\n    bonds?.forEach((dst: number, src: number) => {\n      if (\n        this.struct.isBondFromMacromolecule(src) ||\n        this.struct.isBondFromMacromolecule(dst)\n      ) {\n        isMergingSGroup = true;\n      }\n    });\n\n    let action: Action = dragCtx.action;\n\n    if (!isMergingSGroup) {\n      action = action\n        ? fromItemsFuse(this.reStruct, dragCtx.mergeItems).mergeWith(action)\n        : fromItemsFuse(this.reStruct, dragCtx.mergeItems);\n    }\n\n    delete this.dragCtx;\n    this.editor.update(action);\n\n    if (dragCtx.mergeItems) {\n      this.editor.selection(null);\n    }\n\n    this.editor.event.message.dispatch({\n      info: false,\n    });\n    return true;\n  }\n\n  cancel() {\n    this.mouseup();\n  }\n\n  mouseleave() {\n    this.mouseup();\n  }\n\n  private initSnapInfo() {\n    if (this.centerAtomId === undefined) {\n      this.snapInfo = null;\n      return;\n    }\n\n    const centerAtom = this.struct.atoms.get(this.centerAtomId);\n    assert(centerAtom != null);\n    const {\n      rotatableHalfBondIds,\n      rotatableHalfBondAngles,\n      fixedHalfBondIds,\n      fixedHalfBondAngles,\n    } = this.partitionNeighborsBySelection(this.selection, centerAtom);\n\n    // Don't support this case\n    if (rotatableHalfBondIds.length > 1) {\n      this.snapInfo = null;\n      return;\n    }\n\n    const rotatableHalfBondId = rotatableHalfBondIds[0];\n    const rotatableHalfBondAngle = rotatableHalfBondAngles[0];\n    const { absoluteSnapAngles, snapAngleToHalfBonds, snapMode } =\n      this.calculateAbsoluteSnapAngles(\n        fixedHalfBondIds,\n        fixedHalfBondAngles,\n        rotatableHalfBondId,\n      );\n\n    this.snapInfo = {\n      snapMode,\n      rotatableHalfBondAngle,\n      absoluteSnapAngles,\n      snapAngleToHalfBonds,\n      snapAngleDrawingProps: null,\n    };\n  }\n\n  private calculateAbsoluteSnapAngles(\n    fixedHalfBondIds: number[],\n    fixedHalfBondAngles: number[],\n    rotatableHalfBondId: number,\n  ) {\n    let snapMode: SnapMode = 'one-bond';\n    let absoluteSnapAngles: number[] = [];\n    let snapAngleToHalfBonds: Map<number, number[]> = new Map();\n    if (fixedHalfBondIds.length === 1) {\n      const fixedHalfBondId = fixedHalfBondIds[0];\n      const fixedHalfBondAngle = fixedHalfBondAngles[0];\n      [absoluteSnapAngles, snapAngleToHalfBonds] =\n        this.calculateAbsoluteAnglesByFixedBond(\n          fixedHalfBondId,\n          fixedHalfBondAngle,\n          rotatableHalfBondId,\n        );\n    } else if (fixedHalfBondIds.length > 1) {\n      snapMode = 'multiple-bonds';\n      [absoluteSnapAngles, snapAngleToHalfBonds] =\n        this.calculateAbsoluteAnglesByBisector(\n          fixedHalfBondIds,\n          fixedHalfBondAngles,\n          rotatableHalfBondId,\n        );\n    }\n    return { absoluteSnapAngles, snapAngleToHalfBonds, snapMode };\n  }\n\n  private calculateAbsoluteAnglesByFixedBond(\n    fixedHalfBondId: number,\n    fixedHalfBondAngle: number,\n    rotatableHalfBondId: number,\n  ) {\n    const absoluteSnapAngles: number[] = [];\n    const snapAngleToHalfBonds: Map<number, number[]> = new Map();\n    SNAP_ANGLES_RELATIVE_TO_FIXED_BOND.forEach((angle) => {\n      const snapAngle = normalizeAngle(fixedHalfBondAngle + angle);\n      absoluteSnapAngles.push(snapAngle);\n      snapAngleToHalfBonds.set(snapAngle, [\n        rotatableHalfBondId,\n        fixedHalfBondId,\n      ]);\n    });\n    return [absoluteSnapAngles, snapAngleToHalfBonds] as const;\n  }\n\n  private calculateAbsoluteAnglesByBisector(\n    fixedHalfBondIds: number[],\n    fixedHalfBondAngles: number[],\n    rotatableHalfBondId: number,\n  ) {\n    const absoluteSnapAngles: number[] = [];\n    const snapAngleToHalfBonds: Map<number, number[]> = new Map();\n    const length = fixedHalfBondIds.length;\n    for (let i = 0; i < length; i++) {\n      const previousHalfBondId = fixedHalfBondIds[i];\n      const previousHalfBondAngle = fixedHalfBondAngles[i];\n      for (let j = i + 1; j < length; j++) {\n        const currentHalfBondId = fixedHalfBondIds[j];\n        const currentHalfBondAngle = fixedHalfBondAngles[j];\n        const difference = currentHalfBondAngle - previousHalfBondAngle;\n        const bisectorAngle = normalizeAngle(\n          currentHalfBondAngle - difference / 2,\n        );\n        const snapAngle =\n          difference > Math.PI\n            ? bisectorAngle\n            : normalizeAngle(bisectorAngle + Math.PI);\n        absoluteSnapAngles.push(snapAngle);\n        snapAngleToHalfBonds.set(snapAngle, [\n          rotatableHalfBondId,\n          previousHalfBondId,\n          currentHalfBondId,\n        ]);\n      }\n    }\n    return [absoluteSnapAngles, snapAngleToHalfBonds] as const;\n  }\n\n  private partitionNeighborsBySelection(\n    selection: Selection | null,\n    atom: Atom,\n  ) {\n    const rotatableHalfBondIds: number[] = [];\n    const rotatableHalfBondAngles: number[] = [];\n    const fixedHalfBondIds: number[] = [];\n    const fixedHalfBondAngles: number[] = [];\n\n    atom.neighbors.forEach((halfBondId) => {\n      const halfBond = this.struct.halfBonds.get(halfBondId);\n      assert(halfBond != null);\n      const neighborAtomId = halfBond.end;\n      if (selection?.atoms?.includes(neighborAtomId)) {\n        if (\n          !FunctionalGroup.isHalfBondInContractedFunctionalGroup(\n            halfBond,\n            this.struct,\n          )\n        ) {\n          rotatableHalfBondIds.push(halfBondId);\n          rotatableHalfBondAngles.push(halfBond.ang);\n        }\n      } else {\n        fixedHalfBondIds.push(halfBondId);\n        fixedHalfBondAngles.push(halfBond.ang);\n      }\n    });\n\n    return {\n      rotatableHalfBondIds,\n      rotatableHalfBondAngles,\n      fixedHalfBondIds,\n      fixedHalfBondAngles,\n    };\n  }\n\n  private snap(mouseMoveAngle: number): [boolean, number] {\n    let isSnapping = false;\n    let rotateAngle = 0;\n    if (!this.snapInfo) {\n      return [isSnapping, rotateAngle];\n    }\n\n    const newRotatedHalfBondAngle = normalizeAngle(\n      this.snapInfo.rotatableHalfBondAngle + mouseMoveAngle,\n    );\n    this.snapInfo.absoluteSnapAngles.some((snapAngle, index) => {\n      if (Math.abs(newRotatedHalfBondAngle - snapAngle) <= MAX_SNAP_DELTA) {\n        isSnapping = true;\n        assert(this.snapInfo != null);\n        rotateAngle = snapAngle - this.snapInfo.rotatableHalfBondAngle;\n        this.saveSnappingBonds(snapAngle);\n        this.snapInfo.snapAngleDrawingProps = {\n          isSnapping,\n          absoluteAngle: snapAngle,\n          relativeAngle: SNAP_ANGLES_RELATIVE_TO_FIXED_BOND[index],\n        };\n        return true;\n      } else if (\n        Math.abs(newRotatedHalfBondAngle - snapAngle) <\n        ANGLE_INDICATOR_VISIBLE_DELTA\n      ) {\n        assert(this.snapInfo != null);\n        this.snapInfo.snapAngleDrawingProps = {\n          isSnapping,\n          absoluteAngle: snapAngle,\n          relativeAngle: SNAP_ANGLES_RELATIVE_TO_FIXED_BOND[index],\n        };\n        return true;\n      }\n      return false;\n    });\n\n    return [isSnapping, rotateAngle];\n  }\n\n  private saveSnappingBonds(snapAngle: number) {\n    const halfBondsToBeHighlighted =\n      this.snapInfo?.snapAngleToHalfBonds.get(snapAngle);\n    const bondIds = halfBondsToBeHighlighted?.map((halfBond) => {\n      const bondId = this.struct.getBondIdByHalfBond(halfBond);\n      assert(bondId != null);\n      return bondId;\n    });\n    bondIds?.forEach((bondId) => {\n      this.reStruct.addSnappingBonds(bondId);\n    });\n  }\n}\n\nexport default RotateTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  fromMultipleMove,\n  fromSimpleObjectAddition,\n  fromSimpleObjectDeletion,\n  fromSimpleObjectResizing,\n  SimpleObjectMode,\n} from 'ketcher-core';\nimport Editor from '../Editor';\nimport { Tool } from './Tool';\n\nclass SimpleObjectTool implements Tool {\n  private readonly mode: SimpleObjectMode;\n  private readonly editor: Editor;\n  private dragCtx: any;\n\n  constructor(editor: Editor, mode: SimpleObjectMode) {\n    this.mode = mode;\n    this.editor = editor;\n    this.editor.selection(null);\n  }\n\n  mousedown(event) {\n    const rnd = this.editor.render;\n    const p0 = rnd.page2obj(event);\n    this.dragCtx = { p0 };\n\n    const ci = this.editor.findItem(event, ['simpleObjects']);\n\n    if (ci && ci.map === 'simpleObjects') {\n      this.editor.hover(null);\n      this.editor.selection({ simpleObjects: [ci.id] });\n      this.dragCtx.ci = ci;\n    } else {\n      this.dragCtx.isNew = true;\n      this.editor.selection(null);\n    }\n  }\n\n  mousemove(event) {\n    const rnd = this.editor.render;\n\n    if (this.dragCtx) {\n      const current = rnd.page2obj(event);\n      const diff = current.sub(this.dragCtx.p0);\n      this.dragCtx.previous = current;\n\n      if (this.dragCtx.ci) {\n        if (this.dragCtx.action) {\n          this.dragCtx.action.perform(rnd.ctab);\n        }\n\n        if (!this.dragCtx.ci.ref) {\n          this.dragCtx.action = fromMultipleMove(\n            rnd.ctab,\n            this.editor.selection() || {},\n            diff,\n          );\n        } else {\n          this.dragCtx.action = fromSimpleObjectResizing(\n            rnd.ctab,\n            this.dragCtx.ci.id,\n            diff,\n            current,\n            this.dragCtx.ci.ref,\n            event.shiftKey,\n          );\n        }\n        this.editor.update(this.dragCtx.action, true);\n      } else {\n        if (!this.dragCtx.action) {\n          const action = fromSimpleObjectAddition(\n            rnd.ctab,\n            [this.dragCtx.p0, this.dragCtx.p0],\n            this.mode,\n            false,\n          );\n          // TODO: need to rework  actions/operations logic\n          const addOperation = action.operations[0];\n          this.dragCtx.itemId = addOperation.data.id;\n          this.dragCtx.action = action;\n          this.editor.update(this.dragCtx.action, true);\n        } else {\n          this.dragCtx.action.perform(rnd.ctab);\n        }\n\n        this.dragCtx.action = fromSimpleObjectResizing(\n          rnd.ctab,\n          this.dragCtx.itemId,\n          diff,\n          current,\n          null,\n          event.shiftKey,\n        );\n        this.editor.update(this.dragCtx.action, true);\n      }\n    } else {\n      const items = this.editor.findItem(event, ['simpleObjects']);\n      this.editor.hover(items, null, event);\n    }\n  }\n\n  mouseup(event) {\n    if (!this.dragCtx) {\n      return true;\n    }\n\n    if (this.dragCtx.action) {\n      if (this.dragCtx.isNew) {\n        const rnd = this.editor.render;\n        this.editor.update(\n          fromSimpleObjectDeletion(rnd.ctab, this.dragCtx.itemId),\n          true,\n        );\n        this.dragCtx.action = fromSimpleObjectAddition(\n          rnd.ctab,\n          [this.dragCtx.p0, this.dragCtx.previous],\n          this.mode,\n          event.shiftKey,\n        );\n      }\n      this.editor.update(this.dragCtx.action);\n    }\n\n    delete this.dragCtx;\n    return true;\n  }\n}\n\nexport default SimpleObjectTool;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Action,\n  Text,\n  Vec2,\n  fromMultipleMove,\n  fromTextCreation,\n  fromTextDeletion,\n  fromTextUpdating,\n  KetcherLogger,\n} from 'ketcher-core';\nimport { Tool } from './Tool';\nimport { handleMovingPosibilityCursor } from '../utils';\n\ninterface Result {\n  content: string;\n}\n\nclass TextTool implements Tool {\n  private readonly editor: any;\n  private dragCtx: any;\n\n  constructor(editor) {\n    this.editor = editor;\n    this.editor.selection(null);\n  }\n\n  mousedown(event) {\n    const render = this.editor.render;\n    const closestItem = this.editor.findItem(event, ['texts']);\n\n    this.editor.selection(null);\n\n    if (closestItem && closestItem.map === 'texts') {\n      this.editor.hover(null);\n      this.editor.selection({ texts: [closestItem.id] });\n      this.dragCtx = {\n        xy0: render.page2obj(event),\n        action: new Action(),\n      };\n    }\n  }\n\n  mousemove(event) {\n    const render = this.editor.render;\n\n    if (this.dragCtx) {\n      if (this.dragCtx.action) {\n        this.dragCtx.action.perform(render.ctab);\n      }\n\n      this.dragCtx.action = fromMultipleMove(\n        render.ctab,\n        this.editor.selection() || {},\n        render.page2obj(event).sub(this.dragCtx.xy0),\n      );\n      this.editor.update(this.dragCtx.action, true);\n    } else {\n      const item = this.editor.findItem(event, ['texts']);\n      this.editor.hover(this.editor.findItem(event, ['texts']), null, event);\n\n      handleMovingPosibilityCursor(\n        item,\n        this.editor.render.paper.canvas,\n        this.editor.render.options.movingStyle.cursor as string,\n      );\n    }\n  }\n\n  mouseup() {\n    if (this.dragCtx) {\n      this.editor.update(this.dragCtx.action);\n      delete this.dragCtx;\n    }\n    return true;\n  }\n\n  click(event) {\n    const render = this.editor.render;\n    const closestItem = this.editor.findItem(event, ['texts']);\n    this.editor.hover(null);\n\n    if (!closestItem) {\n      propsDialog(this.editor, null, render.page2obj(event), []);\n    }\n\n    return true;\n  }\n\n  dblclick(event) {\n    const closestItem = this.editor.findItem(event, ['texts']);\n    this.editor.hover(null);\n\n    if (closestItem.map === 'texts') {\n      propsDialog(\n        this.editor,\n        closestItem.id,\n        closestItem.position,\n        closestItem.pos,\n      );\n    }\n\n    return true;\n  }\n}\n\nfunction propsDialog(\n  editor: any,\n  id: number | null,\n  position: Vec2,\n  pos: Array<Vec2>,\n) {\n  const struct = editor.render.ctab.molecule;\n  const text: Text | null = id || id === 0 ? struct.texts.get(id) : null;\n  const origilContent = text ? text.content : '';\n\n  const res = editor.event.elementEdit.dispatch({\n    content: origilContent,\n    id,\n    position,\n    pos,\n    type: 'text',\n  });\n\n  res\n    .then(({ content }: Result) => {\n      if (!id && id !== 0 && content) {\n        editor.update(\n          fromTextCreation(editor.render.ctab, content, position, pos),\n        );\n      } else if (!content) {\n        editor.update(fromTextDeletion(editor.render.ctab, id!));\n      } else if (content !== origilContent) {\n        editor.update(fromTextUpdating(editor.render.ctab, id!, content));\n      }\n    })\n    .catch((e) => {\n      KetcherLogger.error('text.ts::propsDialog', e);\n    });\n}\n\nexport default TextTool;\n","import {\n  CoordinateTransformation,\n  Scale,\n  Vec2,\n  fromImageCreation,\n  KetcherLogger,\n  Action,\n  IMAGE_KEY,\n  fromImageMove,\n  fromImageResize,\n  ImageReferencePositionInfo,\n} from 'ketcher-core';\nimport { Tool } from './Tool';\nimport type Editor from '../Editor';\nimport { ClosestItemWithMap } from '../shared/closest.types';\nimport { handleMovingPosibilityCursor } from '../utils';\nimport { getItemCursor } from '../utils/getItemCursor';\n\nconst TAG = 'tool/image.ts';\nconst supportedMimes = ['png', 'svg+xml'];\n\nconst supportedMimesForRegex = supportedMimes\n  .map((item) => item.replace('+', '\\\\+'))\n  .join('|');\n\nconst allowList = new RegExp(`^image/(${supportedMimesForRegex})$`);\nconst MIN_DIMENSION_SIZE = 16;\nconst MIN_SIZELESS_IMAGE_SRC_LENGTH = 320;\n\ninterface DragContext {\n  center: Vec2;\n  action: Action;\n  closestItem: ClosestItemWithMap<ImageReferencePositionInfo>;\n}\n\nexport class ImageTool implements Tool {\n  static readonly INPUT_ID = 'image-upload';\n  private element: HTMLInputElement;\n  private dragCtx: DragContext | null = null;\n\n  constructor(private readonly editor: Editor) {\n    this.element = this.getElement();\n  }\n\n  mousedown(event: MouseEvent) {\n    const render = this.editor.render;\n    const closestItem = this.editor.findItem(event, [\n      IMAGE_KEY,\n    ]) as ClosestItemWithMap<ImageReferencePositionInfo>;\n    this.editor.selection(null);\n\n    if (closestItem) {\n      this.editor.hover(null);\n      this.editor.selection({ [IMAGE_KEY]: [closestItem.id] });\n      this.dragCtx = {\n        center: CoordinateTransformation.pageToModel(event, render),\n        action: new Action(),\n        closestItem,\n      };\n    }\n  }\n\n  click(event: MouseEvent) {\n    const closestItem = this.editor.findItem(event, [IMAGE_KEY]);\n    this.editor.hover(null);\n    if (closestItem) {\n      return;\n    }\n\n    const position = CoordinateTransformation.pageToModel(\n      event,\n      this.editor.render,\n    );\n    this.element.onchange = this.onFileUpload.bind(this, position);\n    this.element.click();\n  }\n\n  mousemove(event: PointerEvent) {\n    const render = this.editor.render;\n    if (this.dragCtx) {\n      this.dragCtx.action.perform(render.ctab);\n      const click = CoordinateTransformation.pageToModel(event, render);\n\n      this.dragCtx.action = this.dragCtx.closestItem.ref\n        ? fromImageResize(\n            render.ctab,\n            this.dragCtx.closestItem.id,\n            click,\n            this.dragCtx.closestItem.ref,\n          )\n        : fromImageMove(\n            render.ctab,\n            this.dragCtx.closestItem.id,\n            click.sub(this.dragCtx.center),\n          );\n      this.editor.update(this.dragCtx.action, true);\n    } else {\n      const item = this.editor.findItem(event, [\n        IMAGE_KEY,\n      ]) as ClosestItemWithMap<ImageReferencePositionInfo>;\n      const render = this.editor.render;\n      handleMovingPosibilityCursor(\n        item,\n        render.paper.canvas,\n        getItemCursor(render, item),\n      );\n      this.editor.hover(item, null, event);\n    }\n  }\n\n  mouseup() {\n    if (this.dragCtx) {\n      this.editor.update(this.dragCtx.action);\n      this.dragCtx = null;\n    }\n    return true;\n  }\n\n  onFileUpload(clickPosition: Vec2): void {\n    const errorHandler = this.editor.errorHandler;\n    this.element.onchange = null;\n    if (this.element.files && this.element.files[0]) {\n      const file = this.element.files[0];\n      const image = new Image();\n      const reader = new FileReader();\n\n      if (!file.type || !file.type.match(allowList)) {\n        const errorMessage = `Unsupported image type`;\n        KetcherLogger.error(`${TAG}:onFileUpload`, errorMessage);\n        if (errorHandler) {\n          errorHandler(errorMessage);\n        }\n\n        this.resetElementValue();\n        return;\n      }\n\n      reader.addEventListener('load', () => {\n        image.src = reader.result as string;\n      });\n\n      image.onload = () => {\n        this.resetElementValue();\n        const isValidSize =\n          image.width >= MIN_DIMENSION_SIZE &&\n          image.height >= MIN_DIMENSION_SIZE;\n        const isValidSizeless =\n          image.width === 0 &&\n          image.height === 0 &&\n          image.src.length >= MIN_SIZELESS_IMAGE_SRC_LENGTH;\n\n        if (!isValidSize && !isValidSizeless) {\n          const errorMessage = 'Image should be at least 16x16 pixels';\n          KetcherLogger.error(`${TAG}:onLoad`, errorMessage);\n          if (errorHandler) {\n            errorHandler(errorMessage);\n          }\n          return;\n        }\n\n        const halfSize = isValidSizeless\n          ? new Vec2(MIN_DIMENSION_SIZE, MIN_DIMENSION_SIZE)\n          : new Vec2(image.width / 2, image.height / 2);\n\n        const halfSizeScaled = Scale.canvasToModel(\n          halfSize,\n          this.editor.render.options,\n        );\n\n        this.editor.update(\n          fromImageCreation(\n            this.editor.render.ctab,\n            image.src,\n            clickPosition,\n            halfSizeScaled,\n          ),\n        );\n      };\n\n      image.onerror = (e) => {\n        this.resetElementValue();\n        const errorMessage = 'Cannot load image';\n        KetcherLogger.error(`${TAG}:onerror`, errorMessage, e);\n        if (errorHandler) {\n          errorHandler(errorMessage);\n        }\n      };\n\n      reader.readAsDataURL(this.element.files[0]);\n    }\n  }\n\n  private createElement(): HTMLInputElement {\n    const uploader = document.createElement('input');\n    uploader.style.display = 'none';\n    uploader.id = ImageTool.INPUT_ID;\n    uploader.type = 'file';\n    uploader.accept = supportedMimes.map((item) => `image/${item}`).join(',');\n    document.body.appendChild(uploader);\n    return uploader;\n  }\n\n  private getElement(): HTMLInputElement {\n    const element = document.getElementById(ImageTool.INPUT_ID);\n\n    if (element instanceof HTMLInputElement) {\n      return element;\n    }\n    element?.remove();\n    return this.createElement();\n  }\n\n  private resetElementValue(): void {\n    this.getElement().value = '';\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { IMAGE_KEY } from 'ketcher-core';\n\nimport APointTool from './apoint';\nimport AtomTool from './atom';\nimport AttachTool from './attach';\nimport BondTool from './bond';\nimport ChainTool from './chain';\nimport ChargeTool from './charge';\nimport EnhancedStereoTool from './enhanced-stereo';\nimport EraserTool from './eraser';\nimport HandTool from './hand';\nimport PasteTool from './paste';\nimport RGroupAtomTool from './rgroupatom';\nimport RGroupFragmentTool from './rgroupfragment';\nimport { CommonArrowTool } from './arrow/commonArrow';\nimport ReactionMapTool from './reactionmap';\nimport ReactionPlusTool from './reactionplus';\nimport ReactionUnmapTool from './reactionunmap';\nimport RotateTool from './rotate';\nimport SGroupTool from './sgroup';\nimport SimpleObjectTool from './simpleobject';\nimport TemplateTool from './template';\nimport TextTool from './text';\nimport { ToolConstructorInterface } from './Tool';\nimport { ImageTool } from './image';\nimport { SelectCommonTool } from './select';\n\nexport const toolsMap: Record<string, ToolConstructorInterface> = {\n  hand: HandTool,\n  rgroupatom: RGroupAtomTool,\n  select: SelectCommonTool,\n  sgroup: SGroupTool,\n  eraser: EraserTool,\n  atom: AtomTool,\n  bond: BondTool,\n  chain: ChainTool,\n  template: TemplateTool,\n  charge: ChargeTool,\n  rgroupfragment: RGroupFragmentTool,\n  apoint: APointTool,\n  attach: AttachTool,\n  reactionarrow: CommonArrowTool,\n  reactionplus: ReactionPlusTool,\n  reactionmap: ReactionMapTool,\n  reactionunmap: ReactionUnmapTool,\n  paste: PasteTool,\n  rotate: RotateTool,\n  enhancedStereo: EnhancedStereoTool,\n  simpleobject: SimpleObjectTool,\n  text: TextTool,\n  [IMAGE_KEY]: ImageTool,\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { fromHighlightCreate, fromHighlightClear, Struct } from 'ketcher-core';\n\nimport type { Editor } from './Editor';\n\ntype HighlightAttributes = {\n  atoms: number[];\n  bonds: number[];\n  rgroupAttachmentPoints: number[];\n  color: string;\n};\n\nexport class Highlighter {\n  editor: Editor;\n\n  constructor(editor: Editor) {\n    this.editor = editor;\n  }\n\n  getAll() {\n    const highlightsMap = this.editor.render.ctab.molecule.highlights;\n    const highlightsArray = [...highlightsMap].map(([id, highlight]) => ({\n      id,\n      highlight,\n    }));\n    return highlightsArray;\n  }\n\n  create(...args: HighlightAttributes[]) {\n    const createdHighlights: HighlightAttributes[] = [];\n\n    args.forEach((arg) => {\n      const { atoms, bonds, rgroupAttachmentPoints, color } = arg;\n      if (typeof color !== 'string') {\n        return;\n      }\n\n      if (!atoms && !bonds && !rgroupAttachmentPoints) {\n        return;\n      }\n\n      const restruct = this.editor.render.ctab;\n\n      const { validAtoms, validBonds, validRgroupAttachmentPoints } =\n        getValidInputOnly(\n          restruct.molecule,\n          atoms,\n          bonds,\n          rgroupAttachmentPoints,\n        );\n\n      if (\n        validAtoms.length === 0 &&\n        validBonds.length === 0 &&\n        validRgroupAttachmentPoints.length === 0\n      ) {\n        return;\n      }\n\n      createdHighlights.push({\n        atoms: validAtoms,\n        bonds: validBonds,\n        rgroupAttachmentPoints: validRgroupAttachmentPoints,\n        color,\n      });\n    });\n    const action = fromHighlightCreate(\n      this.editor.render.ctab,\n      createdHighlights,\n    );\n    this.editor.update(action);\n  }\n\n  clear() {\n    const action = fromHighlightClear(this.editor.render.ctab);\n    this.editor.update(action);\n  }\n\n  /*\n  // Update by ID\n  update(\n    id: number,\n    {\n      atoms,\n      bonds,\n      color\n    }: {\n      atoms?: number[]\n      bonds?: number[]\n      color: string\n    }\n  ) {\n    if (typeof color !== 'string' || typeof id !== 'number') {\n      return\n    }\n    if (!atoms && !bonds) {\n      return\n    }\n\n    const restruct = this.editor.render.ctab\n\n    const { validAtoms, validBonds } = getValidInputOnly(\n      restruct.molecule,\n      atoms,\n      bonds\n    )\n\n    if (validAtoms.length === 0 && validBonds.length === 0) {\n      return\n    }\n\n    const action = fromHighlightUpdate(\n      id,\n      this.editor.render.ctab,\n      validAtoms,\n      validBonds,\n      color\n    )\n    this.editor.update(action)\n  }\n\n  // Add items to highlight by id\n  append(\n    id: number,\n    {\n      atoms,\n      bonds,\n      color\n    }: {\n      atoms?: number[]\n      bonds?: number[]\n      color?: string\n    }\n  ) {\n    if (!atoms && !bonds && !color) {\n      return\n    }\n    const restruct = this.editor.render.ctab\n\n    const { validAtoms, validBonds } = getValidInputOnly(\n      restruct.molecule,\n      atoms,\n      bonds\n    )\n\n    if (validAtoms.length === 0 && validBonds.length === 0 && !color) {\n      return\n    }\n\n    const currentHighlight = restruct.molecule.highlights.get(id)\n\n    if (currentHighlight) {\n      const mergedHighlight = {\n        atoms: union(currentHighlight.atoms, validAtoms),\n        bonds: union(currentHighlight.bonds, validBonds),\n        color: color || currentHighlight.color\n      }\n\n      const action = fromHighlightUpdate(\n        id,\n        restruct,\n        mergedHighlight.atoms,\n        mergedHighlight.bonds,\n        mergedHighlight.color\n      )\n      this.editor.update(action)\n    }\n  }\n\n  // Delete by ID\n  delete(id: number) {\n    if (typeof id !== 'number') {\n      return\n    }\n\n    const action = fromHighlightDelete(this.editor.render.ctab, id)\n    this.editor.update(action)\n  }\n  */\n}\n\ntype ValidInput = {\n  validAtoms: number[];\n  validBonds: number[];\n  validRgroupAttachmentPoints: number[];\n};\n\nfunction getValidInputOnly(\n  struct: Struct,\n  atoms,\n  bonds,\n  rgroupAttachmentPoints,\n): ValidInput {\n  if (!Array.isArray(atoms)) {\n    atoms = [];\n  }\n\n  if (!Array.isArray(bonds)) {\n    bonds = [];\n  }\n\n  if (!Array.isArray(rgroupAttachmentPoints)) {\n    rgroupAttachmentPoints = [];\n  }\n\n  const {\n    atoms: structAtoms,\n    bonds: structBonds,\n    rgroupAttachmentPoints: structRgroupAttachmentPoints,\n  } = struct;\n\n  // Filter out atom ids that are not in struct\n  if (atoms.length > 0) {\n    atoms = atoms.filter((aid) => structAtoms.has(aid));\n  }\n\n  // Filter out bond ids that are not in struct\n  if (bonds.length > 0) {\n    bonds = bonds.filter((bid) => structBonds.has(bid));\n  }\n\n  if (rgroupAttachmentPoints.length > 0) {\n    rgroupAttachmentPoints = rgroupAttachmentPoints.filter((rgroupAPId) =>\n      structRgroupAttachmentPoints.has(rgroupAPId),\n    );\n  }\n\n  return {\n    validAtoms: atoms,\n    validBonds: bonds,\n    validRgroupAttachmentPoints: rgroupAttachmentPoints,\n  };\n}\n","import {\n  type ElementLabel,\n  type AtomColor,\n  Vec2,\n  CoordinateTransformation,\n  getOptionsWithConvertedUnits,\n} from 'ketcher-core';\nimport Editor from './Editor';\n\nconst HOVER_ICON_OPACITY = 0.7;\n\nexport class HoverIcon {\n  element: any;\n  _fill: AtomColor | '';\n  _label: ElementLabel | '';\n  isShown: boolean;\n  /**\n   Is required for the case, when mouse moved outside the canvas, then loading of structure\n   happens and icon needs to be shown above loader.\n   */\n  shouldBeShownWhenMouseBack: boolean;\n  editor: Editor;\n\n  constructor(editor: Editor) {\n    this.editor = editor;\n\n    const icon = this.initialize();\n    this.element = icon.element;\n    this._fill = icon.fill;\n    this._label = icon.label;\n    this.isShown = true;\n    this.shouldBeShownWhenMouseBack = false;\n    this.updatePosition();\n\n    const clientArea = this.editor.render.clientArea;\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onMouseLeave = this.onMouseLeave.bind(this);\n\n    document.addEventListener('mousemove', this.onMouseMove);\n    clientArea.addEventListener('mouseover', this.onMouseMove);\n    clientArea.addEventListener('mouseleave', this.onMouseLeave);\n  }\n\n  set fill(fillColor: AtomColor | '') {\n    this._fill = fillColor;\n    this.element.attr('fill', fillColor);\n  }\n\n  get fill() {\n    return this._fill;\n  }\n\n  set label(label: ElementLabel | '') {\n    this._label = label;\n    this.element.attr('text', label);\n  }\n\n  get label() {\n    return this._label;\n  }\n\n  isOverLoader(event: MouseEvent) {\n    const target = <HTMLDivElement>event?.relatedTarget || event.target;\n    return target?.classList.contains('loading-spinner');\n  }\n\n  onMouseMove(event: MouseEvent) {\n    if (\n      this.isShown ||\n      (this.isOverLoader(event) && this.shouldBeShownWhenMouseBack)\n    ) {\n      this.show();\n      this.updatePosition();\n    }\n  }\n\n  onMouseLeave(event: MouseEvent) {\n    if (!this.isOverLoader(event) && this.isShown) {\n      this.shouldBeShownWhenMouseBack = true;\n      this.hide();\n    }\n  }\n\n  updatePosition() {\n    const { x, y } = this.editor.lastCursorPosition;\n    const currentPosition = new Vec2(x, y);\n    const newPosition = CoordinateTransformation?.viewToCanvas(\n      currentPosition,\n      this.editor.render,\n    );\n    this.element.attr({\n      x: newPosition?.x,\n      y: newPosition?.y,\n    });\n  }\n\n  show() {\n    this.element.show();\n    this.isShown = true;\n    this.shouldBeShownWhenMouseBack = false;\n  }\n\n  hide(restShouldBeShownWhenMouseBack?: boolean) {\n    this.element.hide();\n    this.isShown = false;\n\n    if (restShouldBeShownWhenMouseBack) {\n      this.shouldBeShownWhenMouseBack = false;\n    }\n  }\n\n  initialize(): {\n    element: any;\n    fill: AtomColor | '';\n    label: ElementLabel | '';\n  } {\n    const render = this.editor.render;\n    const fillColor = this.fill ?? '#000000';\n    const element = render.paper.text(0, 0, this.label || '');\n    const options = getOptionsWithConvertedUnits(this.editor.options());\n\n    element.attr('fill', fillColor);\n    element.attr('font-size', options.fontszInPx);\n    element.attr('opacity', HOVER_ICON_OPACITY);\n\n    return {\n      element,\n      fill: fillColor,\n      label: this?.label || '',\n    };\n  }\n\n  create() {\n    const icon = this.initialize();\n    this.element = icon.element;\n    this._fill = icon.fill;\n    this._label = icon.label;\n    this.shouldBeShownWhenMouseBack = false;\n    this.hide();\n  }\n}\n","import { Vec2 } from 'ketcher-core';\n\nexport const rotatePoint = (\n  centerPoint: Vec2,\n  startPoint: Vec2,\n  angle: number,\n) => {\n  const oCenter = centerPoint;\n  const oStart = startPoint;\n\n  const centerStart = oStart.sub(oCenter);\n  const centerEnd = centerStart.rotate(angle);\n\n  const oEnd = oCenter.add(centerEnd);\n  return oEnd;\n};\n\nexport const getDifference = (\n  currentDegree: number,\n  structRotateDegree: number,\n) => {\n  let abs = 0;\n\n  // HACK: https://github.com/epam/ketcher/pull/2574#issuecomment-1539509046\n  if (structRotateDegree > 90) {\n    const positiveCurrentDegree =\n      currentDegree < 0 ? currentDegree + 360 : currentDegree;\n    abs = Math.abs(positiveCurrentDegree - structRotateDegree);\n  } else if (structRotateDegree < -90) {\n    const negativeCurrentDegree =\n      currentDegree > 0 ? currentDegree - 360 : currentDegree;\n    abs = Math.abs(negativeCurrentDegree - structRotateDegree);\n  } else {\n    abs = Math.abs(currentDegree - structRotateDegree);\n  }\n\n  return abs;\n};\n","import {\n  Action,\n  CoordinateTransformation,\n  Scale,\n  Vec2,\n  vectorUtils,\n} from 'ketcher-core';\nimport { throttle } from 'lodash';\nimport Editor from '../Editor';\nimport { getGroupIdsFromItemArrays } from './helper/getGroupIdsFromItems';\nimport RotateTool from './rotate';\nimport SelectTool from './select/select';\nimport { getDifference, rotatePoint } from './rotate-controller.utils';\nimport { normalizeAngle } from '../utils/normalizeAngle';\n\ntype RaphaelElement = {\n  [key: string]: any;\n};\n\ntype LinkState = 'long' | 'short' | 'moveCenter' | 'moveHandle';\ntype CrossState = 'active' | 'inactive' | 'offset' | 'move';\ntype HandleState = 'hoverIn' | 'hoverOut' | 'active' | 'move';\ntype SnapAngleIndicatorState = 'noLine' | 'noText' | 'default';\n\nconst STYLE = {\n  HANDLE_MARGIN: 15,\n  HANDLE_RADIUS: 10,\n  INITIAL_COLOR: '#B4B9D6',\n  ACTIVE_COLOR: '#365CFF',\n};\n\nconst LEFT_ARROW_PATH =\n  'M12.7034 14.8189L9.39616 17.6218L9.13674 16.1892C8.12927 16.0487 7.17132 15.6644 6.34605 15.0697C5.52078 14.475 4.85314 13.6878 4.40108 12.7766C3.94903 11.8653 3.72622 10.8575 3.75201 9.84062C3.7778 8.82373 4.0514 7.8285 4.54906 6.94133L5.8121 7.65148C5.45018 8.29719 5.24246 9.01784 5.20516 9.75712C5.16786 10.4964 5.302 11.2343 5.59709 11.9132C5.89218 12.592 6.34023 13.1935 6.90624 13.6705C7.47225 14.1475 8.1409 14.4872 8.85993 14.6631L8.62297 13.3587L12.7034 14.8189Z';\nconst RIGHT_ARROW_PATH =\n  'M15.4493 13.0588L14.1862 12.3486C14.5482 11.7029 14.7559 10.9823 14.7932 10.243C14.8305 9.50371 14.6963 8.76582 14.4012 8.08695C14.1062 7.40809 13.6581 6.80665 13.0921 6.32962C12.5261 5.85259 11.8574 5.51288 11.1384 5.33704L11.3754 6.64501L7.29492 5.18124L10.6022 2.37834L10.8616 3.81095C11.8691 3.95145 12.827 4.33573 13.6523 4.93043C14.4776 5.52513 15.1452 6.31227 15.5973 7.22353C16.0493 8.13478 16.2721 9.1426 16.2463 10.1595C16.2205 11.1764 15.9469 12.1716 15.4493 13.0588Z';\n\nclass RotateController {\n  isRotating!: boolean;\n  private editor: Editor;\n  private rotateTool: RotateTool;\n  private originalCenter!: Vec2;\n  private normalizedCenterInitialHandleVec!: Vec2;\n  private handleCenter!: Vec2;\n  private initialRadius!: number;\n  private isMovingCenter!: boolean;\n\n  private handle?: RaphaelElement;\n  private boundingRect?: RaphaelElement;\n  private cross?: RaphaelElement;\n  private link?: RaphaelElement;\n  private protractor?: RaphaelElement;\n  private rotateArc?: RaphaelElement;\n  private snapAngleIndicator?: RaphaelElement;\n\n  constructor(editor: Editor) {\n    this.editor = editor;\n    this.init();\n    this.rotateTool = new RotateTool(this.editor, undefined);\n  }\n\n  private init() {\n    this.originalCenter = new Vec2();\n    this.normalizedCenterInitialHandleVec = new Vec2();\n    this.handleCenter = new Vec2();\n    this.initialRadius = 0;\n    this.isRotating = false;\n    this.isMovingCenter = false;\n  }\n\n  private get render() {\n    return this.editor.render;\n  }\n\n  private get paper() {\n    return this.render.paper;\n  }\n\n  private get center() {\n    return this.originalCenter\n      .scaled(this.render.options.microModeScale)\n      .add(this.render.options.offset);\n  }\n\n  rerender() {\n    this.clean();\n    this.init();\n    this.show();\n  }\n\n  clean() {\n    this.editor.event.updateFloatingTools.dispatch({\n      visible: false,\n      rotateHandlePosition: new Vec2(),\n    });\n\n    this.handle?.unhover(this.hoverIn, this.hoverOut);\n    this.handle?.unmousedown(this.dragStart);\n    this.handle?.unmouseup(this.dragEnd);\n    this.handle?.undrag();\n\n    const crossArea = this.cross?.[1];\n    crossArea?.unhover(this.hoverCrossIn, this.hoverCrossOut);\n    crossArea?.unmousedown(this.dragCrossStart);\n    crossArea?.unmouseup(this.dragCrossEnd);\n    crossArea?.undrag();\n\n    this.cross?.remove();\n    delete this.cross;\n    this.boundingRect?.remove();\n    delete this.boundingRect;\n    this.link?.remove();\n    delete this.link;\n    this.handle?.remove();\n    delete this.handle;\n    this.protractor?.remove();\n    delete this.protractor;\n    this.rotateArc?.remove();\n    delete this.rotateArc;\n    this.snapAngleIndicator?.remove();\n    delete this.snapAngleIndicator;\n  }\n\n  /**\n   * Revert rotation by pressing \"Escape\" key or \"Right click\" button\n   */\n  revert() {\n    if (!this.rotateTool.dragCtx?.action || !this.isRotating) {\n      return;\n    }\n\n    const action: Action = this.rotateTool.dragCtx.action;\n    action.perform(this.render.ctab);\n    this.render.update();\n    this.rerender();\n  }\n\n  private isPartOfFragmentSelected() {\n    const allAtoms = this.render.ctab.molecule.atoms;\n    const selectedAtomIds = this.editor.selection()?.atoms || [];\n    const selectedFragmentIdSet = new Set();\n\n    selectedAtomIds.forEach((atomId) => {\n      const fragmentId = allAtoms.get(atomId)?.fragment;\n      selectedFragmentIdSet.add(fragmentId);\n    });\n\n    const nonSelectedAtoms = allAtoms.filter(\n      (id) => !selectedAtomIds.includes(id),\n    );\n    return nonSelectedAtoms.some((atom) =>\n      selectedFragmentIdSet.has(atom.fragment),\n    );\n  }\n\n  private show() {\n    const originalCenter = this.rotateTool.getCenter();\n    const selection = this.editor.selection();\n    const visibleAtoms =\n      this.render.ctab.molecule.getSelectedVisibleAtoms(selection);\n\n    const { texts, rxnArrows, rxnPluses } = selection || {};\n\n    const isMoreThanOneItemBeingSelected =\n      visibleAtoms.concat(texts || [], rxnArrows || [], rxnPluses || [])\n        .length > 1;\n\n    const enable =\n      isMoreThanOneItemBeingSelected &&\n      this.editor.tool() instanceof SelectTool &&\n      originalCenter;\n\n    if (!enable) {\n      return;\n    }\n\n    this.originalCenter = originalCenter;\n\n    const rectStartY = this.drawBoundingRect(\n      visibleAtoms,\n      texts,\n      rxnArrows,\n      rxnPluses,\n      selection?.bonds,\n      selection?.rgroupAttachmentPoints,\n    );\n\n    this.handleCenter = new Vec2(\n      this.center.x,\n      rectStartY - STYLE.HANDLE_MARGIN - STYLE.HANDLE_RADIUS,\n    );\n\n    const handleCenterInViewport = CoordinateTransformation.canvasToView(\n      this.handleCenter,\n      this.render,\n    );\n    this.editor.event.updateFloatingTools.dispatch({\n      visible: true,\n      rotateHandlePosition: handleCenterInViewport,\n    });\n\n    this.drawLink();\n    this.drawCross();\n    this.drawHandle();\n\n    this.handle?.hover(this.hoverIn, this.hoverOut);\n    this.handle?.mousedown(this.dragStart);\n    this.handle?.mouseup(this.dragEnd);\n    this.handle?.drag(\n      this.dragMove(),\n      undefined,\n      this.dragEnd, // Fix rotation getting stuck when mouseup outside window\n    );\n\n    if (this.isPartOfFragmentSelected()) {\n      return;\n    }\n\n    const crossArea = this.cross?.[1];\n    crossArea?.hover(this.hoverCrossIn, this.hoverCrossOut);\n    crossArea?.mousedown(this.dragCrossStart);\n    crossArea?.mouseup(this.dragCrossEnd);\n    crossArea?.drag(\n      this.dragCrossMove,\n      undefined,\n      this.dragCrossEndOUtOfBounding,\n    );\n  }\n\n  private drawCross(state?: CrossState) {\n    switch (state) {\n      case 'active': {\n        this.cross?.attr({\n          stroke: STYLE.ACTIVE_COLOR,\n        });\n        break;\n      }\n\n      case 'inactive': {\n        this.cross?.attr({\n          stroke: STYLE.INITIAL_COLOR,\n        });\n        break;\n      }\n\n      case 'move': {\n        this.cross?.transform('');\n        this.cross?.translate(this.center.x, this.center.y);\n        break;\n      }\n\n      default: {\n        const cross = this.paper\n          .path(`M0,0` + `h8` + `M0,0` + `h-8` + `M0,0` + `v8` + `M0,0` + `v-8`)\n          .attr({\n            stroke: STYLE.INITIAL_COLOR,\n            'stroke-width': 2,\n            'stroke-linecap': 'round',\n          });\n        // HACK: increase hover/drag area\n        const circle = this.paper.circle(0, 0, 10).attr({\n          fill: 'red',\n          opacity: 0,\n        });\n        this.cross = this.paper.set();\n        this.cross?.push(cross, circle);\n        this.cross?.translate(this.center.x, this.center.y);\n\n        break;\n      }\n    }\n  }\n\n  private drawBoundingRect(\n    visibleAtoms: number[],\n    texts?: number[],\n    rxnArrows?: number[],\n    rxnPluses?: number[],\n    bonds?: number[],\n    rgroupAttachmentPoints?: number[],\n  ) {\n    const RECT_RADIUS = 20;\n    const RECT_PADDING = 10;\n\n    const rectBox = this.render.ctab\n      .getVBoxObj({\n        atoms: visibleAtoms,\n        texts,\n        rxnArrows,\n        rxnPluses,\n\n        sgroups: getGroupIdsFromItemArrays(this.render.ctab.molecule, {\n          atoms: visibleAtoms,\n        }),\n        bonds,\n        rgroupAttachmentPoints,\n      })\n      .transform(Scale.modelToCanvas, this.render.options)\n      .translate(this.render.options.offset || new Vec2());\n\n    const rectStartX =\n      rectBox.p0.x -\n      RECT_PADDING -\n      this.render.options.atomSelectionPlateRadius;\n    const rectStartY =\n      rectBox.p0.y -\n      RECT_PADDING -\n      this.render.options.atomSelectionPlateRadius;\n    const rectEndX =\n      rectBox.p1.x +\n      RECT_PADDING +\n      this.render.options.atomSelectionPlateRadius;\n    const rectEndY =\n      rectBox.p1.y +\n      RECT_PADDING +\n      this.render.options.atomSelectionPlateRadius;\n\n    this.boundingRect = this.paper\n      .rect(\n        rectStartX,\n        rectStartY,\n        rectEndX - rectStartX,\n        rectEndY - rectStartY,\n        RECT_RADIUS,\n      )\n      .attr({\n        'stroke-dasharray': '-',\n        stroke: STYLE.INITIAL_COLOR,\n      });\n\n    return rectStartY;\n  }\n\n  private drawHandle(state?: HandleState) {\n    switch (state) {\n      case 'hoverIn': {\n        this.handle?.attr({\n          cursor: 'grab',\n        });\n        const circle = this.handle?.[0];\n        circle.attr({\n          fill: STYLE.ACTIVE_COLOR,\n        });\n        break;\n      }\n\n      case 'hoverOut': {\n        const circle = this.handle?.[0];\n        circle.attr({\n          fill: STYLE.INITIAL_COLOR,\n        });\n        break;\n      }\n\n      case 'active': {\n        this.handle?.attr({\n          cursor: 'grabbing',\n        });\n        const arrowSet = this.handle?.[1];\n        arrowSet?.attr({ fill: 'none' });\n        break;\n      }\n\n      case 'move': {\n        this.handle\n          ?.transform('')\n          .translate(this.handleCenter.x, this.handleCenter.y);\n        break;\n      }\n\n      default: {\n        const circle = this.paper.circle(0, 0, STYLE.HANDLE_RADIUS).attr({\n          fill: STYLE.INITIAL_COLOR,\n          stroke: 'none',\n        });\n        circle.node.setAttribute('data-testid', 'rotation-handle');\n\n        const leftArrow = this.paper\n          .path(LEFT_ARROW_PATH)\n          .attr({ fill: 'white', stroke: 'none' });\n        const rightArrow = this.paper\n          .path(RIGHT_ARROW_PATH)\n          .attr({ fill: 'white', stroke: 'none' });\n        const arrowSet: RaphaelElement = this.paper.set();\n        arrowSet.push(leftArrow, rightArrow);\n        const { x, y, width, height } = arrowSet.getBBox();\n        arrowSet.translate(-(x + width / 2), -(y + height / 2));\n\n        this.handle = this.paper.set() as RaphaelElement;\n        this.handle.push(circle, arrowSet);\n        this.handle.translate(this.handleCenter.x, this.handleCenter.y);\n        break;\n      }\n    }\n  }\n\n  private drawLink(state?: LinkState) {\n    switch (state) {\n      case 'long': {\n        this.link?.attr({\n          path:\n            `M${this.center.x},${this.center.y}` +\n            `L${this.handleCenter.x},${this.handleCenter.y}`,\n          stroke: STYLE.ACTIVE_COLOR,\n        });\n        break;\n      }\n\n      case 'short': {\n        this.link?.attr({\n          path:\n            `M${this.handleCenter.x},${this.handleCenter.y}` +\n            `l0,${STYLE.HANDLE_RADIUS + STYLE.HANDLE_MARGIN}`,\n          stroke: STYLE.INITIAL_COLOR,\n        });\n        break;\n      }\n\n      case 'moveCenter': {\n        this.link?.attr({\n          path:\n            `M${this.center.x},${this.center.y}` +\n            `L${this.handleCenter.x},${this.handleCenter.y}`,\n        });\n        break;\n      }\n\n      case 'moveHandle': {\n        this.link?.attr({\n          path:\n            `M${this.center.x},${this.center.y}` +\n            `L${this.handleCenter.x},${this.handleCenter.y}`,\n        });\n        break;\n      }\n\n      default: {\n        this.link = this.paper\n          .path(\n            `M${this.handleCenter.x},${this.handleCenter.y}` +\n              `l0,${STYLE.HANDLE_RADIUS + STYLE.HANDLE_MARGIN}`,\n          )\n          .attr({\n            'stroke-dasharray': '-',\n            stroke: STYLE.INITIAL_COLOR,\n          });\n        break;\n      }\n    }\n  }\n\n  private drawProtractor(\n    structRotateDegree: number,\n    radius: number,\n    degreeLine: RaphaelElement,\n    textPos: Vec2,\n  ) {\n    this.protractor?.remove();\n\n    const PROTRACTOR_COLOR = '#E1E5EA';\n    const DEGREE_FONT_SIZE = 12;\n\n    const circle = this.paper\n      .circle(this.center.x, this.center.y, radius)\n      .attr({\n        'stroke-dasharray': '-',\n        stroke: PROTRACTOR_COLOR,\n      });\n\n    this.protractor = this.paper.set() as RaphaelElement;\n    this.protractor.push(circle);\n\n    const predefinedDegrees = [\n      0, 30, 45, 60, 90, 120, 135, 150, 180, -150, -135, -120, -90, -60, -45,\n      -30,\n    ];\n    predefinedDegrees.reduce((previousDegree, currentDegree, currentIndex) => {\n      const isDrawingDegree0 = currentIndex === 0;\n      const gap = currentDegree - previousDegree;\n      const diff = getDifference(currentDegree, structRotateDegree);\n\n      if (!isDrawingDegree0) {\n        degreeLine = degreeLine\n          .clone()\n          .rotate(gap, this.center.x, this.center.y);\n      }\n\n      degreeLine.attr({\n        stroke: diff > 90 ? 'none' : PROTRACTOR_COLOR,\n      });\n      this.protractor?.push(degreeLine);\n\n      if (radius < 65) {\n        return currentDegree;\n      }\n\n      textPos = rotatePoint(this.center, textPos, (gap / 180) * Math.PI);\n      const degreeText = this.paper\n        .text(textPos.x, textPos.y, `${currentDegree}ยฐ`)\n        .attr({\n          fill:\n            diff > 90\n              ? 'none'\n              : currentDegree !== 0 && currentDegree === structRotateDegree\n              ? STYLE.ACTIVE_COLOR\n              : STYLE.INITIAL_COLOR,\n          'font-size': DEGREE_FONT_SIZE,\n        });\n\n      this.protractor?.push(degreeText);\n\n      return currentDegree;\n    }, 0);\n\n    this.protractor.toBack();\n  }\n\n  private drawRotateArc(\n    structRotateDegree: number,\n    radius: number,\n    rotateArcStart: Vec2,\n    textPos: Vec2,\n  ) {\n    if (!this.rotateArc) {\n      const arc = this.paper.path();\n      const text = this.paper.text(0, 0, '');\n\n      this.rotateArc = this.paper.set().push(arc, text) as RaphaelElement;\n    }\n\n    const rotateArcEnd = rotatePoint(\n      this.center,\n      rotateArcStart,\n      (structRotateDegree / 180) * Math.PI,\n    );\n\n    const arc = this.rotateArc[0];\n    const text = this.rotateArc[1];\n\n    const TEXT_FONT_SIZE = 16;\n    const TEXT_COLOR = '#333333';\n\n    // Doc: https://www.w3.org/TR/SVG/paths.html#PathDataEllipticalArcCommands\n    arc\n      .attr({\n        path:\n          `M${rotateArcStart.x},${rotateArcStart.y}` +\n          `A${radius},${radius} ` +\n          `0 0,${structRotateDegree < 0 ? '0' : '1'} ` +\n          `${rotateArcEnd.x},${rotateArcEnd.y}`,\n        stroke: STYLE.ACTIVE_COLOR,\n      })\n      .toBack();\n\n    text.attr({\n      text: `${structRotateDegree}ยฐ`,\n      x: textPos.x,\n      y: textPos.y,\n      'font-size': TEXT_FONT_SIZE,\n      fill: TEXT_COLOR,\n    });\n  }\n\n  // NOTE: When handle is non-arrow function, `this` is element itself\n  private hoverIn = (event: MouseEvent) => {\n    const isSomeButtonPressed = event.buttons !== 0;\n    if (isSomeButtonPressed) {\n      return;\n    }\n\n    this.drawHandle('hoverIn');\n  };\n\n  private hoverOut = (event: MouseEvent) => {\n    const isSomeButtonPressed = event.buttons !== 0;\n    if (isSomeButtonPressed) {\n      return;\n    }\n\n    this.drawHandle('hoverOut');\n  };\n\n  private getProtractorBaseInfo(radius: number) {\n    const DEGREE_TEXT_MARGIN = 10;\n\n    const distBetweenDegree0TextAndCenter =\n      radius +\n      STYLE.HANDLE_MARGIN +\n      STYLE.HANDLE_RADIUS * 2 +\n      DEGREE_TEXT_MARGIN;\n    const centerDegree0TextVec = this.normalizedCenterInitialHandleVec.scaled(\n      distBetweenDegree0TextAndCenter,\n    );\n    const degree0TextPos = this.center.add(centerDegree0TextVec);\n\n    const lineLength =\n      radius >= 65 ? STYLE.HANDLE_MARGIN : STYLE.HANDLE_MARGIN / 2;\n    const centerLineStartVec =\n      this.normalizedCenterInitialHandleVec.scaled(radius);\n    const lineVec = this.normalizedCenterInitialHandleVec.scaled(lineLength);\n    const lineStart = this.center.add(centerLineStartVec);\n    const lineEnd = lineStart.add(lineVec);\n    const lineEndHalf = lineStart.addScaled(lineVec, 1 / 2);\n    const degree0Line = this.paper\n      .path(\n        `M${lineStart.x},${lineStart.y}` +\n          (radius >= 65\n            ? `L${lineEnd.x}, ${lineEnd.y}`\n            : `L${lineEndHalf.x}, ${lineEndHalf.y}`),\n      )\n      .attr({\n        'stroke-dasharray': '-',\n      });\n\n    const arcStartPos = this.center.add(\n      this.normalizedCenterInitialHandleVec.scaled(radius),\n    );\n\n    const TEXT_MARGIN_LEFT = 20;\n    const l1 = centerLineStartVec.add(lineVec);\n    const l2 = l1\n      .rotate(Math.PI / 2)\n      .normalized()\n      .scaled(TEXT_MARGIN_LEFT);\n    const currentDegreeMarkPos = this.center.add(l1).add(l2);\n\n    return [\n      degree0Line,\n      degree0TextPos,\n      arcStartPos,\n      currentDegreeMarkPos,\n    ] as const;\n  }\n\n  private dragStart = (event: MouseEvent) => {\n    event.stopPropagation(); // Avoid triggering SelectTool's mousedown\n\n    const isLeftButtonPressed = event.buttons === 1;\n    if (!isLeftButtonPressed) {\n      return;\n    }\n\n    const isDragPaused = this.isRotating;\n    if (isDragPaused) {\n      // Fix protractor staying after screenshot/being paused\n      // see https://github.com/epam/ketcher/pull/2574#issuecomment-1539201020\n      this.clean();\n      return;\n    }\n\n    this.isRotating = true;\n\n    this.editor.event.updateFloatingTools.dispatch({\n      visible: false,\n      rotateHandlePosition: new Vec2(),\n    });\n\n    this.boundingRect?.remove();\n    delete this.boundingRect;\n\n    const centerHandleVec = this.handleCenter.sub(this.center);\n    this.normalizedCenterInitialHandleVec = centerHandleVec.normalized();\n\n    const newProtractorRadius =\n      Vec2.dist(this.handleCenter, this.center) -\n      STYLE.HANDLE_MARGIN -\n      STYLE.HANDLE_RADIUS;\n    this.initialRadius = newProtractorRadius >= 0 ? newProtractorRadius : 0;\n    const [degree0Line, degree0TextPos] = this.getProtractorBaseInfo(\n      this.initialRadius,\n    );\n    this.drawProtractor(0, this.initialRadius, degree0Line, degree0TextPos);\n\n    this.drawCross('active');\n    this.drawLink('long');\n    this.drawHandle('active');\n\n    const originalHandleCenter = this.handleCenter\n      .sub(this.render.options.offset)\n      .scaled(1 / this.render.options.microModeScale);\n    this.rotateTool.mousedownHandle(originalHandleCenter, this.originalCenter);\n  };\n\n  private dragMove = () => {\n    let lastSnappingRadius: number | undefined;\n    return throttle(\n      (\n        _dxFromStart: number,\n        _dyFromStart: number,\n        _clientX: number,\n        _clientY: number,\n        event: MouseEvent,\n      ) => {\n        if (!this.isRotating) {\n          return;\n        }\n\n        this.handleCenter = this.render\n          .page2obj(event)\n          .scaled(this.render.options.microModeScale)\n          .add(this.render.options.offset);\n\n        this.drawLink('moveHandle');\n        this.drawHandle('move');\n        this.drawCross('move');\n\n        this.rotateTool.mousemove(event);\n\n        const newProtractorRadius =\n          Vec2.dist(this.handleCenter, this.center) -\n          STYLE.HANDLE_MARGIN -\n          STYLE.HANDLE_RADIUS;\n        let newRadius = newProtractorRadius >= 0 ? newProtractorRadius : 0;\n        lastSnappingRadius = lastSnappingRadius ?? this.initialRadius;\n        if (\n          newRadius >= lastSnappingRadius * 1.4 ||\n          newRadius <= lastSnappingRadius / 1.4\n        ) {\n          lastSnappingRadius = newRadius;\n        } else {\n          newRadius = lastSnappingRadius;\n        }\n\n        const [degree0Line, degree0TextPos, rotateArcStart, textPos] =\n          this.getProtractorBaseInfo(newRadius);\n        this.drawRotateArc(\n          this.rotateTool.dragCtx?.angle || 0,\n          newRadius,\n          rotateArcStart,\n          textPos,\n        );\n        // NOTE: draw protractor behind arc\n        this.drawProtractor(\n          this.rotateTool.dragCtx?.angle || 0,\n          newRadius,\n          degree0Line,\n          degree0TextPos,\n        );\n\n        this.updateSnapAngleIndicator();\n      },\n      40, // 25fps\n    );\n  };\n\n  private dragEnd = (event: MouseEvent) => {\n    event.stopPropagation(); // Avoid triggering SelectTool's mouseup\n\n    this.rotateTool.mouseup();\n    this.rerender();\n  };\n\n  private hoverCrossIn = (event: MouseEvent) => {\n    const isSomeButtonPressed = event.buttons !== 0;\n    if (isSomeButtonPressed) {\n      return;\n    }\n\n    this.drawCross('active');\n    this.drawLink('long');\n  };\n\n  private hoverCrossOut = (event: MouseEvent) => {\n    const isSomeButtonPressed = event.buttons !== 0;\n    if (isSomeButtonPressed) {\n      return;\n    }\n\n    this.drawCross('inactive');\n    this.drawLink('short');\n  };\n\n  private dragCrossStart = (event: MouseEvent) => {\n    event.stopPropagation();\n    this.isMovingCenter = true;\n  };\n\n  private dragCrossMove = throttle(\n    (\n      _dxFromStart: number,\n      _dyFromStart: number,\n      _clientX: number,\n      _clientY: number,\n      event: MouseEvent,\n    ) => {\n      if (!this.isMovingCenter) {\n        return;\n      }\n\n      this.originalCenter = this.render.page2obj(event);\n\n      this.drawCross('move');\n      this.drawLink('moveCenter');\n    },\n    40,\n  );\n\n  private dragCrossEnd = (event: MouseEvent) => {\n    event.stopPropagation();\n\n    this.isMovingCenter = false;\n    this.originalCenter = this.render.page2obj(event);\n  };\n\n  private dragCrossEndOUtOfBounding = (_event: MouseEvent) => {\n    this.isMovingCenter = false;\n    this.rerender();\n  };\n\n  updateFloatingToolsPosition = throttle(() => {\n    if (!this.handle) {\n      return;\n    }\n\n    const handleCenterInViewport = CoordinateTransformation.canvasToView(\n      this.handleCenter,\n      this.render,\n    );\n    this.editor.event.updateFloatingTools.dispatch({\n      rotateHandlePosition: handleCenterInViewport,\n    });\n  }, 40);\n\n  private updateSnapAngleIndicator() {\n    const snapAngleDrawingProps = this.rotateTool.snapAngleDrawingProps;\n    if (\n      snapAngleDrawingProps === null ||\n      (snapAngleDrawingProps.snapMode === 'multiple-bonds' &&\n        snapAngleDrawingProps.isSnapping)\n    ) {\n      this.snapAngleIndicator?.remove();\n    } else {\n      const { isSnapping, absoluteAngle, relativeAngle, snapMode } =\n        snapAngleDrawingProps;\n      const drawingState: SnapAngleIndicatorState = isSnapping\n        ? 'noLine'\n        : snapMode === 'multiple-bonds'\n        ? 'noText'\n        : 'default';\n      this.drawSnapAngleIndicator(drawingState, absoluteAngle, relativeAngle);\n    }\n  }\n\n  private drawSnapAngleIndicator(\n    state: SnapAngleIndicatorState,\n    absoluteSnapAngle: number,\n    relativeSnapAngle: number,\n  ) {\n    this.snapAngleIndicator?.remove();\n    this.snapAngleIndicator = this.paper.set() as RaphaelElement;\n    const LINE_LENGTH = 30;\n    const TEXT_FONT_SIZE = 12;\n    const relativeSnapAngleInDegrees = vectorUtils.degrees(relativeSnapAngle);\n\n    const drawText = (textPosition: Vec2) =>\n      this.paper\n        .text(\n          textPosition.x,\n          textPosition.y,\n          `${Math.abs(relativeSnapAngleInDegrees)}ยฐ`,\n        )\n        .attr({\n          'font-size': TEXT_FONT_SIZE,\n        });\n\n    const drawLine = () => {\n      const lineVector = new Vec2(LINE_LENGTH, 0).rotate(absoluteSnapAngle);\n      return this.paper.path(`M0,0` + `l${lineVector.x},${lineVector.y}`).attr({\n        'stroke-dasharray': '-',\n        stroke: STYLE.INITIAL_COLOR,\n      });\n    };\n\n    switch (state) {\n      case 'noLine': {\n        const textAngle = normalizeAngle(\n          absoluteSnapAngle - relativeSnapAngle / 2,\n        );\n        const textPosition = new Vec2(20, 0).rotate(textAngle);\n        const text = drawText(textPosition).attr({\n          fill: STYLE.ACTIVE_COLOR,\n        });\n        this.snapAngleIndicator.push(text);\n        break;\n      }\n\n      case 'noText': {\n        const line = drawLine();\n        this.snapAngleIndicator.push(line);\n        break;\n      }\n\n      default: {\n        const line = drawLine();\n        const textPosition = new Vec2(LINE_LENGTH + 15, 0).rotate(\n          absoluteSnapAngle,\n        );\n        const text = drawText(textPosition).attr({\n          fill: STYLE.INITIAL_COLOR,\n        });\n        this.snapAngleIndicator.push(line);\n        this.snapAngleIndicator.push(text);\n        break;\n      }\n    }\n\n    this.snapAngleIndicator.translate(this.center.x, this.center.y);\n  }\n}\n\nexport default RotateController;\nexport { getDifference };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Action,\n  Editor as KetcherEditor,\n  FloatingToolsParams,\n  fromDescriptorsAlign,\n  fromMultipleMove,\n  fromNewCanvas,\n  IMAGE_KEY,\n  MULTITAIL_ARROW_KEY,\n  Pile,\n  provideEditorSettings,\n  Render,\n  ReStruct,\n  Scale,\n  Struct,\n  Vec2,\n  ketcherProvider,\n} from 'ketcher-core';\nimport {\n  DOMSubscription,\n  PipelineSubscription,\n  Subscription,\n} from 'subscription';\n\nimport closest from './shared/closest';\nimport { customOnChangeHandler } from './utils';\nimport { isEqual } from 'lodash/fp';\nimport { toolsMap } from './tool';\nimport { Highlighter } from './highlighter';\nimport { setFunctionalGroupsTooltip } from './utils/functionalGroupsTooltip';\nimport { ContextMenuInfo } from '../ui/views/components/ContextMenu/contextMenu.types';\nimport { HoverIcon } from './HoverIcon';\nimport RotateController from './tool/rotate-controller';\nimport {\n  Tool,\n  ToolConstructorInterface,\n  ToolEventHandlerName,\n} from './tool/Tool';\nimport { getSelectionMap, getStructCenter } from './utils/structLayout';\n\nconst SCALE = provideEditorSettings().microModeScale;\nconst HISTORY_SIZE = 32; // put me to options\n\nconst structObjects: Array<keyof typeof ReStruct.maps> = [\n  'atoms',\n  'bonds',\n  'frags',\n  'sgroups',\n  'sgroupData',\n  'rgroups',\n  'rxnArrows',\n  'rxnPluses',\n  'enhancedFlags',\n  'simpleObjects',\n  'texts',\n  'rgroupAttachmentPoints',\n  IMAGE_KEY,\n  MULTITAIL_ARROW_KEY,\n];\n\nconst highlightTargets = [\n  'atoms',\n  'bonds',\n  'rxnArrows',\n  'rxnPluses',\n  'functionalGroups',\n  'frags',\n  'merge',\n  'rgroups',\n  'rgroupAttachmentPoints',\n  'sgroups',\n  'sgroupData',\n  'enhancedFlags',\n  'simpleObjects',\n  'texts',\n  IMAGE_KEY,\n  MULTITAIL_ARROW_KEY,\n];\n\nfunction selectStereoFlagsIfNecessary(\n  atoms: any,\n  expAtoms: number[],\n): number[] {\n  const atomsOfFragments = {};\n  atoms.forEach((atom, atomId) => {\n    atomsOfFragments[atom.fragment]\n      ? atomsOfFragments[atom.fragment].push(atomId)\n      : (atomsOfFragments[atom.fragment] = [atomId]);\n  });\n\n  const stereoFlags: number[] = [];\n\n  Object.keys(atomsOfFragments).forEach((fragId) => {\n    let shouldSelSFlag = true;\n    atomsOfFragments[fragId].forEach((atomId) => {\n      if (!expAtoms.includes(atomId)) shouldSelSFlag = false;\n    });\n    shouldSelSFlag && stereoFlags.push(Number(fragId));\n  });\n  return stereoFlags;\n}\n\nexport interface Selection {\n  atoms?: Array<number>;\n  bonds?: Array<number>;\n  enhancedFlags?: Array<number>;\n  rxnPluses?: Array<number>;\n  rxnArrows?: Array<number>;\n  texts?: Array<number>;\n  rgroupAttachmentPoints?: Array<number>;\n  [MULTITAIL_ARROW_KEY]?: Array<number>;\n}\n\nclass Editor implements KetcherEditor {\n  #origin?: any;\n  render: Render;\n  _selection: Selection | null;\n  _tool: Tool | null;\n  historyStack: any;\n  historyPtr: any;\n  errorHandler: ((message: string) => void) | null;\n  highlights: Highlighter;\n  hoverIcon: HoverIcon;\n  lastCursorPosition: { x: number; y: number };\n  contextMenu: ContextMenuInfo;\n  rotateController: RotateController;\n  event: {\n    message: Subscription;\n    elementEdit: PipelineSubscription;\n    zoomIn: PipelineSubscription;\n    zoomOut: PipelineSubscription;\n    bondEdit: PipelineSubscription;\n    rgroupEdit: PipelineSubscription;\n    sgroupEdit: PipelineSubscription;\n    sdataEdit: PipelineSubscription;\n    quickEdit: PipelineSubscription;\n    attachEdit: PipelineSubscription;\n    removeFG: PipelineSubscription;\n    change: Subscription;\n    selectionChange: PipelineSubscription;\n    aromatizeStruct: PipelineSubscription;\n    dearomatizeStruct: PipelineSubscription;\n    enhancedStereoEdit: PipelineSubscription;\n    confirm: PipelineSubscription;\n    showInfo: PipelineSubscription;\n    apiSettings: PipelineSubscription;\n    cursor: Subscription;\n    updateFloatingTools: Subscription<FloatingToolsParams>;\n  };\n\n  public serverSettings = {};\n\n  lastEvent: any;\n  macromoleculeConvertionError: string | null | undefined;\n\n  constructor(clientArea, options, serverSettings) {\n    this.render = new Render(\n      clientArea,\n      Object.assign(\n        {\n          microModeScale: SCALE,\n        },\n        options,\n      ),\n      options.reuseRestructIfExist !== false,\n    );\n\n    this._selection = null; // eslint-disable-line\n    this._tool = null; // eslint-disable-line\n    this.historyStack = [];\n    this.historyPtr = 0;\n    this.errorHandler = null;\n    this.highlights = new Highlighter(this);\n    this.renderAndRecoordinateStruct =\n      this.renderAndRecoordinateStruct.bind(this);\n    this.setOptions = this.setOptions.bind(this);\n    this.setServerSettings(serverSettings);\n    this.lastCursorPosition = {\n      x: 0,\n      y: 0,\n    };\n    this.hoverIcon = new HoverIcon(this);\n    this.hoverIcon.updatePosition();\n    this.contextMenu = {};\n    this.rotateController = new RotateController(this);\n\n    this.event = {\n      message: new Subscription(),\n      elementEdit: new PipelineSubscription(),\n      bondEdit: new PipelineSubscription(),\n      zoomIn: new PipelineSubscription(),\n      zoomOut: new PipelineSubscription(),\n      rgroupEdit: new PipelineSubscription(),\n      sgroupEdit: new PipelineSubscription(),\n      sdataEdit: new PipelineSubscription(),\n      quickEdit: new PipelineSubscription(),\n      attachEdit: new PipelineSubscription(),\n      removeFG: new PipelineSubscription(),\n      change: new Subscription(),\n      selectionChange: new PipelineSubscription(),\n      aromatizeStruct: new PipelineSubscription(),\n      dearomatizeStruct: new PipelineSubscription(),\n      // TODO: correct\n      enhancedStereoEdit: new PipelineSubscription(),\n      confirm: new PipelineSubscription(),\n      cursor: new PipelineSubscription(),\n      showInfo: new PipelineSubscription(),\n      apiSettings: new PipelineSubscription(),\n      updateFloatingTools: new Subscription(),\n    };\n\n    domEventSetup(this, clientArea);\n    this.render.paper.canvas.setAttribute('data-testid', 'canvas');\n  }\n\n  isDitrty(): boolean {\n    const position = this.historyPtr;\n    const length = this.historyStack.length;\n    if (!length || !this.#origin) {\n      return false;\n    }\n    return !isEqual(this.historyStack[position - 1], this.#origin);\n  }\n\n  setOrigin(): void {\n    const position = this.historyPtr;\n    this.#origin = position ? this.historyStack[position - 1] : null;\n  }\n\n  tool(name?: any, opts?: any): Tool | null {\n    /* eslint-disable no-underscore-dangle */\n    if (arguments.length === 0) {\n      return this._tool;\n    }\n\n    if (this._tool && this._tool.cancel) {\n      this._tool.cancel();\n    }\n\n    const ToolConstructor: ToolConstructorInterface = toolsMap[name];\n\n    const tool = new ToolConstructor(this, opts);\n\n    const isAtomToolChosen = name === 'atom';\n    if (!isAtomToolChosen) {\n      this.hoverIcon.hide(true);\n    }\n\n    if (!tool || tool.isNotActiveTool) {\n      return null;\n    }\n\n    const isSelectToolChosen = name === 'select';\n    if (!isSelectToolChosen) {\n      this.rotateController.clean();\n    }\n\n    this._tool = tool;\n    return this._tool;\n    /* eslint-enable no-underscore-dangle */\n  }\n\n  clear() {\n    this.struct(undefined);\n  }\n\n  renderAndRecoordinateStruct(struct: Struct, needToCenterStruct = true) {\n    const action = fromNewCanvas(this.render.ctab, struct);\n    this.update(action);\n    if (needToCenterStruct) {\n      this.centerStruct();\n    }\n    return this.render.ctab.molecule;\n  }\n\n  struct(value?: Struct, needToCenterStruct = true): Struct {\n    if (arguments.length === 0) {\n      return this.render.ctab.molecule;\n    }\n\n    this.selection(null);\n    const struct = value || new Struct();\n\n    const molecule = this.renderAndRecoordinateStruct(\n      struct,\n      needToCenterStruct,\n    );\n\n    this.hoverIcon.create();\n    return molecule;\n  }\n\n  // this is used by API addFragment method\n  structToAddFragment(value: Struct): Struct {\n    const superStruct = value.mergeInto(this.render.ctab.molecule);\n\n    return this.renderAndRecoordinateStruct(superStruct);\n  }\n\n  setOptions(opts: string) {\n    const options = JSON.parse(opts);\n    this.event.apiSettings.dispatch({ ...options });\n    const wasViewOnlyEnabled = !!this.render.options.viewOnlyMode;\n    const result = this.render.updateOptions(opts);\n    this.updateToolAfterOptionsChange(wasViewOnlyEnabled);\n    return result;\n  }\n\n  options(value?: any) {\n    if (arguments.length === 0) {\n      return this.render.options;\n    }\n\n    const struct = this.render.ctab.molecule;\n    const zoom = this.render.options.zoom;\n    this.render.clientArea.innerHTML = '';\n    const wasViewOnlyEnabled = !!this.render.options.viewOnlyMode;\n\n    this.render = new Render(\n      this.render.clientArea,\n      Object.assign({ microModeScale: SCALE }, value),\n    );\n    this.updateToolAfterOptionsChange(wasViewOnlyEnabled);\n    this.struct(struct);\n    this.render.setZoom(zoom);\n    this.render.update();\n    return this.render.options;\n  }\n\n  public setServerSettings(serverSettings) {\n    this.serverSettings = serverSettings;\n  }\n\n  private updateToolAfterOptionsChange(wasViewOnlyEnabled: boolean) {\n    const isViewOnlyEnabled = this.render.options.viewOnlyMode;\n    if (\n      (!wasViewOnlyEnabled && isViewOnlyEnabled === true) ||\n      (wasViewOnlyEnabled && isViewOnlyEnabled === false)\n    ) {\n      // We need to reset the tool to make sure it was recreated\n      this.tool('select');\n      this.event.change.dispatch('force');\n      ketcherProvider.getKetcher().changeEvent.dispatch('force');\n    }\n  }\n\n  zoom(value?: any, event?: WheelEvent) {\n    if (arguments.length === 0 || this.render.options.zoom === value) {\n      return this.render.options.zoom;\n    }\n\n    this.render.setZoom(value, event);\n\n    this.render.update();\n    this.rotateController.rerender();\n    return this.render.options.zoom;\n  }\n\n  centerStruct() {\n    const structure = this.render.ctab;\n    const structCenter = getStructCenter(structure);\n    const viewBoxCenter = new Vec2(\n      this.render.viewBox.minX + this.render.viewBox.width / 2,\n      this.render.viewBox.minY + this.render.viewBox.height / 2,\n    );\n    const viewBoxCenterInProto = Scale.canvasToModel(\n      viewBoxCenter,\n      this.render.options,\n    );\n    const shiftVector = viewBoxCenterInProto.sub(structCenter);\n\n    const structureToMove = getSelectionMap(structure);\n\n    const action = fromMultipleMove(structure, structureToMove, shiftVector);\n    this.update(action, true);\n  }\n\n  zoomAccordingContent(struct: Struct) {\n    const MIN_ZOOM_VALUE = 0.1;\n    const MAX_ZOOM_VALUE = 1;\n    const MARGIN_IN_PIXELS = 60;\n    const parsedStructCoordBoundingBox = struct.getCoordBoundingBox();\n    const parsedStructSize = new Vec2(\n      parsedStructCoordBoundingBox.max.x - parsedStructCoordBoundingBox.min.x,\n      parsedStructCoordBoundingBox.max.y - parsedStructCoordBoundingBox.min.y,\n    );\n    const parsedStructSizeInPixels = {\n      width:\n        parsedStructSize.x *\n        this.render.options.microModeScale *\n        this.render.options.zoom,\n      height:\n        parsedStructSize.y *\n        this.render.options.microModeScale *\n        this.render.options.zoom,\n    };\n    const clientAreaBoundingBox =\n      this.render.clientArea.getBoundingClientRect();\n\n    if (\n      parsedStructSizeInPixels.width + MARGIN_IN_PIXELS <\n        clientAreaBoundingBox.width &&\n      parsedStructSizeInPixels.height + MARGIN_IN_PIXELS <\n        clientAreaBoundingBox.height\n    ) {\n      return;\n    }\n\n    let newZoomValue =\n      this.render.options.zoom /\n      (parsedStructSizeInPixels.height - clientAreaBoundingBox.height >\n      parsedStructSizeInPixels.width - clientAreaBoundingBox.width\n        ? parsedStructSizeInPixels.height / clientAreaBoundingBox.height\n        : parsedStructSizeInPixels.width / clientAreaBoundingBox.width);\n\n    if (newZoomValue >= MAX_ZOOM_VALUE) {\n      this.zoom(MAX_ZOOM_VALUE);\n      return;\n    }\n\n    newZoomValue -= MARGIN_IN_PIXELS / clientAreaBoundingBox.width;\n\n    this.zoom(\n      newZoomValue < MIN_ZOOM_VALUE\n        ? MIN_ZOOM_VALUE\n        : Number(newZoomValue.toFixed(2)),\n    );\n  }\n\n  selection(ci?: any) {\n    if (arguments.length === 0) {\n      return this._selection; // eslint-disable-line\n    }\n\n    let ReStruct = this.render.ctab;\n    let selectAll = false;\n    this._selection = null; // eslint-disable-line\n    if (ci === 'all') {\n      selectAll = true;\n      // TODO: better way will be this.struct()\n      ci = structObjects.reduce((res, key) => {\n        res[key] = Array.from(ReStruct[key].keys());\n        return res;\n      }, {});\n    }\n\n    if (ci === 'descriptors') {\n      ReStruct = this.render.ctab;\n      ci = { sgroupData: Array.from(ReStruct.sgroupData.keys()) };\n    }\n\n    if (ci) {\n      const res: Selection = {};\n\n      Object.keys(ci).forEach((key) => {\n        if (ci[key].length > 0)\n          // TODO: deep merge\n          res[key] = ci[key].slice();\n      });\n\n      if (Object.keys(res).length !== 0) {\n        this._selection = res; // eslint-disable-line\n      }\n      const stereoFlags = selectStereoFlagsIfNecessary(\n        this.struct().atoms,\n        this.explicitSelected().atoms,\n      );\n      if (stereoFlags.length !== 0) {\n        this._selection && this._selection.enhancedFlags\n          ? (this._selection.enhancedFlags = Array.from(\n              new Set([...this._selection.enhancedFlags, ...stereoFlags]),\n            ))\n          : (res.enhancedFlags = stereoFlags);\n      }\n    }\n\n    this.render.ctab.setSelection(this._selection); // eslint-disable-line\n    this.event.selectionChange.dispatch(this._selection); // eslint-disable-line\n\n    if (selectAll) {\n      this.rotateController.rerender();\n    } else if (this._selection === null) {\n      this.rotateController.clean();\n    }\n\n    this.render.update(false, null);\n    return this._selection; // eslint-disable-line\n  }\n\n  hover(\n    ci: { id: number; map: string } | null,\n    newTool?: any,\n    event?: PointerEvent,\n  ) {\n    const tool = newTool || this._tool; // eslint-disable-line\n\n    if (\n      'ci' in tool &&\n      (!ci || tool.ci.map !== ci.map || tool.ci.id !== ci.id)\n    ) {\n      setHover(tool.ci, false, this.render);\n      delete tool.ci;\n    }\n\n    if (ci && setHover(ci, true, this.render)) tool.ci = ci;\n\n    if (!event) return;\n\n    setFunctionalGroupsTooltip({\n      editor: this,\n      event,\n      isShow: true,\n    });\n  }\n\n  update(action: Action | true, ignoreHistory?: boolean) {\n    setFunctionalGroupsTooltip({\n      editor: this,\n      isShow: false,\n    });\n\n    if (action === true) {\n      this.render.update(true, null); // force\n    } else {\n      if (!ignoreHistory && !action.isDummy()) {\n        this.historyStack.splice(this.historyPtr, HISTORY_SIZE + 1, action);\n        if (this.historyStack.length > HISTORY_SIZE) {\n          this.historyStack.shift();\n        }\n        this.historyPtr = this.historyStack.length;\n        this.event.change.dispatch(action); // TODO: stoppable here. This has to be removed, however some implicit subscription to change event exists somewhere in the app and removing it leads to unexpected behavior, investigate further\n        ketcherProvider.getKetcher().changeEvent.dispatch(action);\n      }\n      this.render.update(false, null);\n    }\n  }\n\n  historySize() {\n    return {\n      undo: this.historyPtr,\n      redo: this.historyStack.length - this.historyPtr,\n    };\n  }\n\n  clearHistoryStack() {\n    this.historyStack = [];\n    this.historyPtr = 0;\n  }\n\n  undo() {\n    const ketcherChangeEvent = ketcherProvider.getKetcher().changeEvent;\n    if (this.historyPtr === 0) {\n      throw new Error('Undo stack is empty');\n    }\n    if (this._tool && this._tool.cancel) {\n      this._tool.cancel();\n    }\n\n    this.selection(null);\n\n    this.historyPtr--;\n    const stack = this.historyStack[this.historyPtr];\n    const action = stack.perform(this.render.ctab);\n\n    this.historyStack[this.historyPtr] = action;\n\n    if (this._tool instanceof toolsMap.paste) {\n      this.event.change.dispatch(); // TODO: stoppable here. This has to be removed, however some implicit subscription to change event exists somewhere in the app and removing it leads to unexpected behavior, investigate further\n      ketcherChangeEvent.dispatch();\n    } else {\n      this.event.change.dispatch(action); // TODO: stoppable here. This has to be removed, however some implicit subscription to change event exists somewhere in the app and removing it leads to unexpected behavior, investigate further\n      ketcherChangeEvent.dispatch(action);\n    }\n\n    this.render.update();\n  }\n\n  redo() {\n    const ketcherChangeEvent = ketcherProvider.getKetcher().changeEvent;\n    if (this.historyPtr === this.historyStack.length) {\n      throw new Error('Redo stack is empty');\n    }\n\n    if (this._tool && this._tool.cancel) {\n      this._tool.cancel();\n    }\n\n    this.selection(null);\n\n    const action = this.historyStack[this.historyPtr].perform(this.render.ctab);\n    this.historyStack[this.historyPtr] = action;\n    this.historyPtr++;\n\n    if (this._tool instanceof toolsMap.paste) {\n      this.event.change.dispatch(); // TODO: stoppable here. This has to be removed, however some implicit subscription to change event exists somewhere in the app and removing it leads to unexpected behavior, investigate further\n      ketcherChangeEvent.dispatch();\n    } else {\n      this.event.change.dispatch(action); // TODO: stoppable here. This has to be removed, however some implicit subscription to change event exists somewhere in the app and removing it leads to unexpected behavior, investigate further\n      ketcherChangeEvent.dispatch(action);\n    }\n\n    this.render.update();\n  }\n\n  subscribe(eventName: any, handler: any) {\n    const subscriber = {\n      handler,\n    };\n\n    switch (eventName) {\n      case 'change': {\n        const subscribeFuncWrapper = (action) =>\n          customOnChangeHandler(action, handler);\n        subscriber.handler = subscribeFuncWrapper;\n        ketcherProvider.getKetcher().changeEvent.add(subscribeFuncWrapper);\n        break;\n      }\n\n      default:\n        this.event[eventName].add(handler);\n    }\n\n    return subscriber;\n  }\n\n  unsubscribe(eventName: any, subscriber: any) {\n    // Only for event type - subscription\n    this.event[eventName].remove(subscriber.handler);\n  }\n\n  findItem(event: any, maps: Array<string> | null, skip: any = null) {\n    const pos = new Vec2(this.render.page2obj(event));\n\n    return closest.item(this.render.ctab, pos, maps, skip, this.render.options);\n  }\n\n  findMerge(srcItems: any, maps: any) {\n    return closest.merge(this.render.ctab, srcItems, maps, this.render.options);\n  }\n\n  explicitSelected() {\n    const selection = this.selection() || {};\n    const res = structObjects.reduce((acc, key) => {\n      acc[key] = selection[key] ? selection[key].slice() : [];\n      return acc;\n    }, {} as any);\n\n    const struct = this.render.ctab.molecule;\n\n    // \"auto-select\" the atoms for the bonds in selection\n    if (res.bonds) {\n      res.bonds.forEach((bid) => {\n        const bond = struct.bonds.get(bid)!;\n        res.atoms = res.atoms || [];\n        if (res.atoms.indexOf(bond.begin) < 0) {\n          res.atoms.push(bond.begin);\n        }\n\n        if (res.atoms.indexOf(bond.end) < 0) {\n          res.atoms.push(bond.end);\n        }\n      });\n    }\n\n    // \"auto-select\" the bonds with both atoms selected\n    if (res.atoms && res.bonds) {\n      struct.bonds.forEach((bond, bid) => {\n        if (\n          res.bonds.indexOf(bid) < 0 &&\n          res.atoms.indexOf(bond.begin) >= 0 &&\n          res.atoms.indexOf(bond.end) >= 0\n        ) {\n          res.bonds = res.bonds || [];\n          res.bonds.push(bid);\n        }\n      });\n    }\n\n    return res;\n  }\n\n  structSelected() {\n    const struct = this.render.ctab.molecule;\n    const selection = this.explicitSelected();\n    const dst = struct.clone(\n      new Pile(selection.atoms),\n      new Pile(selection.bonds),\n      true,\n      null,\n      new Pile(selection.simpleObjects),\n      new Pile(selection.texts),\n      null,\n      new Pile(selection.images),\n      new Pile(selection[MULTITAIL_ARROW_KEY]),\n    );\n\n    // Copy by its own as Struct.clone doesn't support\n    // arrows/pluses id sets\n    struct.rxnArrows.forEach((item, id) => {\n      if (selection.rxnArrows.indexOf(id) !== -1)\n        dst.rxnArrows.add(item.clone());\n    });\n    struct.rxnPluses.forEach((item, id) => {\n      if (selection.rxnPluses.indexOf(id) !== -1)\n        dst.rxnPluses.add(item.clone());\n    });\n\n    dst.isReaction = struct.isReaction && struct.isRxn();\n\n    return dst;\n  }\n\n  alignDescriptors() {\n    this.selection(null);\n    const action = fromDescriptorsAlign(this.render.ctab);\n    this.update(action);\n    this.render.update(true);\n  }\n\n  setMacromoleculeConvertionError(errorMessage: string) {\n    this.macromoleculeConvertionError = errorMessage;\n  }\n\n  clearMacromoleculeConvertionError() {\n    this.macromoleculeConvertionError = null;\n  }\n\n  focusCliparea() {\n    const cliparea: HTMLElement | null = document.querySelector('.cliparea');\n    cliparea?.focus();\n  }\n}\n\n/**\n * Main button pressed, usually the left button or the un-initialized state\n * See: https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button\n */\nfunction isMouseMainButtonPressed(event: MouseEvent) {\n  return event.button === 0;\n}\n\nfunction resetSelectionOnCanvasClick(\n  editor: Editor,\n  eventName: string,\n  clientArea: HTMLElement,\n  event,\n) {\n  if (\n    eventName === 'mouseup' &&\n    editor.selection() &&\n    clientArea.contains(event.target)\n  ) {\n    editor.selection(null);\n  }\n}\n\nfunction updateLastCursorPosition(editor: Editor, event) {\n  const events = ['mousemove', 'click', 'mousedown', 'mouseup', 'mouseover'];\n  if (events.includes(event.type)) {\n    const clientAreaBoundingBox =\n      editor.render.clientArea.getBoundingClientRect();\n\n    editor.lastCursorPosition = {\n      x: event.clientX - clientAreaBoundingBox.x,\n      y: event.clientY - clientAreaBoundingBox.y,\n    };\n  }\n}\n\nfunction isContextMenuClosed(contextMenu: ContextMenuInfo) {\n  return !Object.values(contextMenu).some(Boolean);\n}\n\nfunction useToolIfNeeded(\n  editor: Editor,\n  eventHandlerName: ToolEventHandlerName,\n  clientArea: HTMLElement,\n  event,\n) {\n  const editorTool = editor.tool();\n  if (!editorTool) {\n    return false;\n  }\n\n  editor.lastEvent = event;\n  const conditions = [\n    eventHandlerName in editorTool,\n    clientArea.contains(event.target) || editorTool.isSelectionRunning?.(),\n    isContextMenuClosed(editor.contextMenu),\n  ];\n\n  if (conditions.every((condition) => condition)) {\n    editorTool[eventHandlerName]?.(event);\n    return true;\n  }\n\n  return false;\n}\n\nfunction domEventSetup(editor: Editor, clientArea: HTMLElement) {\n  // TODO: addEventListener('resize', ...);\n  const trackedDomEvents: {\n    target: Node;\n    eventName: string;\n    toolEventHandler: ToolEventHandlerName;\n  }[] = [\n    {\n      target: clientArea,\n      eventName: 'click',\n      toolEventHandler: 'click',\n    },\n    {\n      target: clientArea,\n      eventName: 'dblclick',\n      toolEventHandler: 'dblclick',\n    },\n    {\n      target: clientArea,\n      eventName: 'mousedown',\n      toolEventHandler: 'mousedown',\n    },\n    {\n      target: document,\n      eventName: 'mousemove',\n      toolEventHandler: 'mousemove',\n    },\n    {\n      target: document,\n      eventName: 'mouseup',\n      toolEventHandler: 'mouseup',\n    },\n    {\n      target: document,\n      eventName: 'mouseleave',\n      toolEventHandler: 'mouseleave',\n    },\n    {\n      target: clientArea,\n      eventName: 'mouseleave',\n      toolEventHandler: 'mouseLeaveClientArea',\n    },\n    {\n      target: clientArea,\n      eventName: 'mouseover',\n      toolEventHandler: 'mouseover',\n    },\n  ];\n\n  trackedDomEvents.forEach(({ target, eventName, toolEventHandler }) => {\n    editor.event[eventName] = new DOMSubscription();\n    const subs = editor.event[eventName];\n\n    target.addEventListener(eventName, (...args) => {\n      if (window.isPolymerEditorTurnedOn) return;\n      subs.dispatch(...args);\n    });\n\n    subs.add((event) => {\n      updateLastCursorPosition(editor, event);\n\n      if (\n        ['mouseup', 'mousedown', 'click', 'dbclick'].includes(event.type) &&\n        !isMouseMainButtonPressed(event)\n      ) {\n        return true;\n      }\n\n      if (eventName !== 'mouseup' && eventName !== 'mouseleave') {\n        // to complete drag actions\n        if (!event.target || event.target.nodeName === 'DIV') {\n          // click on scroll\n          editor.hover(null);\n          return true;\n        }\n      }\n\n      const isToolUsed = useToolIfNeeded(\n        editor,\n        toolEventHandler,\n        clientArea,\n        event,\n      );\n      if (isToolUsed) {\n        return true;\n      }\n\n      resetSelectionOnCanvasClick(editor, eventName, clientArea, event);\n\n      return true;\n    }, -1);\n  });\n}\n\nexport { Editor };\nexport default Editor;\n\nfunction setHover(ci: any, visible: any, render: any) {\n  if (highlightTargets.indexOf(ci.map) === -1) {\n    return false;\n  }\n\n  let item: any = null;\n\n  if (ci.map === 'merge') {\n    Object.keys(ci.items).forEach((mp) => {\n      ci.items[mp].forEach((dstId) => {\n        item = render.ctab[mp].get(dstId)!;\n\n        if (item) {\n          item.setHover(visible, render);\n        }\n      });\n    });\n\n    return true;\n  }\n\n  if (ci.map === 'functionalGroups') ci.map = 'sgroups'; // TODO: Refactor object\n\n  item = (render.ctab[ci.map] as Map<any, any>).get(ci.id);\n  if (!item) {\n    return true; // TODO: fix, attempt to highlight a deleted item\n  }\n\n  if (\n    (ci.map === 'sgroups' && item.item.type === 'DAT') ||\n    ci.map === 'sgroupData'\n  ) {\n    // set highlight for both the group and the data item\n    const item1 = render.ctab.sgroups.get(ci.id);\n    if (item1) {\n      item1.setHover(visible, render);\n    }\n\n    const item2 = render.ctab.sgroupData.get(ci.id);\n    if (item2) {\n      item2.setHover(visible, render);\n    }\n  } else {\n    item.setHover(visible, render);\n  }\n  return true;\n}\n","import { FunctionalGroup } from 'ketcher-core';\nimport type { TriggerEvent, PredicateParams } from 'react-contexify';\nimport { Selection } from '../../../../editor/Editor';\n\nexport enum CONTEXT_MENU_ID {\n  FOR_BONDS = 'context-menu-for-bonds',\n  FOR_ATOMS = 'context-menu-for-atoms',\n  FOR_SELECTION = 'context-menu-for-selection',\n  FOR_FUNCTIONAL_GROUPS = 'context-menu-for-functional-groups',\n  FOR_R_GROUP_ATTACHMENT_POINT = 'context-menu-for-rgroup-attachment-point',\n  FOR_MULTITAIL_ARROW = 'context-menu-for-multiple-arrowed',\n  FOR_MACROMOLECULE = 'context-menu-for-macromolecule',\n}\n\nexport type ItemData = unknown;\n\ninterface BaseContextMenuProps {\n  id: CONTEXT_MENU_ID;\n}\n\ninterface WithExtraItems {\n  extraItemsSelected?: boolean;\n}\n\nexport interface BondsContextMenuProps\n  extends BaseContextMenuProps,\n    WithExtraItems {\n  id: CONTEXT_MENU_ID.FOR_BONDS;\n  bondIds: Array<number>;\n}\n\nexport interface AtomContextMenuProps\n  extends BaseContextMenuProps,\n    WithExtraItems {\n  id: CONTEXT_MENU_ID.FOR_ATOMS;\n  atomIds: Array<number>;\n}\n\nexport interface RGroupAttachmentPointContextMenuProps\n  extends BaseContextMenuProps,\n    WithExtraItems {\n  id: CONTEXT_MENU_ID.FOR_R_GROUP_ATTACHMENT_POINT;\n  rgroupAttachmentPoints: Array<number>;\n  atomIds?: AtomContextMenuProps['atomIds'];\n}\nexport interface SelectionContextMenuProps\n  extends BaseContextMenuProps,\n    Partial<Pick<BondsContextMenuProps, 'bondIds'>>,\n    Partial<Pick<AtomContextMenuProps, 'atomIds'>>,\n    Partial<\n      Pick<RGroupAttachmentPointContextMenuProps, 'rgroupAttachmentPoints'>\n    > {\n  id: CONTEXT_MENU_ID.FOR_SELECTION;\n}\n\nexport interface FunctionalGroupsContextMenuProps extends BaseContextMenuProps {\n  id: CONTEXT_MENU_ID.FOR_FUNCTIONAL_GROUPS;\n  functionalGroups: FunctionalGroup[];\n}\n\nexport interface MacromoleculeContextMenuProps extends BaseContextMenuProps {\n  id: CONTEXT_MENU_ID.FOR_MACROMOLECULE;\n  functionalGroups: FunctionalGroup[];\n}\n\nexport interface MultitailArrowContextMenuProps {\n  id: CONTEXT_MENU_ID.FOR_MULTITAIL_ARROW;\n  itemId: number;\n  tailId: number | null;\n}\n\nexport type ContextMenuProps =\n  | BondsContextMenuProps\n  | AtomContextMenuProps\n  | SelectionContextMenuProps\n  | FunctionalGroupsContextMenuProps\n  | RGroupAttachmentPointContextMenuProps\n  | MultitailArrowContextMenuProps\n  | MacromoleculeContextMenuProps;\n\nexport interface MenuItemsProps<T extends ContextMenuProps> {\n  triggerEvent?: TriggerEvent;\n  propsFromTrigger?: T;\n}\n\nexport type ItemEventParams<T extends ContextMenuProps = ContextMenuProps> =\n  PredicateParams<T, ItemData>;\n\nexport type ContextMenuInfo = {\n  [id in CONTEXT_MENU_ID]?: boolean;\n};\n\nexport enum ContextMenuTriggerType {\n  None = 'none',\n  Selection = 'selection',\n  ClosestItem = 'closestItem',\n}\n\nexport interface ClosestItem {\n  id: number;\n  dist: number;\n  map: string /* should be enum something like keys of findMaps from packages/ketcher-react/src/script/editor/shared/closest.ts */;\n}\n\nexport interface GetIsItemInSelectionArgs {\n  item: ClosestItem | null;\n  selection: Selection | null;\n  selectedFunctionalGroups: Map<number, FunctionalGroup>;\n  selectedSGroupsIds: Set<number>;\n}\n","import { useCallback } from 'react';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport { mapAtomIdsToAtoms } from 'src/script/editor/tool/select';\nimport { updateSelectedAtoms } from 'src/script/ui/state/modal/atoms';\nimport { AtomContextMenuProps, ItemEventParams } from '../contextMenu.types';\n\ntype Params = ItemEventParams<AtomContextMenuProps>;\n\nconst useAtomEdit = () => {\n  const { getKetcherInstance } = useAppContext();\n\n  const handler = useCallback(\n    async ({ props }: Params) => {\n      const editor = getKetcherInstance().editor as Editor;\n      const molecule = editor.render.ctab;\n      const atomIds = props?.atomIds || [];\n      const atoms = mapAtomIdsToAtoms(atomIds, molecule);\n\n      const newAtom = editor.event.elementEdit.dispatch(atoms);\n\n      updateSelectedAtoms({\n        atoms: atomIds,\n        changeAtomPromise: newAtom,\n        editor,\n      });\n    },\n    [getKetcherInstance],\n  );\n\n  const disabled = useCallback(({ props }: Params) => {\n    const atomIds = props?.atomIds;\n    if (Array.isArray(atomIds) && atomIds.length !== 0) {\n      return false;\n    }\n\n    return true;\n  }, []);\n\n  return [handler, disabled] as const;\n};\n\nexport default useAtomEdit;\n","import { difference } from 'lodash';\n\n/**\n * Remove the word `bond` out of the title\n *\n * @example\n * formatTitle('Single Bond') === 'Single'\n */\nexport const formatTitle = (title: string) => {\n  return title.slice(0, -5);\n};\n\n/**\n * Get bond names from default export of `src/script/ui/action/tools.js`\n *\n * @returns `['bond-single', 'bond-up', 'bond-down', 'bond-updown', 'bond-double',\n * 'bond-crossed', 'bond-triple', 'bond-aromatic', 'bond-any', 'bond-hydrogen',\n * 'bond-singledouble', 'bond-singlearomatic', 'bond-doublearomatic', 'bond-dative']`\n */\nexport const getBondNames = (tools) => {\n  return Object.keys(tools).filter((key) => key.startsWith('bond-'));\n};\n\nexport const queryBondNames = [\n  'bond-any',\n  'bond-aromatic',\n  'bond-singledouble',\n  'bond-singlearomatic',\n  'bond-doublearomatic',\n];\n\n/**\n * Get bond names except for query bonds\n *\n * @returns `['bond-single', 'bond-up', 'bond-down', 'bond-updown', 'bond-double',\n * 'bond-crossed', 'bond-triple', 'bond-aromatic', 'bond-hydrogen', 'bond-dative']`\n */\nexport const getNonQueryBondNames = (tools) => {\n  const allBondNames = getBondNames(tools);\n  return difference(allBondNames, queryBondNames);\n};\n\nexport const noOperation = () => null;\n\nexport function onlyHasProperty<T extends object>(\n  checkedObject: T,\n  key: keyof T,\n  ignoredProps: string[] = [],\n) {\n  const props = Object.keys(checkedObject).filter(\n    (key) => !ignoredProps.includes(key),\n  );\n\n  const numberOfProps = props.length;\n  return numberOfProps === 1 && key in checkedObject;\n}\n","import { findStereoAtoms, KetcherLogger } from 'ketcher-core';\nimport { useCallback, useRef } from 'react';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport EnhancedStereoTool from 'src/script/editor/tool/enhanced-stereo';\nimport { AtomContextMenuProps, ItemEventParams } from '../contextMenu.types';\nimport { noOperation } from '../utils';\n\ntype Params = ItemEventParams<AtomContextMenuProps>;\n\nconst useAtomStereo = () => {\n  const { getKetcherInstance } = useAppContext();\n  const stereoAtomIdsRef = useRef<number[] | undefined>();\n\n  const handler = useCallback(\n    async ({ props }: Params) => {\n      if (!props || !stereoAtomIdsRef.current) {\n        return;\n      }\n\n      const editor = getKetcherInstance().editor as Editor;\n\n      try {\n        const action = await EnhancedStereoTool.changeAtomsStereoAction(\n          editor,\n          stereoAtomIdsRef.current,\n        );\n\n        action && editor.update(action);\n      } catch (e) {\n        KetcherLogger.error('useAtomStereo.ts::useAtomStereo::handler', e);\n        noOperation();\n      }\n    },\n    [getKetcherInstance],\n  );\n\n  const disabled = useCallback(\n    ({ props }: Params) => {\n      const editor = getKetcherInstance().editor as Editor;\n      const stereoAtomIds: number[] = findStereoAtoms(\n        editor.struct(),\n        props?.atomIds,\n      );\n      stereoAtomIdsRef.current = stereoAtomIds;\n\n      if (Array.isArray(stereoAtomIds) && stereoAtomIds.length !== 0) {\n        return false;\n      }\n\n      return true;\n    },\n    [getKetcherInstance],\n  );\n\n  return [handler, disabled] as const;\n};\n\nexport default useAtomStereo;\n","import { fromFragmentDeletion } from 'ketcher-core';\nimport { useCallback } from 'react';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport {\n  ItemEventParams,\n  SelectionContextMenuProps,\n} from '../contextMenu.types';\n\ntype Params = ItemEventParams<SelectionContextMenuProps>;\n\nconst useDelete = () => {\n  const { getKetcherInstance } = useAppContext();\n\n  const handler = useCallback(\n    async ({ props }: Params) => {\n      const editor = getKetcherInstance().editor as Editor;\n      const molecule = editor.render.ctab;\n      const itemsToDelete = editor.selection() || {\n        bonds: props?.bondIds,\n        atoms: props?.atomIds,\n      };\n\n      const action = fromFragmentDeletion(molecule, itemsToDelete);\n      editor.update(action);\n\n      editor.selection(null);\n      editor.focusCliparea();\n    },\n    [getKetcherInstance],\n  );\n\n  return handler;\n};\n\nexport default useDelete;\n","import { ToggleButton, ToggleButtonGroup } from '@mui/material';\nimport classes from './ToggleButtonGroup.module.less';\nimport clsx from 'clsx';\nimport { useCallback, useState } from 'react';\n\nexport default function ButtonGroup<T>({\n  buttons,\n  onClick,\n  defaultValue,\n}: {\n  buttons: { label: string; value: T }[];\n  onClick: (value: T) => void;\n  defaultValue: T;\n}) {\n  const [value, setValue] = useState(defaultValue);\n\n  const handleChange = useCallback(\n    (event: React.MouseEvent<HTMLElement>, value: T) => {\n      event.stopPropagation();\n      onClick(value);\n      setValue(value);\n    },\n    [onClick],\n  );\n\n  return (\n    <ToggleButtonGroup\n      exclusive\n      style={{ overflowX: 'hidden', flexWrap: 'wrap' }}\n    >\n      {buttons.map(({ label, value: buttonValue }) => (\n        <ToggleButton\n          data-testid={label + '-option'}\n          key={label}\n          value={Number(buttonValue) || ''}\n          onClick={(event) => handleChange(event, buttonValue)}\n          className={clsx(classes.button, {\n            [classes.selected]: buttonValue === value,\n          })}\n          style={{\n            display: 'flex',\n            flex: '1 0 25%',\n            margin: '2px',\n            borderRadius: '3px',\n          }}\n        >\n          {label || 'none'}\n        </ToggleButton>\n      ))}\n    </ToggleButtonGroup>\n  );\n}\n","import {\n  Bond,\n  fromBondAddition,\n  fromSgroupAddition,\n  fromSgroupAttachmentPointAddition,\n  SGroup,\n  SGroupAttachmentPoint,\n} from 'ketcher-core';\nimport { useCallback } from 'react';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport { AtomContextMenuProps, ItemEventParams } from '../contextMenu.types';\nimport { isNumber } from 'lodash';\n\ntype Params = ItemEventParams<AtomContextMenuProps>;\n\nconst useAddAttachmentPoint = () => {\n  const { getKetcherInstance } = useAppContext();\n\n  const handler = useCallback(\n    async ({ props }: Params) => {\n      const editor = getKetcherInstance().editor as Editor;\n      const restruct = editor.render.ctab;\n      const struct = editor.struct();\n      const atomId = props?.atomIds?.[0];\n      const sgroup = struct.getGroupFromAtomId(atomId);\n\n      if (!isNumber(atomId)) {\n        return;\n      }\n\n      const bondAdditionResult = fromBondAddition(\n        restruct,\n        {\n          type: Bond.PATTERN.TYPE.SINGLE,\n        },\n        atomId,\n        {\n          label: 'H',\n        },\n      );\n      const action = bondAdditionResult[0];\n      const addedLeavingGroupAtomId = bondAdditionResult[2];\n\n      if (!sgroup) {\n        const moleculeAtoms = struct.findConnectedComponent(atomId);\n        action.mergeWith(\n          fromSgroupAddition(\n            restruct,\n            SGroup.TYPES.SUP,\n            moleculeAtoms,\n            { expanded: true },\n            restruct.molecule.sgroups.newId(),\n            [\n              new SGroupAttachmentPoint(\n                atomId,\n                addedLeavingGroupAtomId,\n                undefined,\n                1,\n              ),\n            ],\n          ),\n        );\n      } else {\n        const sgroupAttachmentPoints = sgroup?.getAttachmentPoints() || [];\n        const allPointsNumbers = sgroupAttachmentPoints\n          .map((point) => point.attachmentPointNumber || 0)\n          .sort();\n        let lastMinimalPointNumber =\n          allPointsNumbers[allPointsNumbers.length - 1];\n        const hasFirstNumber = allPointsNumbers.includes(1);\n        if (!hasFirstNumber) {\n          lastMinimalPointNumber = 0;\n        } else {\n          for (let i = 1; i < allPointsNumbers.length; i++) {\n            const prevNumber = allPointsNumbers[i - 1];\n            const currentNumber = allPointsNumbers[i];\n            if (currentNumber > prevNumber + 1) {\n              lastMinimalPointNumber = prevNumber;\n              break;\n            }\n          }\n        }\n\n        action.mergeWith(\n          fromSgroupAttachmentPointAddition(\n            restruct,\n            sgroup.id,\n            new SGroupAttachmentPoint(\n              atomId,\n              addedLeavingGroupAtomId,\n              undefined,\n              lastMinimalPointNumber + 1,\n            ),\n          ),\n        );\n      }\n\n      editor.update(action);\n      editor.selection(null);\n      editor.focusCliparea();\n    },\n    [getKetcherInstance],\n  );\n\n  return [handler];\n};\n\nexport default useAddAttachmentPoint;\n","import { Atom, fromOneAtomDeletion } from 'ketcher-core';\nimport { useCallback } from 'react';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport { AtomContextMenuProps, ItemEventParams } from '../contextMenu.types';\nimport { isNumber } from 'lodash';\n\ntype Params = ItemEventParams<AtomContextMenuProps>;\n\nconst useRemoveAttachmentPoint = () => {\n  const { getKetcherInstance } = useAppContext();\n\n  const handler = useCallback(\n    async ({ props }: Params) => {\n      const editor = getKetcherInstance().editor as Editor;\n      const restruct = editor.render.ctab;\n      const struct = editor.struct();\n      const atomId = props?.atomIds?.[0];\n      const sgroup = struct.getGroupFromAtomId(atomId);\n      const sgroupAttachmentPoints = sgroup?.getAttachmentPoints() || [];\n      const atomExternalConnections = Atom.getAttachmentAtomExternalConnections(\n        struct,\n        atomId,\n      );\n      const atomFreeAttachmentPoints = sgroupAttachmentPoints?.filter(\n        (attachmentPoint) =>\n          attachmentPoint.atomId === atomId &&\n          !atomExternalConnections?.find(\n            (_, bond) =>\n              bond.endSuperatomAttachmentPointNumber ===\n                attachmentPoint.attachmentPointNumber ||\n              bond.beginSuperatomAttachmentPointNumber ===\n                attachmentPoint.attachmentPointNumber,\n          ),\n      );\n      const attachmentPointToDelete =\n        atomFreeAttachmentPoints[atomFreeAttachmentPoints.length - 1];\n\n      if (!isNumber(atomId) || !attachmentPointToDelete) {\n        return;\n      }\n\n      const action = fromOneAtomDeletion(\n        restruct,\n        attachmentPointToDelete.leaveAtomId as number,\n      );\n\n      editor.update(action);\n      editor.selection(null);\n      editor.focusCliparea();\n    },\n    [getKetcherInstance],\n  );\n\n  return [handler];\n};\n\nexport default useRemoveAttachmentPoint;\n","import { Item, Submenu } from 'react-contexify';\nimport styled from '@emotion/styled';\n\nexport const standardColors = [\n  { name: 'Red', value: '#F64D3C' },\n  { name: 'Orange', value: '#FF9A25' },\n  { name: 'Yellow', value: '#FFEA4E' },\n  { name: 'Green', value: '#8BC152' },\n  { name: 'Blue', value: '#00BBD3' },\n  { name: 'Purple', value: '#EE82EE' },\n  { name: 'Pink', value: '#FF69B4' },\n  { name: 'Magenta', value: '#FF00FF' },\n];\n\nexport const StyledSubmenu = styled(Submenu)`\n  width: 150px;!important;\n`;\n\nexport const ColorContainer = styled.div`\n  display: grid;\n  grid-template-columns: repeat(4, 30px);\n  padding: 5px;\n  gap: 10px;\n`;\n\nexport const ColorSquare = styled.span<{ color: string }>`\n  width: 30px;\n  height: 30px;\n  background-color: ${(props) => props.color};\n  border-radius: 4px;\n  cursor: pointer;\n  &:hover {\n    outline: 4px solid #00bbd3;\n  }\n\n  &.active {\n    outline: 4px solid #00bbd3;\n  }\n`;\nexport const ColorItem = styled(Item)`\n  .contexify_itemContent {\n    padding: 0 !important;\n  }\n`;\nexport const Divider = styled.div`\n  height: 1px;\n  background-color: #ccc;\n`;\n","import { FC } from 'react';\nimport { Icon } from 'components';\nimport {\n  ColorContainer,\n  ColorItem,\n  ColorSquare,\n  Divider,\n  standardColors,\n} from './style';\nimport { Item, Submenu } from 'react-contexify';\n\ninterface HighlightMenuProps {\n  onHighlight: (color: string) => void;\n}\n\nconst HighlightMenu: FC<HighlightMenuProps> = ({ onHighlight }) => {\n  return (\n    <Submenu label=\"Highlight\">\n      <ColorContainer>\n        {standardColors.map((color) => (\n          <ColorItem key={color.name} onClick={() => onHighlight(color.value)}>\n            <ColorSquare color={color.value} />\n          </ColorItem>\n        ))}\n      </ColorContainer>\n      <Divider />\n      <Item onClick={() => onHighlight('')}>\n        <div\n          style={{\n            marginLeft: '-10px',\n          }}\n        >\n          <Icon name=\"no-highlight-cross\" />\n          <span style={{ marginLeft: '10px' }}>No highlight</span>\n        </div>\n      </Item>\n    </Submenu>\n  );\n};\n\nexport default HighlightMenu;\n","import { FC } from 'react';\nimport { Item, Submenu } from 'react-contexify';\nimport useAtomEdit from '../hooks/useAtomEdit';\nimport useAtomStereo from '../hooks/useAtomStereo';\nimport useDelete from '../hooks/useDelete';\nimport { AtomContextMenuProps, MenuItemsProps } from '../contextMenu.types';\nimport { updateSelectedAtoms } from 'src/script/ui/state/modal/atoms';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport ButtonGroup from '../../../../../../components/ToggleButtonGroup/ToggleButtonGroup';\nimport {\n  atomGetAttr,\n  AtomAttributeName,\n  AtomAllAttributeValue,\n  AtomQueryPropertiesName,\n  AtomQueryProperties,\n  AtomAllAttributeName,\n  Atom,\n} from 'ketcher-core';\nimport { atom } from 'src/script/ui/data/schema/struct-schema';\nimport styles from '../ContextMenu.module.less';\nimport useAddAttachmentPoint from '../hooks/useAddAttachmentPoint';\nimport { isNumber } from 'lodash';\nimport useRemoveAttachmentPoint from '../hooks/useRemoveAttachmentPoint';\nimport HighlightMenu from 'src/script/ui/action/highlightColors/HighlightColors';\n\nconst {\n  ringBondCount,\n  hCount,\n  substitutionCount,\n  unsaturatedAtom,\n  implicitHCount,\n} = atom.properties;\nconst properties: Array<AtomQueryPropertiesName> = [\n  'aromaticity',\n  'ringMembership',\n  'ringSize',\n  'connectivity',\n  'chirality',\n];\n\nconst atomPropertiesForSubMenu: {\n  title: string;\n  key: AtomAllAttributeName;\n  buttons: { label: string; value: AtomAllAttributeValue }[];\n}[] = [\n  {\n    title: ringBondCount.title,\n    key: 'ringBondCount',\n    buttons: ringBondCount.enumNames.map((label, id) => ({\n      label,\n      value: ringBondCount.enum[id],\n    })),\n  },\n  {\n    title: hCount.title,\n    key: 'hCount',\n    buttons: hCount.enumNames.map((label, id) => ({\n      label,\n      value: hCount.enum[id],\n    })),\n  },\n  {\n    title: substitutionCount.title,\n    key: 'substitutionCount',\n    buttons: substitutionCount.enumNames.map((label, id) => ({\n      label,\n      value: substitutionCount.enum[id],\n    })),\n  },\n  {\n    title: unsaturatedAtom.title,\n    key: 'unsaturatedAtom',\n    buttons: [\n      { label: 'Unsaturated', value: 1 },\n      { label: 'Saturated', value: 0 },\n    ],\n  },\n  {\n    title: implicitHCount.title,\n    key: 'implicitHCount',\n    buttons: implicitHCount.enumNames.map((label, id) => ({\n      label,\n      value: implicitHCount.enum[id],\n    })),\n  },\n  ...properties.map((name) => ({\n    title: atom.properties[name].title,\n    key: name,\n    buttons: atom.properties[name].enumNames.map(\n      (label: string, id: number) => ({\n        label,\n        value: atom.properties[name].enum[id],\n      }),\n    ),\n  })),\n];\n\nconst AtomMenuItems: FC<MenuItemsProps<AtomContextMenuProps>> = (props) => {\n  const [handleEdit] = useAtomEdit();\n  const [handleAddAttachmentPoint] = useAddAttachmentPoint();\n  const [handleRemoveAttachmentPoint] = useRemoveAttachmentPoint();\n  const [handleStereo, stereoDisabled] = useAtomStereo();\n  const handleDelete = useDelete();\n  const { getKetcherInstance } = useAppContext();\n  const editor = getKetcherInstance().editor as Editor;\n  const struct = editor.struct();\n\n  const getPropertyValue = (key: AtomAllAttributeName) => {\n    const { ctab } = editor.render;\n    if (props.propsFromTrigger?.atomIds) {\n      const atomId = props.propsFromTrigger?.atomIds[0] as number;\n      if (properties.includes(key as AtomQueryPropertiesName)) {\n        return atomGetAttr(ctab, atomId, 'queryProperties')?.[key];\n      } else {\n        return atomGetAttr(ctab, atomId, key as AtomAttributeName);\n      }\n    } else return null;\n  };\n\n  const updateAtomProperty = (\n    key: AtomAllAttributeName,\n    value: AtomAllAttributeValue,\n  ) => {\n    const atomIds = props.propsFromTrigger?.atomIds;\n    if (atomIds) {\n      updateSelectedAtoms({\n        atoms: atomIds,\n        editor,\n        changeAtomPromise: Promise.resolve(\n          properties.includes(key as AtomQueryPropertiesName)\n            ? ({\n                queryProperties: {\n                  ...getPropertyValue('queryProperties'),\n                  [key]: value,\n                },\n              } as AtomQueryProperties)\n            : { [key]: value },\n        ),\n      });\n    }\n  };\n\n  const onlyOneAtomSelected = props.propsFromTrigger?.atomIds?.length === 1;\n  const selectedAtomId = props.propsFromTrigger?.atomIds?.[0];\n  const sgroup = isNumber(selectedAtomId)\n    ? struct.getGroupFromAtomId(selectedAtomId)\n    : undefined;\n  const atomInSgroupWithLabel = sgroup && !sgroup?.isSuperatomWithoutLabel;\n  const attachmentPoints = sgroup?.getAttachmentPoints() || [];\n  const maxAttachmentPointsAmount = attachmentPoints.length >= 8;\n  const isAtomSuperatomAttachmentPoint = Atom.isSuperatomAttachmentAtom(\n    struct,\n    selectedAtomId,\n  );\n  const isAtomSuperatomLeavingGroup = Atom.isSuperatomLeavingGroupAtom(\n    struct,\n    selectedAtomId,\n  );\n  const atomExternalConnections = isNumber(selectedAtomId)\n    ? Atom.getAttachmentAtomExternalConnections(struct, selectedAtomId)\n    : undefined;\n  const atomFreeAttachmentPoints = attachmentPoints?.filter(\n    (attachmentPoint) =>\n      attachmentPoint.atomId === selectedAtomId &&\n      !atomExternalConnections?.some(\n        (bond) =>\n          bond.endSuperatomAttachmentPointNumber ===\n            attachmentPoint.attachmentPointNumber ||\n          bond.beginSuperatomAttachmentPointNumber ===\n            attachmentPoint.attachmentPointNumber,\n      ),\n  );\n\n  const highlightAtomWithColor = (color: string) => {\n    const atomIds = props.propsFromTrigger?.atomIds || [];\n    editor.highlights.create({\n      atoms: atomIds,\n      rgroupAttachmentPoints: [],\n      bonds: [],\n      color: color === '' ? 'transparent' : color,\n    });\n  };\n\n  if (isAtomSuperatomLeavingGroup && onlyOneAtomSelected) {\n    return (\n      <>\n        <HighlightMenu onHighlight={highlightAtomWithColor} />\n        <Item {...props} onClick={handleDelete}>\n          Delete\n        </Item>\n      </>\n    );\n  }\n\n  return (\n    <>\n      <Item {...props} onClick={handleEdit}>\n        {props.propsFromTrigger?.extraItemsSelected\n          ? 'Edit selected atoms...'\n          : 'Edit...'}\n      </Item>\n      <Item {...props} disabled={stereoDisabled} onClick={handleStereo}>\n        Enhanced stereochemistry...\n      </Item>\n      <Submenu\n        {...props}\n        label=\"Query properties\"\n        style={{ overflow: 'visible' }}\n      >\n        {atomPropertiesForSubMenu.map(({ title, buttons, key }) => {\n          return (\n            <Submenu\n              {...props}\n              label={title}\n              key={key}\n              className={styles.sameGroup}\n            >\n              <ButtonGroup<AtomAllAttributeValue>\n                buttons={buttons}\n                defaultValue={getPropertyValue(key)}\n                onClick={(value: AtomAllAttributeValue) =>\n                  updateAtomProperty(key, value)\n                }\n              ></ButtonGroup>\n            </Submenu>\n          );\n        })}\n      </Submenu>\n      {onlyOneAtomSelected &&\n        !atomInSgroupWithLabel &&\n        !maxAttachmentPointsAmount &&\n        !isAtomSuperatomLeavingGroup && (\n          <Item {...props} onClick={handleAddAttachmentPoint}>\n            Add attachment point\n          </Item>\n        )}\n      <HighlightMenu onHighlight={highlightAtomWithColor} />\n      {isAtomSuperatomAttachmentPoint &&\n        atomFreeAttachmentPoints.length > 0 && (\n          <Item {...props} onClick={handleRemoveAttachmentPoint}>\n            Remove attachment point\n          </Item>\n        )}\n      <Item {...props} onClick={handleDelete}>\n        Delete\n      </Item>\n    </>\n  );\n};\n\nexport default AtomMenuItems;\n","import { useCallback } from 'react';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport { updateSelectedBonds } from 'src/script/ui/state/modal/bonds';\nimport { mapBondIdsToBonds } from 'src/script/editor/tool/select';\nimport { BondsContextMenuProps, ItemEventParams } from '../contextMenu.types';\nimport { noOperation } from '../utils';\nimport { KetcherLogger } from 'ketcher-core';\n\ntype Params = ItemEventParams<BondsContextMenuProps>;\n\nconst useBondEdit = () => {\n  const { getKetcherInstance } = useAppContext();\n\n  const handler = useCallback(\n    async ({ props }: Params) => {\n      const editor = getKetcherInstance().editor as Editor;\n      const bondIds = props?.bondIds || [];\n      const molecule = editor.render.ctab;\n      try {\n        const bonds = mapBondIdsToBonds(bondIds, molecule);\n        const changeBondPromise = await editor.event.bondEdit.dispatch(bonds);\n        updateSelectedBonds({ bonds: bondIds, changeBondPromise, editor });\n      } catch (e) {\n        KetcherLogger.error('useBondEdit.ts::useBondEdit::handler', e);\n        noOperation();\n      }\n    },\n    [getKetcherInstance],\n  );\n\n  const disabled = useCallback(({ props }: Params) => {\n    const selectedBondIds = props?.bondIds;\n    if (Array.isArray(selectedBondIds) && selectedBondIds.length !== 0) {\n      return false;\n    }\n\n    return true;\n  }, []);\n\n  return [handler, disabled] as const;\n};\n\nexport default useBondEdit;\n","import { ReStruct } from 'ketcher-core';\nimport { useCallback } from 'react';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport SGroupTool from 'src/script/editor/tool/sgroup';\nimport { BondsContextMenuProps, ItemEventParams } from '../contextMenu.types';\n\ntype Params = ItemEventParams<BondsContextMenuProps>;\n\nconst useBondSGroupAttach = () => {\n  const { getKetcherInstance } = useAppContext();\n\n  const handler = useCallback(\n    ({ props }: Params) => {\n      const editor = getKetcherInstance().editor as Editor;\n      const struct: ReStruct = editor.render.ctab;\n      const bondId = props!.bondIds![0];\n      const bond = struct.bonds.get(bondId)!;\n\n      const selection = {\n        atoms: [bond?.b.begin, bond?.b.end],\n        bonds: [bondId],\n      };\n\n      editor.selection(selection);\n      SGroupTool.sgroupDialog(editor, null);\n    },\n    [getKetcherInstance],\n  );\n\n  const hidden = useCallback(\n    ({ props }: Params) => {\n      const editor = getKetcherInstance().editor as Editor;\n      const struct: ReStruct = editor.render.ctab;\n      const bondIds = props!.bondIds!;\n\n      if (bondIds.length > 1) {\n        return true;\n      }\n\n      const bond = struct.bonds.get(bondIds[0])!;\n      const attachedSGroups = bond.b.getAttachedSGroups(struct.molecule);\n      const [sgGroupId] = attachedSGroups;\n      const sgroup = struct.sgroups.get(sgGroupId)?.item;\n      if (sgroup?.isSuperatomWithoutLabel) {\n        return false;\n      }\n      return attachedSGroups.size > 0;\n    },\n    [getKetcherInstance],\n  );\n\n  return [handler, hidden] as const;\n};\n\nexport default useBondSGroupAttach;\n","import { Pile, ReStruct } from 'ketcher-core';\nimport { useCallback, useRef } from 'react';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport SGroupTool from 'src/script/editor/tool/sgroup';\nimport { BondsContextMenuProps, ItemEventParams } from '../contextMenu.types';\n\ntype Params = ItemEventParams<BondsContextMenuProps>;\n\nconst useBondSGroupEdit = () => {\n  const { getKetcherInstance } = useAppContext();\n  const sGroupsRef = useRef(new Pile<number>());\n\n  const handler = useCallback(() => {\n    const editor = getKetcherInstance().editor as Editor;\n    const sGroups = Array.from(sGroupsRef.current);\n    SGroupTool.sgroupDialog(editor, sGroups[0]);\n  }, [getKetcherInstance]);\n\n  // In react-contexify, `disabled` is executed before `hidden`\n  const disabled = useCallback(\n    ({ props }: Params) => {\n      const editor = getKetcherInstance().editor as Editor;\n      const struct: ReStruct = editor.render.ctab;\n      const bondIds = props!.bondIds!;\n\n      if (bondIds.length > 1) {\n        return true;\n      }\n\n      const bond = struct.bonds.get(bondIds[0])!;\n      sGroupsRef.current = bond.b.getAttachedSGroups(struct.molecule);\n\n      return sGroupsRef.current.size > 1;\n    },\n    [getKetcherInstance],\n  );\n\n  const hidden = useCallback(() => {\n    const editor = getKetcherInstance().editor as Editor;\n    const struct: ReStruct = editor.render.ctab;\n    const [sgGroupId] = sGroupsRef.current;\n    const sgroup = struct.sgroups.get(sgGroupId)?.item;\n    if (sgroup?.isSuperatomWithoutLabel) {\n      return true;\n    }\n    return sGroupsRef.current.size === 0;\n  }, [getKetcherInstance]);\n\n  return [handler, disabled, hidden] as const;\n};\n\nexport default useBondSGroupEdit;\n","import { fromBondsAttrs } from 'ketcher-core';\nimport { useCallback } from 'react';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport tools from 'src/script/ui/action/tools';\nimport { BondsContextMenuProps, ItemEventParams } from '../contextMenu.types';\n\ntype Params = ItemEventParams<BondsContextMenuProps>;\n\nconst useBondTypeChange = () => {\n  const { getKetcherInstance } = useAppContext();\n  const handler = useCallback(\n    ({ id, props }: Params) => {\n      const editor = getKetcherInstance().editor as Editor;\n      const molecule = editor.render.ctab;\n      const bondIds = props?.bondIds || [];\n      const bondProps = tools[id].action.opts;\n      const isCustomQuery = molecule.bonds.get(bondIds[0])?.b.customQuery;\n      if (isCustomQuery) {\n        bondProps.customQuery = null;\n        bondProps.topology = 0;\n        bondProps.reactingCenterStatus = 0;\n      }\n      editor.update(fromBondsAttrs(molecule, bondIds, bondProps));\n    },\n    [getKetcherInstance],\n  );\n\n  const disabled = useCallback(({ props }: Params) => {\n    const selectedBondIds = props?.bondIds;\n    const editor = getKetcherInstance().editor;\n\n    if (Array.isArray(selectedBondIds) && selectedBondIds.length !== 0) {\n      if (editor.struct().isBondFromMacromolecule(selectedBondIds[0])) {\n        return true;\n      }\n      return false;\n    }\n    return true;\n  }, []);\n\n  return [handler, disabled] as const;\n};\n\nexport default useBondTypeChange;\n","import { useAppContext } from 'src/hooks';\nimport { fromBondFlipping } from 'ketcher-core';\n\nexport const useChangeBondDirection = (props) => {\n  const { getKetcherInstance } = useAppContext();\n\n  const changeDirection = () => {\n    const editor = getKetcherInstance()?.editor;\n    const bondIds = props.propsFromTrigger?.bondIds || [];\n    const bondId = bondIds[0];\n    const molecule = editor?.render.ctab.molecule;\n\n    if (!molecule || !bondId) return;\n\n    const bond = molecule.bonds.get(bondId);\n    if (!bond) return;\n\n    const action = fromBondFlipping(editor?.render.ctab, bondId);\n\n    editor?.selection(null);\n    editor.update(action);\n  };\n\n  return { changeDirection };\n};\n","import { FC, useEffect, useState } from 'react';\nimport { Item, Submenu } from 'react-contexify';\nimport Editor from 'src/script/editor';\nimport tools from 'src/script/ui/action/tools';\nimport styles from '../ContextMenu.module.less';\nimport useBondEdit from '../hooks/useBondEdit';\nimport useBondSGroupAttach from '../hooks/useBondSGroupAttach';\nimport useBondSGroupEdit from '../hooks/useBondSGroupEdit';\nimport useBondTypeChange from '../hooks/useBondTypeChange';\nimport useDelete from '../hooks/useDelete';\nimport { formatTitle, getNonQueryBondNames, queryBondNames } from '../utils';\nimport {\n  BondsContextMenuProps,\n  ItemEventParams,\n  MenuItemsProps,\n} from '../contextMenu.types';\nimport { getIconName, Icon } from 'components';\nimport { useChangeBondDirection } from '../hooks/useChangeBondDirection';\nimport { useAppContext } from 'src/hooks/useAppContext';\nimport HighlightMenu from 'src/script/ui/action/highlightColors/HighlightColors';\n\ntype Params = ItemEventParams<BondsContextMenuProps>;\n\nconst nonQueryBondNames = getNonQueryBondNames(tools);\n\nconst BondMenuItems: FC<MenuItemsProps<BondsContextMenuProps>> = (props) => {\n  const { getKetcherInstance } = useAppContext();\n  const [bondData, setBondData] = useState<{\n    type: number;\n    stereo: number;\n  } | null>(null);\n  const [handleEdit] = useBondEdit();\n  const [handleTypeChange, disabled] = useBondTypeChange();\n  const [handleSGroupAttach, sGroupAttachHidden] = useBondSGroupAttach();\n  const [handleSGroupEdit, sGroupEditDisabled, sGroupEditHidden] =\n    useBondSGroupEdit();\n  const handleDelete = useDelete();\n  const bondNamesWithoutEmptyValue = nonQueryBondNames.slice(1);\n  const isDisabled = disabled({\n    props: props.propsFromTrigger,\n  } as Params);\n  const { changeDirection } = useChangeBondDirection(props as ItemEventParams);\n  const editor = getKetcherInstance().editor as Editor;\n\n  useEffect(() => {\n    const editor = getKetcherInstance()?.editor;\n    const bondIds = props.propsFromTrigger?.bondIds || [];\n\n    if (bondIds.length > 0 && editor) {\n      const bond = editor.render.ctab.molecule.bonds.get(bondIds[0]);\n      if (bond) {\n        setBondData({ type: bond.type, stereo: bond.stereo });\n      } else {\n        setBondData(null);\n      }\n    }\n  }, [props.propsFromTrigger, getKetcherInstance]);\n\n  const highlightBondWithColor = (color: string) => {\n    const bondIds = props.propsFromTrigger?.bondIds || [];\n\n    editor.highlights.create({\n      atoms: [],\n      bonds: bondIds,\n      rgroupAttachmentPoints: [],\n      color: color === '' ? 'transparent' : color,\n    });\n  };\n  const shouldShowChangeDirection =\n    bondData &&\n    ((bondData.type === 9 && bondData.stereo === 0) ||\n      (bondData.type === 1 && bondData.stereo === 1) ||\n      (bondData.type === 1 && bondData.stereo === 6) ||\n      (bondData.type === 1 && bondData.stereo === 4));\n\n  return (\n    <>\n      <Item {...props} onClick={handleEdit} disabled={isDisabled}>\n        {props.propsFromTrigger?.extraItemsSelected\n          ? 'Edit selected bonds...'\n          : 'Edit...'}\n      </Item>\n\n      {bondNamesWithoutEmptyValue.map((name, i) => {\n        const iconName = getIconName(name);\n        const classNames =\n          styles.sameGroup +\n          (i === bondNamesWithoutEmptyValue.length - 1 ? styles.devider : '');\n\n        return (\n          <Item\n            className={classNames}\n            {...props}\n            id={name}\n            onClick={handleTypeChange}\n            key={name}\n            disabled={isDisabled}\n          >\n            {iconName && <Icon name={iconName} className={styles.icon} />}\n            <span>{formatTitle(tools[name].title)}</span>\n          </Item>\n        );\n      })}\n\n      <Submenu {...props} label=\"Query bonds\" className={styles.subMenu}>\n        {queryBondNames.map((name) => {\n          const iconName = getIconName(name);\n          return (\n            <Item\n              className={styles.sameGroup}\n              id={name}\n              onClick={handleTypeChange}\n              key={name}\n              disabled={isDisabled}\n            >\n              {iconName && <Icon name={iconName} className={styles.icon} />}\n              <span>{formatTitle(tools[name].title)}</span>\n            </Item>\n          );\n        })}\n      </Submenu>\n\n      {shouldShowChangeDirection && (\n        <Item {...props} onClick={changeDirection}>\n          Change direction\n        </Item>\n      )}\n      <Item {...props} hidden={sGroupAttachHidden} onClick={handleSGroupAttach}>\n        Attach S-Group...\n      </Item>\n      <HighlightMenu onHighlight={highlightBondWithColor} />\n      <Item\n        {...props}\n        hidden={sGroupEditHidden}\n        disabled={sGroupEditDisabled}\n        onClick={handleSGroupEdit}\n      >\n        Edit S-Group...\n      </Item>\n\n      <Item {...props} onClick={handleDelete}>\n        Delete\n      </Item>\n    </>\n  );\n};\n\nexport default BondMenuItems;\n","import { Action, setExpandMonomerSGroup } from 'ketcher-core';\nimport { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport { highlightFG } from 'src/script/ui/state/functionalGroups';\nimport {\n  FunctionalGroupsContextMenuProps,\n  ItemEventParams,\n} from '../contextMenu.types';\n\ntype Params = ItemEventParams<FunctionalGroupsContextMenuProps>;\n\n/**\n * Fullname: useFunctionalGroupExpandOrContract\n */\nconst useFunctionalGroupEoc = () => {\n  const { getKetcherInstance } = useAppContext();\n  const dispatch = useDispatch();\n\n  const handler = useCallback(\n    ({ props }: Params, toExpand: boolean) => {\n      const editor = getKetcherInstance().editor as Editor;\n      const molecule = editor.render.ctab;\n      const selectedFunctionalGroups = props?.functionalGroups;\n      const action = new Action();\n\n      selectedFunctionalGroups?.forEach((functionalGroup) => {\n        action.mergeWith(\n          setExpandMonomerSGroup(molecule, functionalGroup.relatedSGroupId, {\n            expanded: toExpand,\n          }),\n        );\n      });\n\n      editor.update(action);\n      editor.rotateController.rerender();\n      highlightFG(dispatch, { group: null, id: null });\n    },\n    [dispatch, getKetcherInstance],\n  );\n\n  const hidden = useCallback(({ props }: Params, toExpand: boolean) => {\n    return Boolean(\n      props?.functionalGroups?.every((functionalGroup) =>\n        toExpand ? functionalGroup.isExpanded : !functionalGroup.isExpanded,\n      ),\n    );\n  }, []);\n\n  return [handler, hidden] as const;\n};\n\nexport default useFunctionalGroupEoc;\n","import { Action, fromSgroupDeletion } from 'ketcher-core';\nimport { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport { highlightFG } from 'src/script/ui/state/functionalGroups';\nimport {\n  FunctionalGroupsContextMenuProps,\n  ItemEventParams,\n} from '../contextMenu.types';\n\ntype Params = ItemEventParams<FunctionalGroupsContextMenuProps>;\n\nconst useFunctionalGroupRemove = () => {\n  const { getKetcherInstance } = useAppContext();\n  const dispatch = useDispatch();\n\n  const handler = useCallback(\n    ({ props }: Params) => {\n      const editor = getKetcherInstance().editor as Editor;\n      const selectedFunctionalGroups = props?.functionalGroups;\n      const action = new Action();\n\n      selectedFunctionalGroups?.forEach((functionalGroup) => {\n        action.mergeWith(\n          fromSgroupDeletion(\n            editor.render.ctab,\n            functionalGroup.relatedSGroupId,\n          ),\n        );\n      });\n\n      editor.update(action);\n      highlightFG(dispatch, { group: null, id: null });\n    },\n    [dispatch, getKetcherInstance],\n  );\n\n  return handler;\n};\n\nexport default useFunctionalGroupRemove;\n","import { FC } from 'react';\nimport { Item } from 'react-contexify';\nimport useFunctionalGroupEoc from '../hooks/useFunctionalGroupEoc';\nimport useFunctionalGroupRemove from '../hooks/useFunctionalGroupRemove';\nimport {\n  FunctionalGroupsContextMenuProps,\n  MenuItemsProps,\n} from '../contextMenu.types';\n\nconst FunctionalGroupMenuItems: FC<\n  MenuItemsProps<FunctionalGroupsContextMenuProps>\n> = (props) => {\n  const [handleExpandOrContract, ExpandOrContractHidden] =\n    useFunctionalGroupEoc();\n  const handleRemove = useFunctionalGroupRemove();\n\n  return (\n    <>\n      <Item\n        {...props}\n        hidden={(params) => ExpandOrContractHidden(params, true)}\n        onClick={(params) => handleExpandOrContract(params, true)}\n      >\n        Expand Abbreviation\n      </Item>\n      <Item\n        {...props}\n        hidden={(params) => ExpandOrContractHidden(params, false)}\n        onClick={(params) => handleExpandOrContract(params, false)}\n      >\n        Contract Abbreviation\n      </Item>\n      <Item {...props} onClick={handleRemove}>\n        Remove Abbreviation\n      </Item>\n    </>\n  );\n};\n\nexport default FunctionalGroupMenuItems;\n","import { FC } from 'react';\nimport { Item, Submenu } from 'react-contexify';\nimport tools from 'src/script/ui/action/tools';\nimport styles from '../ContextMenu.module.less';\nimport useAtomEdit from '../hooks/useAtomEdit';\nimport useAtomStereo from '../hooks/useAtomStereo';\nimport useBondEdit from '../hooks/useBondEdit';\nimport useBondTypeChange from '../hooks/useBondTypeChange';\nimport useDelete from '../hooks/useDelete';\nimport { formatTitle, getBondNames } from '../utils';\nimport Editor from 'src/script/editor';\nimport {\n  MenuItemsProps,\n  SelectionContextMenuProps,\n} from '../contextMenu.types';\nimport { getIconName, Icon } from 'components';\nimport { useAppContext } from 'src/hooks';\nimport HighlightMenu from 'src/script/ui/action/highlightColors/HighlightColors';\n\nconst bondNames = getBondNames(tools);\n\nconst SelectionMenuItems: FC<MenuItemsProps<SelectionContextMenuProps>> = (\n  props,\n) => {\n  const { getKetcherInstance } = useAppContext();\n  const editor = getKetcherInstance().editor as Editor;\n  const [handleBondEdit, bondEditDisabled] = useBondEdit();\n  const [handleAtomEdit, atomEditDisabled] = useAtomEdit();\n  const [handleTypeChange, bondTypeChangeDisabled] = useBondTypeChange();\n  const [handleAtomStereo, atomStereoDisabled] = useAtomStereo();\n  const handleDelete = useDelete();\n  const highlightBondWithColor = (color: string) => {\n    const bondIds = props.propsFromTrigger?.bondIds || [];\n    const atomIds = props.propsFromTrigger?.atomIds || [];\n    const rgroupAttachmentPoints =\n      props.propsFromTrigger?.rgroupAttachmentPoints || [];\n\n    editor.highlights.create({\n      atoms: atomIds,\n      bonds: bondIds,\n      rgroupAttachmentPoints,\n      color: color === '' ? 'transparent' : color,\n    });\n  };\n\n  return (\n    <>\n      <Item {...props} disabled={bondEditDisabled} onClick={handleBondEdit}>\n        Edit selected bonds...\n      </Item>\n\n      <Item {...props} disabled={atomEditDisabled} onClick={handleAtomEdit}>\n        Edit selected atoms...\n      </Item>\n\n      <Submenu\n        {...props}\n        label=\"Bond type\"\n        disabled={bondTypeChangeDisabled}\n        className={styles.subMenu}\n      >\n        {bondNames.map((name) => {\n          const iconName = getIconName(name);\n          return (\n            <Item id={name} onClick={handleTypeChange} key={name}>\n              {iconName && <Icon name={iconName} className={styles.icon} />}\n              <span>{formatTitle(tools[name].title)}</span>\n            </Item>\n          );\n        })}\n      </Submenu>\n\n      <Item {...props} disabled={atomStereoDisabled} onClick={handleAtomStereo}>\n        Enhanced stereochemistry...\n      </Item>\n      <HighlightMenu onHighlight={highlightBondWithColor} />\n      <Item {...props} onClick={handleDelete}>\n        Delete\n      </Item>\n    </>\n  );\n};\n\nexport default SelectionMenuItems;\n","import { Action, fromRGroupAttachmentPointDeletion } from 'ketcher-core';\nimport { useCallback } from 'react';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport {\n  ItemEventParams,\n  RGroupAttachmentPointContextMenuProps,\n} from '../contextMenu.types';\n\ntype Params = ItemEventParams<RGroupAttachmentPointContextMenuProps>;\n\nconst useDelete = () => {\n  const { getKetcherInstance } = useAppContext();\n\n  const handler = useCallback(\n    async ({ props }: Params) => {\n      const editor = getKetcherInstance().editor as Editor;\n      const restruct = editor.render.ctab;\n      const pointsToDelete = props?.rgroupAttachmentPoints || [];\n\n      const action = pointsToDelete.reduce((previousAction, currentPoint) => {\n        const currentAction = fromRGroupAttachmentPointDeletion(\n          restruct,\n          currentPoint,\n        );\n        return previousAction.mergeWith(currentAction);\n      }, new Action());\n\n      editor.update(action);\n      editor.selection(null);\n    },\n    [getKetcherInstance],\n  );\n\n  return handler;\n};\n\nexport default useDelete;\n","import { useCallback } from 'react';\nimport assert from 'assert';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport {\n  ItemEventParams,\n  RGroupAttachmentPointContextMenuProps,\n} from '../contextMenu.types';\nimport { editRGroupAttachmentPoint } from 'src/script/editor/tool/apoint.utils';\nimport { Ketcher } from 'ketcher-core';\n\ntype Params = ItemEventParams<RGroupAttachmentPointContextMenuProps>;\n\nconst getAtomIdByProps = (\n  props: RGroupAttachmentPointContextMenuProps | undefined,\n  ketcher: Ketcher,\n): number => {\n  const editor = ketcher.editor as Editor;\n  const restruct = editor.render.ctab;\n  const atomId = props?.atomIds?.[0];\n  if (atomId != null) {\n    return atomId;\n  }\n\n  const attachmentPointId = props?.rgroupAttachmentPoints?.[0];\n  assert(attachmentPointId != null);\n  const attachmentPoint =\n    restruct.molecule.rgroupAttachmentPoints.get(attachmentPointId);\n  assert(attachmentPoint != null);\n  return attachmentPoint.atomId;\n};\n\nconst useRGroupAttachmentPointEdit = () => {\n  const { getKetcherInstance } = useAppContext();\n\n  const handler = useCallback(\n    ({ props }: Params) => {\n      const ketcher = getKetcherInstance();\n      const restruct = ketcher.editor.render.ctab;\n      const atomId = getAtomIdByProps(props, ketcher);\n      const atom = restruct.molecule.atoms.get(atomId);\n      assert(atom != null);\n\n      editRGroupAttachmentPoint(ketcher.editor, atom, atomId);\n    },\n    [getKetcherInstance],\n  );\n\n  const disabled = useCallback(\n    ({ props }: Params) => {\n      const ketcher = getKetcherInstance();\n      const restruct = ketcher.editor.render.ctab;\n      const atomId = getAtomIdByProps(props, ketcher);\n      const atom = restruct.molecule.atoms.get(atomId);\n      assert(atom != null);\n\n      return atom.isRGroupAttachmentPointEditDisabled;\n    },\n    [getKetcherInstance],\n  );\n\n  const hidden = useCallback(({ props }: Params) => {\n    const atomLength = props?.atomIds?.length || 0;\n    return atomLength > 1;\n  }, []);\n\n  return [handler, disabled, hidden] as const;\n};\n\nexport default useRGroupAttachmentPointEdit;\n","import { FC } from 'react';\nimport { Item } from 'react-contexify';\nimport {\n  MenuItemsProps,\n  RGroupAttachmentPointContextMenuProps,\n} from '../contextMenu.types';\nimport useRGroupAttachmentPointRemove from '../hooks/useRGroupAttachmentPointRemove';\nimport useRGroupAttachmentPointEdit from '../hooks/useRGroupAttachmentPointEdit';\nimport { useAppContext } from 'src/hooks/useAppContext';\nimport Editor from 'src/script/editor';\n\nimport HighlightMenu from 'src/script/ui/action/highlightColors/HighlightColors';\n\nconst RGroupAttachmentPointMenuItems: FC<\n  MenuItemsProps<RGroupAttachmentPointContextMenuProps>\n> = (props) => {\n  const { getKetcherInstance } = useAppContext();\n  const handleRemove = useRGroupAttachmentPointRemove();\n  const [\n    handleEditRGroupAttachmentPoint,\n    rgroupAttachmentPointDisabled,\n    rgroupAttachmentPointHidden,\n  ] = useRGroupAttachmentPointEdit();\n  const editor = getKetcherInstance().editor as Editor;\n\n  const highlight = (color: string) => {\n    const rgroupAttachmentPoints =\n      props.propsFromTrigger?.rgroupAttachmentPoints || [];\n    editor.highlights.create({\n      rgroupAttachmentPoints,\n      atoms: [],\n      bonds: [],\n      color: color === '' ? 'transparent' : color,\n    });\n  };\n\n  return (\n    <>\n      <Item\n        {...props}\n        disabled={rgroupAttachmentPointDisabled}\n        hidden={rgroupAttachmentPointHidden}\n        onClick={handleEditRGroupAttachmentPoint}\n      >\n        Edit...\n      </Item>\n      <HighlightMenu onHighlight={highlight} />\n      <Item {...props} onClick={handleRemove}>\n        Remove\n      </Item>\n    </>\n  );\n};\n\nexport default RGroupAttachmentPointMenuItems;\n","import { useCallback } from 'react';\nimport {\n  ItemEventParams,\n  MultitailArrowContextMenuProps,\n} from '../contextMenu.types';\nimport { useAppContext } from '../../../../../../hooks';\nimport {\n  fromMultitailArrowTailAdd,\n  fromMultitailArrowTailRemove,\n  MultitailArrow,\n  Action,\n} from 'ketcher-core';\nimport Editor from 'src/script/editor';\n\ntype Params = ItemEventParams<MultitailArrowContextMenuProps>;\n\nfunction updateEditor(editor: unknown, action: Action) {\n  // returned Editor type does not match real editor\n  const typedEditor = editor as Editor;\n  typedEditor.update(action);\n  typedEditor.selection(null);\n  typedEditor.focusCliparea();\n}\n\nexport const useMultitailArrowTailsAdd = () => {\n  const { getKetcherInstance } = useAppContext();\n\n  const addTail = useCallback(\n    ({ props }: Params) => {\n      const editor = getKetcherInstance().editor;\n      const operation = fromMultitailArrowTailAdd(\n        editor.render.ctab,\n        props?.itemId as number,\n      );\n      updateEditor(editor, operation);\n    },\n    [getKetcherInstance],\n  );\n\n  const isAddTailDisabled = useCallback(\n    ({ props }: Params): boolean => {\n      const editor = getKetcherInstance().editor as Editor;\n      const multitailArrow = editor.render.ctab.molecule.multitailArrows.get(\n        props?.itemId as number,\n      );\n      return (\n        !!multitailArrow &&\n        !MultitailArrow.canAddTail(\n          multitailArrow.getTailsMaxDistance().distance,\n        )\n      );\n    },\n    [getKetcherInstance],\n  );\n\n  return { addTail, isAddTailDisabled };\n};\n\nexport const useMultitailArrowTailsRemove = () => {\n  const { getKetcherInstance } = useAppContext();\n\n  const removeTail = useCallback(\n    ({ props }: Params) => {\n      const editor = getKetcherInstance().editor;\n      const operation = fromMultitailArrowTailRemove(\n        editor.render.ctab,\n        props?.itemId as number,\n        props?.tailId as number,\n      );\n      updateEditor(editor, operation);\n    },\n    [getKetcherInstance],\n  );\n\n  const removeTailHidden = useCallback(({ props }: Params) => {\n    return props?.tailId === null;\n  }, []);\n\n  return { removeTail, removeTailHidden };\n};\n","import { Item } from 'react-contexify';\nimport {\n  useMultitailArrowTailsAdd,\n  useMultitailArrowTailsRemove,\n} from '../hooks/useMultitailArrowTails';\nimport {\n  MenuItemsProps,\n  MultitailArrowContextMenuProps,\n} from '../contextMenu.types';\n\nexport function MultitailArrowMenuItems(\n  props: MenuItemsProps<MultitailArrowContextMenuProps>,\n) {\n  const { addTail, isAddTailDisabled } = useMultitailArrowTailsAdd();\n  const { removeTail, removeTailHidden } = useMultitailArrowTailsRemove();\n  return (\n    <>\n      <Item {...props} onClick={removeTail} hidden={removeTailHidden}>\n        Remove tail\n      </Item>\n      <Item {...props} onClick={addTail} disabled={isAddTailDisabled}>\n        Add new tail\n      </Item>\n    </>\n  );\n}\n","import { Action, setExpandMonomerSGroup } from 'ketcher-core';\nimport { useCallback } from 'react';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport {\n  ItemEventParams,\n  MacromoleculeContextMenuProps,\n} from '../contextMenu.types';\n\ntype Params = ItemEventParams<MacromoleculeContextMenuProps>;\n\nconst useMonomerExpansionHandlers = () => {\n  const { getKetcherInstance } = useAppContext();\n\n  const action = useCallback(\n    ({ props }: Params, toExpand: boolean) => {\n      const editor = getKetcherInstance().editor as Editor;\n\n      const molecule = editor.render.ctab;\n      const selectedFunctionalGroups = props?.functionalGroups;\n      const action = new Action();\n\n      selectedFunctionalGroups?.forEach((fg) => {\n        action.mergeWith(\n          setExpandMonomerSGroup(molecule, fg.relatedSGroupId, {\n            expanded: toExpand,\n          }),\n        );\n      });\n\n      editor.update(action);\n      editor.rotateController.rerender();\n    },\n    [getKetcherInstance],\n  );\n\n  const hidden = useCallback(({ props }: Params, toExpand: boolean) => {\n    return Boolean(\n      props?.functionalGroups?.every((functionalGroup) =>\n        toExpand ? functionalGroup.isExpanded : !functionalGroup.isExpanded,\n      ),\n    );\n  }, []);\n\n  return [action, hidden] as const;\n};\n\nexport default useMonomerExpansionHandlers;\n","import {\n  MacromoleculeContextMenuProps,\n  MenuItemsProps,\n} from '../contextMenu.types';\nimport { Item } from 'react-contexify';\nimport useMonomerExpansionHandlers from '../hooks/useMonomerExpansionHandlers';\n\nconst MacromoleculeMenuItems = (\n  props: MenuItemsProps<MacromoleculeContextMenuProps>,\n) => {\n  const [action, hidden] = useMonomerExpansionHandlers();\n\n  const multipleMonomersSelected =\n    props?.propsFromTrigger?.functionalGroups &&\n    props.propsFromTrigger.functionalGroups.length > 1;\n\n  const expandText = multipleMonomersSelected\n    ? 'Expand monomers'\n    : 'Expand monomer';\n  const collapseText = multipleMonomersSelected\n    ? 'Collapse monomers'\n    : 'Collapse monomer';\n\n  return (\n    <>\n      <Item\n        {...props}\n        hidden={(params) => hidden(params, true)}\n        onClick={(params) => action(params, true)}\n      >\n        {expandText}\n      </Item>\n      <Item\n        {...props}\n        hidden={(params) => hidden(params, false)}\n        onClick={(params) => action(params, false)}\n      >\n        {collapseText}\n      </Item>\n    </>\n  );\n};\n\nexport default MacromoleculeMenuItems;\n","/****************************************************************************\n * Copyright 2022 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport React, { useCallback } from 'react';\nimport { Menu, MenuProps } from 'react-contexify';\nimport 'react-contexify/ReactContexify.css';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport styles from './ContextMenu.module.less';\nimport { CONTEXT_MENU_ID } from './contextMenu.types';\nimport AtomMenuItems from './menuItems/AtomMenuItems';\nimport BondMenuItems from './menuItems/BondMenuItems';\nimport FunctionalGroupMenuItems from './menuItems/FunctionalGroupMenuItems';\nimport SelectionMenuItems from './menuItems/SelectionMenuItems';\nimport RGroupAttachmentPointMenuItems from './menuItems/RGroupAttachmentPointMenuItems';\nimport { createPortal } from 'react-dom';\nimport { KETCHER_ROOT_NODE_CSS_SELECTOR } from 'src/constants';\nimport { MultitailArrowMenuItems } from './menuItems/MultitailArrowMenuItems';\nimport MacromoleculeMenuItems from './menuItems/MacromoleculeMenuItems';\n\nconst props: Partial<MenuProps> = {\n  animation: false,\n  className: styles.contextMenu,\n};\n\nconst ContextMenu: React.FC = () => {\n  const { getKetcherInstance } = useAppContext();\n\n  const adjustSubmenuPosition = (submenuElement: HTMLElement) => {\n    const rect = submenuElement.getBoundingClientRect();\n    const ketcherRootElement = document.querySelector(\n      KETCHER_ROOT_NODE_CSS_SELECTOR,\n    );\n    const ketcherRootElementRect = ketcherRootElement?.getBoundingClientRect();\n    const ketcherEditorWidth = ketcherRootElementRect?.width || 0;\n    const ketcherEditorHeight = ketcherRootElementRect?.height || 0;\n    const ketcherEditorLeft = ketcherRootElementRect?.left || 0;\n    const ketcherEditorTop = ketcherRootElementRect?.top || 0;\n\n    if (rect.right - ketcherEditorLeft > ketcherEditorWidth) {\n      submenuElement.style.left = 'auto';\n      submenuElement.style.right = '100%';\n    } else {\n      submenuElement.style.left = '100%';\n      submenuElement.style.right = 'auto';\n    }\n\n    if (rect.bottom - ketcherEditorTop > ketcherEditorHeight) {\n      submenuElement.style.top = 'auto';\n      submenuElement.style.bottom = '0';\n    } else {\n      submenuElement.style.top = '0';\n      submenuElement.style.bottom = 'auto';\n    }\n  };\n\n  const resetMenuPosition = (menuElement: HTMLElement) => {\n    const contextMenuElement = menuElement;\n    const ketcherRootElement = document.querySelector(\n      KETCHER_ROOT_NODE_CSS_SELECTOR,\n    );\n\n    if (!contextMenuElement || !ketcherRootElement) {\n      return;\n    }\n\n    const contextMenuElementBoundingBox =\n      contextMenuElement.getBoundingClientRect();\n    const ketcherRootElementBoundingBox =\n      ketcherRootElement.getBoundingClientRect();\n    const viewportWidth = window.innerWidth;\n    const viewportHeight = window.innerHeight;\n\n    if (!contextMenuElementBoundingBox || !ketcherRootElementBoundingBox) {\n      return;\n    }\n\n    let left = contextMenuElementBoundingBox.left;\n    let top = contextMenuElementBoundingBox.top;\n\n    // Ensure the menu is within the Ketcher root element\n    if (\n      contextMenuElementBoundingBox.right > ketcherRootElementBoundingBox.right\n    ) {\n      left =\n        ketcherRootElementBoundingBox.right -\n        contextMenuElementBoundingBox.width;\n    }\n\n    if (\n      contextMenuElementBoundingBox.bottom >\n      ketcherRootElementBoundingBox.bottom\n    ) {\n      top =\n        ketcherRootElementBoundingBox.bottom -\n        contextMenuElementBoundingBox.height;\n    }\n\n    // Ensure the menu is within the viewport\n    if (left < 0) {\n      left = 0;\n    }\n\n    if (top < 0) {\n      top = 0;\n    }\n\n    if (contextMenuElementBoundingBox.right > viewportWidth) {\n      left = viewportWidth - contextMenuElementBoundingBox.width - 10;\n    }\n\n    if (contextMenuElementBoundingBox.bottom > viewportHeight) {\n      top = viewportHeight - contextMenuElementBoundingBox.height - 10;\n    }\n\n    contextMenuElement.style.left = `${left}px`;\n    contextMenuElement.style.top = `${top}px`;\n  };\n\n  const trackVisibility = useCallback(\n    (id: CONTEXT_MENU_ID, visible: boolean) => {\n      const editor = getKetcherInstance().editor as Editor;\n      if (visible) {\n        editor.hoverIcon.hide();\n        const contextMenuElement = document.querySelector(\n          '.contexify:last-of-type',\n        ) as HTMLDivElement | null;\n        const submenuElements = document.querySelectorAll(\n          '.contexify_submenu',\n        ) as NodeListOf<HTMLElement>;\n        if (contextMenuElement) {\n          // Timeout is needed to ensure that the context menu is rendered by react-contexify library.\n          // Without timeout library overrides the position of the context menu which we set.\n          setTimeout(() => resetMenuPosition(contextMenuElement), 0);\n        }\n\n        if (submenuElements.length) {\n          submenuElements.forEach((submenuElement) => {\n            adjustSubmenuPosition(submenuElement);\n          });\n        }\n      }\n      editor.contextMenu[id] = visible;\n    },\n    [getKetcherInstance],\n  );\n\n  const ketcherEditorRootElement = document.querySelector(\n    KETCHER_ROOT_NODE_CSS_SELECTOR,\n  );\n\n  return ketcherEditorRootElement\n    ? createPortal(\n        <>\n          <Menu\n            {...props}\n            id={CONTEXT_MENU_ID.FOR_BONDS}\n            onVisibilityChange={(visible) =>\n              trackVisibility(CONTEXT_MENU_ID.FOR_BONDS, visible)\n            }\n          >\n            <BondMenuItems />\n          </Menu>\n\n          <Menu\n            {...props}\n            id={CONTEXT_MENU_ID.FOR_ATOMS}\n            onVisibilityChange={(visible) =>\n              trackVisibility(CONTEXT_MENU_ID.FOR_ATOMS, visible)\n            }\n          >\n            <AtomMenuItems />\n          </Menu>\n\n          <Menu\n            {...props}\n            id={CONTEXT_MENU_ID.FOR_SELECTION}\n            onVisibilityChange={(visible) =>\n              trackVisibility(CONTEXT_MENU_ID.FOR_SELECTION, visible)\n            }\n          >\n            <SelectionMenuItems />\n          </Menu>\n\n          <Menu\n            {...props}\n            id={CONTEXT_MENU_ID.FOR_FUNCTIONAL_GROUPS}\n            onVisibilityChange={(visible) =>\n              trackVisibility(CONTEXT_MENU_ID.FOR_FUNCTIONAL_GROUPS, visible)\n            }\n          >\n            <FunctionalGroupMenuItems />\n          </Menu>\n\n          <Menu\n            {...props}\n            id={CONTEXT_MENU_ID.FOR_R_GROUP_ATTACHMENT_POINT}\n            onVisibilityChange={(visible) =>\n              trackVisibility(\n                CONTEXT_MENU_ID.FOR_R_GROUP_ATTACHMENT_POINT,\n                visible,\n              )\n            }\n          >\n            <RGroupAttachmentPointMenuItems />\n          </Menu>\n\n          <Menu\n            {...props}\n            id={CONTEXT_MENU_ID.FOR_MULTITAIL_ARROW}\n            onVisibilityChange={(visible) =>\n              trackVisibility(CONTEXT_MENU_ID.FOR_MULTITAIL_ARROW, visible)\n            }\n          >\n            <MultitailArrowMenuItems />\n          </Menu>\n\n          <Menu\n            {...props}\n            id={CONTEXT_MENU_ID.FOR_MACROMOLECULE}\n            onVisibilityChange={(visible) =>\n              trackVisibility(CONTEXT_MENU_ID.FOR_MACROMOLECULE, visible)\n            }\n          >\n            <MacromoleculeMenuItems />\n          </Menu>\n        </>,\n        ketcherEditorRootElement,\n      )\n    : null;\n};\n\nexport default ContextMenu;\n","import {\n  FunctionalGroup,\n  MonomerMicromolecule,\n  MULTITAIL_ARROW_KEY,\n  ReMultitailArrow,\n} from 'ketcher-core';\nimport Editor, { ClosestItemWithMap } from 'src/script/editor';\nimport {\n  CONTEXT_MENU_ID,\n  ContextMenuProps,\n  GetIsItemInSelectionArgs,\n} from './contextMenu.types';\nimport { Selection } from '../../../../editor/Editor';\nimport { onlyHasProperty } from './utils';\n\nexport const getIsItemInSelection = ({\n  item,\n  selection,\n  selectedSGroupsIds,\n  selectedFunctionalGroups,\n}: GetIsItemInSelectionArgs): boolean => {\n  if (!item || !selection) {\n    return false;\n  }\n\n  switch (item.map) {\n    case 'sgroups':\n      return selectedSGroupsIds.has(item.id);\n\n    case 'functionalGroups':\n      return Array.from(selectedFunctionalGroups.keys()).includes(item.id);\n\n    default:\n      return (\n        item.map in selection &&\n        Array.isArray(selection[item.map]) &&\n        selection[item.map].includes(item.id)\n      );\n  }\n};\n\nexport function getMenuPropsForClosestItem(\n  editor: Editor,\n  closestItem: ClosestItemWithMap,\n): ContextMenuProps | null {\n  const struct = editor.struct();\n\n  switch (closestItem.map) {\n    case 'bonds': {\n      const functionalGroup = FunctionalGroup.findFunctionalGroupByBond(\n        struct,\n        struct.functionalGroups,\n        closestItem.id,\n        true,\n      );\n\n      const noFunctionalGroup =\n        functionalGroup === null ||\n        functionalGroup?.relatedSGroup.isSuperatomWithoutLabel;\n      const isMonomer =\n        functionalGroup?.relatedSGroup instanceof MonomerMicromolecule;\n\n      if (noFunctionalGroup) {\n        return {\n          id: CONTEXT_MENU_ID.FOR_BONDS,\n          bondIds: [closestItem.id],\n        };\n      } else if (isMonomer) {\n        return {\n          id: CONTEXT_MENU_ID.FOR_MACROMOLECULE,\n          functionalGroups: [functionalGroup],\n        };\n      } else {\n        return {\n          id: CONTEXT_MENU_ID.FOR_FUNCTIONAL_GROUPS,\n          functionalGroups: [functionalGroup],\n        };\n      }\n    }\n\n    case 'atoms': {\n      const functionalGroup = FunctionalGroup.findFunctionalGroupByAtom(\n        struct.functionalGroups,\n        closestItem.id,\n        true,\n      );\n\n      const noFunctionalGroup =\n        functionalGroup === null ||\n        functionalGroup?.relatedSGroup.isSuperatomWithoutLabel;\n      const isMonomer =\n        functionalGroup?.relatedSGroup instanceof MonomerMicromolecule;\n\n      if (noFunctionalGroup) {\n        return {\n          id: CONTEXT_MENU_ID.FOR_ATOMS,\n          atomIds: [closestItem.id],\n        };\n      } else if (isMonomer) {\n        return {\n          id: CONTEXT_MENU_ID.FOR_MACROMOLECULE,\n          functionalGroups: [functionalGroup],\n        };\n      } else {\n        return {\n          id: CONTEXT_MENU_ID.FOR_FUNCTIONAL_GROUPS,\n          functionalGroups: [functionalGroup],\n        };\n      }\n    }\n\n    case 'sgroups':\n    case 'functionalGroups': {\n      const sGroup = struct.sgroups.get(closestItem.id);\n\n      const functionalGroup = FunctionalGroup.findFunctionalGroupBySGroup(\n        struct.functionalGroups,\n        sGroup,\n      );\n\n      return functionalGroup\n        ? {\n            id:\n              sGroup instanceof MonomerMicromolecule\n                ? CONTEXT_MENU_ID.FOR_MACROMOLECULE\n                : CONTEXT_MENU_ID.FOR_FUNCTIONAL_GROUPS,\n            functionalGroups: [functionalGroup],\n          }\n        : null;\n    }\n\n    case 'rgroupAttachmentPoints': {\n      const atomId = struct.rgroupAttachmentPoints.get(closestItem.id)?.atomId;\n\n      return {\n        id: CONTEXT_MENU_ID.FOR_R_GROUP_ATTACHMENT_POINT,\n        rgroupAttachmentPoints: [closestItem.id],\n        atomIds: typeof atomId === 'number' ? [atomId] : undefined,\n      };\n    }\n\n    case MULTITAIL_ARROW_KEY: {\n      const closestItemTyped = closestItem as unknown as ReturnType<\n        ReMultitailArrow['calculateDistanceToPoint']\n      >;\n      const tailId = closestItemTyped?.ref?.tailId;\n      return {\n        id: CONTEXT_MENU_ID.FOR_MULTITAIL_ARROW,\n        itemId: closestItem.id,\n        tailId: typeof tailId === 'number' ? tailId : null,\n      };\n    }\n\n    default:\n      return null;\n  }\n}\n\nconst IGNORED_MAPS_LIST = ['enhancedFlags'];\n\nexport function getMenuPropsForSelection(\n  selection: Selection | null,\n  selectedFunctionalGroups: Map<number, FunctionalGroup>,\n): ContextMenuProps | null {\n  if (!selection) {\n    return null;\n  }\n\n  const { bonds, atoms, rgroupAttachmentPoints } = selection;\n\n  if (selectedFunctionalGroups.size > 0) {\n    const functionalGroups = Array.from(selectedFunctionalGroups.values());\n    if (\n      functionalGroups.some(\n        (fg) => fg.relatedSGroup instanceof MonomerMicromolecule,\n      )\n    ) {\n      return {\n        id: CONTEXT_MENU_ID.FOR_MACROMOLECULE,\n        functionalGroups,\n      };\n    }\n\n    return {\n      id: CONTEXT_MENU_ID.FOR_FUNCTIONAL_GROUPS,\n      functionalGroups,\n    };\n  } else if (bonds && !atoms && !rgroupAttachmentPoints) {\n    return {\n      id: CONTEXT_MENU_ID.FOR_BONDS,\n      bondIds: bonds,\n      extraItemsSelected: !onlyHasProperty(\n        selection,\n        'bonds',\n        IGNORED_MAPS_LIST,\n      ),\n    };\n  } else if (atoms && !bonds && !rgroupAttachmentPoints) {\n    return {\n      id: CONTEXT_MENU_ID.FOR_ATOMS,\n      atomIds: atoms,\n      extraItemsSelected: !onlyHasProperty(\n        selection,\n        'atoms',\n        IGNORED_MAPS_LIST,\n      ),\n    };\n  } else if (rgroupAttachmentPoints && !bonds && !atoms) {\n    return {\n      id: CONTEXT_MENU_ID.FOR_R_GROUP_ATTACHMENT_POINT,\n      rgroupAttachmentPoints,\n      extraItemsSelected: !onlyHasProperty(\n        selection,\n        'rgroupAttachmentPoints',\n        IGNORED_MAPS_LIST,\n      ),\n    };\n  } else {\n    return {\n      id: CONTEXT_MENU_ID.FOR_SELECTION,\n      bondIds: bonds,\n      atomIds: atoms,\n      rgroupAttachmentPoints,\n    };\n  }\n}\n","/****************************************************************************\n * Copyright 2022 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { FunctionalGroup, MULTITAIL_ARROW_KEY } from 'ketcher-core';\nimport { FC, PropsWithChildren, useCallback } from 'react';\nimport { useContextMenu } from 'react-contexify';\nimport { useAppContext } from 'src/hooks';\nimport Editor from 'src/script/editor';\nimport { ContextMenuProps, ContextMenuTriggerType } from './contextMenu.types';\nimport {\n  getIsItemInSelection,\n  getMenuPropsForClosestItem,\n  getMenuPropsForSelection,\n} from './ContextMenuTrigger.utils';\nimport TemplateTool from 'src/script/editor/tool/template';\n\nconst ContextMenuTrigger: FC<PropsWithChildren> = ({ children }) => {\n  const { getKetcherInstance } = useAppContext();\n  const { show } = useContextMenu<ContextMenuProps>();\n\n  const getSelectedGroupsInfo = useCallback(() => {\n    const editor = getKetcherInstance().editor as Editor;\n    const struct = editor.struct();\n    const selectedAtomIds = editor.selection()?.atoms;\n    // Map and Set can do deduplication\n    const selectedFunctionalGroups = new Map<number, FunctionalGroup>();\n    const selectedSGroupsIds: Set<number> = new Set();\n\n    selectedAtomIds?.forEach((atomId) => {\n      const functionalGroup = FunctionalGroup.findFunctionalGroupByAtom(\n        struct.functionalGroups,\n        atomId,\n        true,\n      );\n\n      functionalGroup !== null &&\n        functionalGroup.relatedSGroup &&\n        !functionalGroup.relatedSGroup.isSuperatomWithoutLabel &&\n        selectedFunctionalGroups.set(\n          functionalGroup.relatedSGroupId,\n          functionalGroup,\n        );\n\n      const sGroupId = struct.sgroups.find(\n        (_, sGroup) =>\n          !sGroup.isSuperatomWithoutLabel && sGroup.atoms.includes(atomId),\n      );\n\n      sGroupId !== null && selectedSGroupsIds.add(sGroupId);\n    });\n\n    return {\n      selectedFunctionalGroups,\n      selectedSGroupsIds,\n    };\n  }, [getKetcherInstance]);\n\n  const handleDisplay = useCallback<React.MouseEventHandler<HTMLDivElement>>(\n    (event) => {\n      event.preventDefault();\n\n      const editor = getKetcherInstance().editor as Editor;\n\n      if (editor.render.options.viewOnlyMode) {\n        return;\n      }\n\n      const currentTool = editor.tool();\n      if (currentTool instanceof TemplateTool) {\n        currentTool.cancel();\n      }\n\n      const closestItem = editor.findItem(event, null);\n      const selection = editor.selection();\n      const { selectedFunctionalGroups, selectedSGroupsIds } =\n        getSelectedGroupsInfo();\n\n      let showProps: ContextMenuProps | null = null;\n      let triggerType: ContextMenuTriggerType;\n\n      if (!closestItem) {\n        const isLeftMouseButtonPressed = event.buttons === 1;\n        const isRotationReverted = isLeftMouseButtonPressed;\n        if (selection && !isRotationReverted) {\n          // if it was a click outside of any item\n          editor.selection(null);\n        }\n        return;\n      } else if (!selection) {\n        triggerType = ContextMenuTriggerType.ClosestItem;\n      } else if (\n        getIsItemInSelection({\n          item: closestItem,\n          selection,\n          selectedFunctionalGroups,\n          selectedSGroupsIds,\n        })\n      ) {\n        if (\n          !selection.bonds &&\n          !selection.atoms &&\n          !selection.rgroupAttachmentPoints\n        ) {\n          if (selection[MULTITAIL_ARROW_KEY]) {\n            triggerType = ContextMenuTriggerType.ClosestItem;\n          } else {\n            triggerType = ContextMenuTriggerType.None;\n          }\n        } else {\n          triggerType = ContextMenuTriggerType.Selection;\n        }\n      } else {\n        // closestItem is outside of selection\n        editor.selection(null);\n        triggerType = ContextMenuTriggerType.ClosestItem;\n      }\n\n      switch (triggerType) {\n        case ContextMenuTriggerType.None: {\n          return;\n        }\n\n        case ContextMenuTriggerType.ClosestItem: {\n          showProps = getMenuPropsForClosestItem(editor, closestItem);\n          break;\n        }\n\n        case ContextMenuTriggerType.Selection: {\n          showProps = getMenuPropsForSelection(\n            selection,\n            selectedFunctionalGroups,\n          );\n          break;\n        }\n      }\n\n      showProps &&\n        show({\n          id: showProps.id,\n          event,\n          props: showProps,\n        });\n    },\n    [getKetcherInstance, getSelectedGroupsInfo, show],\n  );\n\n  return (\n    <div style={{ height: '100%' }} onContextMenu={handleDisplay}>\n      {children}\n    </div>\n  );\n};\n\nexport default ContextMenuTrigger;\n","import { Point } from 'ketcher-core';\n\nconst X_COORD_INDEX = 0;\nconst Y_COORD_INDEX = 1;\n\nexport const calculateMiddleCoordsForRect = (\n  rectCoords: Array<Array<number>>,\n): Array<Point> | [] => {\n  if (!rectCoords) {\n    return [];\n  }\n\n  const middleCoordForRectangleSides: Array<Point> = [];\n\n  const previousPoint: Point = {\n    x: rectCoords[0][X_COORD_INDEX],\n    y: rectCoords[0][Y_COORD_INDEX],\n  };\n\n  for (let i = 1; i < rectCoords.length; i++) {\n    if (!previousPoint.x || !previousPoint.y) {\n      return [];\n    }\n\n    const middleX = (previousPoint.x + rectCoords[i][X_COORD_INDEX]) / 2;\n    const middleY = (previousPoint.y + rectCoords[i][Y_COORD_INDEX]) / 2;\n    middleCoordForRectangleSides.push({ x: middleX, y: middleY });\n    previousPoint.x = rectCoords[i][X_COORD_INDEX];\n    previousPoint.y = rectCoords[i][Y_COORD_INDEX];\n  }\n\n  return middleCoordForRectangleSides;\n};\n\nexport const getSmoothScrollDelta = (delta: number, zoom: number) => {\n  const SMOOTH_FACTOR = 0.4;\n  return (delta / zoom) * SMOOTH_FACTOR;\n};\n","import { useEffect, useRef, useState, FC } from 'react';\nimport {\n  Vec2,\n  Render,\n  SGroup,\n  Struct,\n  CoordinateTransformation,\n} from 'ketcher-core';\nimport clsx from 'clsx';\nimport classes from './InfoPanel.module.less';\nimport { calculateMiddleCoordsForRect } from './helpers';\n\nconst BAR_PANEL_SIZE = 32;\nconst LEFT_PADDING_MULTIPLIER = 3;\n\nfunction getPanelPositionRelativeToRect(\n  clientX: number,\n  clientY: number,\n  sGroup: SGroup,\n  render: Render,\n  width: number,\n  height: number,\n): Vec2 | null {\n  const viewportLeftLimit = BAR_PANEL_SIZE * LEFT_PADDING_MULTIPLIER + width;\n  const viewportBottomLimit =\n    render?.clientArea?.clientHeight - BAR_PANEL_SIZE - height;\n  const viewportRightLimit =\n    render?.clientArea?.clientWidth - BAR_PANEL_SIZE - width;\n\n  if (!sGroup.hovering) {\n    return null;\n  }\n\n  // [['M', 23, 43], ['L', 23, 24]] we should remove first elements => [[23,43], [23,24]]\n  const rectCoords: Array<Array<number>> = sGroup.hovering.attrs?.path?.map(\n    (line) => line.slice(1),\n  );\n\n  const [middleLeftSide, middleBottomSide, middleRightSide, middleTopSide] =\n    calculateMiddleCoordsForRect(rectCoords);\n\n  if (\n    !middleBottomSide?.x ||\n    !middleBottomSide?.y ||\n    !middleTopSide?.y ||\n    !middleLeftSide?.x ||\n    !middleLeftSide?.y ||\n    !middleRightSide?.x ||\n    !middleRightSide?.y\n  ) {\n    return null;\n  }\n\n  // Default position for panel is in the bottom;\n  let x = middleBottomSide.x - width / 2;\n  let y = middleBottomSide.y;\n\n  if (clientY > viewportBottomLimit) {\n    y = middleTopSide.y - height;\n  }\n\n  if (clientX > viewportRightLimit) {\n    x = middleLeftSide.x - width;\n    y = middleLeftSide.y - height / 2;\n  }\n\n  if (clientX < viewportLeftLimit) {\n    x = middleRightSide.x;\n    y = middleRightSide.y - height / 2;\n  }\n\n  const panelPositionInViewBox = CoordinateTransformation.canvasToView(\n    new Vec2(x, y),\n    render,\n  );\n  return panelPositionInViewBox;\n}\n\ninterface SGroupDataRenderProps {\n  clientX: number;\n  clientY: number;\n  render: Render;\n  groupStruct: Struct;\n  sGroup: SGroup;\n  sGroupData: string | null;\n  className?: string;\n}\n\nconst SGroupDataRender: FC<SGroupDataRenderProps> = (props) => {\n  const { clientX, clientY, render, className, sGroup, sGroupData } = props;\n  const [wrapperHeight, setWrapperHeight] = useState(0);\n  const [wrapperWidth, setWrapperWidth] = useState(0);\n  const wrapperRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (wrapperRef.current) {\n      setWrapperHeight(wrapperRef.current.clientHeight);\n      setWrapperWidth(wrapperRef.current.clientWidth);\n    }\n  });\n\n  const panelCoordinate = getPanelPositionRelativeToRect(\n    clientX,\n    clientY,\n    sGroup,\n    render,\n    wrapperWidth,\n    wrapperHeight,\n  );\n\n  return panelCoordinate ? (\n    <div\n      ref={wrapperRef}\n      style={{ left: panelCoordinate.x + 'px', top: panelCoordinate.y + 'px' }}\n      className={clsx(classes.infoPanel, className)}\n    >\n      {sGroupData}\n    </div>\n  ) : null;\n};\n\nexport default SGroupDataRender;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport const functionalGroupsSelector = (state) => state.functionalGroups.lib;\nexport const functionGroupInfoSelector = (state) =>\n  state.functionalGroups.functionalGroupInfo;\nexport const modeSelector = (state) => state.functionalGroups.mode;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useState, useEffect, FC } from 'react';\nimport {\n  Scale,\n  Vec2,\n  Render,\n  Struct,\n  SGroup,\n  CoordinateTransformation,\n  MonomerMicromolecule,\n  AmbiguousMonomer,\n} from 'ketcher-core';\n\nimport SGroupDataRender from './SGroupDataRender';\nimport { functionGroupInfoSelector } from '../../../state/functionalGroups/selectors';\nimport { connect } from 'react-redux';\nimport clsx from 'clsx';\nimport {\n  AmbiguousMonomerPreview,\n  PreviewType,\n  StructRender,\n  calculateAmbiguousMonomerPreviewTop,\n} from 'components';\nimport classes from './InfoPanel.module.less';\n\nconst HOVER_PANEL_PADDING = 20;\nconst MAX_INFO_PANEL_SIZE = 200;\n\nfunction getPanelPosition(\n  clientX: number,\n  clientY: number,\n  render: Render,\n  sGroup: SGroup,\n): [Vec2, Vec2] {\n  let width = 0;\n  let height = 0;\n  let x = 0;\n  let y = 0;\n\n  if (sGroup) {\n    // calculate width and height\n    const groupBoundingBox = sGroup.areas[0];\n    const start = Scale.modelToCanvas(groupBoundingBox.p0, render.options);\n    const end = Scale.modelToCanvas(groupBoundingBox.p1, render.options);\n    width = Math.min(end.x - start.x, MAX_INFO_PANEL_SIZE);\n    height = Math.min(end.y - start.y, MAX_INFO_PANEL_SIZE);\n    // calculate initial position\n    const { position } = sGroup.getContractedPosition(render.ctab.molecule);\n    const panelPosition = CoordinateTransformation.modelToView(\n      position,\n      render,\n    );\n    x = panelPosition.x - width / 2 - HOVER_PANEL_PADDING;\n    y = panelPosition.y + HOVER_PANEL_PADDING;\n    // adjust position to keep inside viewport\n    const viewportRightLimit = render?.clientArea?.clientWidth - width / 2;\n    const viewportLeftLimit = HOVER_PANEL_PADDING * 2 + width / 2;\n    const viewportBottomLimit = render?.clientArea?.clientHeight - height;\n    if (clientX > viewportRightLimit) {\n      x = panelPosition.x - width - HOVER_PANEL_PADDING;\n    } else if (clientX < viewportLeftLimit) {\n      x = panelPosition.x - HOVER_PANEL_PADDING;\n    }\n    if (clientY > viewportBottomLimit) {\n      y = panelPosition.y - height - HOVER_PANEL_PADDING * 3;\n    }\n  }\n\n  return [new Vec2(x, y), new Vec2(width, height)];\n}\ninterface InfoPanelProps {\n  clientX: number | undefined;\n  clientY: number | undefined;\n  render: Render;\n  groupStruct: Struct;\n  sGroup: SGroup;\n  className?: string;\n}\n\nconst InfoPanel: FC<InfoPanelProps> = (props) => {\n  const { clientX, clientY, render, className, groupStruct, sGroup } = props;\n  const [molecule, setMolecule] = useState<Struct | null>(null);\n  const [sGroupData, setSGroupData] = useState<string | null>(null);\n  const groupName = sGroup?.data?.name;\n\n  useEffect(() => {\n    if (sGroup && SGroup.isDataSGroup(sGroup)) {\n      setSGroupData(`${sGroup.data?.fieldName}=${sGroup.data?.fieldValue}`);\n    } else if (sGroup && SGroup.isQuerySGroup(sGroup)) {\n      setSGroupData('Query component');\n    } else {\n      setSGroupData(null);\n    }\n  }, [groupStruct, sGroup]);\n\n  useEffect(() => {\n    setMolecule(groupStruct ? groupStruct.clone() : null);\n  }, [groupName, groupStruct]);\n\n  const nonTooltipSGroup =\n    !sGroup || SGroup.isMulSGroup(sGroup) || SGroup.isSRUSGroup(sGroup);\n\n  if (\n    nonTooltipSGroup ||\n    (!molecule && !sGroupData) ||\n    clientX === undefined ||\n    clientY === undefined\n  ) {\n    return null;\n  }\n\n  const [position, size] = getPanelPosition(clientX, clientY, render, sGroup);\n  const { x, y } = position;\n  const width = size.x;\n  const height = size.y;\n\n  const showMolecule =\n    molecule &&\n    sGroup &&\n    !SGroup.isDataSGroup(sGroup) &&\n    !SGroup.isQuerySGroup(sGroup);\n\n  const isAmbiguousMonomer =\n    sGroup instanceof MonomerMicromolecule &&\n    sGroup.monomer instanceof AmbiguousMonomer;\n\n  return isAmbiguousMonomer ? (\n    <AmbiguousMonomerPreview\n      preview={{\n        type: PreviewType.AmbiguousMonomer,\n        monomer: sGroup.monomer.variantMonomerItem,\n      }}\n      style={{\n        position: 'absolute',\n        left: `${clientX - 50}px`,\n        top: calculateAmbiguousMonomerPreviewTop(\n          sGroup.monomer.variantMonomerItem,\n        )({\n          left: clientX - 50,\n          top: clientY - 65,\n          bottom: clientY - 25,\n        }),\n        transform: 'translate(-50%, 0)',\n      }}\n    />\n  ) : showMolecule ? (\n    <div\n      style={{\n        left: x + 'px',\n        top: y + 'px',\n      }}\n      className={clsx(classes.infoPanel, className)}\n    >\n      <StructRender\n        struct={molecule}\n        options={{\n          ...render.options,\n          downScale: true,\n          cachePrefix: 'infoPanel',\n          needCache: false,\n          width,\n          height,\n        }}\n      />\n    </div>\n  ) : (\n    <SGroupDataRender\n      clientX={clientX}\n      clientY={clientY}\n      render={render}\n      groupStruct={groupStruct}\n      sGroup={sGroup}\n      sGroupData={sGroupData}\n      className={className}\n    />\n  );\n};\n\nexport default connect((store: any) => ({\n  clientX: functionGroupInfoSelector(store)?.event?.clientX,\n  clientY: functionGroupInfoSelector(store)?.event?.clientY,\n  groupStruct: functionGroupInfoSelector(store)?.groupStruct || null,\n  sGroup: functionGroupInfoSelector(store)?.sGroup || null,\n  render: store.editor?.render?.ctab?.render,\n}))(InfoPanel);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useState, useEffect, FC } from 'react';\nimport { Render } from 'ketcher-core';\n\nimport classes from './InfoPanel.module.less';\nimport { connect } from 'react-redux';\nimport clsx from 'clsx';\nimport { TOOLTIP_DELAY } from 'src/script/editor/utils/functionalGroupsTooltip';\nimport { debounce } from 'lodash';\n\nconst HOVER_PANEL_PADDING = 20;\nconst tooltipOffset = {\n  x: 30,\n  y: 30,\n};\n\ninterface CursorPosition {\n  x: number;\n  y: number;\n}\n\ninterface InfoPanelProps {\n  render: Render;\n  className?: string;\n}\n\nfunction getPanelPosition(\n  position: CursorPosition,\n  render: Render,\n): CursorPosition {\n  const width = 140;\n  const height = 40;\n  // adjust position to keep inside viewport\n  const viewportRightLimit = render?.clientArea?.clientWidth - width / 2;\n  const viewportBottomLimit = render?.clientArea?.clientHeight - height;\n  position.y -= tooltipOffset.y;\n  position.x -= tooltipOffset.x;\n\n  if (position.x > viewportRightLimit) {\n    position.x = position.x - width - HOVER_PANEL_PADDING;\n  }\n\n  if (position.y > viewportBottomLimit) {\n    position.y -= HOVER_PANEL_PADDING;\n  }\n\n  return position;\n}\n\nconst InfoTooltip: FC<InfoPanelProps> = (props) => {\n  const { render, className } = props;\n  const [tooltip, setTooltip] = useState<null | string>(null);\n  const [position, setPosition] = useState<\n    CursorPosition | { x: null; y: null }\n  >({\n    x: null,\n    y: null,\n  });\n\n  useEffect(() => {\n    const debouncedShowTooltip = debounce(\n      (event: MouseEvent, tooltip: string) => {\n        setTooltip(tooltip);\n        setPosition({\n          x: event.clientX,\n          y: event.clientY,\n        });\n      },\n      TOOLTIP_DELAY,\n    );\n    const hideTooltip = () => {\n      setTooltip(null);\n      setPosition({\n        x: null,\n        y: null,\n      });\n    };\n\n    const toggleTooltip = (event: MouseEvent) => {\n      const target = event.target as HTMLElement;\n      const tooltip = target.dataset.tooltip;\n\n      if (tooltip) {\n        debouncedShowTooltip(event, tooltip);\n      } else {\n        debouncedShowTooltip.cancel();\n        hideTooltip();\n      }\n    };\n\n    document.addEventListener('mouseover', toggleTooltip);\n    return () => {\n      document.removeEventListener('mouseover', toggleTooltip);\n    };\n  }, []);\n\n  if (!tooltip || !position.x || !position.y) {\n    return null;\n  }\n\n  const shiftedPosition = getPanelPosition(position, render);\n\n  return (\n    <div\n      id=\"atomInfoTooltip\"\n      role=\"tooltip\"\n      style={{\n        left: shiftedPosition.x + 'px',\n        top: shiftedPosition.y + 'px',\n      }}\n      className={clsx(classes.infoTooltip, className)}\n      dangerouslySetInnerHTML={{ __html: tooltip }}\n    />\n  );\n};\n\nexport default connect((store: any) => ({\n  render: store.editor?.render?.ctab?.render,\n}))(InfoTooltip);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Component, createRef } from 'react';\n\nimport Editor from '../../../../editor';\nimport { LoadingCircles } from '../Spinner/LoadingCircles';\nimport classes from './StructEditor.module.less';\nimport clsx from 'clsx';\nimport { upperFirst } from 'lodash/fp';\nimport { FloatingToolContainer } from '../../toolbars';\nimport { ContextMenu, ContextMenuTrigger } from '../ContextMenu';\nimport InfoPanel from './InfoPanel';\nimport { KetcherLogger, ketcherProvider } from 'ketcher-core';\nimport { getSmoothScrollDelta } from './helpers';\nimport InfoTooltip from './InfoTooltip';\n\n// TODO: need to update component after making refactoring of store\nfunction setupEditor(editor, props, oldProps = {}) {\n  const { struct, tool, toolOpts, options } = props;\n\n  if (struct !== oldProps.struct) editor.struct(struct);\n\n  if (tool !== oldProps.tool || toolOpts !== oldProps.toolOpts) {\n    editor.tool(tool, toolOpts);\n    if (toolOpts !== oldProps.toolOpts) {\n      editor.event.message.dispatch({ info: JSON.stringify(toolOpts) });\n    }\n  }\n\n  if (oldProps.options && options !== oldProps.options) {\n    editor.options(options);\n    editor.setServerSettings(props.serverSettings);\n  }\n\n  Object.keys(editor.event).forEach((name) => {\n    const eventName = `on${upperFirst(name)}`;\n\n    if (props[eventName] !== oldProps[eventName]) {\n      if (oldProps[eventName]) {\n        editor.event[name].remove(oldProps[eventName]);\n      }\n\n      if (props[eventName]) {\n        editor.event[name].add(props[eventName]);\n      }\n    }\n  });\n\n  editor.clearHistoryStack();\n  editor.render.unobserveCanvasResize();\n  editor.render.observeCanvasResize();\n}\n\nfunction removeEditorHandlers(editor, props) {\n  Object.keys(editor.event).forEach((name) => {\n    const eventName = `on${upperFirst(name)}`;\n\n    if (props[eventName]) editor.event[name].remove(props[eventName]);\n  });\n}\n\nclass StructEditor extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      enableCursor: false,\n      clientX: 0,\n      clientY: 0,\n    };\n    this.editorRef = createRef();\n    this.logRef = createRef();\n  }\n\n  handleWheel = (event) => {\n    if (event.ctrlKey) {\n      event.preventDefault();\n\n      const zoomDelta = event.deltaY > 0 ? -1 : 1;\n\n      if (zoomDelta === 1) {\n        this.props.onZoomIn(event);\n      } else {\n        this.props.onZoomOut(event);\n      }\n    } else {\n      this.scrollCanvas(event);\n      this.editor.rotateController.updateFloatingToolsPosition();\n      this.editor.hoverIcon.updatePosition();\n      this.editor.tool()?.mousemove(this.editor.lastEvent);\n    }\n  };\n\n  // TODO https://github.com/epam/ketcher/issues/3472\n  /**\n   * @param {WheelEvent} event\n   */\n  scrollCanvas(event) {\n    if (event.shiftKey) {\n      this.handleHorizontalScroll(event);\n    } else {\n      this.handleScroll(event);\n    }\n  }\n\n  /**\n   * @param {WheelEvent} event\n   */\n  handleHorizontalScroll(event) {\n    this.editor.render.setViewBox((prev) => ({\n      ...prev,\n      minX:\n        prev.minX - getSmoothScrollDelta(event.wheelDelta, this.editor.zoom()),\n    }));\n  }\n\n  /**\n   * For mouse wheel and touchpad\n   * @param {WheelEvent} event\n   */\n  handleScroll(event) {\n    this.editor.render.setViewBox((prev) => ({\n      ...prev,\n      minX: prev.minX + getSmoothScrollDelta(event.deltaX, this.editor.zoom()),\n      minY: prev.minY + getSmoothScrollDelta(event.deltaY, this.editor.zoom()),\n    }));\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return (\n      this.props.indigoVerification !== nextProps.indigoVerification ||\n      nextState.enableCursor !== this.state.enableCursor\n    );\n  }\n\n  UNSAFE_componentWillReceiveProps(props) {\n    setupEditor(this.editor, props, this.props);\n  }\n\n  componentDidMount() {\n    this.editor = new Editor(\n      this.editorRef.current,\n      {\n        ...this.props.options,\n      },\n      { ...this.props.serverSettings },\n    );\n    const ketcher = ketcherProvider.getKetcher();\n    if (ketcher?.editor.macromoleculeConvertionError) {\n      this.props.onShowMacromoleculesErrorMessage(\n        ketcher.editor.macromoleculeConvertionError,\n      );\n      ketcher.editor.clearMacromoleculeConvertionError();\n    }\n    setupEditor(this.editor, this.props);\n    if (this.props.onInit) this.props.onInit(this.editor);\n\n    this.editor.event.message.add((msg) => {\n      const el = this.logRef.current;\n      if (msg.info && this.props.showAttachmentPoints) {\n        try {\n          const parsedInfo = JSON.parse(msg.info);\n          el.innerHTML = `Atom Id: ${parsedInfo.atomid}, Bond Id: ${parsedInfo.bondid}`;\n        } catch (e) {\n          KetcherLogger.error(\n            'StructEditor.jsx::StructEditor::componentDidMount',\n            e,\n          );\n          el.innerHTML = msg.info;\n        }\n        el.classList.add(classes.visible);\n      } else {\n        el.classList.remove(classes.visible);\n      }\n    });\n\n    this.editor.event.cursor.add((csr) => {\n      let clientX, clientY;\n\n      switch (csr.status) {\n        case 'enable': {\n          this.editorRef.current.classList.add(classes.enableCursor);\n          const { left, top, right, bottom } =\n            this.editorRef.current.getBoundingClientRect();\n\n          clientX = csr.cursorPosition.clientX;\n          clientY = csr.cursorPosition.clientY;\n\n          const handShouldBeShown =\n            clientX >= left &&\n            clientX <= right &&\n            clientY >= top &&\n            clientX <= bottom;\n          if (!this.state.enableCursor && handShouldBeShown) {\n            this.setState({\n              enableCursor: true,\n            });\n          }\n          break;\n        }\n\n        case 'move': {\n          this.editorRef.current.classList.add(classes.enableCursor);\n          this.setState({\n            enableCursor: true,\n            clientX,\n            clientY,\n          });\n          break;\n        }\n\n        case 'disable': {\n          this.editorRef.current.classList.remove(classes.enableCursor);\n          this.setState({\n            enableCursor: false,\n          });\n          break;\n        }\n\n        case 'leave': {\n          this.editorRef.current.classList.remove(classes.enableCursor);\n          this.setState({\n            enableCursor: false,\n          });\n          break;\n        }\n\n        case 'mouseover': {\n          this.editorRef.current.classList.add(classes.enableCursor);\n          this.setState({\n            enableCursor: true,\n          });\n          break;\n        }\n        default:\n          break;\n      }\n    });\n\n    this.editor.event.message.dispatch({\n      info: JSON.stringify(this.props.toolOpts),\n    });\n\n    this.editorRef.current.addEventListener('wheel', this.handleWheel);\n  }\n\n  componentWillUnmount() {\n    removeEditorHandlers(this.editor, this.props);\n    this.editorRef.current.removeEventListener('wheel', this.handleWheel);\n    this.editor.render.unobserveCanvasResize();\n  }\n\n  render() {\n    const {\n      Tag = 'div',\n      className,\n      indigoVerification,\n      /* eslint-disable @typescript-eslint/no-unused-vars */\n      struct,\n      tool,\n      toolOpts,\n      options,\n      onInit,\n      onSelectionChange,\n      onElementEdit,\n      onEnhancedStereoEdit,\n      onQuickEdit,\n      onBondEdit,\n      onZoomIn,\n      onZoomOut,\n      onRgroupEdit,\n      onSgroupEdit,\n      onRemoveFG,\n      onMessage,\n      onAromatizeStruct,\n      onDearomatizeStruct,\n      onAttachEdit,\n      onCipChange,\n      onConfirm,\n      onShowInfo,\n      onApiSettings,\n      showAttachmentPoints = true,\n      onUpdateFloatingTools,\n      onShowMacromoleculesErrorMessage,\n      serverSettings,\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      ...props\n    } = this.props;\n\n    const { clientX = 0, clientY = 0 } = this.state;\n\n    return (\n      <Tag\n        className={clsx(classes.canvas, className)}\n        {...props}\n        data-testid=\"ketcher-canvas\"\n      >\n        <ContextMenuTrigger>\n          <div\n            ref={this.editorRef}\n            className={clsx(classes.intermediateCanvas)}\n          >\n            {/* svg here */}\n          </div>\n        </ContextMenuTrigger>\n\n        <div className={classes.measureLog} ref={this.logRef} />\n\n        {indigoVerification && (\n          <div className={`${classes.spinnerOverlay} loading-spinner`}>\n            <LoadingCircles />\n          </div>\n        )}\n\n        <InfoPanel\n          clientX={clientX}\n          clientY={clientY}\n          render={this.props.render}\n          groupStruct={this.props.groupStruct}\n          sGroup={this.props.sGroup}\n        />\n        <InfoTooltip render={this.props.render} />\n\n        <FloatingToolContainer />\n\n        <ContextMenu />\n      </Tag>\n    );\n  }\n}\n\nexport default StructEditor;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Dialog } from '../../../../components';\nimport Logo from './logo.svg';\nimport classes from './About.module.less';\nimport { connect } from 'react-redux';\nimport { Fragment } from 'react';\n\nfunction AboutDialog(props) {\n  const indigoInfo = props.indigoVersion && props.indigoVersion.split('.r'); // Indigo version and build info\n\n  return (\n    <Dialog\n      className={`${classes.about} ${classes.dialog_body}`}\n      params={props}\n      buttons={[\n        <button onClick={props.onOk} className={classes.okButton} key=\"ok\">\n          Ok\n        </button>,\n      ]}\n    >\n      <div className={classes.headerContent}>\n        <a href={props.overviewLink} target=\"_blank\" rel=\"noopener noreferrer\">\n          <Logo />\n          <span className={classes.title}>Ketcher</span>\n        </a>\n      </div>\n      <div className={classes.body}>\n        <div className={classes.verionsInfo}>\n          <dl className={classes.ketcherVersionInfo}>\n            <dt data-testid=\"build-version\">\n              <a\n                href={props.overviewLink}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                Version {props.version}\n              </a>\n            </dt>\n            <dd data-testid=\"build-time\">\n              Build at <time>{props.date}</time>\n            </dd>\n            <div className={classes.infoLinks}>\n              <dt>\n                <a\n                  href={props.feedbackLink}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  Feedback\n                </a>\n              </dt>\n              <dt>\n                <a\n                  href={props.lifeScienciesLink}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  EPAM Life Sciences\n                </a>\n              </dt>\n            </div>\n            <br />\n            <div className={classes.indigoVersion}>\n              <a\n                href=\"http://lifescience.opensource.epam.com/indigo/\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                {' '}\n                Indigo Toolkit\n              </a>\n              {props.indigoMachine && <div>{props.indigoMachine}</div>}\n            </div>\n            <div data-testid=\"build-indigo-version\">\n              {props.indigoVersion ? (\n                <Fragment>\n                  <dd>Version {indigoInfo[0]}</dd>\n                  {indigoInfo[1] && <dd>Build {indigoInfo[1]}</dd>}\n                </Fragment>\n              ) : (\n                <p>Standalone</p>\n              )}\n            </div>\n          </dl>\n        </div>\n      </div>\n    </Dialog>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  date: state.options.app.buildDate.replace('T', '; '),\n  indigoVersion: state.options.app.indigoVersion,\n  indigoMachine: state.options.app.indigoMachine,\n  feedbackLink: 'http://lifescience.opensource.epam.com/ketcher/#feedback',\n  overviewLink: 'https://lifescience.opensource.epam.com/ketcher/index.html',\n  lifeScienciesLink: 'http://lifescience.opensource.epam.com/',\n  version: state.options.app.version,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  onOk: (_result) => {\n    dispatch({ type: 'MODAL_CLOSE' });\n  },\n});\n\nconst About = connect(mapStateToProps, mapDispatchToProps)(AboutDialog);\n\nexport default About;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport React, { PureComponent, ComponentType, useRef, useEffect } from 'react';\n\nimport classes from './Input.module.less';\nimport clsx from 'clsx';\n\ntype Props = {\n  component?: ComponentType;\n  children?: React.ReactNode;\n  className?: string;\n  type: string;\n  value: number | string | boolean;\n  onChange: (val: any) => void;\n  placeholder?: string;\n  isFocused?: boolean;\n  innerRef?: React.Ref<any>;\n  schema?: any;\n  multiple?: boolean;\n};\n\nexport function GenericInput({\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n  schema,\n  /* eslint-enable @typescript-eslint/no-unused-vars */\n  value,\n  onChange,\n  innerRef,\n  type = 'text',\n  isFocused = false,\n  ...props\n}) {\n  const inputRef = useRef<HTMLInputElement>(innerRef);\n\n  useEffect(() => {\n    if (innerRef && inputRef.current) {\n      innerRef.current = inputRef.current;\n    }\n  }, [innerRef]);\n\n  useEffect(() => {\n    if (inputRef.current && isFocused) {\n      inputRef.current.focus();\n    }\n  }, [inputRef, isFocused]);\n\n  return (\n    <>\n      <input\n        type={type}\n        value={value ?? ''}\n        onChange={onChange}\n        className={clsx(classes.input, classes.genericInput)}\n        ref={inputRef}\n        {...props}\n      />\n      {type === 'checkbox' && <span className={classes.checkbox} />}\n      {type === 'radio' && <span className={classes.radioButton} />}\n    </>\n  );\n}\n\nGenericInput.val = function (ev, schema) {\n  const input = ev.target;\n  const isInteger = schema && schema.type === 'integer';\n  const isFloat = schema && schema.type === 'number';\n\n  const isNumber =\n    input.type === 'number' || input.type === 'range' || isInteger || isFloat;\n\n  const value = isNumber ? input.value.replace(/,/g, '.') : input.value;\n\n  if (isInteger) {\n    return Number(value) || 0;\n  }\n\n  // When the value can be a float the validation is passed to the parent component\n  // because it's more complicated\n  return value;\n};\n\nfunction TextArea({\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n  schema,\n  /* eslint-enable @typescript-eslint/no-unused-vars */\n  value,\n  onChange,\n  innerRef,\n  ...rest\n}) {\n  return (\n    <textarea value={value ?? ''} ref={innerRef} onInput={onChange} {...rest} />\n  );\n}\n\nTextArea.val = (ev) => ev.target.value;\n\nfunction CheckBox({\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n  schema,\n  /* eslint-enable @typescript-eslint/no-unused-vars */\n  value = '',\n  onChange,\n  innerRef,\n  ...rest\n}) {\n  return (\n    <div className={classes.fieldSetItem}>\n      <input\n        type=\"checkbox\"\n        checked={Boolean(value)}\n        onClick={onChange}\n        onChange={onChange}\n        className={classes.input}\n        ref={innerRef}\n        {...rest}\n      />\n      <span className={classes.checkbox} />\n    </div>\n  );\n}\n\nCheckBox.val = function (ev) {\n  ev.stopPropagation();\n  return !!ev.target.checked;\n};\n\nfunction Select({\n  schema,\n  value,\n  name,\n  onSelect,\n  className,\n  multiple = false,\n}) {\n  return (\n    <select\n      onChange={onSelect}\n      value={value}\n      name={name}\n      multiple={multiple}\n      className={clsx(classes.select, className)}\n    >\n      {enumSchema(schema, (title, val) => (\n        <option key={val} value={val}>\n          {title}\n        </option>\n      ))}\n    </select>\n  );\n}\n\nSelect.val = function (ev, schema) {\n  const select = ev.target as HTMLSelectElement;\n  if (!select.multiple) return enumSchema(schema, select.selectedIndex);\n\n  const options = select.options;\n\n  return Array.from(options).reduce(\n    (res, o: HTMLOptionElement, i) =>\n      !o.selected ? res : [enumSchema(schema, i), ...res],\n    [] as HTMLOptionElement[],\n  );\n};\n\nfunction FieldSet({\n  schema,\n  value,\n  selected,\n  onSelect,\n  type = 'radio',\n  checked,\n  innerRef,\n  ...rest\n}) {\n  return (\n    <fieldset onClick={onSelect}>\n      {enumSchema(schema, (title, val) => (\n        <li key={title} className={classes.fieldSetItem}>\n          <label className={classes.fieldSetLabel}>\n            {/* eslint-disable jsx-a11y/label-has-associated-control */}\n            <input\n              ref={innerRef}\n              type={type}\n              defaultChecked={\n                type === 'radio' ? selected(val, checked) : selected(val, value)\n              }\n              value={typeof val !== 'object' && val}\n              className={classes.input}\n              {...rest}\n            />\n            {type === 'checkbox' && <span className={classes.checkbox} />}\n            {type === 'radio' && <span className={classes.radioButton} />}\n            {title}\n            {/* eslint-disable jsx-a11y/label-has-associated-control */}\n          </label>\n        </li>\n      ))}\n    </fieldset>\n  );\n}\n\nFieldSet.val = function (ev, schema) {\n  const input = ev.target as HTMLInputElement;\n\n  if (ev.target.tagName !== 'INPUT') {\n    ev.stopPropagation();\n    return undefined;\n  }\n\n  // Hm.. looks like premature optimization\n  //      should we inline this?\n\n  const fieldset = input?.parentNode?.parentNode?.parentNode;\n  const inputCollection = fieldset?.querySelectorAll('input');\n  let result;\n\n  if (inputCollection?.length) {\n    result = Array.from(inputCollection).reduce(\n      (res, inp: HTMLInputElement, i) =>\n        !inp.checked ? res : [enumSchema(schema, i), ...res],\n\n      [] as HTMLInputElement[],\n    );\n  }\n\n  return input.type === 'radio' ? result[0] : result;\n};\n\nfunction Slider({ value, onChange, name, innerRef, ...rest }) {\n  return (\n    <div className={classes.slider} key={name}>\n      <input\n        ref={innerRef}\n        type=\"checkbox\"\n        checked={value}\n        onClick={onChange}\n        onChange={onChange}\n        name={name}\n        {...rest}\n      />\n      <span />\n    </div>\n  );\n}\n\nSlider.val = function (ev) {\n  ev.stopPropagation();\n  return !!ev.target.checked;\n};\n\nfunction enumSchema(schema, cbOrIndex) {\n  const isTypeValue = Array.isArray(schema);\n  if (!isTypeValue && schema.items) schema = schema.items;\n\n  if (typeof cbOrIndex === 'function') {\n    return (isTypeValue ? schema : schema.enum).map((item, i) => {\n      const title = isTypeValue\n        ? item.title\n        : schema.enumNames && schema.enumNames[i];\n      return cbOrIndex(\n        title !== undefined ? title : item,\n        item && item.value !== undefined ? item.value : item,\n      );\n    });\n  }\n\n  if (!isTypeValue) return schema.enum[cbOrIndex];\n\n  const res = schema[cbOrIndex];\n  return res.value !== undefined ? res.value : res;\n}\n\nfunction inputCtrl(component, schema, onChange) {\n  let props = {};\n  if (schema) {\n    // TODO: infer maxLength, min, max, step, etc\n    if (schema.type === 'number' || schema.type === 'integer')\n      props = { type: 'text' };\n  }\n\n  return {\n    onChange: (ev) => {\n      const val = !component.val ? ev : component.val(ev, schema);\n      onChange(val);\n    },\n    ...props,\n  };\n}\n\nfunction singleSelectCtrl(component, schema, onChange) {\n  return {\n    selected: (testVal, value) => value === testVal,\n    onSelect: (ev) => {\n      const val = !component.val ? ev : component.val(ev, schema);\n      if (val !== undefined) onChange(val);\n    },\n  };\n}\n\nfunction multipleSelectCtrl(component, schema, onChange) {\n  return {\n    multiple: true,\n    selected: (testVal, values) => values && values.indexOf(testVal) >= 0,\n    onSelect: (ev, values) => {\n      if (component.val) {\n        const val = component.val(ev, schema);\n        if (val !== undefined) onChange(val);\n      } else {\n        const i = values ? values.indexOf(ev) : -1;\n        if (i < 0) onChange(values ? [ev, ...values] : [ev]);\n        else onChange([...values.slice(0, i), ...values.slice(i + 1)]);\n      }\n    },\n  };\n}\n\nfunction ctrlMap(component, props: Props) {\n  const { schema, multiple, onChange } = props;\n  if (\n    !schema ||\n    (!schema.enum && !schema.items && !Array.isArray(schema)) ||\n    schema.type === 'string'\n  )\n    return inputCtrl(component, schema, onChange);\n\n  if (multiple || schema.type === 'array')\n    return multipleSelectCtrl(component, schema, onChange);\n\n  return singleSelectCtrl(component, schema, onChange);\n}\n\nfunction componentMap(props: Props) {\n  const { schema, type, multiple } = props;\n\n  if (schema?.type === 'boolean' && schema?.description === 'slider') {\n    return Slider;\n  }\n\n  if (!schema || (!schema.enum && !schema.items && !Array.isArray(schema))) {\n    if (type === 'checkbox' || (schema && schema.type === 'boolean')) {\n      return CheckBox;\n    }\n\n    return type === 'textarea' ? TextArea : GenericInput;\n  }\n\n  if (multiple || schema.type === 'array')\n    return type === 'checkbox' ? FieldSet : Select;\n\n  return type === 'radio' ? FieldSet : Select;\n}\n\nconst AnyComponentWithRef = React.forwardRef(\n  ({ Component, ...props }: any, ref) => (\n    <Component {...props} innerRef={ref} />\n  ),\n);\n\nclass Input extends PureComponent<\n  Props & { innerRef: React.Ref<HTMLInputElement> }\n> {\n  component: any;\n  ctrl: {\n    type?: string;\n    onChange?: (val: any) => void;\n    onSelect?: (ev, values) => void;\n    selected?: (testVal: any, value: any) => boolean;\n    multiple?: boolean;\n  };\n\n  constructor(props: Props & { innerRef: React.Ref<HTMLInputElement> }) {\n    super(props);\n    this.component = props.component || componentMap(props);\n    this.ctrl = ctrlMap(this.component, props);\n  }\n\n  render() {\n    const {\n      /* eslint-disable @typescript-eslint/no-unused-vars */\n      children,\n      onChange,\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      innerRef,\n      ...restProps\n    } = this.props;\n    return (\n      <AnyComponentWithRef\n        Component={this.component}\n        ref={innerRef}\n        {...this.ctrl}\n        {...restProps}\n      />\n    );\n  }\n}\n\nexport default React.forwardRef(\n  (props: Props, ref: React.Ref<HTMLInputElement>) => {\n    return <Input innerRef={ref} {...props} />;\n  },\n);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport MuiSelect, { SelectChangeEvent } from '@mui/material/Select';\nimport Divider from '@mui/material/Divider';\nimport MenuItem from '@mui/material/MenuItem';\nimport { useEffect, useRef, useState } from 'react';\nimport clsx from 'clsx';\nimport styles from './Select.module.less';\nimport { Icon } from 'components';\nimport { KETCHER_ROOT_NODE_CSS_SELECTOR } from 'src/constants';\n\nexport interface Option {\n  value: string;\n  label: string;\n}\n\ninterface Props {\n  options: Array<Option>;\n  onChange: (value: string) => void;\n  className?: string;\n  value?: string;\n  multiple?: boolean;\n  disabled?: boolean;\n  formName?: string;\n  name?: string;\n  'data-testid'?: string;\n}\n\nconst ChevronIcon = ({ className }) => (\n  <Icon name=\"chevron\" className={clsx(className, styles.chevronIcon)} />\n);\n\nconst isFullScreen = () => {\n  return !!(\n    document.fullscreenElement ||\n    document.mozFullScreenElement ||\n    document.webkitFullscreenElement ||\n    document.msFullscreenElement\n  );\n};\n\nconst Select = ({\n  className,\n  value,\n  onChange,\n  multiple = false,\n  disabled,\n  options,\n  formName,\n  name,\n  'data-testid': testId,\n}: Props) => {\n  const [currentValue, setCurrentValue] = useState<Option>();\n\n  useEffect(() => {\n    let option;\n    if (options) {\n      option = options.find((option) => option.value === value);\n    }\n    return setCurrentValue(option);\n  }, [options, value]);\n\n  const handleChange = (event: SelectChangeEvent) => {\n    onChange(event.target.value);\n  };\n\n  const selectRef = useRef<HTMLDivElement>(null);\n  return (\n    <MuiSelect\n      ref={selectRef}\n      className={clsx(styles.selectContainer, className)}\n      value={currentValue?.value ?? ''}\n      onChange={handleChange}\n      multiple={multiple}\n      disabled={disabled}\n      MenuProps={{\n        className: styles.dropdownList,\n        container: isFullScreen()\n          ? () =>\n              selectRef.current?.closest(KETCHER_ROOT_NODE_CSS_SELECTOR) ??\n              document.body\n          : undefined,\n      }}\n      IconComponent={ChevronIcon}\n      data-testid={testId}\n    >\n      {options &&\n        options.map((option) => {\n          const isDivider: boolean =\n            typeof option?.value === 'string'\n              ? option.value.includes('Divider')\n              : false;\n\n          return isDivider ? (\n            <Divider className={styles.listDivider} key={option.value} />\n          ) : (\n            <MenuItem\n              value={option.value}\n              key={option.value}\n              disableRipple={true}\n              className={clsx({\n                [`dropdown-${formName}_${name}`]: formName,\n              })}\n              data-testid={`${option.label}-option`}\n            >\n              {option.label}\n            </MenuItem>\n          );\n        })}\n    </MuiSelect>\n  );\n};\n\nexport default Select;\n","/****************************************************************************\n * Copyright 2022 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Popover } from '@mui/material';\nimport styled from '@emotion/styled';\n\nconst ErrorMessage = styled(Popover)`\n  & .MuiPopover-paper {\n    padding: 0 8px;\n    box-shadow: 4px 0px, 2px rgba(0, 0, 0, 0.25);\n    font-size: 12px;\n    max-width: 160px;\n  }\n`;\n\nexport const ErrorPopover = ({ error, anchorEl, handleClose }) => (\n  <ErrorMessage\n    id=\"form-error\"\n    open={true}\n    anchorEl={anchorEl}\n    disableAutoFocus\n    sx={{\n      pointerEvents: 'none',\n    }}\n    onClose={handleClose}\n    anchorOrigin={{\n      vertical: 'bottom',\n      horizontal: 'center',\n    }}\n    transformOrigin={{\n      vertical: 'top',\n      horizontal: 'left',\n    }}\n  >\n    <>\n      {/* <p style={{ color: 'red' }}>Will work properly if:</p>  TODO: uncomment when error messages are changed */}\n      <p>{error}</p>\n    </>\n  </ErrorMessage>\n);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport clsx from 'clsx';\nimport { Validator } from 'jsonschema';\nimport { cloneDeep } from 'lodash';\nimport { Component, useCallback, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { FormContext } from '../../../../../contexts';\nimport { useFormContext } from '../../../../../hooks';\nimport { updateFormState } from '../../../state/modal/form';\nimport { getSelectOptionsFromSchema } from '../../../utils';\nimport Input from '../Input/Input';\nimport Select from '../Select';\nimport { ErrorPopover } from './errorPopover';\nimport classes from './form.module.less';\nimport { Icon, IconButton } from 'components';\nimport { Tooltip } from '@mui/material';\n\nclass Form extends Component {\n  constructor(props) {\n    super(props);\n    const { onUpdate, schema, init } = this.props;\n\n    this.schema = propSchema(schema, props);\n\n    if (init) {\n      const { valid, errors } = this.schema.serialize(init);\n      const errs = getErrorsObj(errors);\n      const initialState = { ...init, init: true };\n      onUpdate(initialState, valid, errs);\n    }\n    this.updateState = this.updateState.bind(this);\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      schema,\n      result,\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      ...rest\n    } = this.props;\n    if (\n      (schema.key && schema.key !== prevProps.schema.key) ||\n      (rest.customValid !== prevProps.customValid &&\n        (schema.title === 'Atom' || schema.title === 'Bond'))\n    ) {\n      this.schema = propSchema(schema, rest);\n      this.schema.serialize(result); // hack: valid first state\n      this.updateState(result);\n    }\n  }\n\n  updateState(newState) {\n    const { onUpdate } = this.props;\n    const { instance, valid, errors } = this.schema.serialize(newState);\n    const errs = getErrorsObj(errors);\n    onUpdate(instance, valid, errs);\n  }\n\n  field(name, onChange, extraName) {\n    const { result, errors } = this.props;\n    const value = result[name];\n    const extraValue = extraName ? result[extraName] : null;\n\n    const handleOnChange = (name, value) => {\n      const newState = Object.assign({}, this.props.result, { [name]: value });\n      this.updateState(newState);\n      if (onChange) onChange(value);\n    };\n\n    return {\n      dataError: errors && errors[name],\n      value,\n      extraValue,\n      onChange: (val) => handleOnChange(name, val),\n      onExtraChange: (val) => handleOnChange(extraName, val),\n    };\n  }\n\n  render() {\n    const { schema, children } = this.props;\n\n    return (\n      <form>\n        <FormContext.Provider value={{ schema, stateStore: this }}>\n          {children}\n        </FormContext.Provider>\n      </form>\n    );\n  }\n}\n\nexport default connect(null, (dispatch) => ({\n  onUpdate: (result, valid, errors) => {\n    dispatch(updateFormState({ result, valid, errors }));\n  },\n}))(Form);\n\nfunction Label({ labelPos, title, children, ...props }) {\n  const tooltip = props.tooltip ? props.tooltip : null;\n  return (\n    <label {...props}>\n      {title && labelPos !== 'after' ? (\n        tooltip ? (\n          <div\n            className={clsx({\n              [classes.divWithTooltipAndAboutIcon]: true,\n            })}\n          >\n            <span>{title}</span>\n            <Tooltip title={tooltip}>\n              <div>\n                <Icon name=\"about\"></Icon>\n              </div>\n            </Tooltip>\n          </div>\n        ) : (\n          <span>{title}</span>\n        )\n      ) : (\n        ''\n      )}\n      {children}\n      {title && labelPos === 'after' ? (\n        tooltip ? (\n          <div\n            className={clsx({\n              [classes.divWithTooltipAndAboutIcon]: true,\n            })}\n          >\n            <Tooltip title={tooltip}>\n              <div>\n                <Icon name=\"about\"></Icon>\n              </div>\n            </Tooltip>\n            <span>{title}</span>\n          </div>\n        ) : (\n          <span>{title}</span>\n        )\n      ) : (\n        ''\n      )}\n    </label>\n  );\n}\n\nfunction Field(props) {\n  const {\n    name,\n    extraName,\n    onChange,\n    component,\n    labelPos,\n    className,\n    extraLabel,\n    ...rest\n  } = props;\n  const [anchorEl, setAnchorEl] = useState(null);\n  const handlePopoverOpen = useCallback((event) => {\n    setAnchorEl(event.currentTarget);\n  }, []);\n  const handlePopoverClose = useCallback(() => {\n    setAnchorEl(null);\n  }, []);\n  const { schema, stateStore } = useFormContext();\n  const desc = rest.schema || schema.properties[name];\n  const { dataError, onExtraChange, extraValue, ...fieldOpts } =\n    stateStore.field(name, onChange, extraName);\n\n  const getExtraSchema = () => {\n    return rest.extraSchema || schema.properties[extraName];\n  };\n\n  const Component = component;\n  const formField = component ? (\n    <Component\n      name={name}\n      schema={desc}\n      className={className}\n      onExtraChange={onExtraChange}\n      extraValue={extraValue}\n      {...(extraName && { extraSchema: getExtraSchema() })}\n      {...fieldOpts}\n      {...rest}\n    />\n  ) : (\n    <Input\n      {...(extraLabel && { className: classes.inputWithExtraLabel })}\n      name={name}\n      schema={desc}\n      {...fieldOpts}\n      {...rest}\n      data-testid={`${name}-input`}\n    />\n  );\n\n  if (labelPos === false) return formField;\n  return (\n    <Label\n      className={clsx({ [classes.dataError]: dataError }, className)}\n      error={dataError}\n      title={rest.title || desc.title}\n      labelPos={labelPos}\n      tooltip={rest?.tooltip}\n      data-testid={props['data-testid']}\n    >\n      <span\n        className={classes.inputWrapper}\n        onMouseEnter={handlePopoverOpen}\n        onMouseLeave={handlePopoverClose}\n        data-testid={props['data-testid'] + '-input-span'}\n      >\n        {formField}\n      </span>\n      {dataError && anchorEl && (\n        <ErrorPopover\n          anchorEl={anchorEl}\n          open={!!anchorEl}\n          error={dataError}\n          onClose={handlePopoverClose}\n        />\n      )}\n      {extraLabel && <Label className={classes.extraLabel}>{extraLabel}</Label>}\n    </Label>\n  );\n}\n\nfunction FieldWithModal(props) {\n  const { name, onChange, labelPos, className, onEdit, ...rest } = props;\n  const [anchorEl, setAnchorEl] = useState(null);\n  const { schema, stateStore } = useFormContext();\n  const desc = rest.schema || schema.properties[name];\n  const { dataError, ...fieldOpts } = stateStore.field(name, onChange);\n  const handlePopoverOpen = useCallback((event) => {\n    setAnchorEl(event.currentTarget);\n  }, []);\n  const handlePopoverClose = useCallback(() => {\n    setAnchorEl(null);\n  }, []);\n\n  return (\n    <Label\n      className={className}\n      error={dataError}\n      title={rest.title || desc.title}\n      labelPos={labelPos}\n      tooltip={rest?.tooltip}\n    >\n      <span\n        className={clsx({\n          [classes.dataError]: dataError,\n          [classes.inputWithEditButtonWrapper]: true,\n          [classes.inputWrapper]: true,\n        })}\n        onMouseEnter={handlePopoverOpen}\n        onMouseLeave={handlePopoverClose}\n      >\n        <Input name={name} schema={desc} {...fieldOpts} {...rest} />\n        <IconButton\n          onClick={() => {\n            onEdit(fieldOpts.onChange);\n          }}\n          iconName=\"edit\"\n          className={classes.editButton}\n        />\n      </span>\n      {dataError && anchorEl && (\n        <ErrorPopover\n          anchorEl={anchorEl}\n          open={!!anchorEl}\n          error={dataError}\n          onClose={handlePopoverClose}\n        />\n      )}\n    </Label>\n  );\n}\n\nfunction CustomQueryField(props) {\n  const {\n    name,\n    onChange,\n    labelPos,\n    className,\n    onCheckboxChange,\n    checkboxValue,\n    ...rest\n  } = props;\n  const [anchorEl, setAnchorEl] = useState(null);\n  const { schema, stateStore } = useFormContext();\n  const desc = rest.schema || schema.properties[name];\n  const { dataError, ...fieldOpts } = stateStore.field(name, onChange);\n  const handlePopoverOpen = useCallback((event) => {\n    setAnchorEl(event.currentTarget);\n  }, []);\n  const handlePopoverClose = useCallback(() => {\n    setAnchorEl(null);\n  }, []);\n  const handleCheckboxChange = (value) => {\n    onCheckboxChange(\n      value,\n      stateStore.props.result,\n      fieldOpts.onChange,\n      stateStore.updateState,\n    );\n  };\n\n  return (\n    <>\n      <Label className={className} title={desc.title} labelPos={labelPos}>\n        <Input\n          name=\"customQueryCheckBox\"\n          schema={{ default: false, type: 'boolean' }}\n          value={checkboxValue}\n          onChange={handleCheckboxChange}\n          data-testid=\"custom-query-checkbox\"\n        />\n      </Label>\n      <span\n        onMouseEnter={handlePopoverOpen}\n        onMouseLeave={handlePopoverClose}\n        className={clsx({\n          [classes.dataError]: dataError,\n          [classes.inputWrapper]: true,\n        })}\n      >\n        <Input\n          type=\"textarea\"\n          data-testid=\"atomCustomQuery\"\n          name={name}\n          schema={desc}\n          data-testId=\"custom-query-value\"\n          {...fieldOpts}\n          {...rest}\n        />\n      </span>\n      {dataError && anchorEl && (\n        <ErrorPopover\n          anchorEl={anchorEl}\n          open={!!anchorEl}\n          error={dataError}\n          onClose={handlePopoverClose}\n        />\n      )}\n    </>\n  );\n}\n\nconst SelectOneOf = (props) => {\n  const { title, name, schema, ...prop } = props;\n\n  const selectDesc = {\n    title,\n    enum: [],\n    enumNames: [],\n  };\n\n  Object.keys(schema).forEach((item) => {\n    selectDesc.enum.push(item);\n    selectDesc.enumNames.push(schema[item].title || item);\n  });\n\n  return (\n    <Field\n      name={name}\n      options={getSelectOptionsFromSchema(selectDesc)}\n      title={title}\n      {...prop}\n      component={Select}\n      data-testid={props['data-testid']}\n    />\n  );\n};\n\nfunction propSchema(schema, { customValid, serialize = {}, deserialize = {} }) {\n  const schemaCopy = cloneDeep(schema);\n\n  Validator.prototype.customFormats = {};\n  if (customValid) {\n    Object.entries(customValid).forEach(([formatName, formatValidator]) => {\n      Validator.prototype.customFormats[formatName] = formatValidator;\n      const {\n        /* eslint-disable @typescript-eslint/no-unused-vars */\n        pattern,\n        maxLength,\n        enum: enumIsReservedWord,\n        enumNames,\n        /* eslint-enable @typescript-eslint/no-unused-vars */\n        ...rest\n      } = schemaCopy.properties[formatName];\n      schemaCopy.properties[formatName] = {\n        ...rest,\n        format: formatName,\n      };\n    });\n  }\n\n  const validator = new Validator();\n\n  return {\n    key: schema.key || '',\n    serialize: (inst) => {\n      const result = validator.validate(inst, schemaCopy);\n\n      return {\n        instance: serializeRewrite(serialize, inst, schemaCopy),\n        valid: result.valid,\n        errors: result.errors,\n      };\n    },\n    deserialize: (inst) => {\n      validator.validate(inst, schemaCopy);\n      return deserializeRewrite(deserialize, inst);\n    },\n  };\n}\n\nfunction serializeRewrite(serializeMap, instance, schema) {\n  const res = {};\n  if (typeof instance !== 'object' || !schema.properties) {\n    return instance !== undefined ? instance : schema.default;\n  }\n\n  Object.keys(schema.properties).forEach((p) => {\n    if (p in instance) res[p] = instance[serializeMap[p]] || instance[p];\n  });\n\n  return res;\n}\n\nfunction deserializeRewrite(deserializeMap, instance) {\n  return instance;\n}\n\nfunction getInvalidMessage(item) {\n  if (!item.schema.invalidMessage) return item.message;\n  return typeof item.schema.invalidMessage === 'function'\n    ? item.schema.invalidMessage(item.data)\n    : item.schema.invalidMessage;\n}\n\nfunction getErrorsObj(errors) {\n  const errs = {};\n  let field;\n\n  errors.forEach((item) => {\n    field = item.path[item.path.length - 1];\n    if (!errs[field]) errs[field] = getInvalidMessage(item);\n  });\n\n  return errs;\n}\n\nexport { Field, CustomQueryField, FieldWithModal, SelectOneOf };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useCallback, useState } from 'react';\n\nimport { HexColorPicker, HexColorInput } from 'react-colorful';\nimport classes from './ColorPicker.module.less';\nimport clsx from 'clsx';\nimport { Icon } from 'components';\n\ninterface ColorPickerProps {\n  value: string;\n  name: string;\n  schema: any;\n  type?: string;\n}\n\ninterface ColorPickerCallProps {\n  onChange: (value: string) => void;\n}\n\ntype Props = ColorPickerProps & ColorPickerCallProps;\n\nconst presetColors = [\n  '#FF4545',\n  '#FFAD31',\n  '#68D442',\n  '#3ACACC',\n  '#4434FF',\n  '#9C9C9C',\n  '#000000',\n];\n\nconst ColorPicker = (props: Props) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [isPaletteOpen, setIsPaletteOpen] = useState(false);\n  const { onChange, value } = props;\n\n  const handleChange = useCallback(\n    (color) => {\n      onChange(color);\n    },\n    [onChange],\n  );\n\n  const throttle = useCallback((func, limit) => {\n    let inThrottle;\n    return (e) => {\n      if (!inThrottle) {\n        func(e);\n        inThrottle = true;\n        setTimeout(() => (inThrottle = false), limit);\n      }\n    };\n  }, []);\n\n  const handleClick = useCallback(\n    throttle((e) => {\n      e.preventDefault();\n      setIsOpen((prev) => !prev);\n      setIsPaletteOpen(false);\n    }, 200),\n    [],\n  );\n\n  const handlePaletteOpen = () => {\n    setIsPaletteOpen(true);\n  };\n  const handleColorChange = (color) => {\n    handleChange(color);\n  };\n\n  const handleBlur = (e) => {\n    if (!e.currentTarget.contains(e.relatedTarget)) {\n      handleClick(e);\n    }\n  };\n\n  return (\n    <div\n      className={classes.colorPickerWrapper}\n      data-testid={isOpen ? 'color-picker-field-open' : 'color-picker-field'}\n      onClick={(e) => e.preventDefault()}\n    >\n      <div\n        className={clsx({\n          [classes.colorPickerInput]: true,\n          [classes.selectedInput]: isOpen,\n        })}\n        onClick={handleClick}\n      >\n        <div\n          className={classes.colorPickerPreview}\n          data-testid=\"color-picker-preview\"\n          style={{ backgroundColor: value }}\n        />\n\n        <Icon\n          className={clsx({\n            [classes.expandIcon]: true,\n            [classes.turnedIcon]: !isOpen,\n          })}\n          name=\"chevron\"\n        />\n      </div>\n      {isOpen && (\n        <div\n          className={clsx(\n            classes.colorPickerWrap,\n            isPaletteOpen && classes.withPalette,\n          )}\n          onBlur={handleBlur}\n          data-testid=\"color-picker-preset\"\n        >\n          <div className={classes.presetColors}>\n            <button\n              className={clsx(\n                classes.chooseColor,\n                isPaletteOpen && classes.clicked,\n              )}\n              onClick={handlePaletteOpen}\n              autoFocus\n              data-testid=\"color-picker-btn\"\n            />\n            {presetColors.map((color) => (\n              <button\n                key={color}\n                onClick={() => handleColorChange(color)}\n                style={{ backgroundColor: color }}\n                className={classes.presetColor}\n              />\n            ))}\n          </div>\n\n          {isPaletteOpen && (\n            <div className={classes.colorPicker} data-testid=\"color-palette\">\n              <HexColorPicker color={value} onChange={handleChange} />\n              <div className={classes.colorContainer}>\n                <span className={classes.hex}>HEX</span>\n                <HexColorInput\n                  data-testid=\"color-picker-input\"\n                  color={value}\n                  onChange={handleChange}\n                />\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ColorPicker;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useState, useEffect } from 'react';\nimport clsx from 'clsx';\n\nimport Input from '../Input/Input';\nimport Select from '../Select';\nimport styles from './measure-input.module.less';\nimport { getSelectOptionsFromSchema } from '../../../utils';\nimport { MeasurementUnits } from 'src/script/ui/data/schema/options-schema';\n\nconst selectOptions = getSelectOptionsFromSchema({\n  enum: Object.values(MeasurementUnits),\n});\n\n/**\n * @param {string} value\n * @returns {isNewFloat: boolean, float: string}\n * */\nconst getNewFloat = (value) => {\n  const [int, float] = value.split('.');\n  const isNewFloat = float?.length > 1;\n\n  return {\n    isNewFloat,\n    ...(isNewFloat && { float: `${int}.${float[float.length - 1]}` }),\n  };\n};\n\n/**\n * @param {string} prevValue\n * @param {string} endorcedValue\n * @returns {string}\n * */\nconst getNewInternalValue = (prevValue, endorcedValue) => {\n  const newValueEndsWithDot = endorcedValue?.endsWith('.');\n  const prevValueHasDot = prevValue?.includes('.');\n  const isDotDeleted = prevValueHasDot && newValueEndsWithDot;\n  const isDotAdded = !prevValueHasDot && newValueEndsWithDot;\n\n  if (isDotDeleted) {\n    return endorcedValue.replace(/\\.$/, '');\n  }\n\n  if (isDotAdded) {\n    return endorcedValue + '0';\n  }\n\n  const { isNewFloat, float } = getNewFloat(endorcedValue);\n\n  if (isNewFloat) {\n    return float;\n  }\n\n  return endorcedValue;\n};\n\nconst MeasureInput = ({\n  schema,\n  extraSchema: _,\n  value,\n  extraValue,\n  onChange,\n  onExtraChange,\n  name,\n  className,\n  ...rest\n}) => {\n  const [internalValue, setInternalValue] = useState(String(value));\n\n  // NOTE: onChange handler in the Input comopnent (packages/ketcher-react/src/script/ui/component/form/Input/Input.tsx)\n  // is mapped to the internal function via constructor\n  // therefore the referencies to the MeasureInput's state are not updated\n  // so we need to sync the props and the internal value through useEffects and use callbacks with\n  // previous state to have the latest value\n\n  useEffect(() => {\n    setInternalValue((prevValue) => {\n      if (prevValue !== String(value)) {\n        return String(value);\n      }\n\n      return prevValue;\n    });\n  }, [value]);\n\n  useEffect(() => {\n    if (internalValue !== String(value)) {\n      const isNewInternalValueValid = !isNaN(parseFloat(internalValue));\n\n      if (isNewInternalValueValid) {\n        onChange(parseFloat(internalValue));\n      }\n    }\n  }, [internalValue]);\n\n  const handleChange = (value) => {\n    const stringifiedValue = String(value);\n    const startsWithZero =\n      stringifiedValue !== '0' && stringifiedValue.startsWith('0');\n    const zeroWithDot = startsWithZero && stringifiedValue.includes('.');\n\n    const endorcedValue =\n      startsWithZero && !zeroWithDot\n        ? stringifiedValue.replace(/^0/, '')\n        : stringifiedValue || '0';\n    const isNumber = !isNaN(endorcedValue);\n\n    if (isNumber) {\n      setInternalValue((prevValue) =>\n        getNewInternalValue(prevValue, endorcedValue),\n      );\n    }\n  };\n\n  const desc = schema || schema.properties[name];\n\n  return (\n    <div className={clsx(styles.measureInput, className)} {...rest}>\n      <span>{rest.title || desc.title}</span>\n      <div style={{ display: 'flex' }}>\n        <Input schema={schema} value={internalValue} onChange={handleChange} />\n        <Select\n          onChange={onExtraChange}\n          options={selectOptions}\n          value={extraValue}\n          className={styles.select}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default MeasureInput;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Component } from 'react';\nimport clsx from 'clsx';\n\nimport { fileOpener } from '../../utils';\nimport classes from './buttons.module.less';\n\nclass OpenButton extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    if (props.server) {\n      fileOpener(props.server).then((opener) => {\n        this.setState({ opener });\n      });\n    }\n  }\n\n  open(ev) {\n    const files = ev.target.files;\n    const noop = () => null;\n    const { onLoad = noop, onError = noop } = this.props;\n\n    if (this.state.opener && files.length)\n      this.state.opener(files[0]).then(onLoad, onError);\n    else if (files.length) onLoad(files[0]);\n    ev.target.value = null;\n    ev.preventDefault();\n  }\n\n  render() {\n    const {\n      children,\n      type,\n      /* eslint-disable @typescript-eslint/no-unused-vars */\n      server,\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      className,\n      ...props\n    } = this.props;\n\n    return (\n      <button\n        onClick={() => this.btn.click()}\n        className={clsx(classes.openButton, className)}\n        {...props}\n      >\n        <input\n          onChange={(ev) => this.open(ev)}\n          accept={type}\n          type=\"file\"\n          ref={(el) => {\n            this.btn = el;\n          }}\n        />\n        {children}\n      </button>\n    );\n  }\n}\n\nexport default OpenButton;\n","import { saveAs } from 'file-saver';\nimport { FileSaverReturnType } from './saveButton.types';\n\nexport const fileSaver = (server): FileSaverReturnType => {\n  return new Promise((resolve, reject) => {\n    if (global.Blob && saveAs) {\n      resolve((data, fn, type) => {\n        const blob = new Blob([data], { type }); // eslint-disable-line no-undef\n        saveAs(blob, fn);\n      });\n    } else if (server) {\n      resolve(\n        server.then(() => {\n          throw Error(\"Server doesn't still support echo method\");\n        }),\n      );\n    } else {\n      reject(new Error('Your browser does not support opening files locally'));\n    }\n  });\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { KetcherLogger, GenerateImageOptions } from 'ketcher-core';\nimport { saveAs } from 'file-saver';\n\nimport React, { PropsWithChildren } from 'react';\nimport { useAppContext } from '../../../../hooks';\nimport { fileSaver } from './saveButton.utils';\nimport { SaverType } from './saveButton.types';\n\ntype Props = {\n  server?: any;\n  filename: string;\n  data: any;\n  type?: string;\n  mode?: string;\n  options?: GenerateImageOptions;\n  onSave?: () => void;\n  onError?: (err: any) => void;\n  className?: string;\n  title?: string;\n  disabled?: boolean;\n};\n\ntype SaveButtonProps = PropsWithChildren<Props>;\n\nconst SaveButton = (props: SaveButtonProps) => {\n  const noop = () => null;\n  const {\n    server,\n    filename = 'unnamed',\n    data,\n    type,\n    mode = 'saveFile',\n    options,\n    onSave = noop,\n    onError = noop,\n    className,\n    title,\n    disabled,\n  } = props;\n  const { getKetcherInstance } = useAppContext();\n\n  const saveFile = () => {\n    if (data) {\n      try {\n        fileSaver(server).then((saver: SaverType) => {\n          saver(data, filename, type);\n          onSave();\n        });\n      } catch (e) {\n        KetcherLogger.error('savebutton.tsx::SaveButton::saveFile', e);\n        onError(e);\n      }\n    }\n  };\n\n  const saveImage = () => {\n    const ketcherInstance = getKetcherInstance();\n    if (options?.outputFormat) {\n      ketcherInstance\n        .generateImage(data, options)\n        .then((blob) => {\n          saveAs(blob, `${filename}.${options.outputFormat}`);\n          onSave();\n        })\n        .catch((e) => {\n          KetcherLogger.error('savebutton.tsx::SaveButton::saveImage', e);\n          onError(e);\n        });\n    }\n  };\n\n  const save = (event: React.KeyboardEvent | React.MouseEvent) => {\n    event.preventDefault();\n    switch (mode) {\n      case 'saveImage':\n        saveImage();\n        break;\n      case 'saveFile':\n      default:\n        saveFile();\n    }\n  };\n\n  return (\n    <button\n      title={title}\n      className={className}\n      disabled={disabled}\n      onClick={(event) => {\n        save(event);\n      }}\n    >\n      {props.children}\n    </button>\n  );\n};\n\nexport { SaveButton };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport React, { useState } from 'react';\nimport classes from './Accordion.module.less';\nimport clsx from 'clsx';\nimport { Icon } from 'components';\n\nconst Accordion = ({ tabs, className, changedGroups }): React.ReactElement => {\n  const [expandedAccordions, setExpandedAccordions] = useState<string[]>([\n    'General',\n  ]);\n\n  const handleAccordionChange = (accordion) => () => {\n    const isExpand = !expandedAccordions.includes(accordion);\n    setExpandedAccordions(\n      isExpand\n        ? [...expandedAccordions, accordion]\n        : [...expandedAccordions].filter(\n            (expandedAccordion) => expandedAccordion !== accordion,\n          ),\n    );\n  };\n\n  return (\n    <div className={clsx(classes.accordionWrapper, className)}>\n      {tabs.map(({ label, content, key }) => {\n        const shouldGroupBeRended = expandedAccordions.includes(label);\n        return (\n          <div key={key}>\n            <div\n              onClick={handleAccordionChange(label)}\n              className={classes.accordionSummaryWrapper}\n              data-testid={`${label}-accordion`}\n            >\n              <div className={classes.accordionSummary}>\n                <Icon\n                  className={clsx({\n                    [classes.expandIcon]: true,\n                    [classes.turnedIcon]: !shouldGroupBeRended,\n                  })}\n                  name=\"chevron\"\n                />\n                <div className={classes.groupLabel}>\n                  <Icon name=\"elements-group\" className={classes.groupIcon} />\n                  <span>{label}</span>\n                </div>\n                {changedGroups.has(label) && (\n                  <span className={classes.changeMarker}></span>\n                )}\n              </div>\n            </div>\n            <div\n              className={clsx({\n                [classes.accordionDetailsWrapper]: true,\n                [classes.hiddenAccordion]: !shouldGroupBeRended,\n              })}\n            >\n              <div className={classes.accordionDetails}>{content}</div>\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default Accordion;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useCallback, useEffect, useState } from 'react';\n\nimport FontFaceObserver from 'font-face-observer';\nimport Select from './Select';\n\nconst commonFonts = [\n  'Arial',\n  'Arial Black',\n  'Comic Sans MS',\n  'Courier New',\n  'Georgia',\n  'Impact',\n  'Charcoal',\n  'Lucida Console',\n  'Monaco',\n  'Palatino Linotype',\n  'Book Antiqua',\n  'Palatino',\n  'Tahoma',\n  'Geneva',\n  'Times New Roman',\n  'Times',\n  'Verdana',\n  'Symbol',\n  'MS Serif',\n  'MS Sans Serif',\n  'New York',\n  'Droid Sans',\n  'Droid Serif',\n  'Droid Sans Mono',\n  'Roboto',\n];\n\nfunction checkInSystem() {\n  const availableFontsPromises = commonFonts.map((fontName) => {\n    const observer = new FontFaceObserver(fontName);\n    return observer.check().then(\n      () => fontName,\n      () => null,\n    );\n  });\n\n  return Promise.all(availableFontsPromises);\n}\n\nfunction SystemFonts(props) {\n  const [availableFonts, setAvailableFonts] = useState(null);\n  const { value, onChange } = props;\n  const onChangeCallback = useCallback(\n    (value) => {\n      onChange(value);\n    },\n    [onChange],\n  );\n\n  useEffect(() => {\n    let mounted = true;\n    checkInSystem().then((results) => {\n      const fonts = results\n        .filter((i) => i !== null)\n        .map((font) => {\n          // TODO remove font-size from here\n          return { value: `30px ${font}`, label: font };\n        });\n      if (mounted) {\n        setAvailableFonts(fonts);\n      }\n    });\n\n    return () => (mounted = false);\n  }, []);\n\n  return (\n    <Select\n      onChange={onChangeCallback}\n      value={value}\n      disabled={availableFonts === null}\n      options={availableFonts}\n    />\n  );\n}\n\nexport default SystemFonts;\n","const fieldGroups = {\n  resetToSelect: 'General',\n  rotationStep: 'General',\n  showValenceWarnings: 'General',\n  atomColoring: 'General',\n  font: 'General',\n  fontsz: 'General',\n  fontszsub: 'General',\n  showStereoFlags: 'Stereochemistry',\n  stereoLabelStyle: 'Stereochemistry',\n  colorOfAbsoluteCenters: 'Stereochemistry',\n  colorOfAndCenters: 'Stereochemistry',\n  colorOfOrCenters: 'Stereochemistry',\n  colorStereogenicCenters: 'Stereochemistry',\n  autoFadeOfStereoLabels: 'Stereochemistry',\n  absFlagLabel: 'Stereochemistry',\n  andFlagLabel: 'Stereochemistry',\n  orFlagLabel: 'Stereochemistry',\n  mixedFlagLabel: 'Stereochemistry',\n  ignoreChiralFlag: 'Stereochemistry',\n  carbonExplicitly: 'Atoms',\n  showCharge: 'Atoms',\n  showValence: 'Atoms',\n  showHydrogenLabels: 'Atoms',\n  aromaticCircle: 'Bonds',\n  bondSpacing: 'Bonds',\n  bondThickness: 'Bonds',\n  stereoBondWidth: 'Bonds',\n  'smart-layout': 'Server',\n  'ignore-stereochemistry-errors': 'Server',\n  'mass-skip-error-on-pseudoatoms': 'Server',\n  'gross-formula-add-rsites': 'Server',\n  'gross-formula-add-isotopes': 'Server',\n  miewMode: '3D Viewer',\n  miewTheme: '3D Viewer',\n  miewAtomLabel: '3D Viewer',\n  showAtomIds: 'Options for Debugging',\n  showBondIds: 'Options for Debugging',\n  showHalfBondIds: 'Options for Debugging',\n  showLoopIds: 'Options for Debugging',\n};\n\nexport default fieldGroups;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseCallProps, BaseProps } from '../../../modal.types';\nimport Form, { Field } from '../../../../../component/form/form/form';\nimport {\n  setDefaultSettings,\n  updateFormState,\n} from '../../../../../state/modal/form';\nimport { useEffect, useState } from 'react';\n\nimport ColorPicker from '../../../../../component/form/colorPicker/ColorPicker';\nimport { Dialog } from '../../../../components';\nimport MeasureInput from '../../../../../component/form/MeasureInput/measure-input';\nimport OpenButton from '../../../../../component/view/openbutton';\nimport { SaveButton } from '../../../../../component/view/savebutton';\nimport Select from '../../../../../component/form/Select';\nimport Accordion from './Accordion';\nimport { KetcherLogger, StructService } from 'ketcher-core';\nimport SystemFonts from '../../../../../component/form/systemfonts';\nimport classes from './Settings.module.less';\nimport { connect } from 'react-redux';\nimport { getSelectOptionsFromSchema } from '../../../../../utils';\nimport { saveSettings } from '../../../../../state/options';\nimport settingsSchema, {\n  getDefaultOptions,\n} from '../../../../../data/schema/options-schema';\nimport fieldGroups from './fieldGroups';\nimport { isEqual } from 'lodash';\nimport { Icon } from 'components';\nimport { ACS_STYLE_DEFAULT_SETTINGS } from 'src/constants';\nimport { onAction } from 'src/script/ui/state/shared';\n\ninterface SettingsProps extends BaseProps {\n  initState: any;\n  appOpts: {\n    version: string;\n    buildDate: string;\n    buildNumber: string;\n    indigoVersion: string;\n    imagoVersions: Array<string>;\n    server: boolean;\n    templates: boolean;\n  };\n  server: StructService;\n}\n\ninterface SettingsCallProps extends BaseCallProps {\n  onOpenFile: (any) => void;\n  onReset: () => void;\n  onACSStyle: (result) => void;\n}\n\nconst defaultSettings = getDefaultOptions();\n\nconst HeaderContent = ({\n  server,\n  onOpenFile,\n  onReset,\n  formState,\n  initState,\n}) => {\n  const getIsResetDisabled = () => {\n    if (formState.result.init) return isEqual(defaultSettings, initState);\n    else return isEqual(defaultSettings, formState.result);\n  };\n\n  return (\n    <div className={classes.headerContent}>\n      <span className={classes.title}> Settings</span>\n      <OpenButton\n        title=\"Open from File\"\n        key=\"settings\"\n        server={server}\n        onLoad={onOpenFile}\n        className={classes.button}\n      >\n        <Icon name=\"open-1\" />\n      </OpenButton>\n      <SaveButton\n        title=\"Save to File\"\n        key=\"ketcher-settings\"\n        data={JSON.stringify(formState.result)}\n        filename=\"ketcher-settings\"\n        className={classes.button}\n      >\n        <Icon name=\"save-1\" />\n      </SaveButton>\n      <button\n        title=\"Reset\"\n        key=\"settings-button\"\n        onClick={onReset}\n        className={classes.button}\n        disabled={getIsResetDisabled()}\n      >\n        <Icon name=\"reset\" />\n      </button>\n    </div>\n  );\n};\n\ntype Props = SettingsProps & SettingsCallProps;\n\nconst settingsProps = settingsSchema.properties;\n\nconst SettingsDialog = (props: Props) => {\n  const {\n    initState,\n    formState,\n    server,\n    onOpenFile,\n    onReset,\n    appOpts,\n    ...prop\n  } = props;\n\n  const [changedGroups, setChangedGroups] = useState(new Set());\n\n  useEffect(() => {\n    const changed = new Set<string>();\n\n    for (const key in initState) {\n      if (initState[key] !== formState.result[key]) {\n        const group = fieldGroups[key];\n        changed.add(group);\n      }\n    }\n    setChangedGroups(changed);\n  }, [initState, formState.result]);\n\n  const generalTab = {\n    key: 'general',\n    label: 'General',\n    content: (\n      <fieldset>\n        <Field\n          name=\"resetToSelect\"\n          component={Select}\n          options={getSelectOptionsFromSchema(settingsProps?.resetToSelect)}\n          data-testid=\"reset-to-select\"\n        />\n        <Field name=\"rotationStep\" />\n        <Field name=\"showValenceWarnings\" />\n        <Field name=\"atomColoring\" />\n        <Field name=\"font\" component={SystemFonts} data-testid=\"font\" />\n        <Field\n          name=\"fontsz\"\n          component={MeasureInput}\n          labelPos={false}\n          extraName=\"fontszUnit\"\n        />\n        <Field\n          name=\"fontszsub\"\n          component={MeasureInput}\n          labelPos={false}\n          extraName=\"fontszsubUnit\"\n        />\n        <Field\n          name=\"reactionComponentMarginSize\"\n          component={MeasureInput}\n          labelPos={false}\n          extraName=\"reactionComponentMarginSizeUnit\"\n        />\n        <Field\n          name=\"imageResolution\"\n          tooltip=\"option applicable to PNG/SVG pictures renderer\"\n          component={Select}\n          options={getSelectOptionsFromSchema(settingsProps?.imageResolution)}\n        />\n      </fieldset>\n    ),\n  };\n  const stereoTab = {\n    key: 'stereo',\n    label: 'Stereochemistry',\n    content: (\n      <fieldset>\n        <Field name=\"showStereoFlags\" />\n        <Field\n          name=\"stereoLabelStyle\"\n          component={Select}\n          options={getSelectOptionsFromSchema(settingsProps?.stereoLabelStyle)}\n          data-testid=\"stereo-label-style\"\n        />\n        <Field name=\"colorOfAbsoluteCenters\" component={ColorPicker} />\n        <Field name=\"colorOfAndCenters\" component={ColorPicker} />\n        <Field name=\"colorOfOrCenters\" component={ColorPicker} />\n        <Field\n          name=\"colorStereogenicCenters\"\n          component={Select}\n          options={getSelectOptionsFromSchema(\n            settingsProps?.colorStereogenicCenters,\n          )}\n          data-testid=\"color-stereogenic-centers\"\n        />\n        <Field name=\"autoFadeOfStereoLabels\" />\n        <Field name=\"absFlagLabel\" />\n        <Field name=\"andFlagLabel\" />\n        <Field name=\"orFlagLabel\" />\n        <Field name=\"mixedFlagLabel\" />\n        <Field\n          name=\"ignoreChiralFlag\"\n          tooltip=\"Ignore chiral flag while loading from molfiles. By default all the stereo will be ABS\"\n        />\n      </fieldset>\n    ),\n  };\n  const atomsTab = {\n    key: 'atoms',\n    label: 'Atoms',\n    content: (\n      <fieldset>\n        <Field name=\"carbonExplicitly\" />\n        <Field name=\"showCharge\" />\n        <Field name=\"showValence\" />\n        <Field\n          name=\"showHydrogenLabels\"\n          component={Select}\n          options={getSelectOptionsFromSchema(\n            settingsProps?.showHydrogenLabels,\n          )}\n          data-testid=\"show-hydrogen-labels\"\n        />\n      </fieldset>\n    ),\n  };\n  const bondsTab = {\n    key: 'bonds',\n    label: 'Bonds',\n    content: (\n      <fieldset>\n        <Field name=\"aromaticCircle\" />\n        <Field\n          name=\"bondLength\"\n          component={MeasureInput}\n          labelPos={false}\n          extraName=\"bondLengthUnit\"\n        />\n        <Field name=\"bondSpacing\" extraLabel=\"% of length\" />\n        <Field\n          name=\"bondThickness\"\n          component={MeasureInput}\n          labelPos={false}\n          extraName=\"bondThicknessUnit\"\n        />\n        <Field\n          name=\"stereoBondWidth\"\n          component={MeasureInput}\n          labelPos={false}\n          extraName=\"stereoBondWidthUnit\"\n        />\n        <Field\n          name=\"hashSpacing\"\n          component={MeasureInput}\n          labelPos={false}\n          extraName=\"hashSpacingUnit\"\n        />\n      </fieldset>\n    ),\n  };\n  const serverTab = {\n    key: 'server',\n    label: 'Server',\n    content: (\n      <fieldset disabled={!appOpts.server}>\n        <Field name=\"smart-layout\" />\n        <Field name=\"ignore-stereochemistry-errors\" />\n        <Field name=\"mass-skip-error-on-pseudoatoms\" />\n        <Field name=\"gross-formula-add-rsites\" />\n        <Field name=\"gross-formula-add-isotopes\" />\n      </fieldset>\n    ),\n  };\n  const threeDViewerTab = {\n    key: '3dviewer',\n    label: '3D Viewer',\n    content: (\n      // eslint-disable-next-line dot-notation\n      <fieldset className={classes.viewer}>\n        <Field\n          name=\"miewMode\"\n          component={Select}\n          options={getSelectOptionsFromSchema(settingsProps?.miewMode)}\n        />\n        <Field\n          name=\"miewTheme\"\n          component={Select}\n          options={getSelectOptionsFromSchema(settingsProps?.miewTheme)}\n        />\n        <Field\n          name=\"miewAtomLabel\"\n          component={Select}\n          options={getSelectOptionsFromSchema(settingsProps?.miewAtomLabel)}\n        />\n      </fieldset>\n    ),\n  };\n  const debuggingTab = {\n    key: 'debugging',\n    label: 'Options for Debugging',\n    content: (\n      <fieldset>\n        <Field name=\"showAtomIds\" />\n        <Field name=\"showBondIds\" />\n        <Field name=\"showHalfBondIds\" />\n        <Field name=\"showLoopIds\" />\n      </fieldset>\n    ),\n  };\n\n  const onACSStyle = () => {\n    prop.onACSStyle({\n      ...formState.result,\n      ...ACS_STYLE_DEFAULT_SETTINGS,\n    });\n  };\n\n  const ACSStyleButton = (\n    <button\n      className={classes.acsStyleButton}\n      key=\"acsstylebutton\"\n      onClick={onACSStyle}\n    >\n      Set ACS Settings\n    </button>\n  );\n\n  const tabs = [\n    generalTab,\n    stereoTab,\n    atomsTab,\n    bondsTab,\n    serverTab,\n    threeDViewerTab,\n    debuggingTab,\n  ];\n\n  return (\n    <Dialog\n      className={classes.settings}\n      result={() => [formState.result, initState]}\n      valid={() => formState.valid}\n      params={prop}\n      buttonsNameMap={{ OK: 'Apply' }}\n      buttons={[ACSStyleButton, 'Cancel', 'OK']}\n      withDivider\n      needMargin={false}\n      headerContent={\n        <HeaderContent\n          server={server}\n          onOpenFile={onOpenFile}\n          onReset={onReset}\n          formState={formState}\n          initState={initState}\n        />\n      }\n    >\n      <Form schema={settingsSchema} init={initState} {...formState}>\n        <Accordion\n          tabs={tabs}\n          className={classes.accordion}\n          changedGroups={changedGroups}\n        />\n      </Form>\n    </Dialog>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  server: state.options.app.server ? state.server : null,\n  appOpts: state.options.app,\n  initState: state.options.settings,\n  formState: state.modal.form,\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onOpenFile: (newOpts) => {\n    try {\n      dispatch(updateFormState({ result: JSON.parse(newOpts) }));\n    } catch (e) {\n      KetcherLogger.error('Settings.tsx::mapDispatchToProps', e);\n      console.info('Bad file');\n    }\n  },\n  onReset: () => dispatch(setDefaultSettings()),\n  onOk: (res) => {\n    const [result, initState] = res;\n\n    dispatch(saveSettings(result));\n    ownProps.onOk(result);\n\n    const showNotification =\n      initState.reactionComponentMarginSize !==\n      result.reactionComponentMarginSize;\n\n    showNotification &&\n      dispatch(\n        onAction({\n          dialog: 'info-modal',\n          prop: {\n            title: '',\n            customText:\n              'To fully apply these changes, you need to apply the layout.',\n            button: 'OK',\n          },\n        }),\n      );\n  },\n  onACSStyle: (result) => {\n    dispatch(updateFormState({ result }));\n  },\n});\n\nconst Settings = connect(mapStateToProps, mapDispatchToProps)(SettingsDialog);\n\nexport default Settings;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nfunction ErrorsCheck(props) {\n  const { moleculeErrors, checkSchema } = props;\n  const moleculeErrorsTypes = Object.keys(moleculeErrors);\n\n  const getOptionName = (option) => {\n    const { items } = checkSchema.properties.checkOptions;\n    const nameIndex = items.enum.indexOf(option);\n    return items.enumNames[nameIndex];\n  };\n\n  return (\n    <>\n      <fieldset>\n        {moleculeErrorsTypes.length === 0 ? (\n          <div>\n            <dd>No errors detected</dd>\n          </div>\n        ) : (\n          moleculeErrorsTypes.map((type, key) => (\n            <div key={key}>\n              <dt>{getOptionName(type)} warning:</dt>\n              <dd>{moleculeErrors[type]}</dd>\n            </div>\n          ))\n        )}\n      </fieldset>\n    </>\n  );\n}\n\nexport default ErrorsCheck;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport Form, { Field } from '../../../../../component/form/form/form';\nimport { Dialog } from '../../../../components';\nimport ErrorsCheck from './components';\nimport { check } from '../../../../../state/server';\nimport { checkOpts } from '../../../../../state/options';\nimport { connect } from 'react-redux';\nimport style from './Check.module.less';\nimport { useEffect, useState } from 'react';\nimport { LoadingCircles } from 'src/script/ui/views/components/Spinner';\n\nconst checkSchema = {\n  title: 'Check',\n  type: 'object',\n  properties: {\n    checkOptions: {\n      title: 'Settings',\n      type: 'array',\n      items: {\n        type: 'string',\n        enum: [\n          'valence',\n          'radicals',\n          'pseudoatoms',\n          'stereo',\n          'query',\n          'overlapping_atoms',\n          'overlapping_bonds',\n          'rgroups',\n          'chiral',\n          '3d',\n          'chiral_flag',\n        ],\n        enumNames: [\n          'Valence',\n          'Radical',\n          'Pseudoatom',\n          'Stereochemistry',\n          'Query',\n          'Overlapping Atoms',\n          'Overlapping Bonds',\n          'R-Groups',\n          'Chirality',\n          '3D Structure',\n          'Chiral flag',\n        ],\n      },\n    },\n  },\n};\n\nconst getFormattedDateString = (date) => {\n  const getFixedString = (num) => (num + '').padStart(2, 0);\n  return `${getFixedString(date.getHours())}:${getFixedString(\n    date.getMinutes(),\n  )}:${getFixedString(date.getSeconds())}  ${getFixedString(\n    date.getDate(),\n  )}.${getFixedString(date.getMonth() + 1)}.${getFixedString(\n    date.getFullYear(),\n  )}`;\n};\n\nconst FooterContent = ({\n  handleCheck,\n  handleApply,\n  onCancel,\n  isStuctureChecking,\n  isCheckedWithNewSettings,\n}) => {\n  return (\n    <div className={style.buttons}>\n      <div>\n        <button\n          className={\n            isCheckedWithNewSettings\n              ? style.buttonSecondary\n              : style.buttonPrimary\n          }\n          onClick={handleCheck}\n          disabled={!isStuctureChecking}\n        >\n          Check\n        </button>\n      </div>\n      <div className={style.buttonsRight}>\n        <button className={style.buttonSecondary} onClick={onCancel}>\n          Cancel\n        </button>\n        <button\n          className={style.buttonPrimary}\n          onClick={handleApply}\n          disabled={!isStuctureChecking}\n        >\n          Apply\n        </button>\n      </div>\n    </div>\n  );\n};\n\nfunction CheckDialog(props) {\n  const { formState, checkState, onCheck, onApply, onCancel, ...restProps } =\n    props;\n  const { result = checkState, moleculeErrors } = formState;\n  const [isStuctureChecking, setIsStructureChecking] = useState(false);\n  const [lastCheckDate, setLastCheckDate] = useState(null);\n  const [isCheckedWithNewSettings, setIsCheckedWithNewSettings] =\n    useState(false);\n\n  const handleApply = () => onApply(result);\n\n  const handleCheck = () => {\n    setIsStructureChecking(false);\n    onCheck(result.checkOptions).then(() => {\n      setIsStructureChecking(true);\n      setLastCheckDate(new Date());\n      setIsCheckedWithNewSettings(true);\n    });\n  };\n\n  const handleSettingsChange = () => setIsCheckedWithNewSettings(false);\n\n  useEffect(() => {\n    handleCheck();\n  }, []);\n\n  return (\n    <Dialog\n      title=\"Structure Check\"\n      className={style.dialog_body}\n      params={{ ...restProps, onCancel }}\n      buttons={[]}\n      footerContent={\n        <FooterContent\n          handleCheck={handleCheck}\n          handleApply={handleApply}\n          onCancel={onCancel}\n          isStuctureChecking={isStuctureChecking}\n          isCheckedWithNewSettings={isCheckedWithNewSettings}\n        />\n      }\n      withDivider\n    >\n      <Form\n        schema={checkSchema}\n        init={checkState}\n        {...formState}\n        result={result}\n      >\n        <div className={style.wrapper}>\n          <div className={style.settings}>\n            <label>Settings</label>\n            <div\n              className={!isStuctureChecking ? style.checkBoxesDisabled : ''}\n            >\n              <Field\n                name=\"checkOptions\"\n                labelPos={false}\n                multiple\n                type=\"checkbox\"\n                disabled={!isStuctureChecking}\n                onChange={handleSettingsChange}\n              />\n            </div>\n          </div>\n          <div className={style.checkInfo}>\n            <span>\n              Last check:{' '}\n              {lastCheckDate && getFormattedDateString(lastCheckDate)}\n            </span>\n            <div\n              className={\n                !Object.keys(moleculeErrors).length || !isStuctureChecking\n                  ? style.centeredContainer\n                  : style.warnings\n              }\n            >\n              {isStuctureChecking ? (\n                <div\n                  className={\n                    Object.keys(moleculeErrors).length\n                      ? style.warningsContainer\n                      : style.centeredContainer\n                  }\n                >\n                  <ErrorsCheck\n                    moleculeErrors={moleculeErrors}\n                    checkSchema={checkSchema}\n                  />\n                </div>\n              ) : (\n                <LoadingCircles />\n              )}\n            </div>\n          </div>\n        </div>\n      </Form>\n    </Dialog>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  formState: state.modal.form,\n  checkState: state.options.check,\n});\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onCheck: (opts) => dispatch(check(opts)).catch(ownProps.onCancel),\n  onApply: (res) => {\n    dispatch(checkOpts(res));\n    ownProps.onOk(res);\n  },\n});\n\nconst Check = connect(mapStateToProps, mapDispatchToProps)(CheckDialog);\n\nexport default Check;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport styles from './FormulaInput.module.less';\n\nconst formulaRegexp = /\\b(\\d*)([A-Z][a-z]{0,3}#?)(\\d*)\\s*\\b/g;\nconst errorRegexp = /error:.*/g;\n\nfunction formulaInputMarkdown(contentData) {\n  const { content, contentEditable } = contentData;\n  const onKeyDown = (e) => {\n    if (e.keyCode === 8) {\n      e.preventDefault();\n      return false;\n    }\n  };\n  return (\n    <div\n      className={styles.chem_input}\n      onKeyPress={(e) => e.preventDefault()}\n      onPaste={(e) => e.preventDefault()}\n      onKeyDown={onKeyDown}\n      contentEditable={contentEditable}\n      suppressContentEditableWarning={true}\n    >\n      {content}\n    </div>\n  );\n}\n\nfunction FormulaInput({ value, contentEditable }) {\n  if (errorRegexp.test(value)) return formulaInputMarkdown(value);\n\n  const content = [];\n  let cnd;\n  let pos = 0;\n\n  while ((cnd = formulaRegexp.exec(value)) !== null) {\n    if (cnd[1].length > 0)\n      content.push(<sup key={content.length}>{cnd[1]}</sup>);\n    content.push(value.substring(pos, cnd.index) + cnd[2]);\n    if (cnd[3].length > 0)\n      content.push(<sub key={content.length}>{cnd[3]}</sub>);\n    pos = cnd.index + cnd[0].length;\n  }\n\n  if (pos === 0) content.push(value);\n  else content.push(value.substring(pos, value.length));\n\n  return formulaInputMarkdown({ content, contentEditable });\n}\n\nexport default FormulaInput;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nfunction FrozenInput({ value }) {\n  return (\n    <input\n      type=\"text\"\n      spellCheck={false}\n      value={value}\n      readOnly\n      onChange={(event) => event.preventDefault()}\n    />\n  );\n}\n\nexport default FrozenInput;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { FormulaInput, FrozenInput } from './components';\n\nimport { Component } from 'react';\nimport { Dialog } from '../../../../components';\nimport { ErrorsContext } from '../../../../../../../contexts';\nimport { analyse } from '../../../../../state/server';\nimport { changeRound } from '../../../../../state/options';\nimport classes from './Analyse.module.less';\nimport { connect } from 'react-redux';\nimport { range } from 'lodash/fp';\nimport Select from '../../../../../component/form/Select';\nimport { getSelectOptionsFromSchema } from '../../../../../utils';\n\nfunction roundOff(value, round) {\n  if (typeof value === 'number') return value.toFixed(round);\n  return value.replace(/[0-9]*\\.[0-9]+/g, (str) => (+str).toFixed(round));\n}\n\nconst selectOptions = getSelectOptionsFromSchema({ enum: range(0, 8) });\n\nclass AnalyseDialog extends Component {\n  static contextType = ErrorsContext;\n\n  componentDidMount() {\n    this.props.onAnalyse();\n  }\n\n  render() {\n    const {\n      values,\n      round,\n      loading,\n      /* eslint-disable @typescript-eslint/no-unused-vars */\n      onAnalyse,\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      onChangeRound,\n      ...props\n    } = this.props;\n    return (\n      <Dialog\n        title=\"Calculated Values\"\n        className={classes.analyse}\n        withDivider={true}\n        needMargin={true}\n        valid={() => true}\n        buttons={['OK']}\n        buttonsNameMap={{ OK: 'Close' }}\n        params={props}\n      >\n        <ul>\n          {[\n            {\n              name: 'Chemical Formula',\n              key: 'gross',\n              withSelector: false,\n            },\n            {\n              name: 'Molecular Weight',\n              key: 'molecular-weight',\n              round: 'roundWeight',\n              withSelector: true,\n            },\n            {\n              name: 'Exact Mass',\n              key: 'monoisotopic-mass',\n              round: 'roundMass',\n              withSelector: true,\n            },\n            {\n              name: 'Elemental Analysis',\n              key: 'mass-composition',\n              round: 'roundElAnalysis',\n              withSelector: false,\n            },\n          ].map((item) => (\n            <li\n              key={item.key}\n              className={classes.contentWrapper}\n              data-testid={item.name + '-wrapper'}\n            >\n              <div className={classes.inputWrapper}>\n                <label>{item.name}:</label>\n                {item.key === 'gross' ? (\n                  <FormulaInput\n                    value={values && !loading ? values[item.key] : ''}\n                    contentEditable={false}\n                  />\n                ) : item.key === 'mass-composition' ? (\n                  <textarea\n                    readOnly\n                    value={\n                      values && !loading\n                        ? roundOff(values[item.key], round[item.round])\n                        : 0\n                    }\n                  />\n                ) : (\n                  <FrozenInput\n                    value={\n                      values && !loading\n                        ? roundOff(values[item.key], round[item.round])\n                        : 0\n                    }\n                  />\n                )}\n              </div>\n              {item.withSelector ? (\n                <div className={classes.selectWrapper}>\n                  <span>Decimal places</span>\n                  <Select\n                    options={selectOptions}\n                    value={round[item.round]}\n                    onChange={(val) => onChangeRound(item.round, val)}\n                    className={classes.select}\n                    data-testid={item.name + '-select'}\n                  />\n                </div>\n              ) : null}\n            </li>\n          ))}\n        </ul>\n      </Dialog>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  values: state.options.analyse.values,\n  loading: state.options.analyse.loading,\n  round: {\n    roundWeight: state.options.analyse.roundWeight,\n    roundMass: state.options.analyse.roundMass,\n    roundElAnalysis: state.options.analyse.roundElAnalysis,\n  },\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  onAnalyse: () => dispatch(analyse()),\n  onChangeRound: (roundName, val) => dispatch(changeRound(roundName, val)),\n});\n\nconst Analyse = connect(mapStateToProps, mapDispatchToProps)(AnalyseDialog);\n\nexport default Analyse;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\ntype Props = {\n  clickHandler: () => void;\n  disabled: boolean;\n  label: string;\n  styles: string;\n  title?: string;\n};\n\nexport const DialogActionButton = ({\n  clickHandler,\n  label,\n  title,\n  styles,\n  disabled,\n}: Props) => (\n  <input\n    key=\"Open\"\n    type=\"button\"\n    className={styles}\n    value={label}\n    title={title || label}\n    disabled={disabled}\n    onClick={clickHandler}\n  />\n);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useCallback, useEffect, useState } from 'react';\nimport {\n  changeImage,\n  changeVersion,\n  shouldFragment,\n} from '../../../../../state/options';\n\nimport { Dialog } from '../../../../components';\nimport Input from '../../../../../component/form/Input/Input';\nimport OpenButton from '../../../../../component/view/openbutton';\nimport { LoadingCircles } from 'src/script/ui/views/components/Spinner';\nimport classes from './Recognize.module.less';\nimport { connect } from 'react-redux';\nimport { load } from '../../../../../state';\nimport { range } from 'lodash/fp';\nimport { recognize } from '../../../../../state/server';\nimport { DialogActionButton } from 'src/script/ui/views/modal/components/document/Open/components/DialogActionButton';\nimport { Icon, StructRender } from 'components';\nimport { ketcherProvider } from 'ketcher-core';\n\nfunction isImage(file) {\n  return file?.type?.includes('image');\n}\n\nfunction FooterContent({\n  onImage,\n  structStr,\n  openHandler,\n  copyHandler,\n  isAddToCanvasDisabled,\n}) {\n  return (\n    <div className={classes.footerContent}>\n      <OpenButton\n        key=\"choose\"\n        onLoad={onImage}\n        type=\"image/*\"\n        className={classes.openButton}\n      >\n        <Icon name=\"open\" />\n        <span>Change image</span>\n      </OpenButton>\n      <div>\n        <DialogActionButton\n          key=\"openButton\"\n          disabled={!structStr}\n          clickHandler={openHandler}\n          styles={classes.secondaryButton}\n          label=\"Open as new Project\"\n        />\n        <DialogActionButton\n          key=\"copyButton\"\n          disabled={!structStr || isAddToCanvasDisabled}\n          clickHandler={copyHandler}\n          styles={classes.primaryButton}\n          label=\"Add to Canvas\"\n          title=\"Structure will be loaded as fragment and added to Clipboard\"\n        />\n      </div>\n    </div>\n  );\n}\n\nfunction RecognizeDialog(prop) {\n  const {\n    file,\n    structStr,\n    fragment,\n    version,\n    imagoVersions,\n    onOk,\n    ...partProps\n  } = prop;\n  const {\n    onRecognize,\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    isFragment,\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    onImage,\n    onChangeImago,\n    ...props\n  } = partProps;\n  const [canPreviewImage, setCanPreviewImage] = useState(true);\n  const result = () =>\n    structStr && !(structStr instanceof Promise)\n      ? { structStr, fragment }\n      : null;\n  const ketcher = ketcherProvider.getKetcher();\n\n  useEffect(() => {\n    onRecognize(file, version);\n  }, [file, version]);\n\n  const clearFile = useCallback(() => {\n    onImage(null);\n    return true;\n  }, [onImage]);\n\n  const copyHandler = () => {\n    onOk({ structStr, fragment: true });\n  };\n\n  const openHandler = () => {\n    onOk({ structStr, fragment: false });\n  };\n\n  return (\n    <Dialog\n      title=\"Import Structure from Image\"\n      className={classes.recognize}\n      params={{ ...props, onOk }}\n      result={() => result(structStr, fragment)}\n      withDivider={true}\n      needMargin={false}\n      footerContent={\n        <FooterContent\n          onImage={onImage}\n          openHandler={openHandler}\n          structStr={structStr}\n          copyHandler={copyHandler}\n          isAddToCanvasDisabled={ketcher.editor.render.options.viewOnlyMode}\n        />\n      }\n      buttons={[]}\n    >\n      <div className={classes.topBody}>\n        <label className={classes.imagoVersion}>\n          {/* eslint-disable jsx-a11y/label-has-associated-control */}\n          Imago version\n          <Input\n            schema={{\n              enum: imagoVersions,\n              enumNames: range(1, imagoVersions.length + 1).map(\n                (i) => `Version ${i}`,\n              ),\n            }}\n            value={version}\n            onChange={onChangeImago}\n          />\n          {/* eslint-enable jsx-a11y/label-has-associated-control */}\n        </label>\n        <span>Original image</span>\n        <span>Recognized structure preview</span>\n      </div>\n\n      <div className={classes.imagesContainer}>\n        <div className={classes.picture}>\n          {file && isImage(file) && canPreviewImage && (\n            <img\n              alt=\"\"\n              id=\"pic\"\n              src={url(file) || ''}\n              onError={() => {\n                setCanPreviewImage(false);\n              }}\n            />\n          )}\n          <span className={classes.filename}> {file ? file.name : null} </span>\n          {file && isImage(file) && !canPreviewImage && (\n            <div className={classes.messageContainer}>\n              <p>\n                Preview of '{file.type}' MIME type is not supported by current\n                browser\n              </p>\n            </div>\n          )}\n          {(!file || (!isImage(file) && clearFile())) && (\n            <div className={classes.messageContainer}>\n              <p>Please choose image</p>\n            </div>\n          )}\n        </div>\n        <div className={classes.output}>\n          {structStr &&\n            // in Edge 38: instanceof Promise always `false`\n            (structStr instanceof Promise || typeof structStr !== 'string' ? (\n              <div className={classes.messageContainer}>\n                <LoadingCircles />\n              </div>\n            ) : (\n              <StructRender className={classes.struct} struct={structStr} />\n            ))}\n        </div>\n      </div>\n    </Dialog>\n  );\n}\n\nfunction url(file) {\n  if (!file) return null;\n  const URL = window.URL || window.webkitURL;\n  return URL ? URL.createObjectURL(file) : 'No preview';\n}\n\nconst mapStateToProps = (state) => ({\n  imagoVersions: state.options.app.imagoVersions,\n  file: state.options.recognize.file,\n  structStr: state.options.recognize.structStr,\n  fragment: state.options.recognize.fragment,\n  version:\n    state.options.recognize.version || state.options.app.imagoVersions[1],\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  isFragment: (v) => dispatch(shouldFragment(v)),\n  onImage: (file) => dispatch(changeImage(file)),\n  onRecognize: (file, ver) => dispatch(recognize(file, ver)),\n  onChangeImago: (ver) => dispatch(changeVersion(ver)),\n  onOk: (res) => {\n    dispatch(\n      load(res.structStr, {\n        rescale: true,\n        fragment: res.fragment,\n      }),\n      // TODO: Removed ownProps.onOk call. consider refactoring of load function in release 2.4\n      // See PR #731 (https://github.com/epam/ketcher/pull/731)\n    );\n  },\n});\n\nconst Recognize = connect(mapStateToProps, mapDispatchToProps)(RecognizeDialog);\n\nexport default Recognize;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { lazy, Suspense, useCallback, useMemo, useRef, useState } from 'react';\nimport { Dialog, LoadingCircles } from '../../../../components';\nimport {\n  FormatterFactory,\n  KetcherLogger,\n  ketcherProvider,\n  Struct,\n  StructService,\n  SupportedFormat,\n} from 'ketcher-core';\nimport { MIEW_OPTIONS } from '../../../../../data/schema/options-schema';\nimport classes from './Miew.module.less';\nimport { connect } from 'react-redux';\nimport { load } from '../../../../../state';\nimport { pick } from 'lodash/fp';\nimport { Miew as MiewAsType } from 'miew';\nimport { createSelector } from 'reselect';\n\nconst Viewer = lazy(() => import('miew-react'));\n\ntype MiewDialogProps = {\n  miewOpts: any;\n  server: StructService;\n  struct: Struct;\n  onCancel: () => void;\n  onOk: (result: any) => void;\n  miewTheme: 'dark' | 'light';\n};\ntype MiewDialogCallProps = {\n  onExportCML: (cmlStruct: string) => void;\n};\ntype Props = MiewDialogProps & MiewDialogCallProps;\n\n/* OPTIONS for MIEW */\nconst BACKGROUND_COLOR = {\n  dark: '0x202020',\n  light: '0xcccccc',\n};\n\nconst MIEW_TX_TYPES = {\n  no: null,\n  bright: {\n    colorer: 'EL',\n  },\n  blackAndWhite: {\n    colorer: ['UN', { color: 0xffffff }],\n    bg: '0x000',\n  },\n  black: {\n    colorer: ['UN', { color: 0x000000 }],\n  },\n};\n\nconst TXoptions = (userOpts) => {\n  const type = userOpts.miewAtomLabel;\n  if (MIEW_TX_TYPES[type] === null) return null;\n  return {\n    colorer: MIEW_TX_TYPES[type].colorer,\n    selector: 'not elem C',\n    mode: [\n      'TX',\n      {\n        bg: MIEW_TX_TYPES[type].bg || BACKGROUND_COLOR[userOpts.miewTheme],\n        showBg: true,\n        template: '{{elem}}',\n      },\n    ],\n  };\n};\n\nfunction createMiewOptions(userOpts) {\n  const options = {\n    settings: {\n      bg: { color: Number(BACKGROUND_COLOR[userOpts.miewTheme]) },\n      autoPreset: false,\n      editing: true,\n      inversePanning: true,\n    },\n    reps: [\n      {\n        mode: userOpts.miewMode,\n      },\n    ],\n  };\n\n  const textMode = TXoptions(userOpts);\n  if (textMode) options.reps.push(textMode);\n\n  return options;\n}\n/* ---------------- */\nconst CHANGING_WARNING =\n  'Stereocenters can be changed after the strong 3D rotation';\n\nconst FooterContent = () => (\n  <div className={classes.warning}>{CHANGING_WARNING}</div>\n);\n\nconst MiewDialog = ({\n  miewOpts,\n  server,\n  struct,\n  onExportCML,\n  miewTheme = 'light',\n  ...prop\n}: Props) => {\n  const miewRef = useRef<MiewAsType>();\n  const [isInitialized, setIsIsInitialized] = useState(false);\n  const ketcher = ketcherProvider.getKetcher();\n\n  const isDisabled = useMemo(() => {\n    return (\n      !isInitialized || ketcher?.editor.render.options.viewOnlyMode === true\n    );\n  }, [ketcher, isInitialized]);\n\n  const onMiewInit = useCallback(\n    (miew: MiewAsType) => {\n      miewRef.current = miew;\n      const factory = new FormatterFactory(server);\n      const service = factory.create(SupportedFormat.cml);\n\n      service\n        .getStructureFromStructAsync(struct)\n        .then((res) =>\n          miew.load(res, { sourceType: 'immediate', fileType: 'cml' }),\n        )\n        .then(() => {\n          miew.setOptions(miewOpts);\n          setIsIsInitialized(true);\n        })\n        .catch((e) => {\n          KetcherLogger.error('Miew.tsx::MiewDialog::onMiewInit', e);\n        });\n    },\n    [miewOpts, server, struct],\n  );\n\n  const exportCML = useCallback(() => {\n    const cmlStruct = miewRef.current?.exportCML();\n    if (!cmlStruct) {\n      return;\n    }\n    onExportCML(cmlStruct);\n  }, [onExportCML, miewRef]);\n\n  return (\n    <Dialog\n      title=\"Miew\"\n      needMargin={false}\n      params={prop}\n      buttons={[\n        'Cancel',\n        <button\n          key=\"apply\"\n          onClick={exportCML}\n          className={classes.applyButton}\n          disabled={isDisabled}\n          data-testid=\"miew-modal-button\"\n        >\n          Apply\n        </button>,\n      ]}\n      footerContent={<FooterContent />}\n      className={classes.miewDialog}\n    >\n      <div>\n        <div\n          className={`${classes.miewContainer} ${\n            miewTheme === 'dark' ? classes.miewDarkTheme : ''\n          }`}\n        >\n          <Suspense\n            fallback={\n              <div className={classes.loadingContainer}>\n                <LoadingCircles />\n              </div>\n            }\n          >\n            <Viewer onInit={onMiewInit} />\n          </Suspense>\n        </div>\n      </div>\n    </Dialog>\n  );\n};\n\nconst getOptionsSettings = (state) => state.options.settings;\nconst miewOptionsSelector = createSelector([getOptionsSettings], (settings) =>\n  createMiewOptions(pick(MIEW_OPTIONS, settings)),\n);\n\nconst mapStateToProps = (state) => ({\n  miewOpts: miewOptionsSelector(state),\n  server: state.options.app.server ? state.server : null,\n  struct: state.editor.struct(),\n  miewTheme: state.options.settings.miewTheme,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  onExportCML: (cmlStruct) => {\n    dispatch(load(cmlStruct));\n    // TODO: Removed ownProps.onOk call. consider refactoring of load function in release 2.4\n    // See PR #731 (https://github.com/epam/ketcher/pull/731)\n  },\n});\n\nconst Miew = connect(mapStateToProps, mapDispatchToProps)(MiewDialog);\n\nexport default Miew;\n","import { AtomType, Elements, genericsList } from 'ketcher-core';\nimport { capitalize } from 'lodash';\nimport { atom as atomSchema } from '../../../../../data/schema/struct-schema';\nimport { matchCharge } from 'src/script/ui/data/utils';\n\nexport function atomValid(\n  label: string,\n  isMultipleAtoms: boolean,\n  atomType: AtomType,\n  isCustomQuery: boolean,\n) {\n  const isChemicalElement = !!Elements.get(capitalize(label));\n  if (atomType !== 'single' || isCustomQuery) {\n    return true;\n  }\n  if (isMultipleAtoms) {\n    return label === '' || isChemicalElement;\n  }\n  return label && isChemicalElement;\n}\n\nexport function AtomListValid(\n  value: string,\n  atomType: AtomType,\n  isCustomQuery: boolean,\n) {\n  if (atomType !== 'list' || isCustomQuery) {\n    return true;\n  }\n  return value.length >= 1;\n}\n\nexport function pseudoAtomValid(\n  value: string,\n  atomType: AtomType,\n  isCustomQuery: boolean,\n  disableQueryElements?: string[] | null,\n) {\n  const capitalizedValue = capitalize(value);\n  const isDisabledQueryElement =\n    disableQueryElements?.includes(capitalizedValue);\n\n  if (atomType === 'pseudo' && isDisabledQueryElement) {\n    return false;\n  }\n  const isGenericElement = genericsList.includes(capitalizedValue);\n  return atomType !== 'pseudo' || isCustomQuery || (value && isGenericElement);\n}\n\nexport function chargeValid(\n  charge,\n  isMultipleAtoms: boolean,\n  isCustomQuery: boolean,\n) {\n  const result = matchCharge(charge);\n  const isValidCharge = result && (result[1] === '' || result[3] === '');\n  if (isCustomQuery || charge === '') {\n    return true;\n  }\n  if (isMultipleAtoms) {\n    return charge === '0' || charge === 0 || charge === '' || isValidCharge;\n  }\n  return isValidCharge;\n}\n\nexport function customQueryValid(value: string, isCustomQuery: boolean) {\n  if (!isCustomQuery) {\n    return true;\n  }\n  const regex = new RegExp(atomSchema.properties.customQuery.pattern);\n  return regex.test(value);\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Elements } from 'ketcher-core';\nimport { capitalize } from 'lodash/fp';\n\ninterface ElementNumberProps {\n  label: string;\n}\n\ntype Props = ElementNumberProps;\n\nconst ElementNumber = (props: Props) => {\n  const { label } = props;\n  const value = Elements.get(capitalize(label))?.number || '';\n\n  return (\n    <label>\n      {/* eslint-disable jsx-a11y/label-has-associated-control */}\n      <span>Number</span>\n      <input type=\"text\" readOnly value={value} />\n      {/* eslint-enable jsx-a11y/label-has-associated-control */}\n    </label>\n  );\n};\n\nexport default ElementNumber;\n","import Select from '../../../../../../component/form/Select';\nimport { Field, FieldWithModal } from 'src/script/ui/component/form/form/form';\nimport { atom as atomSchema } from '../../../../../../data/schema/struct-schema';\nimport { getSelectOptionsFromSchema } from 'src/script/ui/utils';\nimport ElementNumber from '../ElementNumber/ElementNumber';\nimport { openDialog } from 'src/script/ui/state/modal';\nimport { useDispatch } from 'react-redux';\nimport classes from './../Atom.module.less';\nimport { BaseProps } from '../../../../modal.types';\nimport { capitalize } from 'lodash';\nconst atomProps = atomSchema.properties;\n\ntype ChangeFunction = (value: string) => void;\n\nconst AtomElement = ({ formState }: BaseProps) => {\n  const { atomType, atomList, notList, pseudo, label } = formState.result;\n  const dispatch = useDispatch();\n\n  const openNestedDialog = (\n    modalName: 'period-table' | 'extended-table',\n    props: object,\n    onChange: ChangeFunction,\n  ) => {\n    openDialog(dispatch, modalName, { ...props, isNestedModal: true }).then(\n      (el) => {\n        onChange(el.values?.join(',') || el.label);\n      },\n      () => null, // onCancel handler\n    );\n  };\n\n  const AtomFields = {\n    single: (\n      <>\n        <FieldWithModal\n          key=\"atomLabel\"\n          name=\"label\"\n          onEdit={(onChange: ChangeFunction) =>\n            openNestedDialog(\n              'period-table',\n              { type: 'atom', label: capitalize(label) },\n              onChange,\n            )\n          }\n          data-testid=\"label-input\"\n          autoFocus\n        />\n        <ElementNumber label={label} />\n      </>\n    ),\n    list: (\n      <>\n        <FieldWithModal\n          name=\"atomList\"\n          onEdit={(onChange: ChangeFunction) =>\n            openNestedDialog(\n              'period-table',\n              {\n                type: notList ? 'not-list' : 'list',\n                values: atomList !== '' ? atomList.split(',') : [],\n              },\n              onChange,\n            )\n          }\n          disabled\n        />\n        <Field name=\"notList\" labelPos=\"before\" className={classes.checkbox} />\n      </>\n    ),\n    pseudo: (\n      <FieldWithModal\n        name=\"pseudo\"\n        onEdit={(onChange: ChangeFunction) =>\n          openNestedDialog(\n            'extended-table',\n            {\n              label: pseudo,\n              pseudo,\n            },\n            onChange,\n          )\n        }\n      />\n    ),\n  };\n  return (\n    <>\n      <Field\n        name=\"atomType\"\n        component={Select}\n        options={getSelectOptionsFromSchema(atomProps.atomType)}\n      />\n      {AtomFields[atomType]}\n    </>\n  );\n};\n\nexport default AtomElement;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseCallProps, BaseProps } from '../../../modal.types';\n\nimport Form, {\n  Field,\n  CustomQueryField,\n} from '../../../../../component/form/form/form';\nimport { FC, useMemo, useState } from 'react';\n\nimport { Dialog } from '../../../../components';\nimport {\n  AtomAllAttributeName,\n  SettingsManager,\n  getAtomCustomQuery,\n} from 'ketcher-core';\nimport { atom as atomSchema } from '../../../../../data/schema/struct-schema';\nimport classes from './Atom.module.less';\nimport Select from '../../../../../component/form/Select';\nimport { getSelectOptionsFromSchema } from '../../../../../utils';\nimport clsx from 'clsx';\nimport { Icon } from 'components';\nimport {\n  AtomListValid,\n  atomValid,\n  chargeValid,\n  customQueryValid,\n  pseudoAtomValid,\n} from './helper';\nimport AtomElement from './AtomElement/AtomElement';\n\ninterface AtomProps extends BaseCallProps, BaseProps {\n  alias: string;\n  charge: string;\n  exactChangeFlag: boolean;\n  explicitValence: number;\n  hCount: number;\n  invRet: number;\n  isotope: number;\n  label: string;\n  radical: number;\n  ringBondCount: number;\n  stereoParity: number;\n  substitutionCount: number;\n  unsaturatedAtom: boolean;\n  customQuery: string;\n}\n\ntype Props = AtomProps & {\n  isMultipleAtoms?: boolean;\n  isRestoredModal: boolean;\n};\n\nconst atomProps = atomSchema.properties;\nconst querySpecificFields: Array<{\n  name: AtomAllAttributeName;\n  component?: 'dropdown';\n  labelPos?: 'before' | 'after';\n  className?: string;\n}> = [\n  { name: 'ringBondCount', component: 'dropdown' },\n  { name: 'hCount', component: 'dropdown' },\n  { name: 'substitutionCount', component: 'dropdown' },\n  { name: 'unsaturatedAtom', labelPos: 'before', className: classes.checkbox },\n  { name: 'aromaticity', component: 'dropdown' },\n  { name: 'implicitHCount', component: 'dropdown' },\n  { name: 'ringMembership', component: 'dropdown' },\n  { name: 'ringSize', component: 'dropdown' },\n  { name: 'connectivity', component: 'dropdown' },\n  { name: 'chirality', component: 'dropdown' },\n];\n\nconst Atom: FC<Props> = (props: Props) => {\n  const {\n    formState,\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    stereoParity,\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    isMultipleAtoms = false,\n    isRestoredModal,\n    ...rest\n  } = props;\n  const [isCustomQuery, setIsCustomQuery] = useState(Boolean(rest.customQuery));\n  const [expandedAccordions, setExpandedAccordions] = useState<string[]>(\n    isCustomQuery ? [] : ['General'],\n  );\n  const handleAccordionChange = (accordion) => () => {\n    if (isCustomQuery) return;\n    const isExpand = !expandedAccordions.includes(accordion);\n    setExpandedAccordions(\n      isExpand\n        ? [...expandedAccordions, accordion]\n        : [...expandedAccordions].filter(\n            (expandedAccordion) => expandedAccordion !== accordion,\n          ),\n    );\n  };\n\n  const handleCustomQueryCheckBoxChange = (\n    value: boolean,\n    formState,\n    setCustomQuery: (value: string) => void,\n  ) => {\n    const query = value ? getAtomCustomQuery(formState) : '';\n    setCustomQuery(query);\n    setIsCustomQuery(value);\n    setExpandedAccordions([]);\n  };\n\n  const customValid = useMemo(() => {\n    const atomType = formState.result.atomType;\n    const disableQueryElements =\n      SettingsManager.getOptions().disableQueryElements;\n    return {\n      label: (label: string) =>\n        atomValid(label, isMultipleAtoms, atomType, isCustomQuery),\n      pseudo: (value: string) =>\n        pseudoAtomValid(value, atomType, isCustomQuery, disableQueryElements),\n      atomList: (value: string) =>\n        AtomListValid(value, atomType, isCustomQuery),\n      charge: (charge) => chargeValid(charge, isMultipleAtoms, isCustomQuery),\n      customQuery: (value: string) => customQueryValid(value, isCustomQuery),\n    };\n  }, [formState.result.atomType, isCustomQuery, isMultipleAtoms]);\n\n  const itemGroups = [\n    {\n      groupName: 'General',\n      component: (\n        <div>\n          <AtomElement formState={formState} className=\"\"></AtomElement>\n          <Field name=\"alias\" data-testid=\"alias\" />\n          <Field\n            name=\"charge\"\n            maxLength={atomProps.charge.maxLength}\n            data-testid=\"charge\"\n          />\n          <Field\n            name=\"isotope\"\n            maxLength={atomProps.isotope.maxLength}\n            data-testid=\"isotope\"\n          />\n          <Field\n            name=\"explicitValence\"\n            component={Select}\n            options={getSelectOptionsFromSchema(atomProps.explicitValence)}\n            data-testid=\"explicitValence\"\n          />\n          <Field\n            name=\"radical\"\n            component={Select}\n            options={getSelectOptionsFromSchema(atomProps.radical)}\n            data-testid=\"radical\"\n          />\n        </div>\n      ),\n    },\n    {\n      groupName: 'Query specific',\n      component: (\n        <div className={classes.querySpecific}>\n          {querySpecificFields.map((field) => {\n            if (field.component === 'dropdown') {\n              return (\n                <Field\n                  key={field.name}\n                  name={field.name}\n                  component={Select}\n                  options={getSelectOptionsFromSchema(atomProps[field.name])}\n                  data-testid={field.name}\n                />\n              );\n            } else {\n              return <Field key={field.name} {...field} />;\n            }\n          })}\n        </div>\n      ),\n    },\n    {\n      groupName: 'Reaction flags',\n      component: (\n        <div className={classes.reactionFlags}>\n          <Field\n            name=\"invRet\"\n            component={Select}\n            options={getSelectOptionsFromSchema(atomProps.invRet)}\n          />\n          <Field\n            name=\"exactChangeFlag\"\n            labelPos=\"before\"\n            className={classes.checkbox}\n          />\n        </div>\n      ),\n    },\n  ];\n\n  return (\n    <Dialog\n      title=\"Atom Properties\"\n      className={classes.atomProps}\n      result={() => formState.result}\n      valid={() => formState.valid}\n      params={rest}\n      buttonsNameMap={{ OK: 'Apply' }}\n      buttons={['Cancel', 'OK']}\n      withDivider\n    >\n      <Form\n        schema={atomSchema}\n        customValid={customValid}\n        init={isRestoredModal ? null : rest}\n        {...formState}\n      >\n        <div className={classes.accordionWrapper}>\n          {itemGroups.map(({ groupName, component }) => {\n            const shouldGroupBeRended = expandedAccordions.includes(groupName);\n            return (\n              <div key={groupName} data-testid={`${groupName}-section`}>\n                <div\n                  onClick={handleAccordionChange(groupName)}\n                  className={classes.accordionSummaryWrapper}\n                  aria-disabled={isCustomQuery}\n                >\n                  <div className={classes.accordionSummary}>\n                    <span>{groupName}</span>\n                    <Icon\n                      className={clsx({\n                        [classes.expandIcon]: true,\n                        [classes.turnedIcon]: !shouldGroupBeRended,\n                      })}\n                      name=\"chevron\"\n                    />\n                  </div>\n                </div>\n                <div\n                  className={clsx({\n                    [classes.accordionDetailsWrapper]: true,\n                    [classes.hiddenAccordion]: !shouldGroupBeRended,\n                  })}\n                >\n                  <div className={classes.accordionDetails}>{component}</div>\n                </div>\n              </div>\n            );\n          })}\n          {!SettingsManager.disableCustomQuery && (\n            <div className={classes.customQueryWrapper}>\n              <CustomQueryField\n                name=\"customQuery\"\n                labelPos=\"after\"\n                className={classes.checkbox}\n                disabled={!isCustomQuery}\n                checkboxValue={isCustomQuery}\n                onCheckboxChange={handleCustomQueryCheckBoxChange}\n                data-testid=\"atom-custom-query\"\n              />\n            </div>\n          )}\n        </div>\n      </Form>\n    </Dialog>\n  );\n};\n\nexport type { AtomProps };\nexport default Atom;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport Atom from './Atom';\nimport { BaseProps } from '../../../modal.types';\nimport { connect } from 'react-redux';\n\ntype StateProps = Pick<BaseProps, 'formState'>;\n\nconst mapStateToProps = (state: any): StateProps => ({\n  formState: state.modal.form,\n});\n\nconst AtomContainer = connect(mapStateToProps)(Atom);\nexport default AtomContainer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseCallProps, BaseProps } from '../../../modal.types';\nimport Form, { Field } from '../../../../../component/form/form/form';\n\nimport { Dialog } from '../../../../components';\nimport { attachmentPoints as attachmentPointsSchema } from '../../../../../data/schema/struct-schema';\nimport classes from './Attach.module.less';\n\ninterface AttachPointsProps extends BaseProps {\n  primary: boolean;\n  secondary: boolean;\n}\n\ntype Props = AttachPointsProps & BaseCallProps;\n\nconst AttachPoints = (props: Props) => {\n  const { formState, ...rest } = props;\n  return (\n    <Dialog\n      title=\"Attachment Points\"\n      className={classes.attachPoints}\n      result={() => formState.result}\n      valid={() => formState.valid}\n      params={rest}\n      buttonsNameMap={{ OK: 'Apply' }}\n      buttons={['Cancel', 'OK']}\n      withDivider\n    >\n      <Form schema={attachmentPointsSchema} init={rest} {...formState}>\n        <Field name=\"primary\" />\n        <Field name=\"secondary\" />\n      </Form>\n    </Dialog>\n  );\n};\n\nexport type { AttachPointsProps };\nexport default AttachPoints;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport AttachPoints from './Attach';\nimport { BaseProps } from '../../../modal.types';\nimport { connect } from 'react-redux';\n\ntype StateProps = Pick<BaseProps, 'formState'>;\n\nconst mapStateToProps = (state: any): StateProps => ({\n  formState: state.modal.form,\n});\n\nconst AttachPointsContainer = connect(mapStateToProps)(AttachPoints);\nexport default AttachPointsContainer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseCallProps, BaseProps } from '../../../modal.types';\nimport Form, { Field } from '../../../../../component/form/form/form';\nimport { Dialog } from '../../../../components';\nimport classes from './Automap.module.less';\nimport Select from '../../../../../component/form/Select/Select';\nimport { getSelectOptionsFromSchema } from '../../../../../utils';\n\ntype Props = BaseProps & BaseCallProps;\n\nexport const automapSchema = {\n  title: 'Reaction Auto-Mapping',\n  type: 'object',\n  required: ['mode'],\n  properties: {\n    mode: {\n      title: 'Mode',\n      enum: ['discard', 'keep', 'alter', 'clear'],\n      enumNames: ['Discard', 'Keep', 'Alter', 'Clear'],\n      default: 'discard',\n    },\n  },\n};\n\nconst Automap = (props: Props) => {\n  const { formState, ...rest } = props;\n  return (\n    <Dialog\n      title=\"Reaction Auto-Mapping\"\n      className={classes.automap}\n      result={() => formState.result}\n      valid={() => formState.valid}\n      params={rest}\n      withDivider\n      buttons={['Cancel', 'OK']}\n      buttonsNameMap={{ OK: 'Apply' }}\n    >\n      <Form schema={automapSchema} {...formState}>\n        <Field\n          name=\"mode\"\n          options={getSelectOptionsFromSchema(automapSchema.properties.mode)}\n          {...props}\n          component={Select}\n          data-testid=\"automap-mode\"\n        />\n      </Form>\n    </Dialog>\n  );\n};\n\nexport default Automap;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseCallProps, BaseProps } from '../../../modal.types';\n\nimport Automap from './Automap';\nimport { automap } from '../../../../../state/server';\nimport { connect } from 'react-redux';\n\ntype StateProps = Pick<BaseProps, 'formState'>;\ntype DispatchProps = Pick<BaseCallProps, 'onOk'>;\n\nconst mapStateToProps = (state: any): StateProps => ({\n  formState: state.modal.form,\n});\n\nconst mapDispatchToProps = (dispatch: any, ownProps: any): DispatchProps => ({\n  onOk: (result) => {\n    dispatch(automap(result));\n    ownProps.onOk(result);\n  },\n});\n\nconst AutomapContainer = connect(mapStateToProps, mapDispatchToProps)(Automap);\nexport default AutomapContainer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseCallProps, BaseProps } from '../../../modal.types';\nimport Form, {\n  CustomQueryField,\n  Field,\n} from '../../../../../component/form/form/form';\n\nimport { Dialog } from '../../../../components';\nimport Select from '../../../../../component/form/Select';\nimport { getSelectOptionsFromSchema } from '../../../../../utils';\nimport { bond as bondSchema } from '../../../../../data/schema/struct-schema';\nimport classes from './Bond.module.less';\nimport { useMemo, useRef, useState } from 'react';\nimport { Bond as CoreBond, SettingsManager } from 'ketcher-core';\n\ninterface BondSettings {\n  type: string;\n  topology: number | null;\n  center: number | null;\n  customQuery: string;\n}\ninterface BondProps extends BaseProps, BondSettings {}\n\ntype Props = BondProps & BaseCallProps;\n\nconst Bond = (props: Props) => {\n  const { formState, ...rest } = props;\n  const bondProps = bondSchema.properties;\n  const [isCustomQuery, setIsCustomQuery] = useState(Boolean(rest.customQuery));\n  const previousSettings = useRef<BondSettings>({\n    type: 'single',\n    topology: 0,\n    center: 0,\n    customQuery: '',\n  });\n  const customValid = useMemo(\n    () => ({\n      customQuery: (customQuery: string) =>\n        customQueryValid(customQuery, isCustomQuery),\n    }),\n    [isCustomQuery],\n  );\n  const handleCustomQueryCheckBoxChange = (\n    value: boolean,\n    formState: BondSettings,\n    _,\n    updateFormState: (settings: BondSettings) => void,\n  ) => {\n    setIsCustomQuery(value);\n    if (value) {\n      const { type, topology, center, customQuery } = formState;\n      previousSettings.current = {\n        type,\n        topology,\n        center,\n        customQuery,\n      };\n    }\n    updateFormState(\n      value\n        ? {\n            type: '',\n            topology: null,\n            center: null,\n            customQuery: getBondCustomQuery(formState),\n          }\n        : previousSettings.current,\n    );\n  };\n\n  return (\n    <Dialog\n      title=\"Bond Properties\"\n      className={classes.bond}\n      result={() => formState.result}\n      valid={() => formState.valid}\n      params={rest}\n      buttonsNameMap={{ OK: 'Apply' }}\n      buttons={['Cancel', 'OK']}\n      withDivider\n    >\n      <Form\n        schema={bondSchema}\n        init={rest}\n        {...formState}\n        customValid={customValid}\n      >\n        <Field\n          name=\"type\"\n          component={Select}\n          options={getSelectOptionsFromSchema(bondProps.type)}\n          disabled={isCustomQuery}\n          formName=\"bond-properties\"\n          data-testid=\"type\"\n        />\n        <Field\n          name=\"topology\"\n          component={Select}\n          options={getSelectOptionsFromSchema(bondProps.topology)}\n          disabled={isCustomQuery}\n          formName=\"bond-properties\"\n          data-testid=\"topology\"\n        />\n        <Field\n          name=\"center\"\n          component={Select}\n          options={getSelectOptionsFromSchema(bondProps.center)}\n          disabled={isCustomQuery}\n          formName=\"bond-properties\"\n          data-testid=\"reacting-center\"\n        />\n        {!SettingsManager.disableCustomQuery && (\n          <div className={classes.customQueryWrapper}>\n            <CustomQueryField\n              name=\"customQuery\"\n              labelPos=\"after\"\n              className={classes.checkbox}\n              disabled={!isCustomQuery}\n              checkboxValue={isCustomQuery}\n              onCheckboxChange={handleCustomQueryCheckBoxChange}\n              data-testid=\"bond-custom-query\"\n            />\n          </div>\n        )}\n      </Form>\n    </Dialog>\n  );\n};\n\nfunction customQueryValid(customQuery: string, isCustomQuery: boolean) {\n  if (!isCustomQuery) {\n    return true;\n  }\n  const regex = new RegExp(bondSchema.properties.customQuery.pattern);\n  const isValid = regex.test(customQuery);\n  return isValid;\n}\n\nfunction getBondCustomQuery(bond: BondSettings) {\n  let queryAttrsText = '';\n  const { type, topology } = bond;\n  const patterns = {\n    bondType: {\n      single: '-',\n      double: '=',\n      triple: '#',\n      aromatic: ':',\n      any: '~',\n      up: '/',\n      down: '\\\\',\n    },\n    topology: {\n      [CoreBond.PATTERN.TOPOLOGY.RING]: '@',\n      [CoreBond.PATTERN.TOPOLOGY.CHAIN]: '!@',\n    },\n  };\n\n  if (type in patterns.bondType) {\n    queryAttrsText += patterns.bondType[type];\n  }\n\n  if (topology && topology in patterns.topology) {\n    if (queryAttrsText) {\n      queryAttrsText += ';';\n    }\n    queryAttrsText += patterns.topology[topology];\n  }\n  return queryAttrsText;\n}\nexport type { BondProps };\nexport default Bond;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseProps } from '../../../modal.types';\nimport Bond from './Bond';\nimport { connect } from 'react-redux';\n\ntype StateProps = Pick<BaseProps, 'formState'>;\n\nconst mapStateToProps = (state: any): StateProps => ({\n  formState: state.modal.form,\n});\n\nconst BondContainer = connect(mapStateToProps)(Bond);\nexport default BondContainer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Field } from '../../../../../../../component/form/form/form';\nimport { RgroupLogicProps } from '../../RgroupLogic';\nimport classes from './IfThenSelect.module.less';\nimport { useFormContext } from '../../../../../../../../../hooks';\nimport Select from '../../../../../../../component/form/Select';\nimport { getSelectOptionsFromSchema } from '../../../../../../../utils';\n\ntype Props = Pick<RgroupLogicProps, 'label' | 'rgroupLabels' | 'name'>;\n\nconst IfThenSelect = (props: Props) => {\n  const { rgroupLabels, label, name } = props;\n  const { schema } = useFormContext() as any;\n  const desc = {\n    title: schema.properties[name!].title,\n    enum: [0],\n    enumNames: ['Always'],\n  };\n\n  rgroupLabels.forEach((rgroupLabel) => {\n    if (label !== rgroupLabel) {\n      desc.enum.push(rgroupLabel);\n      desc.enumNames.push(`IF R${label} THEN R${rgroupLabel}`);\n    }\n  });\n\n  return (\n    <Field\n      schema={desc}\n      className={classes.field}\n      {...props}\n      component={Select}\n      options={getSelectOptionsFromSchema(desc)}\n    />\n  );\n};\n\nexport default IfThenSelect;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\nimport { BaseCallProps, BaseProps } from '../../../modal.types';\nimport Form, { Field } from '../../../../../component/form/form/form';\n\nimport { Dialog } from '../../../../components';\nimport IfThenSelect from './components';\nimport classes from './RgroupLogic.module.less';\nimport { rgroupLogic as rgroupSchema } from '../../../../../data/schema/struct-schema';\n\ninterface RgroupLogicProps extends BaseProps {\n  frags: Set<number>;\n  ifthen: number;\n  label: number;\n  range: string;\n  resth: boolean;\n  rgroupLabels: Array<number>;\n  name?: string;\n}\n\ntype Props = RgroupLogicProps & BaseCallProps;\n\nconst RgroupLogic = (props: Props) => {\n  const { formState, label, rgroupLabels, ...rest } = props;\n  return (\n    <Dialog\n      title=\"R-Group Logic Condition\"\n      className={classes.rgroupLogic}\n      result={() => formState.result}\n      valid={() => formState.valid}\n      params={rest}\n      buttonsNameMap={{ OK: 'Apply' }}\n      buttons={['Cancel', 'OK']}\n      withDivider\n    >\n      <Form\n        schema={rgroupSchema}\n        customValid={{ range: (r) => rangeConv(r) }}\n        init={rest}\n        {...formState}\n      >\n        <Field name=\"range\" />\n        <Field name=\"resth\" labelPos=\"after\" className={classes.resth} />\n        <IfThenSelect name=\"ifthen\" label={label} rgroupLabels={rgroupLabels} />\n      </Form>\n    </Dialog>\n  );\n};\n\nfunction rangeConv(range) {\n  // structConv\n  const res = range\n    .replace(/\\s*/g, '')\n    .replace(/,+/g, ',')\n    .replace(/^,/, '')\n    .replace(/,$/, '');\n\n  return res\n    .split(',')\n    .every((s) => s.match(/^[>,<=]?[0-9]+$/g) || s.match(/^[0-9]+-[0-9]+$/g));\n}\n\nexport type { RgroupLogicProps };\nexport default RgroupLogic;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseProps } from '../../../modal.types';\nimport RgroupLogic from './RgroupLogic';\nimport { connect } from 'react-redux';\n\ntype StateProps = Pick<BaseProps, 'formState'>;\n\nconst mapStateToProps = (state: any): StateProps => ({\n  formState: state.modal.form,\n});\n\nconst RgroupLogicContainer = connect(mapStateToProps)(RgroupLogic);\nexport default RgroupLogicContainer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport styles from './AnalyzingFile.module.less';\nimport { LoadingCircles } from 'src/script/ui/views/components/Spinner';\nimport { Icon } from 'components';\n\nexport type AnalyzingFileProps = {\n  fileName?: string;\n};\n\nconst ICON_NAME = 'file-thumbnail';\n\nexport const AnalyzingFile = ({ fileName }: AnalyzingFileProps) => (\n  <div className={styles.analyzingFileWrapper}>\n    {fileName && (\n      <div className={styles.fileBox}>\n        <Icon name={ICON_NAME} />\n        <p>{fileName}</p>\n      </div>\n    )}\n    <LoadingCircles />\n  </div>\n);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useMemo } from 'react';\nimport { useDropzone, DropzoneOptions } from 'react-dropzone';\n\nimport parentStyles from './OpenOptions.module.less';\nimport styles from './FileDrop.module.less';\nimport { Icon, IconName } from 'components';\n\ntype FileDropProps = {\n  buttonLabel: string;\n  textLabel: string;\n  iconName: IconName;\n  disabled?: boolean;\n  disabledText?: string;\n} & DropzoneOptions;\n\nconst FileDrop = ({\n  buttonLabel,\n  textLabel,\n  iconName,\n  disabled,\n  disabledText,\n  ...rest\n}: FileDropProps) => {\n  const { getRootProps, getInputProps, isDragActive, open } = useDropzone({\n    multiple: false,\n    disabled,\n    ...rest,\n  });\n\n  const getClassesString = useMemo((): string => {\n    const classes = [\n      parentStyles.dropContainer,\n      isDragActive ? styles.isHovered : null,\n      disabled ? styles.isDisabled : null,\n    ];\n    return classes.join(' ');\n  }, [isDragActive]);\n\n  return (\n    <div\n      onKeyDown={open}\n      {...getRootProps({\n        className: getClassesString,\n      })}\n    >\n      <input {...getInputProps()} />\n      <div className={parentStyles.dropIconWrapper}>\n        <Icon name={iconName} />\n      </div>\n      {disabled ? (\n        <p className={parentStyles.textLabel}>{disabledText}</p>\n      ) : (\n        <>\n          <div className={parentStyles.textLabelWrapper}>\n            <p className={parentStyles.textLabel}>{textLabel}</p>\n          </div>\n          <div className={parentStyles.buttonLabelWrapper}>\n            <p className={parentStyles.buttonLabel}>{buttonLabel}</p>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport { FileDrop };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { FC } from 'react';\n\nimport styles from './OpenOptions.module.less';\nimport { FileDrop } from './FileDrop';\nimport { Icon } from 'components';\n\nconst ICON_NAMES = {\n  PASTE: 'open-window-paste-icon',\n  FILE: 'open-window-upload-icon',\n  IMAGE: 'image-frame',\n} as const;\n\nexport type OpenOptionsProps = {\n  selectClipboard: () => void;\n  errorHandler: (err: string) => void;\n  fileLoadHandler: (files: File[]) => void;\n  imageLoadHandler: (files: File[]) => void;\n  isRecognizeDisabled: boolean;\n};\n\nexport const OpenOptions: FC<OpenOptionsProps> = ({\n  selectClipboard,\n  fileLoadHandler,\n  imageLoadHandler,\n  isRecognizeDisabled,\n  errorHandler,\n}) => {\n  return (\n    <div className={styles.optionsContainer}>\n      <div onClick={selectClipboard} className={styles.dropContainer}>\n        <div className={styles.dropIconWrapper}>\n          <Icon name={ICON_NAMES.PASTE} />\n        </div>\n        <div className={styles.textLabelWrapper}>\n          {/* <p className={styles.textLabel}>or press Ctrl + V</p> */}\n        </div>\n        <div className={styles.buttonLabelWrapper}>\n          <p className={styles.buttonLabel}>Paste from clipboard</p>\n        </div>\n      </div>\n\n      <FileDrop\n        onDropAccepted={fileLoadHandler}\n        onDropRejected={(e) => errorHandler(`Unable to accept file(s). ${e}`)}\n        buttonLabel=\"Open from file\"\n        textLabel=\"or drag file here\"\n        iconName={ICON_NAMES.FILE}\n      />\n\n      <FileDrop\n        accept=\"image/*\"\n        disabled={isRecognizeDisabled}\n        disabledText=\"Image Recognition service is not available\"\n        onDropAccepted={imageLoadHandler}\n        onDropRejected={() =>\n          errorHandler(\n            'Unable to accept file(s). Make sure you upload 1 image.',\n          )\n        }\n        buttonLabel=\"Open from image\"\n        textLabel=\"or drag file here\"\n        iconName={ICON_NAMES.IMAGE}\n      />\n    </div>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport classes from '../Open.module.less';\n\nexport type TextEditorProps = {\n  structStr: string;\n  inputHandler: (str: string) => void;\n  autoFocus?: boolean;\n};\n\nexport const TextEditor = ({\n  structStr,\n  inputHandler,\n  autoFocus = false,\n}: TextEditorProps) => {\n  return (\n    <>\n      <textarea\n        className={classes.textareaEditor}\n        value={structStr}\n        onChange={(event) => inputHandler(event.target.value)}\n        autoFocus={autoFocus}\n      />\n    </>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport const serverSelector = (state) => {\n  return state.options.app.server ? state.server : null;\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport const editorOptionsSelector = (state) => state.editor?.render?.options;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { MenuList } from '@mui/material';\nimport MenuItem from '@mui/material/MenuItem';\nimport { Icon } from 'components';\nimport { Struct } from 'ketcher-core';\nimport { LoadingCircles } from '../../../../../../components';\nimport { serverSelector } from '../../../../../../../state/server/selectors';\nimport StructRender from '../../../../../../../../../components/StructRender/StructRender';\nimport { parseStruct } from '../../../../../../../state/shared';\nimport styles from './CDXStructuresViewer.module.less';\nimport { editorOptionsSelector } from '../../../../../../../state/editor/selectors';\n\nexport type CDXStructuresViewerProps = {\n  structList?: string[];\n  inputHandler: (str: string) => void;\n  structStr: string;\n  fileName: string;\n};\n\ntype item = { base64struct: string; error?: string; struct?: Struct };\n\ntype itemsMapInterface = {\n  [x: number]: item;\n};\n\nexport const CDXStructuresViewer = ({\n  structList = [],\n  inputHandler,\n  fileName,\n}: CDXStructuresViewerProps) => {\n  const server = useSelector(serverSelector);\n  const editorOptions = useSelector(editorOptionsSelector);\n  const [selectedIndex, setSelectedIndex] = useState(0);\n  const [itemsMap, setItemsMap] = useState<itemsMapInterface>({});\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (!itemsMap[selectedIndex] || itemsMap[selectedIndex].error) {\n      inputHandler('');\n    } else {\n      inputHandler(itemsMap[selectedIndex].base64struct);\n    }\n  }, [inputHandler, itemsMap, selectedIndex]);\n\n  const getImage = (str, index) => {\n    setLoading(true);\n    parseStruct(str, server)\n      .then((struct) => {\n        const object = {\n          base64struct: str,\n          struct,\n        };\n        setItemsMap((state) => ({ ...state, [index]: object }));\n      })\n      .catch((error) => {\n        const object = {\n          base64struct: str,\n          error: error.message || error,\n        };\n        setItemsMap((state) => ({ ...state, [index]: object }));\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  };\n\n  useEffect(() => {\n    if (structList[selectedIndex] && !itemsMap[selectedIndex]) {\n      getImage(structList[selectedIndex], selectedIndex);\n    }\n  }, [itemsMap, selectedIndex]);\n\n  const renderStructure = (structure: item) => {\n    if (loading) {\n      return (\n        <div className={styles.centerWrapper}>\n          <LoadingCircles />\n        </div>\n      );\n    }\n    if (structure?.error) {\n      return <div>Error: {itemsMap[selectedIndex]?.error}</div>;\n    }\n    if (structure?.struct) {\n      return (\n        <StructRender\n          className={styles.image}\n          struct={structure.struct}\n          options={{ ...editorOptions, autoScale: true, needCache: false }}\n        />\n      );\n    }\n    return null;\n  };\n  const renderStructures = () => {\n    if (!structList?.length) {\n      return (\n        <div className={styles.centerWrapper}>\n          <div>No embedded structures found in the file</div>\n        </div>\n      );\n    }\n    return (\n      <div className={styles.structuresWrapper}>\n        <div className={styles.menuListWrapper}>\n          <div className={styles.header}>Select structure</div>\n          <MenuList>\n            {structList.map((value, index) => (\n              <MenuItem\n                key={value + index}\n                selected={index === selectedIndex}\n                onClick={() => setSelectedIndex(index)}\n              >\n                {`Structure ${index + 1}`}\n                {itemsMap[index]?.error && <Icon name=\"error\" />}\n              </MenuItem>\n            ))}\n          </MenuList>\n        </div>\n        <div className={styles.imageWrapper}>\n          {renderStructure(itemsMap[selectedIndex])}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className={styles.wrapper}>\n      <div>\n        File: <span className={styles.fileName}>{fileName}</span>\n      </div>\n      {renderStructures()}\n    </div>\n  );\n};\nexport default CDXStructuresViewer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { FC } from 'react';\nimport { AnalyzingFile, AnalyzingFileProps } from './AnalyzingFile';\n\nimport { OpenOptions, OpenOptionsProps } from './OpenOptions';\nimport { TextEditor, TextEditorProps } from './TextEditor';\nimport CDXStructuresViewer from './CDXStructuresViewer';\nimport { CDXStructuresViewerProps } from './CDXStructuresViewer/CDXStructuresViewer';\n\ntype ViewStates = {\n  idle: string;\n  textEditor: string;\n  imageRec: string;\n  presentationViewer: string;\n};\n\ntype SwitchProps = {\n  currentState: string;\n  states: ViewStates;\n  isAnalyzingFile: boolean;\n} & OpenOptionsProps &\n  TextEditorProps &\n  AnalyzingFileProps &\n  CDXStructuresViewerProps;\n\nexport const ViewSwitcher: FC<SwitchProps> = (props: SwitchProps) => {\n  if (props.isAnalyzingFile) {\n    return <AnalyzingFile fileName={props.fileName} />;\n  } else {\n    switch (props.currentState) {\n      case props.states.idle:\n        return <OpenOptions {...props} />;\n      case props.states.textEditor:\n        return <TextEditor {...props} />;\n      case props.states.presentationViewer:\n        return <CDXStructuresViewer {...props} />;\n      default:\n        return null;\n    }\n  }\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseCallProps, BaseProps } from '../../../modal.types';\nimport { FC, useEffect, useState } from 'react';\nimport { Dialog, LoadingCircles } from '../../../../components';\nimport classes from './Open.module.less';\nimport Recognize from '../../process/Recognize/Recognize';\nimport { fileOpener } from '../../../../../utils/';\nimport { DialogActionButton } from './components/DialogActionButton';\nimport { ViewSwitcher } from './components/ViewSwitcher';\nimport { getFormatMimeTypeByFileName, ketcherProvider } from 'ketcher-core';\ninterface OpenProps {\n  server: any;\n  errorHandler: (err: string) => void;\n  isRecognizeDisabled: boolean;\n  isAnalyzingFile: boolean;\n  ignoreChiralFlag: boolean;\n}\n\ntype Props = OpenProps &\n  Pick<BaseProps, 'className'> &\n  BaseCallProps & { onImageUpload: (file: File) => void };\n\nconst MODAL_STATES = {\n  idle: 'idle',\n  textEditor: 'textEditor',\n  imageRec: 'imageRec',\n  presentationViewer: 'presentationViewer',\n};\n\nconst FooterContent = ({\n  structStr,\n  openHandler,\n  copyHandler,\n  onCancel,\n  isAddToCanvasDisabled,\n}) => {\n  return (\n    <div className={classes.footerContent}>\n      <button onClick={onCancel} className={classes.cancelButton}>\n        Cancel\n      </button>\n      <div className={classes.buttonsContainer}>\n        <DialogActionButton\n          key=\"openButton\"\n          disabled={!structStr}\n          clickHandler={openHandler}\n          styles={classes.openButton}\n          label=\"Open as New Project\"\n        />\n        <DialogActionButton\n          key=\"copyButton\"\n          disabled={!structStr || isAddToCanvasDisabled}\n          clickHandler={copyHandler}\n          styles={classes.copyButton}\n          label=\"Add to Canvas\"\n          title=\"Structure will be loaded as fragment and added to Clipboard\"\n        />\n      </div>\n    </div>\n  );\n};\n\nconst Open: FC<Props> = (props) => {\n  const {\n    server,\n    onImageUpload,\n    errorHandler,\n    isAnalyzingFile,\n    isRecognizeDisabled,\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    ignoreChiralFlag,\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    ...rest\n  } = props;\n\n  const [structStr, setStructStr] = useState<string>('');\n  const [structList, setStructList] = useState<string[]>([]);\n  const [fileName, setFileName] = useState<string>('');\n  const [opener, setOpener] = useState<any>();\n  const [currentState, setCurrentState] = useState(MODAL_STATES.idle);\n  const [isLoading, setIsLoading] = useState(false);\n  const ketcher = ketcherProvider.getKetcher();\n\n  useEffect(() => {\n    if (server) {\n      fileOpener(server).then((chosenOpener) => {\n        setOpener({ chosenOpener });\n      });\n    }\n  }, [server]);\n\n  const onFileLoad = (files) => {\n    setIsLoading(true);\n    const onLoad = (fileContent) => {\n      if (fileContent.isPPTX) {\n        setStructStr('');\n        setStructList(fileContent.structures);\n        setCurrentState(MODAL_STATES.presentationViewer);\n      } else {\n        setStructStr(fileContent);\n        setCurrentState(MODAL_STATES.textEditor);\n      }\n      setIsLoading(false);\n    };\n    const onError = () => {\n      setIsLoading(false);\n      errorHandler('Error processing file');\n    };\n\n    setFileName(files[0].name);\n    opener.chosenOpener(files[0]).then(onLoad, onError);\n  };\n\n  const onImageLoad = (files) => {\n    onImageUpload(files[0]);\n    setCurrentState(MODAL_STATES.imageRec);\n  };\n\n  // @TODO after Recognize is refactored this will not be necessary\n  // currently not destructuring onOk with other props so we can pass it with ...rest to Recognize below\n  const { onOk } = rest;\n\n  const copyHandler = () => {\n    const format = getFormatMimeTypeByFileName(fileName);\n    onOk({ structStr, fragment: true, 'input-format': format });\n  };\n\n  const openHandler = () => {\n    onOk({ structStr, fragment: false });\n  };\n\n  const withFooterContent =\n    (currentState === MODAL_STATES.textEditor ||\n      currentState === MODAL_STATES.presentationViewer) &&\n    !isAnalyzingFile;\n\n  // @TODO after refactoring of Recognize modal\n  // add Recognize rendering logic into ViewSwitcher component here\n  if (currentState === MODAL_STATES.imageRec) {\n    return <Recognize {...rest} />;\n  }\n\n  return (\n    <Dialog\n      title=\"Open structure\"\n      className={classes.open}\n      params={rest}\n      result={() => null}\n      data-testid=\"openStructureModal\"\n      footerContent={\n        withFooterContent ? (\n          <FooterContent\n            structStr={structStr}\n            openHandler={openHandler}\n            copyHandler={copyHandler}\n            onCancel={rest.onCancel}\n            isAddToCanvasDisabled={ketcher.editor.render.options.viewOnlyMode}\n          />\n        ) : undefined\n      }\n      buttons={[]}\n      withDivider\n    >\n      <ViewSwitcher\n        isAnalyzingFile={isAnalyzingFile}\n        fileName={fileName}\n        currentState={currentState}\n        states={MODAL_STATES}\n        selectClipboard={() => setCurrentState(MODAL_STATES.textEditor)}\n        fileLoadHandler={onFileLoad}\n        imageLoadHandler={onImageLoad}\n        errorHandler={errorHandler}\n        isRecognizeDisabled={isRecognizeDisabled}\n        structStr={structStr}\n        inputHandler={setStructStr}\n        autoFocus\n        structList={structList}\n      />\n      {isLoading && (\n        <div className={classes.loadingContainer}>\n          <LoadingCircles />\n        </div>\n      )}\n    </Dialog>\n  );\n};\n\nexport type { OpenProps };\nexport default Open;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport Open, { OpenProps } from './Open';\n\nimport { BaseCallProps } from '../../../modal.types';\nimport { connect } from 'react-redux';\nimport { exec } from '../../../../../component/cliparea/cliparea';\nimport { load } from '../../../../../state';\nimport { changeImage } from '../../../../../state/options';\n\ntype StateProps = OpenProps;\n\ntype DispatchProps = {\n  onOk: BaseCallProps['onOk'];\n  onImageUpload: (file: File) => void;\n};\n\nconst mapStateToProps = (state): StateProps => ({\n  server: state.server,\n  errorHandler: state.editor.errorHandler,\n  isRecognizeDisabled: state.actionState.recognize?.disabled,\n  isAnalyzingFile: state.requestsStatuses.isAnalyzingFile,\n  ignoreChiralFlag: state.editor.render.options.ignoreChiralFlag,\n});\n\nconst mapDispatchToProps = (dispatch): DispatchProps => ({\n  onOk: (result) => {\n    if (result.fragment) exec('copy');\n    dispatch(\n      load(result.structStr, {\n        badHeaderRecover: true,\n        fragment: result.fragment,\n        'input-format': result['input-format'],\n      }),\n      // TODO: Removed ownProps.onOk call. consider refactoring of load function in release 2.4\n      // See PR #731 (https://github.com/epam/ketcher/pull/731)\n    );\n  },\n  onImageUpload: (file) => {\n    dispatch(changeImage(file));\n  },\n});\n\nconst OpenContainer = connect(mapStateToProps, mapDispatchToProps)(Open);\nexport default OpenContainer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  Atom,\n  Bond,\n  RxnArrowMode,\n  StereoFlag,\n  Struct,\n  SupportedFormat,\n  getPropertiesByFormat,\n} from 'ketcher-core';\n\nexport function couldBeSaved(\n  struct: Struct,\n  format: SupportedFormat,\n): string | null {\n  const warnings: Array<string> = [];\n  const formatName: string = getPropertiesByFormat(format).name;\n\n  const rxnArrowsSize = struct.rxnArrows.size;\n  const hasRxnArrow = struct.hasRxnArrow();\n\n  if (format === 'smarts') {\n    const arrayOfAtoms: Array<Atom> = Array.from(struct.atoms.values());\n    const arrayOfBonds: Array<Bond> = Array.from(struct.bonds.values());\n\n    const atomsHaveUnsupportedProperties = arrayOfAtoms.some(\n      (atom) =>\n        atom.radical ||\n        atom.unsaturatedAtom ||\n        atom.exactChangeFlag ||\n        atom.invRet,\n    );\n    const bondsHaveUnsupportedProperties = arrayOfBonds.some(\n      (bond) =>\n        bond.reactingCenterStatus ||\n        bond.type === Bond.PATTERN.TYPE.DATIVE ||\n        bond.type === Bond.PATTERN.TYPE.HYDROGEN,\n    );\n    if (bondsHaveUnsupportedProperties || atomsHaveUnsupportedProperties) {\n      warnings.push(\n        `Structure contains query properties of atoms and bonds that are not supported in the SMARTS. Query properties will not be reflected in the file saved.`,\n      );\n    }\n  }\n\n  if (format === 'smiles') {\n    const arrayOfAtoms: Array<any> = Array.from(struct.atoms.values());\n    const hasGenerics = arrayOfAtoms.some((atom) => atom.pseudo);\n    if (hasGenerics) {\n      warnings.push(\n        `Structure contains generic atoms. They will be saved as any atom (*).`,\n      );\n    }\n  }\n\n  if (format !== 'ket') {\n    if (hasRxnArrow) {\n      const arrayOfArrows: Array<any> = Array.from(struct.rxnArrows.values());\n      const rxnArrowMode: RxnArrowMode = arrayOfArrows[0].mode;\n      if (\n        ![RxnArrowMode.OpenAngle, RxnArrowMode.Retrosynthetic].includes(\n          rxnArrowMode,\n        )\n      ) {\n        warnings.push(\n          `The ${formatName} format does not support drawn elements: the reaction ${rxnArrowMode} arrow will be replaced with the reaction arrow`,\n        );\n      }\n    }\n\n    // TODO: find better solution for case when Arrows > 1\n    if (rxnArrowsSize > 1) {\n      warnings.push(\n        `The ${formatName} format does not support drawn elements: reaction arrows will be lost.`,\n      );\n    }\n  }\n\n  if (\n    (\n      [\n        'inChI',\n        'inChIAuxInfo',\n        'inChIKey',\n        'smiles',\n        'smilesExt',\n      ] as SupportedFormat[]\n    ).includes(format)\n  ) {\n    if (struct.rgroups.size !== 0)\n      warnings.push(\n        `In ${formatName} the structure will be saved without R-group fragments`,\n      );\n\n    struct = struct.clone(); // need this: .getScaffold()\n    const isRg = struct.atoms.find((_ind, atom) => atom.label === 'R#');\n    if (isRg !== null)\n      warnings.push(\n        `In ${formatName} the structure will be saved without R-group members`,\n      );\n\n    const isSg = struct.sgroups.find(\n      (_ind, sg) =>\n        sg.type !== 'MUL' && !/^INDIGO_.+_DESC$/i.test(sg.data.fieldName),\n    );\n    if (isSg !== null)\n      warnings.push(\n        `In ${formatName} the structure will be saved without S-groups`,\n      );\n  }\n\n  if (\n    (\n      [\n        'smiles',\n        'smilesExt',\n        'smarts',\n        'inChI',\n        'inChIAuxInfo',\n        'inChIKey',\n        'cml',\n      ] as SupportedFormat[]\n    ).includes(format)\n  ) {\n    const isVal = struct.atoms.find((_ind, atom) => atom.explicitValence >= 0);\n    if (isVal !== null)\n      warnings.push(`In ${formatName} valence is not supported`);\n  }\n\n  if (\n    (['mol', 'rxn'] as SupportedFormat[]).includes(format) &&\n    Array.from(struct.frags.values()).some((fr) => {\n      if (fr?.enhancedStereoFlag) {\n        return fr.enhancedStereoFlag !== StereoFlag.Abs;\n      }\n      return false;\n    })\n  ) {\n    warnings.push(\n      `Structure contains enhanced stereochemistry features. Information will be partly lost.`,\n    );\n  }\n\n  if (\n    (\n      [\n        'inChI',\n        'inChIAuxInfo',\n        'inChIKey',\n        'smiles',\n        'smilesExt',\n      ] as SupportedFormat[]\n    ).includes(format)\n  ) {\n    if (struct.functionalGroups.size !== 0)\n      warnings.push(\n        `In ${formatName} the structure will be saved without functional groups.`,\n      );\n  }\n\n  if ((['cml'] as SupportedFormat[]).includes(format)) {\n    if (struct.functionalGroups.size !== 0)\n      warnings.push(\n        `Structure contains functional groups. In ${formatName} information will be partly lost.`,\n      );\n  }\n\n  if (warnings.length !== 0) return warnings.join('\\n');\n\n  return null;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Component } from 'react';\nimport classes from './Tabs.module.less';\nimport clsx from 'clsx';\n\nclass Tabs extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.state.tabIndex = props.tabIndex || 0;\n    this.props.changeTab(this.state.tabIndex);\n  }\n\n  // TODO: refactor the component\n  changeTab(ev, index) {\n    this.setState({ tabIndex: index });\n    if (this.props.changeTab) this.props.changeTab(index);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.tabIndex !== prevProps.tabIndex) {\n      this.setState({ tabIndex: this.props.tabIndex });\n    }\n  }\n\n  render() {\n    const { tabs, contentClassName, className, tabIndex } = this.props;\n    const tabPanel = tabs[this.state.tabIndex];\n    const Component = tabPanel?.component;\n    const componentProps = tabPanel?.props;\n    return (\n      <div>\n        <ul className={className} tabIndex={tabIndex}>\n          <li className={classes.tabs}>\n            {tabs.map((tabPanel, index) => (\n              <a // eslint-disable-line\n                key={index}\n                className={clsx({\n                  [classes.active]: this.state.tabIndex === index,\n                })}\n                onClick={(ev) => this.changeTab(ev, index)}\n                data-testid={\n                  this.state.tabIndex === index ? 'preview-tab' : 'warnings-tab'\n                }\n              >\n                {tabPanel.caption}\n              </a>\n            ))}\n          </li>\n        </ul>\n        {tabPanel && (\n          <div className={contentClassName}>\n            <Component {...componentProps} />\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Tabs;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport * as structFormat from '../../../../../data/convert/structConverter';\n\nimport { Component, createRef } from 'react';\nimport { createSelector } from 'reselect';\nimport Form, { Field } from '../../../../../component/form/form/form';\nimport {\n  FormatterFactory,\n  KetSerializer,\n  formatProperties,\n  getPropertiesByFormat,\n  getPropertiesByImgFormat,\n  b64toBlob,\n  KetcherLogger,\n  Atom,\n  isClipboardAPIAvailable,\n  legacyCopy,\n} from 'ketcher-core';\n\nimport { Dialog } from '../../../../components';\nimport Tabs from 'src/script/ui/component/view/Tabs';\nimport { ErrorsContext } from '../../../../../../../contexts';\nimport { SaveButton } from '../../../../../component/view/savebutton';\nimport { check } from '../../../../../state/server';\nimport classes from './Save.module.less';\nimport { connect } from 'react-redux';\nimport { saveUserTmpl } from '../../../../../state/templates';\nimport { updateFormState } from '../../../../../state/modal/form';\nimport Select from '../../../../../component/form/Select';\nimport { getSelectOptionsFromSchema } from '../../../../../utils';\nimport { LoadingCircles } from 'src/script/ui/views/components/Spinner';\nimport { IconButton } from 'components';\n\nconst saveSchema = {\n  title: 'Save',\n  type: 'object',\n  properties: {\n    filename: {\n      title: 'File name:',\n      type: 'string',\n      maxLength: 128,\n      pattern: '^[^.<>:?\"*\\\\\\\\|\\\\/][^<>:?\"*\\\\\\\\|\\\\/]*$',\n      invalidMessage: (res) => {\n        if (!res) return 'Filename should contain at least one character';\n        if (res.length > 128) return 'Filename is too long';\n        return \"A filename cannot contain characters: \\\\ / : * ? \\\" < > | and cannot start with '.'\";\n      },\n    },\n    format: {\n      title: 'File format:',\n      enum: Object.keys(formatProperties),\n      enumNames: Object.keys(formatProperties).map(\n        (format) => formatProperties[format].name,\n      ),\n    },\n  },\n};\n\nclass SaveDialog extends Component {\n  static contextType = ErrorsContext;\n  constructor(props) {\n    super(props);\n    this.state = {\n      disableControls: true,\n      imageFormat: 'svg',\n      tabIndex: 0,\n      isLoading: true,\n    };\n    this.isRxn =\n      this.props.struct.hasRxnArrow() || this.props.struct.hasMultitailArrow();\n    this.textAreaRef = createRef();\n\n    const formats = !this.props.server\n      ? ['ket', this.isRxn ? 'rxn' : 'mol', 'smiles']\n      : [\n          'ket',\n          this.isRxn ? 'rxn' : 'mol',\n          this.isRxn ? 'rxnV3000' : 'molV3000',\n          'sdf',\n          'sdfV3000',\n          'rdf',\n          'rdfV3000',\n          'smarts',\n          'smiles',\n          'smilesExt',\n          'cml',\n          '<----firstDivider--->', // for dividers in select list\n          'inChI',\n          'inChIAuxInfo',\n          'inChIKey',\n          '<----secondDivider--->', // for dividers in select list\n          'svg',\n          'png',\n          'cdxml',\n          'cdx',\n          'binaryCdx',\n        ];\n\n    this.saveSchema = saveSchema;\n    this.saveSchema.properties.format = Object.assign(\n      this.saveSchema.properties.format,\n      {\n        enum: formats,\n        enumNames: formats.map((format) => {\n          const formatProps =\n            getPropertiesByFormat(format) || getPropertiesByImgFormat(format);\n          return formatProps?.name;\n        }),\n      },\n    );\n  }\n\n  componentDidMount() {\n    const { checkOptions } = this.props.checkState;\n    this.props.onCheck(checkOptions);\n    this.changeType(this.isRxn ? 'rxn' : 'mol').then(\n      (res) => res instanceof Error && this.setState({ disableControls: true }),\n    );\n  }\n\n  isImageFormat = (format) => {\n    return !!getPropertiesByImgFormat(format);\n  };\n\n  isBinaryCdxFormat = (format) => {\n    return format === 'binaryCdx';\n  };\n\n  showStructWarningMessage = (format) => {\n    const { errors } = this.props.formState;\n    return format !== 'mol' && Object.keys(errors).length > 0;\n  };\n\n  changeType = (type) => {\n    const { struct, server, options, formState, ignoreChiralFlag } = this.props;\n\n    const errorHandler = this.context.errorHandler;\n    if (this.isImageFormat(type)) {\n      const ketSerialize = new KetSerializer();\n      const structStr = ketSerialize.serialize(struct);\n      this.setState({\n        disableControls: true,\n        tabIndex: 0,\n        imageFormat: type,\n        structStr,\n        isLoading: true,\n      });\n      const serverOptions = { ...options };\n\n      serverOptions.outputFormat = type;\n\n      return server\n        .generateImageAsBase64(structStr, serverOptions)\n        .then((base64) => {\n          this.setState({\n            disableControls: false,\n            tabIndex: 0,\n            imageSrc: base64,\n            isLoading: false,\n          });\n        })\n        .catch((e) => {\n          KetcherLogger.error('Save.jsx::SaveDialog::changeType', e);\n          errorHandler(e);\n          this.props.onResetForm(formState);\n          return e;\n        });\n    } else {\n      this.setState({ disableControls: true, isLoading: true });\n      const factory = new FormatterFactory(server);\n      // temporary check if query properties are used\n      const queryPropertiesAreUsed =\n        type === 'mol' &&\n        Array.from(struct.atoms).find(\n          ([_, atom]) =>\n            atom.queryProperties.aromaticity ||\n            atom.queryProperties.connectivity ||\n            atom.queryProperties.ringMembership ||\n            atom.queryProperties.ringSize ||\n            atom.queryProperties.customQuery ||\n            atom.implicitHCount,\n        );\n      const service = factory.create(\n        type,\n        { ...options, ignoreChiralFlag },\n        queryPropertiesAreUsed,\n      );\n      const getStructFromStringByType = () => {\n        if (type === 'ket') {\n          const selection = this.props.editor.selection();\n          if (selection?.atoms?.length > 0) {\n            selection.atoms = selection.atoms.filter((selectedAtomId) => {\n              return !Atom.isSuperatomLeavingGroupAtom(struct, selectedAtomId);\n            });\n          }\n          return service.getStructureFromStructAsync(\n            struct,\n            undefined,\n            selection,\n          );\n        }\n        return service.getStructureFromStructAsync(struct);\n      };\n      return getStructFromStringByType()\n        .then(\n          (structStr) => {\n            this.setState({\n              tabIndex: 0,\n              structStr,\n            });\n          },\n          (e) => {\n            errorHandler(e.message);\n            this.props.onResetForm(formState);\n            return e;\n          },\n        )\n        .finally(() => {\n          this.setState({\n            disableControls: false,\n            tabIndex: 0,\n            isLoading: false,\n          });\n        });\n    }\n  };\n\n  changeTab = (index) => {\n    this.setState({ tabIndex: index });\n  };\n\n  getWarnings = (format) => {\n    const { struct, moleculeErrors } = this.props;\n    const warnings = [];\n    const structWarning =\n      'Structure contains errors, please check the data, otherwise you ' +\n      'can lose some properties or the whole structure after saving in this format.';\n    if (!this.isImageFormat(format)) {\n      const saveWarning = structFormat.couldBeSaved(struct, format);\n      const isStructInvalid = this.showStructWarningMessage(format);\n      if (isStructInvalid) {\n        warnings.push(structWarning);\n      }\n      if (saveWarning) {\n        warnings.push(saveWarning);\n      }\n    }\n\n    if (moleculeErrors) {\n      const filteredMoleculeErrors = Object.values(moleculeErrors).filter(\n        (error) => {\n          if (format === 'smarts' || format === 'ket') {\n            return !error.includes('Structure contains query features');\n          } else {\n            return true;\n          }\n        },\n      );\n      warnings.push(...Object.values(filteredMoleculeErrors));\n    }\n    return warnings;\n  };\n\n  renderForm = () => {\n    const formState = Object.assign({}, this.props.formState);\n    const { filename, format } = formState.result;\n    const warnings = this.getWarnings(format);\n    const tabs =\n      warnings.length === 0\n        ? [\n            {\n              caption: 'Preview',\n              component: this.renderSaveFile,\n              tabIndex: 0,\n            },\n          ]\n        : [\n            {\n              caption: 'Preview',\n              component: this.renderSaveFile,\n              tabIndex: 0,\n            },\n            {\n              caption: 'Warnings',\n              component: this.renderWarnings,\n              tabIndex: 1,\n            },\n          ];\n\n    return (\n      <div className={classes.formContainer}>\n        <Form\n          schema={this.saveSchema}\n          init={{\n            filename,\n            format: this.isRxn ? 'rxn' : 'mol',\n          }}\n          {...formState}\n        >\n          <Field name=\"filename\" />\n          <Field\n            name=\"format\"\n            onChange={this.changeType}\n            options={getSelectOptionsFromSchema(\n              this.saveSchema.properties.format,\n            )}\n            component={Select}\n            className=\"file-format-list\"\n            data-testid=\"file-format-list\"\n          />\n        </Form>\n        <Tabs\n          className={classes.tabs}\n          captions={tabs}\n          tabIndex={this.state.tabIndex}\n          changeTab={this.changeTab}\n          tabs={tabs}\n        />\n      </div>\n    );\n  };\n\n  handleCopy = (event) => {\n    const { structStr } = this.state;\n\n    try {\n      if (isClipboardAPIAvailable()) {\n        navigator.clipboard.writeText(structStr);\n      } else {\n        legacyCopy(event.clipboardData, {\n          'text/plain': structStr,\n        });\n        event.preventDefault();\n      }\n    } catch (e) {\n      KetcherLogger.error('copyAs.js::copyAs', e);\n      this.props.editor.errorHandler(\n        'This feature is not available in your browser',\n      );\n    }\n  };\n\n  renderSaveFile = () => {\n    const formState = Object.assign({}, this.props.formState);\n    delete formState.moleculeErrors;\n    const { format } = formState.result;\n    const { structStr, imageSrc, isLoading } = this.state;\n    const isCleanStruct = this.props.struct.isBlank();\n\n    const LoadingState = () => (\n      <div className={classes.loadingCirclesContainer}>\n        <LoadingCircles />\n      </div>\n    );\n\n    const ImageContent = () => (\n      <div className={classes.imageContainer}>\n        {!isCleanStruct && (\n          <img\n            src={`data:image/${format}+xml;base64,${imageSrc}`}\n            alt={`${format} preview`}\n          />\n        )}\n      </div>\n    );\n\n    const BinaryContent = () => (\n      <div className={classes.previewBackground}>\n        <textarea\n          value=\"Can not display binary content\"\n          className={classes.previewArea}\n          readOnly\n          ref={this.textAreaRef}\n          data-testid=\"preview-area-binary\"\n        />\n      </div>\n    );\n\n    const PreviewContent = ({ format }) => {\n      return (\n        <div className={classes.previewBackground}>\n          <textarea\n            value={structStr}\n            className={classes.previewArea}\n            readOnly\n            ref={this.textAreaRef}\n            data-testid={`${format}-preview-area-text`}\n          />\n          <IconButton\n            onClick={this.handleCopy}\n            iconName=\"copy\"\n            title=\"Copy to clipboard\"\n            testId=\"copy-to-clipboard\"\n          />\n        </div>\n      );\n    };\n\n    if (isLoading) {\n      return <LoadingState />;\n    } else if (this.isImageFormat(format)) {\n      return <ImageContent />;\n    } else if (this.isBinaryCdxFormat(format)) {\n      return <BinaryContent />;\n    } else {\n      return <PreviewContent format={format} />;\n    }\n  };\n\n  renderWarnings = () => {\n    const formState = Object.assign({}, this.props.formState);\n    const { format } = formState.result;\n    const warnings = this.getWarnings(format);\n\n    return warnings.length ? (\n      <div className={classes.warnings}>\n        {warnings.map((warning) => (\n          <div className={classes.warningsContainer} key={warning}>\n            <span className={classes.warningsArr} data-testid=\"WarningTextArea\">\n              {warning}\n            </span>\n          </div>\n        ))}\n      </div>\n    ) : null;\n  };\n\n  getButtons = () => {\n    const { disableControls, imageFormat, isLoading, structStr } = this.state;\n    const { options, formState } = this.props;\n    const { filename, format } = formState.result;\n    const isCleanStruct = this.props.struct.isBlank();\n\n    options.outputFormat = imageFormat;\n\n    const savingStruct =\n      this.isBinaryCdxFormat(format) && !isLoading\n        ? b64toBlob(structStr)\n        : structStr;\n\n    const isMoleculeContain =\n      this.props.struct.atoms.size && this.props.struct.bonds.size;\n    const buttons = [\n      <button\n        key=\"save-tmpl\"\n        className={classes.saveTmpl}\n        disabled={disableControls || isCleanStruct || !isMoleculeContain}\n        onClick={() => this.props.onTmplSave(this.props.struct)}\n      >\n        Save to Templates\n      </button>,\n    ];\n\n    buttons.push(\n      <button\n        key=\"cancel\"\n        mode=\"onCancel\"\n        className={classes.cancel}\n        onClick={() => this.props.onOk({})}\n        type=\"button\"\n      >\n        Cancel\n      </button>,\n    );\n\n    if (this.isImageFormat(format)) {\n      buttons.push(\n        <SaveButton\n          mode=\"saveImage\"\n          options={options}\n          data={structStr}\n          filename={filename}\n          key=\"save-image-button\"\n          type={`image/${format}+xml`}\n          onSave={this.props.onOk}\n          disabled={\n            disableControls ||\n            !formState.valid ||\n            isCleanStruct ||\n            !this.props.server\n          }\n          className={classes.ok}\n        >\n          Save\n        </SaveButton>,\n      );\n    } else {\n      buttons.push(\n        <SaveButton\n          mode=\"saveFile\"\n          data={savingStruct}\n          filename={filename + getPropertiesByFormat(format).extensions[0]}\n          key=\"save-file-button\"\n          type={format.mime}\n          server={this.props.server}\n          onSave={this.props.onOk}\n          disabled={disableControls || !formState.valid || isCleanStruct}\n          className={classes.ok}\n        >\n          Save\n        </SaveButton>,\n      );\n    }\n    return buttons;\n  };\n\n  render() {\n    return (\n      <Dialog\n        className={classes.dialog}\n        title=\"Save Structure\"\n        params={this.props}\n        buttons={this.getButtons()}\n        needMargin={false}\n        withDivider={true}\n      >\n        {this.renderForm()}\n      </Dialog>\n    );\n  }\n}\n\nconst getOptions = (state) => state.options;\nconst serverSettingsSelector = createSelector([getOptions], (options) =>\n  options.getServerSettings(),\n);\n\nconst mapStateToProps = (state) => ({\n  server: state.options.app.server ? state.server : null,\n  struct: state.editor.struct(),\n  options: serverSettingsSelector(state),\n  formState: state.modal.form,\n  moleculeErrors: state.modal.form.moleculeErrors,\n  checkState: state.options.check,\n  bondThickness: state.options.settings.bondThickness,\n  ignoreChiralFlag: state.editor.render.options.ignoreChiralFlag,\n  editor: state.editor,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  onCheck: (checkOptions) => dispatch(check(checkOptions)),\n  onTmplSave: (struct) => dispatch(saveUserTmpl(struct)),\n  onResetForm: (prevState) => dispatch(updateFormState(prevState)),\n});\n\nconst Save = connect(mapStateToProps, mapDispatchToProps)(SaveDialog);\n\nexport default Save;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport Form, { Field } from '../../../component/form/form/form';\nimport { StereoLabel, Struct } from 'ketcher-core';\n\nimport { Dialog } from '../../../views/components';\nimport { FC } from 'react';\nimport classes from './enhancedStereo.module.less';\nimport { connect } from 'react-redux';\nimport { range } from 'lodash';\n\ninterface EnhancedStereoResult {\n  andNumber: number;\n  orNumber: number;\n  type: StereoLabel;\n}\n\ninterface EnhancedStereoFormState {\n  result: EnhancedStereoResult;\n  valid: boolean;\n  errors: string[];\n}\n\ninterface EnhancedStereoProps {\n  className: string;\n  init: EnhancedStereoResult & { init?: true };\n  formState: EnhancedStereoFormState;\n  struct: Struct;\n}\n\ninterface EnhancedStereoCallProps {\n  onCancel: () => void;\n  onOk: (res: any) => void;\n}\n\ntype Props = EnhancedStereoProps & EnhancedStereoCallProps;\n\nconst EnhancedStereo: FC<Props> = (props) => {\n  const { struct, formState, init, ...rest } = props;\n  const { result, valid } = formState;\n\n  const stereoLabels: Array<string> = findStereLabels(\n    struct,\n    Array.from(struct.atoms.keys()),\n  );\n\n  const maxAnd: number = maxOfAnds(stereoLabels);\n  const maxOr: number = maxOfOrs(stereoLabels);\n\n  const enhancedStereoSchema = {\n    title: 'Enhanced Stereo',\n    type: 'object',\n    properties: {\n      type: {\n        type: 'string',\n      },\n      andNumber: {\n        type: 'integer',\n      },\n      orNumber: {\n        type: 'integer',\n      },\n    },\n  };\n\n  return (\n    <Dialog\n      title=\"Enhanced Stereochemistry\"\n      className={classes.enhancedStereo}\n      params={rest}\n      result={() => result}\n      valid={() => valid}\n      withDivider\n      buttons={['Cancel', 'OK']}\n      buttonsNameMap={{ OK: 'Apply' }}\n    >\n      <Form schema={enhancedStereoSchema} init={init} {...formState}>\n        <fieldset>\n          {/* eslint-disable jsx-a11y/label-has-associated-control */}\n          <label>\n            {/* eslint-enable jsx-a11y/label-has-associated-control */}\n            <Field\n              name=\"type\"\n              labelPos={false}\n              type=\"radio\"\n              value={StereoLabel.Abs}\n              checked={result.type === StereoLabel.Abs}\n            />\n            ABS\n          </label>\n          {maxAnd !== 0 && (\n            <label>\n              {/* eslint-disable jsx-a11y/label-has-associated-control */}\n              <Field\n                name=\"type\"\n                labelPos={false}\n                type=\"radio\"\n                value={StereoLabel.And}\n                checked={result.type === StereoLabel.And}\n              />\n              Add to AND\n              <Field\n                name=\"andNumber\"\n                schema={range(1, maxAnd + 1)}\n                type=\"text\"\n                className={classes.labelGroupSelect}\n              />\n              Group\n            </label>\n          )}\n          {maxOr !== 0 && (\n            <label>\n              {/* eslint-disable jsx-a11y/label-has-associated-control */}\n              <Field\n                name=\"type\"\n                labelPos={false}\n                type=\"radio\"\n                value={StereoLabel.Or}\n                checked={result.type === StereoLabel.Or}\n              />\n              Add to OR\n              <Field\n                name=\"orNumber\"\n                schema={range(1, maxOr + 1)}\n                type=\"text\"\n                className={classes.labelGroupSelect}\n              />\n              Group\n            </label>\n          )}\n          <label>\n            {/* eslint-disable jsx-a11y/label-has-associated-control */}\n            <Field\n              name=\"type\"\n              labelPos={false}\n              type=\"radio\"\n              value={`${StereoLabel.And}${maxAnd + 1}`}\n              checked={result.type === `${StereoLabel.And}${maxAnd + 1}`}\n            />\n            Create new AND Group\n          </label>\n          <label>\n            {/* eslint-disable jsx-a11y/label-has-associated-control */}\n            <Field\n              name=\"type\"\n              labelPos={false}\n              type=\"radio\"\n              value={`${StereoLabel.Or}${maxOr + 1}`}\n              checked={result.type === `${StereoLabel.Or}${maxOr + 1}`}\n            />\n            Create new OR Group\n          </label>\n        </fieldset>\n      </Form>\n    </Dialog>\n  );\n};\n\n// TODO: Move the function below to Struct class\nfunction findStereLabels(struct, aids): Array<string> {\n  const stereoIds = aids.filter(\n    (aid) => struct.atoms.get(aid).stereoLabel !== null,\n  );\n  return stereoIds.map((aid) => struct.atoms.get(aid).stereoLabel);\n}\n\nfunction maxOfAnds(stereLabels): number {\n  const numbers = stereLabels.map((label) => {\n    return label.match(/&/) ? +label.match(/\\d+/)?.join() : 0;\n  });\n  return Math.max(...numbers);\n}\n\nfunction maxOfOrs(stereLabels): number {\n  const numbers = stereLabels.map((label) => {\n    return label.match(/or/) ? +label.match(/\\d+/)?.join() : 0;\n  });\n  return Math.max(...numbers);\n}\n\nexport default connect((state) => ({\n  formState: (state as any).modal.form || { result: {}, valid: false },\n  struct: (state as any).editor.struct(),\n}))(EnhancedStereo);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport Form, { Field } from '../../component/form/form/form';\n\nimport { Dialog } from '../../views/components';\nimport { Elements } from 'ketcher-core';\nimport { capitalize } from 'lodash/fp';\nimport { connect } from 'react-redux';\nimport { labelEdit as labelEditSchema } from '../../data/schema/struct-schema';\nimport styles from './labelEdit.module.less';\n\nfunction serialize(lc) {\n  const charge = Math.abs(lc.charge);\n  const radical = ['', ':', '.', '^^'][lc.radical] || '';\n  let sign = '';\n  if (charge) sign = lc.charge < 0 ? '-' : '+';\n  return (\n    (lc.isotope || '') + lc.label + radical + (charge > 1 ? charge : '') + sign\n  );\n}\n\nfunction deserialize(value) {\n  const match = value.match(\n    /^(\\d+)?([a-z*]{1,3})(\\.|:|\\^\\^)?(\\d+[-+]|[-+])?$/i,\n  ); // TODO: radical on last place\n  if (match) {\n    const label = match[2] === '*' ? 'A' : capitalize(match[2]);\n    let charge = null;\n    let isotope = null;\n    let radical = 0;\n\n    if (match[1]) isotope = parseInt(match[1]);\n\n    if (match[3]) radical = { ':': 1, '.': 2, '^^': 3 }[match[3]];\n\n    if (match[4]) {\n      charge = parseInt(match[4]);\n      if (isNaN(charge))\n        // eslint-disable-line\n        charge = 1;\n      if (match[4].endsWith('-')) charge = -charge;\n    }\n    // Not consistant\n    if (\n      label === 'A' ||\n      label === 'Q' ||\n      label === 'X' ||\n      label === 'M' ||\n      Elements.get(label)\n    )\n      return { label, charge, isotope, radical };\n  }\n  return null;\n}\n\nfunction LabelEdit(props) {\n  const init = { label: props.letter || serialize(props) };\n  const { formState, ...prop } = props;\n  const { result, valid } = formState;\n\n  return (\n    <Dialog\n      title=\"Label Edit\"\n      valid={() => valid}\n      withDivider={true}\n      needMargin={false}\n      result={() => deserialize(result.label)}\n      className={styles.labelEdit}\n      buttons={['Cancel', 'OK']}\n      buttonsNameMap={{ OK: 'Apply' }}\n      focusable={false}\n      params={prop}\n    >\n      <Form\n        schema={labelEditSchema}\n        customValid={{ label: (l) => deserialize(l) }}\n        init={init}\n        {...formState}\n      >\n        <Field\n          name=\"label\"\n          maxLength=\"20\"\n          size=\"10\"\n          autoFocus\n          className={styles.labelEditInputField}\n        />\n      </Form>\n    </Dialog>\n  );\n}\n\nexport default connect((store) => ({ formState: store.modal.form }))(LabelEdit);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { ElementColor } from 'ketcher-core';\nimport classes from './AtomInfo.module.less';\nimport clsx from 'clsx';\n\nfunction AtomInfo({ el, isInfo }) {\n  const numberStyle = {\n    color: ElementColor[el.label] || 'black',\n    fontSize: '12px',\n  };\n  const elemStyle = {\n    color: ElementColor[el.label] || 'black',\n    fontWeight: 'bold',\n    fontSize: '18px',\n  };\n  return (\n    <div className={clsx(classes.ket_atom_info, !isInfo && classes.none)}>\n      <div style={numberStyle}>{el.number}</div>\n      <span style={elemStyle}>{el.label}</span>\n      <br />\n      {el.title}\n      <br />\n      {el.mass}\n    </div>\n  );\n}\n\nexport default AtomInfo;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { range } from 'lodash/fp';\n\nconst PERIODIC_TABLE_COLUMNS = 19;\n\nfunction Header() {\n  return (\n    <tbody>\n      <tr>\n        {range(0, PERIODIC_TABLE_COLUMNS).map((index) => (\n          <th key={index}>{index || ''}</th>\n        ))}\n      </tr>\n    </tbody>\n  );\n}\n\nexport default Header;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport Atom from '../../../../../../../component/view/Atom';\nimport clsx from 'clsx';\n\nfunction MainRow({\n  row,\n  caption,\n  refer,\n  onAtomSelect,\n  onDoubleClick,\n  currentEvents,\n  atomClassNames,\n  className,\n}) {\n  return (\n    <tbody>\n      <tr>\n        <th>{caption}</th>\n        {row.map((element, index) =>\n          typeof element !== 'number' ? ( // eslint-disable-line\n            <td key={index}>\n              <Atom\n                el={element}\n                className={clsx(...atomClassNames(element))}\n                onClick={() => onAtomSelect(element.label)}\n                onDoubleClick={() => onDoubleClick()}\n                {...currentEvents(element)}\n              />\n            </td>\n          ) : refer(element) ? (\n            <td key={index} className={className}>\n              {refer(element)}\n            </td>\n          ) : (\n            <td key={index} colSpan={element} />\n          ),\n        )}\n      </tr>\n    </tbody>\n  );\n}\n\nexport default MainRow;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport Atom from '../../../../../../../component/view/Atom';\nimport clsx from 'clsx';\n\nfunction OutinerRow({\n  row,\n  caption,\n  onAtomSelect,\n  onDoubleClick,\n  currentEvents,\n  atomClassNames,\n  className,\n}) {\n  return (\n    <tbody>\n      <tr>\n        <th colSpan=\"3\" className={className}>\n          {caption}\n        </th>\n        {row.map((element) => (\n          <td key={element.label}>\n            <Atom\n              el={element}\n              className={clsx(...atomClassNames(element))}\n              onClick={() => onAtomSelect(element.label)}\n              onDoubleClick={() => onDoubleClick()}\n              {...currentEvents(element)}\n            />\n          </td>\n        ))}\n        <td />\n      </tr>\n    </tbody>\n  );\n}\n\nexport default OutinerRow;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Header, MainRow, OutinerRow } from './components';\nimport { Component } from 'react';\n\nimport { Elements } from 'ketcher-core';\nimport styles from './ElementsTable.module.less';\n\nconst metalPrefix = [\n  'alkali',\n  'alkaline-earth',\n  'transition',\n  'post-transition',\n]; // 'lanthanide', 'actinide'\nconst atomClassNames = {\n  metal: 'metal',\n  unknownProps: 'unknown-props',\n  unknownState: 'unknown-state',\n  button: 'button',\n  selected: 'selected',\n};\nconst beforeSpan = {\n  He: 16,\n  B: 10,\n  Al: 10,\n  Hf: 1,\n  Rf: 1,\n};\nconst ACTINIDE = 'actinide';\nconst LANTHANIDE = 'lanthanide';\nconst main = rowPartition(\n  Elements.filter(\n    (item) =>\n      item &&\n      item.type !== ACTINIDE &&\n      item.type !== LANTHANIDE &&\n      item.number !== 89 &&\n      item.number !== 57,\n  ),\n);\nconst lanthanides = Elements.filter(\n  (item) => item && (item.type === LANTHANIDE || item.number === 57),\n);\nconst actinides = Elements.filter(\n  (item) => item && (item.type === ACTINIDE || item.number === 89),\n);\n\nfunction rowPartition(elements) {\n  return elements.reduce((result, item) => {\n    const row = result[item.period - 1];\n    if (!row) {\n      result.push([item]);\n    } else {\n      if (beforeSpan[item.label]) row.push(beforeSpan[item.label]);\n      row.push(item);\n    }\n    return result;\n  }, []);\n}\n\nclass ElementsTable extends Component {\n  // eslint-disable-line\n  shouldComponentUpdate(nextProps) {\n    return nextProps.value !== this.props.value;\n  }\n\n  getAtomClassNames = (item) => {\n    const { selected } = this.props;\n\n    const type = metalPrefix.includes(item.type)\n      ? `${item.type} ${atomClassNames.metal}`\n      : item.type || atomClassNames.unknownProps;\n\n    const classes = [\n      ...type.split(' '),\n      item.state || atomClassNames.unknownState,\n      item.origin,\n      atomClassNames.button,\n      selected(item.label) && atomClassNames.selected,\n    ];\n\n    return classes.map((className) => {\n      return styles[className];\n    });\n  };\n\n  render() {\n    const { currentEvents, onAtomSelect, onDoubleClick } = this.props;\n    const callbacks = { currentEvents, onAtomSelect, onDoubleClick };\n    return (\n      <table\n        className={styles.table}\n        summary=\"Periodic table of the chemical elements\"\n      >\n        <Header />\n        {main.map((row, index) => (\n          <MainRow\n            atomClassNames={this.getAtomClassNames}\n            className={styles.main_row}\n            key={index}\n            row={row}\n            caption={index + 1}\n            refer={(element) => element === 1 && (index === 5 ? '*' : '**')}\n            {...callbacks}\n          />\n        ))}\n        <OutinerRow\n          atomClassNames={this.getAtomClassNames}\n          className={styles.outiner_row}\n          row={lanthanides}\n          caption=\"*\"\n          {...callbacks}\n        />\n        <OutinerRow\n          atomClassNames={this.getAtomClassNames}\n          className={styles.outiner_row}\n          row={actinides}\n          caption=\"**\"\n          {...callbacks}\n        />\n      </table>\n    );\n  }\n}\n\nexport default ElementsTable;\n","/****************************************************************************\n * Copyright 2023 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport styles from './BoxWithLines.module.less';\n\nexport const HorizontalBoxWithLines = () => {\n  return (\n    <div className={styles.horizintalNodeLines}>\n      <div className={styles.upperLines} />\n      <div className={styles.lowerLine} />\n    </div>\n  );\n};\n\nexport const VerticalBoxWithLines = () => {\n  return (\n    <div className={styles.verticalNodeLines}>\n      <div className={styles.upperLines} />\n      <div className={styles.lowerLine} />\n    </div>\n  );\n};\n","export const isGenericGroup = (group) => {\n  const cyclicGroups = [\n    'Acyclic',\n    'Cyclic',\n    'Acyclic Carbo',\n    'Cyclic Carbo',\n    'Acyclic Hetero',\n    'Cyclic Hetero',\n  ];\n  return cyclicGroups.includes(group);\n};\n","/****************************************************************************\n * Copyright 2023 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport clsx from 'clsx';\nimport { GenItem } from 'ketcher-core';\nimport classes from './ButtonGenSet.module.less';\n\ntype ButtonGenSetProps = {\n  button: GenItem;\n  onAtomSelect: (label: string, activateImmediately: boolean) => void;\n  selected: (label: string) => boolean;\n  disabled: boolean;\n};\n\nconst ButtonGenSet = ({\n  button,\n  onAtomSelect,\n  selected,\n  disabled,\n}: ButtonGenSetProps) => {\n  const titleText = disabled\n    ? `${button.label} is disabled`\n    : button.description || button.label;\n\n  return (\n    <button\n      onClick={() => onAtomSelect(button.label, false)}\n      onDoubleClick={() => onAtomSelect(button.label, true)}\n      title={titleText}\n      disabled={disabled}\n      className={clsx(\n        {\n          [classes.selected]: selected(button.label),\n        },\n        classes.button,\n      )}\n    >\n      {button.label}\n    </button>\n  );\n};\n\nexport default ButtonGenSet;\n","/****************************************************************************\n * Copyright 2023 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport type { GenItemSet } from 'ketcher-core';\nimport classes from './GenSet.module.less';\nimport { isGenericGroup } from '../../helpers';\nimport ButtonGenSet from './components/ButtonGenSet';\n\ntype GenSetProps = {\n  labels: GenItemSet[];\n  selected: (label: string) => boolean;\n  onAtomSelect: (label: string, activateImmediately: boolean) => void;\n  className?: string;\n  group: string;\n  disabledQueryElements: Array<string> | null;\n};\n\nconst getGroupClassName = (groupName: string) => groupName.replaceAll(' ', '');\n\nfunction GenSet({\n  labels,\n  selected,\n  onAtomSelect,\n  className,\n  group,\n  disabledQueryElements,\n}: GenSetProps) {\n  return (\n    <>\n      {labels.map((item, index) => {\n        const buttons = item.items;\n        const caption = item.displayName;\n        return (\n          <fieldset className={className} key={index}>\n            <div className={classes[getGroupClassName(group)]}>\n              {buttons.map((button, index) => (\n                <ButtonGenSet\n                  key={index}\n                  button={button}\n                  onAtomSelect={onAtomSelect}\n                  selected={selected}\n                  disabled={Boolean(\n                    disabledQueryElements?.includes(button.label),\n                  )}\n                />\n              ))}\n            </div>\n            {!isGenericGroup(group) && caption && (\n              <div className={classes.legendBox}>\n                <legend>{caption}</legend>\n              </div>\n            )}\n            {isGenericGroup(group) && caption && (\n              <div className={classes.genGroupLegendBox}>\n                <legend className={classes.genGroupLegend}>{caption}</legend>\n              </div>\n            )}\n          </fieldset>\n        );\n      })}\n    </>\n  );\n}\n\nexport { GenSet };\n","/****************************************************************************\n * Copyright 2023 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport type { GenGroup as GenGroupType } from 'ketcher-core';\nimport { GenSet } from './GenSet';\nimport { isGenericGroup } from '../../helpers';\nimport styles from './GenGroup.module.less';\n\ntype GenProps = {\n  selected: (label: string) => boolean;\n  onAtomSelect: (label: string, activateImmediately: boolean) => void;\n  group: GenGroupType;\n  disabledQueryElements: Array<string> | null;\n};\n\nconst getLegendClassname = (title: string) => {\n  const mainTitles = [\n    'Atom Generics',\n    'Special Nodes',\n    'Group Generics',\n    'Acyclic',\n    'Cyclic',\n  ];\n  if (mainTitles.includes(title)) return 'legendMain';\n  return 'legend';\n};\n\nconst GenGroup = ({\n  group,\n  onAtomSelect,\n  selected,\n  disabledQueryElements,\n}: GenProps) => {\n  return (\n    <div className={styles.fieldFlexWrapper}>\n      <fieldset className={styles.fieldset}>\n        <legend className={styles[getLegendClassname(group.title)]}>\n          {group.title}\n        </legend>\n        <div\n          className={\n            isGenericGroup(group.title)\n              ? styles.genButtonContainer\n              : styles.buttonContainer\n          }\n        >\n          {group.itemSets && (\n            <GenSet\n              labels={group.itemSets}\n              selected={selected}\n              onAtomSelect={onAtomSelect}\n              className={styles.subGroup}\n              group={group.title}\n              disabledQueryElements={disabledQueryElements}\n            />\n          )}\n        </div>\n      </fieldset>\n    </div>\n  );\n};\n\nexport { GenGroup };\n","/****************************************************************************\n * Copyright 2023 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { HorizontalBoxWithLines, VerticalBoxWithLines } from './BoxWithLines';\n\nimport { GenGroup } from './GenGroup';\nimport { Generics } from 'ketcher-core';\nimport classes from './GenericGroups.module.less';\nimport { groupNames } from './';\n\ntype GenericGroupsProps = {\n  selected: (label: string) => boolean;\n  onAtomSelect: (label: string, activateImmediately: boolean) => void;\n  disabledQueryElements: Array<string> | null;\n};\n\nconst getGenericsGroupsMap = (tree) => {\n  let newGroups = {};\n  for (const groupName of Object.keys(tree)) {\n    newGroups[groupName] = { ...tree[groupName] };\n    if (newGroups[groupName]?.subGroups) {\n      newGroups = {\n        ...newGroups,\n        ...getGenericsGroupsMap(newGroups[groupName].subGroups),\n      };\n    }\n  }\n  return newGroups;\n};\n\nconst groupsMap = getGenericsGroupsMap(Generics);\n\nconst renderGenGroupComponent = (\n  group,\n  selected,\n  onAtomSelect,\n  disabledQueryElements,\n) => (\n  <GenGroup\n    group={groupsMap[group]}\n    selected={selected}\n    onAtomSelect={onAtomSelect}\n    disabledQueryElements={disabledQueryElements}\n  />\n);\n\nfunction GenericGroups({\n  selected,\n  onAtomSelect,\n  disabledQueryElements,\n}: GenericGroupsProps) {\n  return (\n    <div className={classes.genericGroups}>\n      <div className={classes.topGroupsContainer}>\n        {renderGenGroupComponent(\n          groupNames.atomsGen,\n          selected,\n          onAtomSelect,\n          disabledQueryElements,\n        )}\n        {renderGenGroupComponent(\n          groupNames.specialNodes,\n          selected,\n          onAtomSelect,\n          disabledQueryElements,\n        )}\n      </div>\n      {renderGenGroupComponent(\n        groupNames.groupGen,\n        selected,\n        onAtomSelect,\n        disabledQueryElements,\n      )}\n      <HorizontalBoxWithLines />\n      <div className={classes.groupGenerics}>\n        <div>\n          {renderGenGroupComponent(\n            groupNames.groupAcyclic,\n            selected,\n            onAtomSelect,\n            disabledQueryElements,\n          )}\n          <div className={classes.subgroupContainer}>\n            <VerticalBoxWithLines />\n            <div>\n              {renderGenGroupComponent(\n                groupNames.acyclicCarbo,\n                selected,\n                onAtomSelect,\n                disabledQueryElements,\n              )}\n              {renderGenGroupComponent(\n                groupNames.acyclicHetero,\n                selected,\n                onAtomSelect,\n                disabledQueryElements,\n              )}\n            </div>\n          </div>\n        </div>\n        <div>\n          {renderGenGroupComponent(\n            groupNames.groupCyclic,\n            selected,\n            onAtomSelect,\n            disabledQueryElements,\n          )}\n          <div className={classes.subgroupContainer}>\n            <VerticalBoxWithLines />\n            <div>\n              {renderGenGroupComponent(\n                groupNames.cyclicCarbo,\n                selected,\n                onAtomSelect,\n                disabledQueryElements,\n              )}\n              {renderGenGroupComponent(\n                groupNames.cyclicHetero,\n                selected,\n                onAtomSelect,\n                disabledQueryElements,\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default GenericGroups;\n","/****************************************************************************\n * Copyright 2023 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport { default } from './GenericGroups';\n\nexport enum groupNames {\n  atomsGen = 'atoms-gen',\n  specialNodes = 'special-nodes',\n  groupGen = 'group-gen',\n  groupAcyclic = 'group-acyclic',\n  acyclicCarbo = 'acyclic-carbo',\n  acyclicHetero = 'acyclic-hetero',\n  groupCyclic = 'group-cyclic',\n  cyclicHetero = 'cyclic-hetero',\n  cyclicCarbo = 'cyclic-carbo',\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport classes from './TypeChoice.module.less';\nimport { GenericInput } from 'src/script/ui/component/form/Input/Input';\n\nconst typeSchema = [\n  { title: 'Single', value: 'atom' },\n  { title: 'List', value: 'list' },\n  { title: 'Not List', value: 'not-list' },\n];\n\nfunction TypeChoice({ value, onChange, ...props }) {\n  return (\n    <fieldset className={classes.fieldset}>\n      {typeSchema.map((type) => (\n        <label key={type.title}>\n          {/* eslint-disable jsx-a11y/label-has-associated-control */}\n          <GenericInput\n            type=\"radio\"\n            value={type.value}\n            checked={type.value === value}\n            onChange={() => onChange(type.value)}\n            {...props}\n          />\n          {/* eslint-enable jsx-a11y/label-has-associated-control */}\n          {type.title}\n        </label>\n      ))}\n    </fieldset>\n  );\n}\n\nexport default TypeChoice;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { AtomInfo, ElementsTable, TypeChoice } from './components';\nimport { fromElement, toElement } from '../../../../data/convert/structconv';\n\nimport { Component } from 'react';\nimport { Dialog } from '../../../components';\nimport { Elements } from 'ketcher-core';\nimport { addAtoms } from '../../../../state/toolbar';\nimport classes from './PeriodTable.module.less';\nimport { connect } from 'react-redux';\nimport { onAction } from '../../../../state';\nimport { xor } from 'lodash/fp';\nimport { Icon } from 'components';\n\nclass Table extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      type: props.type || 'atom',\n      value: props.values || (!props.pseudo ? props.label : null) || null,\n      current: Elements.get(2),\n      isInfo: false,\n    };\n  }\n\n  changeType = (type) => {\n    const prevChoice =\n      this.state.type === 'list' || this.state.type === 'not-list';\n    const currentChoice = type === 'list' || type === 'not-list';\n    if (prevChoice && currentChoice) {\n      this.setState({ type });\n    } else {\n      this.setState({\n        type,\n        value: type === 'atom' || type === 'gen' ? null : [],\n      });\n    }\n  };\n\n  headerContent = () => (\n    <div className={classes.dialogHeader}>\n      <Icon name=\"period-table\" />\n      <span>Periodic Table</span>\n    </div>\n  );\n\n  selected = (label) => {\n    const { type, value } = this.state;\n    return type === 'atom' || type === 'gen'\n      ? value === label\n      : value.includes(label);\n  };\n\n  onAtomSelect = (label, activateImmediately = false) => {\n    if (activateImmediately) {\n      const result = this.result();\n      const { type } = this.state;\n      if (result && type === 'atom') {\n        this.props.onOk(this.result());\n      }\n    } else {\n      const { type, value } = this.state;\n      this.setState({\n        value: type === 'atom' || type === 'gen' ? label : xor([label], value),\n      });\n    }\n  };\n\n  result = () => {\n    const { type, value } = this.state;\n    if (!value || !value.length) {\n      return null;\n    }\n    if (type === 'atom') {\n      return { label: value, pseudo: null };\n    } else if (type === 'gen') {\n      return { type, label: value, pseudo: value };\n    }\n    return { type, values: value };\n  };\n\n  currentEvents = (element) => {\n    return {\n      onMouseEnter: () => this.setState({ current: element, isInfo: true }),\n      onMouseLeave: () => this.setState({ isInfo: false }),\n    };\n  };\n\n  render() {\n    const { value } = this.state;\n    const HeaderContent = this.headerContent;\n\n    return (\n      <Dialog\n        headerContent={<HeaderContent />}\n        className={classes.elementsTable}\n        params={this.props}\n        result={this.result}\n        buttons={['Cancel', 'OK']}\n        buttonsNameMap={{ OK: 'Add' }}\n        needMargin={false}\n        footerContent={\n          !this.props.isNestedModal ? (\n            <TypeChoice value={this.state.type} onChange={this.changeType} />\n          ) : null\n        }\n      >\n        <div className={classes.periodTable}>\n          <AtomInfo el={this.state.current} isInfo={this.state.isInfo} />\n          <ElementsTable\n            value={value}\n            currentEvents={this.currentEvents}\n            selected={this.selected}\n            onAtomSelect={(label) => this.onAtomSelect(label)}\n            onDoubleClick={(label) => this.onAtomSelect(label, true)}\n          />\n        </div>\n      </Dialog>\n    );\n  }\n}\n\nfunction mapSelectionToProps(editor) {\n  const selection = editor.selection();\n\n  if (\n    selection &&\n    Object.keys(selection).length === 1 &&\n    selection.atoms &&\n    Object.keys(selection.atoms).length === 1\n  ) {\n    const struct = editor.struct();\n    const atom = struct.atoms.get(selection.atoms[0]);\n    return { ...fromElement(atom) };\n  }\n\n  return {};\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  if (ownProps.values || ownProps.label) {\n    return {};\n  }\n  return mapSelectionToProps(state.editor);\n};\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    onOk: (result) => {\n      if (!result.type || result.type === 'atom') {\n        dispatch(addAtoms(result.label));\n      }\n      if (!ownProps.isNestedModal) {\n        dispatch(\n          onAction({\n            tool: 'atom',\n            opts: toElement(result),\n          }),\n        );\n      }\n      ownProps.onOk(result);\n    },\n  };\n};\n\nconst PeriodTable = connect(mapStateToProps, mapDispatchToProps)(Table);\n\nexport default PeriodTable;\n","/****************************************************************************\n * Copyright 2022 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { fromElement, toElement } from '../../../../data/convert/structconv';\n\nimport { Dialog } from '../../../components';\nimport GenericGroups from './components/GenericGroups';\nimport classes from './ExtendedTable.module.less';\nimport { connect } from 'react-redux';\nimport { onAction } from '../../../../state';\nimport { useState } from 'react';\n\nconst Table = (props) => {\n  const [value, setValue] = useState(props.pseudo ? props.label : null);\n\n  const selected = (label) => value === label;\n\n  const result = () => {\n    if (!value || !value.length) {\n      return null;\n    }\n    return { type: 'gen', label: value, pseudo: value };\n  };\n\n  const onAtomSelect = (label, activateImmediately = false) => {\n    setValue(label);\n\n    if (activateImmediately) {\n      props.onOk(result());\n    }\n  };\n\n  return (\n    <Dialog\n      title=\"Extended Table\"\n      withDivider\n      className={classes.extendedTable}\n      params={props}\n      result={result}\n      buttons={['Cancel', 'OK']}\n      buttonsNameMap={{ OK: 'Add' }}\n      needMargin={false}\n    >\n      <GenericGroups\n        selected={selected}\n        onAtomSelect={onAtomSelect}\n        disabledQueryElements={props.disabledQueryElements}\n      ></GenericGroups>\n    </Dialog>\n  );\n};\n\nfunction mapSelectionToProps(editor) {\n  const selection = editor.selection();\n  if (selection?.atoms?.length === 1) {\n    const struct = editor.struct();\n    const atom = struct.atoms.get(selection.atoms[0]);\n    return { ...fromElement(atom) };\n  }\n\n  return {};\n}\n\nconst mapStateToProps = (state) => {\n  const editor = state.editor;\n  const disabledQueryElements = editor.render.options.disableQueryElements;\n  return { disabledQueryElements, ...mapSelectionToProps(editor) };\n};\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    onOk: (result) => {\n      if (!ownProps.isNestedModal) {\n        dispatch(onAction({ tool: 'atom', opts: toElement(result) }));\n      }\n      ownProps.onOk(result);\n    },\n  };\n};\n\nconst ExtendedTable = connect(mapStateToProps, mapDispatchToProps)(Table);\n\nexport default ExtendedTable;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { BaseCallProps, BaseProps } from '../../../modal.types';\nimport classes from './RemoveFG.module.less';\nimport { useAppContext } from '../../../../../../../hooks';\nimport { fromSgroupDeletion } from 'ketcher-core';\n\ninterface RemoveFGProps extends BaseProps {\n  fgIds: any;\n}\n\ntype Props = RemoveFGProps & BaseCallProps;\n\nconst RemoveFG = (props: Props) => {\n  const { getKetcherInstance } = useAppContext();\n  const editor = getKetcherInstance().editor as any;\n  const { fgIds } = props;\n\n  const remove = function () {\n    if (fgIds.length > 0)\n      for (const id of fgIds) {\n        editor.update(fromSgroupDeletion(editor.render.ctab, id));\n      }\n    return true;\n  };\n\n  const exit = (key, res) => {\n    props[key](res);\n  };\n\n  return (\n    <div\n      onSubmit={(event) => event.preventDefault()}\n      tabIndex={-1}\n      className={classes.window}\n    >\n      <header className={classes.header}>Edit Abbreviation</header>\n      <div className={classes.question}>\n        A change was detected for the abbreviation. Do you want to remove the\n        abbreviation information from the structure and continue work with\n        separate atoms and bonds?\n      </div>\n      <footer className={classes.footer}>\n        <input\n          type=\"button\"\n          value={'Cancel'}\n          className={classes.buttonCancel}\n          onClick={() => exit('onOk', false)}\n        />\n        <input\n          type=\"button\"\n          value={'Remove Abbreviation'}\n          className={classes.buttonOk}\n          onClick={() => exit('onOk', remove())}\n        />\n      </footer>\n    </div>\n  );\n};\n\nexport type { RemoveFGProps };\nexport { RemoveFG };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { xor } from 'lodash/fp';\n\nfunction oneOrMore(multipl, values, item) {\n  if (multipl) return xor(values, [item]);\n  return xor(values, values.concat([item]));\n}\n\nfunction ButtonList({\n  value,\n  onChange,\n  schema,\n  disabledIds,\n  multiple,\n  classes,\n}) {\n  let className;\n  const selected = classes.selected || 'selected';\n  return (\n    <ul>\n      {schema.items.enum.map((item, i) => {\n        className = value.includes(item) ? selected : '';\n        return (\n          <li key={item}>\n            <button\n              disabled={disabledIds.includes(item)}\n              type=\"button\"\n              className={className}\n              onClick={() => onChange(oneOrMore(multiple, value, item))}\n            >\n              {schema.items.enumNames[i]}\n            </button>\n          </li>\n        );\n      })}\n    </ul>\n  );\n}\n\nexport default ButtonList;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport Form, { Field } from '../../../component/form/form/form';\n\nimport ButtonList from '../../../component/form/buttonlist';\nimport { Dialog } from '../../../views/components';\nimport classes from './rgroup.module.less';\nimport { connect } from 'react-redux';\nimport { rgroupSchema } from '../../../data/schema/struct-schema';\n\nfunction RGroup({ disabledIds, values, formState, type, ...props }) {\n  return (\n    <Dialog\n      title=\"R-Group\"\n      className={classes.rgroup}\n      params={props}\n      result={() => formState.result}\n      buttonsNameMap={{ OK: 'Apply' }}\n      buttons={['Cancel', 'OK']}\n      withDivider\n    >\n      <Form schema={rgroupSchema} init={{ values }} {...formState}>\n        <Field\n          name=\"values\"\n          multiple={type === 'atom'}\n          labelPos={false}\n          component={ButtonList}\n          disabledIds={disabledIds}\n          classes={classes}\n        />\n      </Form>\n    </Dialog>\n  );\n}\n\nexport default connect((store) => ({ formState: store.modal.form }))(RGroup);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Field } from '../../component/form/form/form';\nimport { getSelectOptionsFromSchema } from '../../utils';\nimport Select from '../../component/form/Select';\nimport { sdataCustomSchema } from '../../data/schema/sdata-schema';\n\nconst content = (schema, context, fieldName, fieldValue, checked) =>\n  Object.keys(schema.properties)\n    .filter(\n      (prop) => prop !== 'type' && prop !== 'context' && prop !== 'fieldName',\n    )\n    .map((prop) => {\n      if (prop === 'radiobuttons') {\n        return (\n          <Field\n            name={prop}\n            checked={checked}\n            type=\"radio\"\n            key={`${context}-${fieldName}-${prop}-radio`}\n            labelPos={false}\n          />\n        );\n      } else if (prop === 'fieldValue') {\n        return (\n          <Field\n            name={prop}\n            key={`${context}-${fieldName}-${prop}-select`}\n            placeholder=\"Enter value\"\n          />\n        );\n      } else {\n        return (\n          <Field\n            name={prop}\n            type=\"textarea\"\n            key={`${context}-${fieldName}-${prop}-select`}\n          />\n        );\n      }\n    });\n\nfunction SDataFieldset({ formState }) {\n  const { result } = formState;\n  const formSchema = sdataCustomSchema;\n\n  return (\n    <fieldset className=\"sdata\">\n      <Field\n        name=\"context\"\n        options={getSelectOptionsFromSchema(formSchema.properties.context)}\n        component={Select}\n        data-testid=\"context\"\n      />\n      <Field name=\"fieldName\" placeholder=\"Enter name\" />\n      {content(\n        formSchema,\n        result.context,\n        result.fieldName,\n        result.fieldValue,\n        result.radiobuttons,\n      )}\n    </fieldset>\n  );\n}\n\nexport default SDataFieldset;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Field } from '../../component/form/form/form';\nimport Select from '../../component/form/Select';\nimport { sgroupMap as schemes } from '../../data/schema/struct-schema';\nimport { getSelectOptionsFromSchema } from '../../utils';\nimport classes from './sgroup.module.less';\n\nconst propMapping = {\n  name: { maxLength: 15 },\n  fieldName: { maxLength: 30 },\n  fieldValue: { type: 'textarea' },\n  radiobuttons: { type: 'radio' },\n};\n\nconst content = (type) =>\n  Object.keys(schemes[type].properties)\n    .filter((prop) => prop !== 'type')\n    .map((prop) => {\n      if (prop === 'connectivity') {\n        return (\n          <Field\n            name={prop}\n            key={`${type}-${prop}`}\n            component={Select}\n            options={getSelectOptionsFromSchema(schemes[type].properties[prop])}\n            data-testid=\"connectivity\"\n          />\n        );\n      }\n\n      const props = propMapping[prop] || {};\n      return <Field name={prop} key={`${type}-${prop}`} {...props} />;\n    });\n\nfunction SGroupFieldset({ formState }) {\n  const { result } = formState;\n\n  const type = result.type;\n\n  return (\n    <fieldset className={type === 'DAT' ? classes.data : 'base'}>\n      {content(type)}\n    </fieldset>\n  );\n}\n\nexport default SGroupFieldset;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport Form, { SelectOneOf } from '../../component/form/form/form';\nimport { connect } from 'react-redux';\nimport { sgroupMap as schemes } from '../../data/schema/struct-schema';\nimport { Dialog } from '../../views/components';\nimport SDataFieldset from './SDataFieldset';\nimport classes from './sgroup.module.less';\nimport SGroupFieldset from './SGroupFieldset';\nimport { useMemo } from 'react';\n\nfunction Sgroup({ formState, ...props }) {\n  const { result, valid } = formState;\n\n  const type = result.type;\n\n  const serialize = useMemo(\n    () =>\n      type === 'DAT' && result.context && result.fieldName && result.fieldValue\n        ? {\n            context: result.context.trim(),\n            fieldName: result.fieldName.trim(),\n            fieldValue:\n              typeof result.fieldValue === 'string'\n                ? result.fieldValue.trim()\n                : result.fieldValue,\n          }\n        : {},\n    [result.context, result.fieldName, result.fieldValue, type],\n  );\n\n  return (\n    <Dialog\n      title=\"S-Group Properties\"\n      className={classes.sgroup}\n      result={() => result}\n      valid={() => valid}\n      buttons={['Cancel', 'OK']}\n      buttonsNameMap={{ OK: 'Apply' }}\n      withDivider={true}\n      params={props}\n    >\n      <Form\n        serialize={serialize}\n        schema={schemes[type]}\n        init={props}\n        {...formState}\n      >\n        <SelectOneOf\n          title=\"Type\"\n          name=\"type\"\n          schema={schemes}\n          data-testid=\"s-group-type\"\n        />\n\n        {type === 'DAT' ? (\n          <SDataFieldset formState={formState} />\n        ) : (\n          <SGroupFieldset formState={formState} />\n        )}\n      </Form>\n    </Dialog>\n  );\n}\n\nexport default connect((store) => ({ formState: store.modal.form }))(Sgroup);\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Dialog, StructEditor } from '../../views/components';\nimport { Component } from 'react';\nimport { isEmpty } from 'lodash';\nimport {\n  initAttach,\n  setAttachPoints,\n  setTmplName,\n} from '../../state/templates';\n\nimport { connect } from 'react-redux';\nimport { storage } from '../../storage-ext';\nimport Form, { Field } from '../../component/form/form/form';\nimport { attachSchema } from '../../data/schema/struct-schema';\nimport styled from '@emotion/styled';\nimport classes from './template-lib.module.less';\nimport { css } from '@emotion/react';\nimport { Button } from '@mui/material';\n\n// @TODO When theming is implemented, use theme wherever possible\nconst TemplateEditDialog = styled(Dialog)`\n  background-color: #fff;\n\n  & header {\n    text-transform: none;\n    border-bottom: 1px solid #e1e5ea;\n    margin: 0;\n    padding: 12px;\n  }\n\n  & form {\n    display: flex;\n\n    & label::after {\n      top: 92px;\n      margin-right: 12px;\n    }\n  }\n`;\n\nconst Editor = styled('div')`\n  border: 1px solid #b4b9d6;\n  background-color: #ffff;\n  border-radius: 5px;\n  position: relative;\n  height: 300px;\n  width: 330px;\n  overflow: hidden;\n\n  & .structEditor {\n    height: 100%;\n    width: 100%;\n    border: none;\n  }\n`;\n\nconst Warning = styled('div')`\n  padding: 0 5px;\n`;\n\nconst Message = styled('div')`\n  background-color: #e1e5ea;\n  color: #333333;\n  padding: 10px 12px;\n  border-top: 1px solid #cad3dd;\n  border-bottom: 1px solid #cad3dd;\n`;\n\nconst LeftColumn = styled('div')`\n  padding: 12px;\n  border-radius: 0 0 0 8px;\n  background-color: #eff2f5;\n`;\n\nconst RightColumn = styled('div')`\n  width: 40%;\n  min-width: 200px;\n  box-sizing: border-box;\n  padding: 12px;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst NameInput = styled(Field)`\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 12px;\n\n  & input[type='text'] {\n    display: block;\n    width: 100%;\n    box-sizing: border-box;\n    border: 1px solid #cad3dd;\n    border-radius: 4px;\n    line-height: 16px;\n    font-size: 14px;\n    margin-top: 4px;\n\n    &:hover {\n      border-color: #43b5c0;\n    }\n\n    &:hover,\n    :focus {\n      box-shadow: none;\n    }\n  }\n\n  & span {\n    display: block;\n    width: 100%;\n  }\n`;\n\nconst AttachmentOutput = styled('span')`\n  display: block;\n  width: 100%;\n  height: 24px;\n  box-sizing: border-box;\n  padding: 4px 8px;\n  border: 1px solid #cad3dd;\n  border-radius: 4px;\n  line-height: 14px;\n  font-size: 14px;\n  background-color: #eff2f5;\n  margin-top: 4px;\n`;\n\nconst Buttons = styled('div')`\n  display: flex;\n  flex-direction: row;\n  margin-top: auto;\n  justify-content: flex-end;\n  gap: 8px;\n`;\n\nconst buttonCommonStyles = css`\n  width: fit-content;\n  padding: 5px 8px;\n  text-transform: none;\n  font-size: 12px;\n  line-height: 14px;\n  box-shadow: none;\n`;\n\nconst SaveButton = styled(Button)`\n  ${buttonCommonStyles}\n  background-color: #167782;\n\n  &:hover {\n    background-color: #43b5c0;\n    box-shadow: none;\n  }\n\n  &:disabled {\n    background-color: #e1e5ea;\n    color: #333333;\n  }\n`;\n\nconst CancelButton = styled(Button)`\n  ${buttonCommonStyles}\n  border-color: #585858;\n  color: #585858;\n\n  &:hover {\n    border-color: #333333;\n    color: #333333;\n    box-shadow: none;\n  }\n`;\n\nconst editorStyles = {\n  selectionStyle: {\n    fill: '#167782',\n    'fill-opacity': '0.28',\n    stroke: '#167782',\n  },\n  hoverStyle: { stroke: '#1a7090', 'stroke-width': 1.2 },\n  hoverStyleSimpleObject: { 'stroke-opacity': 0.3 },\n};\n\nclass Attach extends Component {\n  MODES = {\n    SAVE: 'save',\n    EDIT: 'edit',\n  };\n\n  constructor({ onInit, ...props }) {\n    super();\n    this.mode = isEmpty(props.tmpl.props) ? this.MODES.SAVE : this.MODES.EDIT;\n    this.tmpl = initTmpl(props.tmpl);\n    onInit(this.tmpl.struct.name, this.tmpl.props);\n    this.onResult = this.onResult.bind(this);\n  }\n\n  onResult() {\n    const { name, atomid, bondid } = this.props;\n    return name &&\n      (name !== this.tmpl.struct.name ||\n        atomid !== this.tmpl.props.atomid ||\n        bondid !== this.tmpl.props.bondid) &&\n      name.trim().length\n      ? { name, attach: { atomid, bondid } }\n      : null;\n  }\n\n  checkIsValidName(name) {\n    return (\n      !!name &&\n      !this.props.templateLib.some(\n        (tmpl) =>\n          tmpl.struct.name === name && tmpl.props.group === 'User Templates',\n      ) &&\n      name.length <= 128\n    );\n  }\n\n  render() {\n    const {\n      name,\n      /* eslint-disable @typescript-eslint/no-unused-vars */\n      onNameEdit,\n      /* eslint-enable @typescript-eslint/no-unused-vars */\n      onAttachEdit,\n      ...prop\n    } = this.props;\n    const struct = this.tmpl.struct;\n    const { atomid, bondid } =\n      struct.atoms.get(this.props.atomid) && struct.bonds.get(this.props.bondid)\n        ? this.props\n        : this.tmpl.props;\n    const options = Object.assign(editorStyles, this.props.globalSettings, {\n      microModeScale: getScale(struct),\n      reuseRestructIfExist: false,\n    });\n    const dialogTitle =\n      this.mode === this.MODES.SAVE ? 'Save to Templates' : 'Template Edit';\n    const warningObject =\n      this.mode === this.MODES.SAVE ? 'Templates' : 'Edited templates';\n\n    return (\n      <TemplateEditDialog\n        title={dialogTitle}\n        result={this.onResult}\n        valid={() => this.props.formState.valid && name}\n        params={prop}\n        buttons={[]}\n        needMargin={false}\n      >\n        <Message>\n          <div>\n            {warningObject} are saved locally and cannot be accessed on\n            different browsers or computers.\n          </div>\n          <div>\n            Be aware that other users of the same computer and browser can\n            access them as well.\n          </div>\n        </Message>\n        <Form\n          schema={attachSchema}\n          customValid={{\n            name: (name) => this.checkIsValidName(name),\n          }}\n          {...this.props.formState}\n        >\n          <LeftColumn>\n            <Editor>\n              <StructEditor\n                className=\"structEditor\"\n                struct={struct}\n                onAttachEdit={onAttachEdit}\n                tool=\"attach\"\n                toolOpts={{ atomid, bondid }}\n                options={options}\n                showAttachmentPoints={false}\n              />\n            </Editor>\n            {!storage.isAvailable() ? (\n              <Warning>{storage.warningMessage}</Warning>\n            ) : null}\n          </LeftColumn>\n          <RightColumn>\n            <NameInput\n              name=\"name\"\n              value={name}\n              onChange={this.props.onNameEdit}\n              placeholder=\"template\"\n            />\n            <span>Selected attachment points</span>\n            <AttachmentOutput>\n              Atom ID: <strong>{atomid}</strong> Bond ID:{' '}\n              <strong>{bondid}</strong>\n            </AttachmentOutput>\n            <Buttons>\n              <CancelButton\n                variant=\"outlined\"\n                onClick={this.props.onCancel}\n                className={classes.button}\n              >\n                Cancel\n              </CancelButton>\n              <SaveButton\n                variant=\"contained\"\n                onClick={() => this.props.onOk(this.onResult())}\n                className={classes.button}\n                disabled={!this.checkIsValidName(name)}\n              >\n                {this.mode === this.MODES.SAVE ? 'Save' : 'Edit'}\n              </SaveButton>\n            </Buttons>\n          </RightColumn>\n        </Form>\n      </TemplateEditDialog>\n    );\n  }\n}\n\nexport default connect(\n  (store) => ({\n    ...store.templates.attach,\n    templateLib: store.templates.lib,\n    formState: store.modal.form,\n    globalSettings: store.options.settings,\n  }),\n  (dispatch) => ({\n    onInit: (name, ap) => dispatch(initAttach(name, ap)),\n    onAttachEdit: (ap) => dispatch(setAttachPoints(ap)),\n    onNameEdit: (name) => dispatch(setTmplName(name)),\n  }),\n)(Attach);\n\nfunction initTmpl(tmpl) {\n  const normTmpl = {\n    struct: structNormalization(tmpl.struct),\n    props: {\n      atomid: +tmpl.props.atomid || 0,\n      bondid: +tmpl.props.bondid || 0,\n    },\n  };\n  normTmpl.struct.name = tmpl.struct.name;\n  return normTmpl;\n}\n\nfunction structNormalization(struct) {\n  const normStruct = struct.clone();\n  const cbb = normStruct.getCoordBoundingBox();\n\n  normStruct.atoms.forEach((atom) => {\n    atom.pp = atom.pp.sub(cbb.min);\n  });\n\n  normStruct.sgroups.forEach((sg) => {\n    sg.pp = sg.pp ? sg.pp.sub(cbb.min) : cbb.min;\n  });\n\n  normStruct.rxnArrows.forEach((rxnArrow) => {\n    rxnArrow.pos = rxnArrow.pos.map((p) => p.sub(cbb.min));\n  });\n\n  normStruct.rxnPluses.forEach((rxnPlus) => {\n    rxnPlus.pp = rxnPlus.pp.sub(cbb.min);\n  });\n\n  normStruct.simpleObjects.forEach((simpleObject) => {\n    simpleObject.pos = simpleObject.pos.map((p) => p.sub(cbb.min));\n  });\n\n  normStruct.texts.forEach((text) => {\n    text.position = text.position.sub(cbb.min);\n  });\n\n  return normStruct;\n}\n\nfunction getScale(struct) {\n  const cbb = struct.getCoordBoundingBox();\n  const VIEW_SIZE = 220;\n  const scale =\n    VIEW_SIZE / Math.max(cbb.max.y - cbb.min.y, cbb.max.x - cbb.min.x);\n  if (scale < 35) return 35;\n  if (scale > 50) return 50;\n  return 40;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { FC } from 'react';\nimport { Struct } from 'ketcher-core';\nimport classes from './TemplateTable.module.less';\nimport { greekify } from '../../utils';\nimport { Icon, StructRender } from 'components';\n\nexport interface Template {\n  struct: Struct;\n  props: {\n    atomid: number;\n    bondid: number;\n    group: string;\n    prerender?: string;\n    abbreviation: string;\n    name: string;\n  };\n}\n\ninterface TemplateTableProps {\n  templates: Array<Template>;\n  selected: Template | null;\n  onSelect: (tmpl: Template) => void;\n  onDelete?: (tmpl: Template) => void;\n  onAttach?: (tmpl: Template) => void;\n  titleRows?: 1 | 2;\n  renderOptions?: any;\n}\n\nconst isSaltOrSolventTemplate = (template) =>\n  template.props.group === 'Salts and Solvents';\nconst isFunctionalGroupTemplate = (template) =>\n  template.props.group === 'Functional Groups';\n\nfunction getTemplateTitle(template: Template, index: number): string {\n  if (isSaltOrSolventTemplate(template)) {\n    return template.props.name;\n  }\n  return (\n    template.struct.name || `${template.props.group} template ${index + 1}`\n  );\n}\n\nfunction tmplName(tmpl: Template, i: number): string {\n  if (isSaltOrSolventTemplate(tmpl)) {\n    return tmpl.props.abbreviation;\n  }\n  return tmpl.struct.name || `${tmpl.props.group} template ${i + 1}`;\n}\n\nconst TemplateTable: FC<TemplateTableProps> = (props) => {\n  const {\n    templates,\n    selected,\n    onSelect,\n    onDelete,\n    onAttach,\n    titleRows = 2,\n    renderOptions,\n  } = props;\n\n  return (\n    <div\n      className={`${classes.tableContent} ${\n        titleRows === 1 ? classes.oneRowTitleTable : classes.twoRowsTitleTable\n      }`}\n      data-testid=\"templates-modal\"\n    >\n      {templates.map((tmpl, i) => {\n        return (\n          <div\n            className={\n              tmpl.struct !== selected?.struct\n                ? classes.td\n                : `${classes.td} ${classes.selected}`\n            }\n            title={greekify(getTemplateTitle(tmpl, i))}\n            key={\n              tmpl.struct.name !== selected?.struct.name\n                ? `${tmpl.struct.name}_${i}`\n                : `${tmpl.struct.name}_${i}_selected`\n            }\n            onClick={() => onSelect(tmpl)}\n          >\n            <StructRender\n              struct={tmpl.struct}\n              className={classes.struct}\n              fullsize={true}\n              options={{\n                ...renderOptions,\n                autoScaleMargin: 10,\n                cachePrefix: 'templates',\n                downScale: true,\n              }}\n            />\n            <div\n              className={`${classes.structTitle} ${\n                selected?.struct === tmpl.struct ? classes.selectedTitle : ''\n              }`}\n            >\n              {greekify(tmplName(tmpl, i))}\n            </div>\n            {tmpl.props.group === 'User Templates' && (\n              <button\n                className={`${classes.button} ${classes.deleteButton}`}\n                onClick={() => onDelete!(tmpl)}\n              >\n                <Icon name=\"delete\" />\n              </button>\n            )}\n            {!isFunctionalGroupTemplate(tmpl) &&\n              !isSaltOrSolventTemplate(tmpl) && (\n                <button\n                  className={`${classes.button} ${classes.editButton}`}\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    onAttach!(tmpl);\n                  }}\n                >\n                  <Icon name=\"edit\" />\n                </button>\n              )}\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default TemplateTable;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport const saltsAndSolventsSelector = (state) => {\n  return state.saltsAndSolvents.lib;\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Icon } from 'components';\nimport classes from './emptySearchResult.module.less';\n\nconst EmptySearchResult = ({ textInfo }) => {\n  return (\n    <div className={classes.emptySearch}>\n      <p>{textInfo}</p>\n      <Icon name=\"not-found\" />\n    </div>\n  );\n};\n\nexport default EmptySearchResult;\n","import { useCallback, useEffect, useRef, useState } from 'react';\nimport { filterFGLib } from '../../utils';\nimport { Template } from './TemplateTable';\n\nconst SALTS_AND_SOLVENTS = 'Salts and Solvents';\nconst batchDelay = 300;\n\nexport default function useSaltsAndSolvents(\n  saltsAndSolvents: Template[],\n  filter: string,\n) {\n  const [isFirstRender, setIsFirstRender] = useState(true);\n  const timerId = useRef<null | ReturnType<typeof setTimeout>>(null);\n  const [filteredSaltsAndSolvents, setFilteredSaltsAndSolvents] = useState(\n    saltsAndSolvents[SALTS_AND_SOLVENTS],\n  );\n\n  const addToSaSWithBatches = useCallback((fullFilteredArray) => {\n    const batchSize = 16;\n    setFilteredSaltsAndSolvents((filteredSaltsAndSolvents) => [\n      ...(filteredSaltsAndSolvents ?? []),\n      ...fullFilteredArray.splice(0, batchSize),\n    ]);\n    if (fullFilteredArray.length > 0) {\n      timerId.current = setTimeout(\n        () => addToSaSWithBatches(fullFilteredArray),\n        batchDelay,\n      );\n    }\n  }, []);\n\n  useEffect(() => {\n    const filteredSaS =\n      filterFGLib(saltsAndSolvents, filter)[SALTS_AND_SOLVENTS] ?? [];\n    addToSaSWithBatches(filteredSaS);\n  }, [saltsAndSolvents, addToSaSWithBatches]);\n\n  useEffect(() => {\n    if (isFirstRender) {\n      setIsFirstRender(false);\n      return;\n    }\n    clearTimeout(timerId.current as unknown as number);\n    const filteredSaS = filterFGLib(saltsAndSolvents, filter)[\n      SALTS_AND_SOLVENTS\n    ];\n    setFilteredSaltsAndSolvents(filteredSaS);\n  }, [saltsAndSolvents, filter]);\n\n  return filteredSaltsAndSolvents;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Dispatch, FC, useState, useEffect, useRef } from 'react';\nimport TemplateTable, { Template } from './TemplateTable';\nimport {\n  changeFilter,\n  changeGroup,\n  deleteTmpl,\n  editTmpl,\n  selectTmpl,\n  changeTab,\n} from '../../state/templates';\nimport { filterLib, filterFGLib, greekify } from '../../utils';\nimport Accordion from '@mui/material/Accordion';\nimport AccordionSummary from '@mui/material/AccordionSummary';\nimport AccordionDetails from '@mui/material/AccordionDetails';\n\nimport { Dialog } from '../../views/components';\nimport Input from '../../component/form/Input/Input';\nimport { SaveButton } from '../../component/view/savebutton';\nimport { SdfSerializer } from 'ketcher-core';\nimport classes from './template-lib.module.less';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport { omit } from 'lodash/fp';\nimport { onAction } from '../../state';\nimport { functionalGroupsSelector } from '../../state/functionalGroups/selectors';\nimport { saltsAndSolventsSelector } from '../../state/saltsAndSolvents/selectors';\nimport EmptySearchResult from '../../../ui/dialog/template/EmptySearchResult';\n\nimport Tabs from '@mui/material/Tabs';\nimport Tab from '@mui/material/Tab';\nimport useSaltsAndSolvents from './useSaltsAndSolvets';\nimport { Icon } from 'components';\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n  return (\n    <div\n      className={classes.tabPanel}\n      component=\"div\"\n      role=\"tabpanel\"\n      id={`scrollable-auto-tabpanel-${index}`}\n      aria-labelledby={`scrollable-auto-tab-${index}`}\n      {...other}\n    >\n      {value === index && children}\n    </div>\n  );\n}\n\nfunction a11yProps(index) {\n  return {\n    id: `scrollable-auto-tab-${index}`,\n    'aria-controls': `scrollable-auto-tabpanel-${index}`,\n  };\n}\n\ninterface TemplateLibProps {\n  filter: string;\n  group: string;\n  lib: Array<Template>;\n  selected: Template | null;\n  mode: string;\n  tab: number;\n  initialTab: number;\n  saltsAndSolvents: Template[];\n  renderOptions?: any;\n}\n\ninterface TemplateLibCallProps {\n  onAttach: (tmpl: Template) => void;\n  onCancel: () => void;\n  onChangeGroup: (group: string) => void;\n  onDelete: (tmpl: Template) => void;\n  onFilter: (filter: string) => void;\n  onOk: (res: any) => void;\n  onSelect: (res: any) => void;\n  onTabChange: (tab: number) => void;\n  functionalGroups: Template[];\n}\n\ntype Props = TemplateLibProps & TemplateLibCallProps;\n\nenum TemplateTabs {\n  TemplateLibrary = 0,\n  FunctionalGroupLibrary = 1,\n  SaltsAndSolvents = 2,\n}\n\nconst filterLibSelector = createSelector(\n  (props: Props) => props.lib,\n  (props: Props) => props.filter,\n  filterLib,\n);\n\nconst FUNCTIONAL_GROUPS = 'Functional Groups';\n\nconst HeaderContent = () => (\n  <div className={classes.dialogHeader}>\n    <Icon name=\"template-dialog\" />\n    <span>Structure Library</span>\n  </div>\n);\n\nconst FooterContent = ({ data, tab }) => {\n  const clickToAddToCanvas = <span>Click to add to canvas</span>;\n  if (tab === TemplateTabs.SaltsAndSolvents) {\n    return clickToAddToCanvas;\n  }\n  return (\n    <div\n      style={{\n        flexGrow: 1,\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n      }}\n    >\n      <SaveButton\n        key=\"save-to-SDF\"\n        data={data}\n        className={classes.saveButton}\n        filename={\n          tab === TemplateTabs.TemplateLibrary\n            ? 'ketcher-tmpls.sdf'\n            : 'ketcher-fg-tmpls.sdf'\n        }\n      >\n        Save to SDF\n      </SaveButton>\n      {clickToAddToCanvas}\n    </div>\n  );\n};\n\nconst TemplateDialog: FC<Props> = (props) => {\n  const {\n    filter,\n    onFilter,\n    onTabChange,\n    onChangeGroup,\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    mode,\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    tab,\n    initialTab = null,\n    functionalGroups,\n    lib: templateLib,\n    saltsAndSolvents,\n    onSelect,\n    ...rest\n  } = props;\n\n  const searchInputRef = useRef<HTMLInputElement>(null);\n\n  const [expandedAccordions, setExpandedAccordions] = useState<string[]>([\n    props.group,\n  ]);\n  const filteredSaltsAndSolvents = useSaltsAndSolvents(\n    saltsAndSolvents,\n    filter,\n  );\n  const [filteredFG, setFilteredFG] = useState(\n    functionalGroups[FUNCTIONAL_GROUPS],\n  );\n\n  const filteredTemplateLib = filterLibSelector(props);\n\n  useEffect(() => {\n    setFilteredFG(filterFGLib(functionalGroups, filter)[FUNCTIONAL_GROUPS]);\n  }, [functionalGroups, filter]);\n\n  useEffect(() => {\n    searchInputRef.current?.focus();\n    onSelect(null);\n  }, [tab, onSelect]);\n\n  useEffect(() => {\n    if (initialTab !== null) {\n      onTabChange(initialTab);\n    }\n  }, [initialTab, onTabChange]);\n\n  const handleAccordionChange = (accordion) => (_, isExpanded) => {\n    setExpandedAccordions(\n      isExpanded\n        ? [...expandedAccordions, accordion]\n        : [...expandedAccordions].filter(\n            (expandedAccordion) => expandedAccordion !== accordion,\n          ),\n    );\n  };\n\n  const handleTabChange = (value) => {\n    onTabChange(value);\n  };\n\n  const sdfSerializer = new SdfSerializer();\n  const serializerMapper = {\n    [TemplateTabs.TemplateLibrary]: templateLib,\n    [TemplateTabs.FunctionalGroupLibrary]: functionalGroups,\n    [TemplateTabs.SaltsAndSolvents]: saltsAndSolvents,\n  };\n  const data = sdfSerializer.serialize(serializerMapper[tab]);\n\n  const select = (tmpl: Template): void => {\n    onChangeGroup(tmpl.props.group);\n    props.onSelect(tmpl);\n  };\n\n  return (\n    <Dialog\n      headerContent={<HeaderContent />}\n      footerContent={<FooterContent tab={tab} data={data} />}\n      className={`${classes.dialog_body}`}\n      params={omit(['group'], rest)}\n      buttons={[]}\n      needMargin={false}\n    >\n      <div className={classes.inputContainer}>\n        <Input\n          ref={searchInputRef}\n          className={classes.input}\n          type=\"search\"\n          value={filter}\n          onChange={(value) => onFilter(value)}\n          placeholder=\"Search by elements...\"\n          isFocused={true}\n        />\n        <Icon name=\"search\" className={classes.searchIcon} />\n      </div>\n      <Tabs\n        value={tab}\n        onChange={(_, value) => handleTabChange(value)}\n        className={classes.tabs}\n      >\n        <Tab\n          label=\"Template Library\"\n          {...a11yProps(TemplateTabs.TemplateLibrary)}\n        />\n        <Tab\n          label=\"Functional Groups\"\n          {...a11yProps(TemplateTabs.FunctionalGroupLibrary)}\n        />\n        <Tab\n          label=\"Salts and Solvents\"\n          {...a11yProps(TemplateTabs.SaltsAndSolvents)}\n        />\n      </Tabs>\n      <div className={classes.tabsContent}>\n        <TabPanel value={tab} index={TemplateTabs.TemplateLibrary}>\n          <div>\n            {Object.keys(filteredTemplateLib).length ? (\n              Object.keys(filteredTemplateLib).map((groupName) => {\n                const shouldGroupBeRended =\n                  expandedAccordions.includes(groupName);\n                return (\n                  <Accordion\n                    square={true}\n                    key={groupName}\n                    onChange={handleAccordionChange(groupName)}\n                    expanded={shouldGroupBeRended}\n                  >\n                    <AccordionSummary\n                      className={classes.accordionSummary}\n                      expandIcon={\n                        <Icon className={classes.expandIcon} name=\"chevron\" />\n                      }\n                    >\n                      <Icon\n                        name=\"elements-group\"\n                        className={classes.groupIcon}\n                      />\n                      {`${greekify(groupName)} (${\n                        filteredTemplateLib[groupName].length\n                      })`}\n                    </AccordionSummary>\n                    <AccordionDetails>\n                      <TemplateTable\n                        templates={\n                          shouldGroupBeRended\n                            ? filteredTemplateLib[groupName]\n                            : []\n                        }\n                        onSelect={(templ) => select(templ)}\n                        selected={props.selected}\n                        onDelete={props.onDelete}\n                        onAttach={props.onAttach}\n                        renderOptions={props.renderOptions}\n                      />\n                    </AccordionDetails>\n                  </Accordion>\n                );\n              })\n            ) : (\n              <div className={classes.resultsContainer}>\n                <EmptySearchResult textInfo=\"No items found\" />\n              </div>\n            )}\n          </div>\n        </TabPanel>\n        <TabPanel value={tab} index={TemplateTabs.FunctionalGroupLibrary}>\n          {filteredFG?.length ? (\n            <div className={classes.resultsContainer}>\n              <TemplateTable\n                titleRows={1}\n                templates={filteredFG}\n                onSelect={(templ) => select(templ)}\n                selected={props.selected}\n                renderOptions={props.renderOptions}\n              />\n            </div>\n          ) : (\n            <div className={classes.resultsContainer}>\n              <EmptySearchResult textInfo=\"No items found\" />\n            </div>\n          )}\n        </TabPanel>\n        <TabPanel value={tab} index={TemplateTabs.SaltsAndSolvents}>\n          {filteredSaltsAndSolvents?.length ? (\n            <div className={classes.resultsContainer}>\n              <TemplateTable\n                titleRows={1}\n                templates={filteredSaltsAndSolvents}\n                onSelect={(templ) => select(templ)}\n                selected={props.selected}\n                renderOptions={props.renderOptions}\n              />\n            </div>\n          ) : (\n            <div className={classes.resultsContainer}>\n              <EmptySearchResult textInfo=\"No items found\" />\n            </div>\n          )}\n        </TabPanel>\n      </div>\n    </Dialog>\n  );\n};\n\nconst selectTemplate = (template, props, dispatch) => {\n  dispatch(selectTmpl(null));\n  if (!template) return;\n  dispatch(changeFilter(''));\n  dispatch(selectTmpl(template));\n  dispatch(onAction({ tool: 'template', opts: template }));\n  props.onOk(template);\n};\n\nconst onModalClose = (props, dispatch) => {\n  dispatch(changeFilter(''));\n  props.onCancel();\n};\n\nexport default connect(\n  (store) => ({\n    ...omit(['attach'], (store as any).templates),\n    initialTab: (store as any).modal?.prop?.tab,\n    renderOptions: (store as any).editor?.render?.options,\n    functionalGroups: functionalGroupsSelector(store),\n    saltsAndSolvents: saltsAndSolventsSelector(store),\n  }),\n  (dispatch: Dispatch<any>, props: Props) => ({\n    onFilter: (filter) => dispatch(changeFilter(filter)),\n    onTabChange: (tab) => dispatch(changeTab(tab)),\n    onSelect: (tmpl) => selectTemplate(tmpl, props, dispatch),\n    onChangeGroup: (group) => dispatch(changeGroup(group)),\n    onAttach: (tmpl) => dispatch(editTmpl(tmpl)),\n    onCancel: () => onModalClose(props, dispatch),\n    onDelete: (tmpl) => dispatch(deleteTmpl(tmpl)),\n  }),\n)(TemplateDialog);\n","import { useEffect, RefObject } from 'react';\n\nexport const useClickOutside = (\n  targetRef: RefObject<Node>,\n  callback: () => void,\n): void => {\n  const onClickOutside = (e: Event) => {\n    if (!targetRef.current?.contains(e.target as Node)) {\n      callback();\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener('click', onClickOutside);\n    return () => {\n      document.removeEventListener('click', onClickOutside);\n    };\n  }, []);\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useEffect, useMemo, useState, useRef } from 'react';\nimport { useClickOutside } from '../../../../../../../hooks/useClickOutside';\n\nimport classes from './FontControl.module.less';\n\nimport { range } from 'lodash/fp';\n\nexport const FontControl = ({ editorState, setEditorState, styles }) => {\n  const defaultFontSize = '13px';\n  const [isShowingFontSizeMenu, setIsShowingFontSizeMenu] = useState(false);\n  const [currentFontSize, setCurrentFontSize] = useState(defaultFontSize);\n  const wrapperRef = useRef<HTMLDivElement>(null);\n  const onClickOutsideCloseDrowndown = (): void =>\n    setIsShowingFontSizeMenu(false);\n  useClickOutside(wrapperRef, onClickOutsideCloseDrowndown);\n\n  const setFontSize = (e, value) => {\n    e.preventDefault();\n    setCurrentFontSize(value);\n    const newEditorState = styles.fontSize.remove(editorState);\n    setEditorState(styles.fontSize.add(newEditorState, value));\n    setIsShowingFontSizeMenu(false);\n  };\n\n  const currentStyle = styles.fontSize.current(editorState);\n\n  useEffect(() => {\n    setCurrentFontSize(currentStyle || defaultFontSize);\n  }, [currentStyle]);\n\n  const MIN_FONT_SIZE = 4;\n  const MAX_FONT_SIZE = 144;\n  const fontSizes = range(MIN_FONT_SIZE, MAX_FONT_SIZE + 1);\n\n  const fontSizeOptions = useMemo(\n    () =>\n      fontSizes.map((fontSize) => (\n        <div\n          key={fontSize}\n          className={classes.fontSizeOption}\n          onMouseDown={(e) => setFontSize(e, `${fontSize}px`)}\n        >\n          {fontSize}\n        </div>\n      )),\n    [isShowingFontSizeMenu],\n  );\n\n  return (\n    <div ref={wrapperRef}>\n      <button\n        className={classes.fontBtn}\n        onMouseDown={(e) => {\n          e.preventDefault();\n          setIsShowingFontSizeMenu(!isShowingFontSizeMenu);\n        }}\n      >\n        {parseFloat(currentFontSize)}\n      </button>\n      {isShowingFontSizeMenu ? (\n        <div className={classes.fontSizeMenu}>{fontSizeOptions}</div>\n      ) : null}\n    </div>\n  );\n};\n\nexport default FontControl;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Icon, IconName } from 'components';\nimport classes from './SpecialSymbolsList.module.less';\n\nconst SpecialSymbolsList = ({ select }) => {\n  const symbols: IconName[] = [\n    'ฮฑ',\n    'ฮฒ',\n    'ฮณ',\n    'ฮด',\n    'ฮต',\n    'ฮถ',\n    'ฮท',\n    'ฮธ',\n    'ฮน',\n    'ฮบ',\n    'ฮป',\n    'ฮผ',\n    'ฮฝ',\n    'ฮพ',\n    'ฮฟ',\n    'ฯ',\n    'ฯ',\n    'ฯ',\n    'ฯ',\n    'ฯ',\n    'ฯ',\n    'ฯ',\n    'ฯ',\n    'ฯ',\n    'โ',\n    'โ',\n    'โซ',\n    'ยฐ',\n    'ฤง',\n    'ยฑ',\n    'โฐ',\n    'โ',\n    'โ',\n    'โ',\n    'โ/',\n    '/โ',\n    'โ',\n    'โ',\n    'โ',\n    'โ',\n    'โ',\n    'โ',\n    'โซ',\n    'โ',\n    '=/',\n    'โค',\n    'โฅ',\n  ];\n  return (\n    <div className={classes.window}>\n      {symbols.map((symbol, id) => {\n        return (\n          <button\n            className={classes.button}\n            key={`symbol-${id}`}\n            value={symbol}\n            onMouseDown={(event) => {\n              select(event, symbol);\n            }}\n          >\n            <Icon name={symbol} />\n          </button>\n        );\n      })}\n    </div>\n  );\n};\nexport { SpecialSymbolsList };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { EditorState, Modifier } from 'draft-js';\n\nimport { SpecialSymbolsList } from '../SpecialSymbolsList/SpecialSymbolsList';\nimport classes from './SpecialSymbolsButton.module.less';\nimport { useState } from 'react';\nimport { Icon } from 'components';\n\nconst SpecialSymbolsButton = ({ editorState, setEditorState, styles }) => {\n  const [showSpecialSymbols, setShowSpecialSymbols] = useState(false);\n\n  const handleClose = (event) => {\n    event.stopPropagation();\n    event.preventDefault();\n    setShowSpecialSymbols(false);\n  };\n\n  const closeSymbolsList = (event) => {\n    if (!event.currentTarget.contains(event.relatedTarget)) {\n      handleClose(event);\n    }\n  };\n\n  const addSymbol = (e, value) => {\n    e.preventDefault();\n    const selection = editorState.getSelection();\n    const contentState = editorState.getCurrentContent();\n    const nextContentState = Modifier.replaceText(\n      contentState,\n      selection,\n      value,\n      styles,\n    );\n    const nextEditorState = EditorState.push(\n      editorState,\n      nextContentState,\n      'insert-characters',\n    );\n    setEditorState(nextEditorState);\n    setShowSpecialSymbols(false);\n  };\n\n  return (\n    <div onBlur={closeSymbolsList}>\n      <button\n        title=\"symbols\"\n        onMouseDown={(e) => {\n          e.preventDefault();\n          setShowSpecialSymbols(!showSpecialSymbols);\n        }}\n        className={\n          showSpecialSymbols ? classes.activeTextButton : classes.textButton\n        }\n      >\n        <Icon name=\"text-special-symbols\" />\n      </button>\n      {showSpecialSymbols && <SpecialSymbolsList select={addSymbol} />}\n    </div>\n  );\n};\n\nexport { SpecialSymbolsButton };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport React from 'react';\nimport { TextCommand } from 'ketcher-core';\nimport clsx from 'clsx';\nimport styles from './TextButton.module.less';\nimport { Icon, IconName } from 'components';\n\ninterface TextButtonProps {\n  button: { command: TextCommand; name: IconName };\n  active: boolean;\n}\n\ninterface TextButtonPropsCallProps {\n  toggleStyle: (command: TextCommand) => void;\n}\n\ntype Props = TextButtonProps & TextButtonPropsCallProps;\n\nexport const TextButton = (props: Props) => {\n  const toggleStyle = (\n    event: React.MouseEvent<HTMLButtonElement, MouseEvent>,\n    command: TextCommand,\n  ) => {\n    event.preventDefault();\n    props.toggleStyle(command);\n  };\n\n  return (\n    <button\n      className={clsx(styles.textButton, { [styles.isActive]: props.active })}\n      title={props.button.command.toLowerCase()}\n      onMouseDown={(event) => {\n        toggleStyle(event, props.button.command);\n      }}\n    >\n      <Icon name={props.button.name} />\n    </button>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport 'draft-js/dist/Draft.css';\n\nimport {\n  DraftStyleMap,\n  Editor,\n  EditorState,\n  RawDraftContentState,\n  RichUtils,\n  convertFromRaw,\n  convertToRaw,\n  getDefaultKeyBinding,\n} from 'draft-js';\nimport React, {\n  useCallback,\n  useState,\n  useRef,\n  MutableRefObject,\n  useEffect,\n} from 'react';\n\nimport { Dialog } from '../../../components';\nimport { DialogParams } from '../../../../../../components/Dialog/Dialog';\nimport { FontControl } from './FontControl';\nimport { SpecialSymbolsButton } from './SpecialSymbols/SpecialSymbolsButton';\nimport { TextButton } from './TextButton';\nimport { TextCommand } from 'ketcher-core';\nimport classes from './Text.module.less';\nimport { connect } from 'react-redux';\nimport createStyles from 'draft-js-custom-styles';\nimport { IconName } from 'components';\n\nconst { styles, customStyleFn } = createStyles(['font-size']);\n\ninterface TextProps extends DialogParams {\n  formState: any;\n  id?: any;\n  content: string;\n  position?: string;\n}\n\nconst buttons: Array<{ command: TextCommand; name: IconName }> = [\n  {\n    command: TextCommand.Bold,\n    name: 'text-bold',\n  },\n  {\n    command: TextCommand.Italic,\n    name: 'text-italic',\n  },\n  {\n    command: TextCommand.Superscript,\n    name: 'text-superscript',\n  },\n  {\n    command: TextCommand.Subscript,\n    name: 'text-subscript',\n  },\n];\n\nconst Text = (props: TextProps) => {\n  const { formState, position, id } = props;\n  const rawContentState: RawDraftContentState | null = props.content\n    ? (JSON.parse(props.content) as RawDraftContentState)\n    : null;\n  const [editorState, setEditorState] = useState<EditorState>(\n    EditorState.moveFocusToEnd(\n      EditorState.createWithContent(\n        convertFromRaw(rawContentState || { blocks: [], entityMap: {} }),\n      ),\n    ),\n  );\n\n  const result = () => {\n    const content = editorState.getCurrentContent();\n    return {\n      content: content.hasText() ? JSON.stringify(convertToRaw(content)) : '',\n      position,\n      id,\n    };\n  };\n\n  const keyBindingFn = (e: React.KeyboardEvent): string | null => {\n    if (e.key === 'Enter') {\n      e.stopPropagation();\n    }\n\n    return getDefaultKeyBinding(e);\n  };\n\n  const onContentChange = (state: EditorState): void => {\n    setEditorState(state);\n  };\n\n  const currentStyle = editorState.getCurrentInlineStyle();\n\n  const toggleStyle = useCallback(\n    (command: TextCommand): void => {\n      let newEditorState: EditorState = editorState;\n      switch (command) {\n        case TextCommand.Subscript: {\n          if (currentStyle.has(TextCommand.Superscript)) {\n            newEditorState = RichUtils.toggleInlineStyle(\n              newEditorState,\n              TextCommand.Superscript,\n            );\n          }\n          break;\n        }\n        case TextCommand.Superscript: {\n          if (currentStyle.has(TextCommand.Subscript)) {\n            newEditorState = RichUtils.toggleInlineStyle(\n              newEditorState,\n              TextCommand.Subscript,\n            );\n          }\n          break;\n        }\n      }\n      newEditorState = RichUtils.toggleInlineStyle(newEditorState, command);\n\n      setEditorState(newEditorState);\n    },\n    [currentStyle, editorState],\n  );\n\n  const customStyleMap: DraftStyleMap = {\n    SUBSCRIPT: {\n      verticalAlign: 'sub',\n      transform: 'scale(0.7)',\n      transformOrigin: 'left',\n    },\n    SUPERSCRIPT: {\n      verticalAlign: 'super',\n      transform: 'scale(0.7)',\n      transformOrigin: 'left',\n      lineHeight: 0,\n    },\n  };\n\n  const refEditor = useRef() as MutableRefObject<Editor>;\n  const setFocusInEditor = useCallback(() => {\n    refEditor.current.focus();\n  }, [refEditor]);\n\n  // set focut on component mount\n  useEffect(() => {\n    setFocusInEditor();\n  }, [setFocusInEditor]);\n\n  return (\n    <Dialog\n      className={classes.textEditor}\n      title=\"Text Editor\"\n      params={props}\n      result={result}\n      valid={() => formState.form.valid}\n      buttonsNameMap={{ OK: 'Apply' }}\n      buttons={['Cancel', 'OK']}\n      withDivider\n    >\n      <div className={classes.controlPanel} onClick={setFocusInEditor}>\n        {buttons.map((button) => {\n          return (\n            <TextButton\n              button={button}\n              key={button.name}\n              active={currentStyle.has(button.command)}\n              toggleStyle={toggleStyle}\n            />\n          );\n        })}\n        <SpecialSymbolsButton\n          editorState={editorState}\n          setEditorState={setEditorState}\n          styles={currentStyle}\n        />\n        <span>Font Size</span>\n        <FontControl\n          editorState={editorState}\n          setEditorState={setEditorState}\n          styles={styles}\n        />\n      </div>\n      <span>Text:</span>\n      <Editor\n        keyBindingFn={keyBindingFn}\n        editorState={editorState}\n        onChange={onContentChange}\n        customStyleMap={customStyleMap}\n        customStyleFn={customStyleFn}\n        ref={refEditor}\n      />\n    </Dialog>\n  );\n};\n\nexport default connect((store) => ({ formState: (store as any).modal }))(Text);\n","import classes from '../toolbox/FG/RemoveFG.module.less';\n\ntype ConfirmProps = {\n  onOk: () => void;\n  onCancel: () => void;\n};\n\nexport const Confirm = ({ onOk, onCancel }: ConfirmProps) => {\n  return (\n    <div className={classes.window}>\n      <header className={classes.header}>Warning!</header>\n      <div className={classes.question}>\n        Unsupported S-group type found. Would you like to import structure\n        without it?\n      </div>\n      <footer className={classes.footer}>\n        <input\n          type=\"button\"\n          value={'Cancel'}\n          className={classes.buttonCancel}\n          onClick={() => onCancel()}\n        />\n        <input\n          type=\"button\"\n          value={'OK'}\n          className={classes.buttonOk}\n          onClick={() => onOk()}\n        />\n      </footer>\n    </div>\n  );\n};\n","export const pasteErrorText =\n  \"Your browser doesn't allow pasting clipboard content via button. Please use shortcut instead.\";\n\nexport const shortcut = { hotKey: 'CTRL/Cmd + V', label: 'for paste' };\n\nexport const error = {\n  message: 'Error Message',\n  close: 'Close',\n};\n","import { pasteErrorText, shortcut } from '../constants';\n\nimport styles from './PasteErrorModalBody.module.less';\n\nexport const PasteErrorModalBody = (): JSX.Element => {\n  return (\n    <div className={styles.pasteErrorModalBody}>\n      <div>{pasteErrorText}</div>\n      <div className={styles.shortcutsBlock}>\n        <div className={styles.shortcuts}>\n          <div\n            className={styles.shortcut}\n            data-testid=\"infoModal-shortcut-for-paste\"\n          >\n            {shortcut.hotKey}\n          </div>\n          <div>{shortcut.label}</div>\n        </div>\n      </div>\n    </div>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { connect } from 'react-redux';\nimport config from 'src/script/ui/action';\nimport { error } from './constants';\nimport { Dialog } from '../../../components';\nimport { PasteErrorModalBody } from './PasteErrorModalBody';\n\nimport styles from './InfoModal.module.less';\n\nfunction ErrorInfoModal(props) {\n  const paste = config.paste.title ?? 'Paste';\n  const isPasteError = props.message === paste;\n\n  const defaultCutCopyMessage = `This action is unavailable via menu. Instead, use shortcut to ${props.message}.`;\n\n  const headerContent = <div>{props.title ?? error.message}</div>;\n\n  return (\n    <Dialog\n      className={styles.infoModal}\n      params={props}\n      buttons={[\n        <button onClick={props.onOk} className={styles.ok} key=\"ok\">\n          {props.button || 'Close'}\n        </button>,\n      ]}\n      headerContent={headerContent}\n    >\n      <div>\n        {props.customText ||\n          (isPasteError ? <PasteErrorModalBody /> : defaultCutCopyMessage)}\n      </div>\n    </Dialog>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  errorMessage: state.options.app.errorMessage,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  onOk: (_result) => {\n    dispatch({ type: 'MODAL_CLOSE' });\n  },\n});\n\nconst InfoModal = connect(mapStateToProps, mapDispatchToProps)(ErrorInfoModal);\n\nexport default InfoModal;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { About, Settings } from '../views/modal/components/meta';\nimport {\n  Analyse,\n  Check,\n  Miew,\n  Recognize,\n} from '../views/modal/components/process';\n// schemify dialogs\nimport {\n  Atom,\n  AttachPoints,\n  Automap,\n  Bond,\n  RgroupLogic,\n} from '../views/modal/components/toolbox';\nimport { Open, Save } from '../views/modal/components/document';\n\nimport EnhancedStereo from './toolbox/enhancedStereo/enhancedStereo';\nimport LabelEdit from './toolbox/labeledit';\nimport PeriodTable from '../views/modal/components/PeriodTable';\nimport ExtendedTable from '../views/modal/components/ExtendedTable';\nimport { RemoveFG } from '../views/modal/components/toolbox/FG/RemoveFG';\nimport Rgroup from './toolbox/rgroup/rgroup';\nimport SGroup from './toolbox/sgroup';\nimport TemplateAttach from './template/template-attach';\nimport TemplatesDialog from './template/TemplateDialog';\nimport Text from '../views/modal/components/Text';\nimport { Confirm } from '../views/modal/components/Confirm';\nimport InfoModal from '../views/modal/components/InfoModal';\n\nexport default {\n  open: Open,\n  analyse: Analyse,\n  recognize: Recognize,\n  'period-table': PeriodTable,\n  'extended-table': ExtendedTable,\n  rgroup: Rgroup,\n  attach: TemplateAttach,\n  templates: TemplatesDialog,\n  about: About,\n  miew: Miew,\n  atomProps: Atom,\n  attachmentPoints: AttachPoints,\n  automap: Automap,\n  bondProps: Bond,\n  check: Check,\n  enhancedStereo: EnhancedStereo,\n  labelEdit: LabelEdit,\n  rgroupLogic: RgroupLogic,\n  removeFG: RemoveFG,\n  save: Save,\n  settings: Settings,\n  sgroup: SGroup,\n  text: Text,\n  confirm: Confirm,\n  'info-modal': InfoModal,\n} as any;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useRef } from 'react';\n\nimport { BaseCallProps } from './modal.types';\nimport classes from './Modal.module.less';\nimport selectClasses from '../../component/form/Select/Select.module.less';\nimport clsx from 'clsx';\nimport mediaSizes from './mediaSizes';\nimport modals from '../../dialog';\nimport useResizeObserver from 'use-resize-observer/polyfilled';\n\ninterface ModalProps extends BaseCallProps {\n  modal: {\n    name: string;\n    form: any;\n    prop: any;\n  };\n}\n\ntype Props = ModalProps & BaseCallProps;\n\nfunction Modal(props: Props) {\n  const { modal, ...rest } = props;\n  const containerRef = useRef<HTMLDivElement>(null);\n  const { height, width } = useResizeObserver<HTMLDivElement>({\n    ref: containerRef,\n  });\n\n  if (!modal) return null;\n\n  const Component = modals[modal.name];\n\n  if (!Component)\n    throw new Error(`There is no modal window named ${modal.name}`);\n\n  return (\n    <div\n      className={clsx(classes.modalOverlay, selectClasses.selectContainer)}\n      ref={containerRef}\n      data-testid={`${modal.name}-dialog`}\n    >\n      <Component\n        className={clsx({\n          [classes.smallScreen]:\n            (height && height <= mediaSizes.smallHeight) ||\n            (width && width <= mediaSizes.smallWidth),\n        })}\n        {...rest}\n      />\n    </div>\n  );\n}\n\nexport type { ModalProps };\nexport { Modal };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Modal, ModalProps } from './Modal';\n\nimport { BaseCallProps } from './modal.types';\nimport { Dispatch } from 'redux';\nimport { connect } from 'react-redux';\nimport { omit } from 'lodash/fp';\n\ntype StateProps = Pick<ModalProps, 'modal'>;\n\nconst mapStateToProps = (state): StateProps => ({\n  modal: state.modal,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch): BaseCallProps => ({\n  onOk: (_result) => {\n    dispatch({ type: 'MODAL_CLOSE' });\n  },\n  onCancel: () => {\n    dispatch({ type: 'MODAL_CLOSE' });\n  },\n});\n\nconst mergeProps = (\n  stateProps: StateProps,\n  dispatchProps: BaseCallProps,\n): ModalProps => {\n  const prop = stateProps.modal && stateProps.modal.prop;\n  const initProps = prop ? omit(['onResult', 'onCancel'], prop) : {};\n  return {\n    modal: stateProps.modal,\n    ...initProps,\n    onOk: (result) => {\n      if (prop && prop.onResult) prop.onResult(result);\n      dispatchProps.onOk(result);\n    },\n    onCancel: () => {\n      if (prop && prop.onCancel) prop.onCancel();\n      dispatchProps.onCancel();\n    },\n  };\n};\n\nconst ModalContainer = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n  mergeProps,\n)(Modal);\n\nexport default ModalContainer;\n","import { Atom, Bond } from 'ketcher-core';\n\ntype partialPropertiesOfElement = Partial<{\n  [attribute in keyof (Atom | Bond)]: string | number | boolean;\n}>;\n\n// If all elements have the same value, then this value is used as a baseline\n// otherwise it is set to an empty string. Afterwards, empty string denotes that the value is not changed\nexport function generateCommonProperties(\n  selectedElements: Atom[] | Bond[],\n  normalizedElement,\n): partialPropertiesOfElement {\n  const properties = Object.getOwnPropertyNames(normalizedElement);\n  const resultElementAttributes: partialPropertiesOfElement = {};\n  properties.forEach((property) => {\n    const uniqueValues = new Set();\n    selectedElements.forEach((element) => {\n      uniqueValues.add(element[property]);\n    });\n    const allElementsHaveTheSameValue = uniqueValues.size === 1;\n    if (allElementsHaveTheSameValue) {\n      resultElementAttributes[property] = normalizedElement[property];\n    } else {\n      resultElementAttributes[property] = '';\n    }\n  });\n  return resultElementAttributes;\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  fromAtom,\n  fromBond,\n  fromElement,\n  fromSgroup,\n  fromStereoLabel,\n  toBond,\n  toElement,\n  toSgroup,\n  toStereoLabel,\n} from '../../data/convert/structconv';\n\nimport { Elements, KetcherLogger } from 'ketcher-core';\nimport acts from '../../action';\nimport { debounce } from 'lodash/fp';\nimport { openDialog } from '../modal';\nimport { highlightFG } from '../functionalGroups';\nimport { serverCall } from '../server';\nimport { isAtomsArray } from '../modal/atoms';\nimport { generateCommonProperties } from './utils';\nimport { saveSettings } from '../options';\nimport { memoizedDebounce } from '../../utils';\nimport { updateFloatingTools } from '../floatingTools';\nimport { openInfoModalWithCustomMessage } from '../shared';\n\nexport default function initEditor(dispatch, getState) {\n  const updateAction = debounce(100, () => dispatch({ type: 'UPDATE' }));\n  const sleep = (time) => new Promise((resolve) => setTimeout(resolve, time));\n\n  const resetToSelect =\n    (force = false) =>\n    (dispatch) => {\n      // eslint-disable-line no-shadow\n      const state = global.currentState;\n      const activeTool = state.actionState.activeTool.tool;\n      if (activeTool === 'select' && !force) return;\n      const selectMode = state.toolbar.visibleTools.select;\n      const resetOption = state.options.settings.resetToSelect;\n      if (resetOption === true || resetOption === activeTool || force === true)\n        // example: 'paste'\n        dispatch({ type: 'ACTION', action: acts[selectMode].action });\n      else updateAction();\n    };\n\n  return {\n    onInit: (editor) => {\n      dispatch({ type: 'INIT', editor });\n    },\n    onChange: (action) => {\n      if (action === undefined) sleep(0).then(() => dispatch(resetToSelect()));\n      // Editor switched to view only mode\n      if (action === 'force') dispatch(resetToSelect(true));\n      // new tool in reducer\n      else dispatch(resetToSelect());\n    },\n    onSelectionChange: () => {\n      updateAction();\n    },\n    onElementEdit: (selem) => {\n      if (isAtomsArray(selem)) {\n        const atomAttributes = generateCommonProperties(\n          selem,\n          fromAtom(selem[0]),\n        );\n        return openDialog(dispatch, 'atomProps', {\n          ...atomAttributes,\n          isMultipleAtoms: true,\n        }).then(toElement);\n      }\n      const elem = selem.type === 'text' ? selem : fromElement(selem);\n      let dlg = null;\n      if (elem.type === 'text') {\n        // TODO: move textdialog opening logic to another place\n        return openDialog(dispatch, 'text', elem);\n      } else if (Elements.get(elem.label)) {\n        dlg = openDialog(dispatch, 'atomProps', elem);\n      } else if (Object.keys(elem).length === 1 && 'ap' in elem) {\n        dlg = openDialog(dispatch, 'attachmentPoints', elem.ap).then((res) => ({\n          ap: res,\n        }));\n      } else if (elem.type === 'list' || elem.type === 'not-list') {\n        dlg = openDialog(\n          dispatch,\n          !elem.pseudo ? 'period-table' : 'extended-table',\n          { ...elem, pseudo: elem.pseudo },\n        );\n      } else if (elem.type === 'rlabel') {\n        const rgroups = getState().editor.struct().rgroups;\n        const params = {\n          type: 'atom',\n          values: elem.values,\n          disabledIds: Array.from(rgroups.entries()).reduce(\n            (acc, [rgid, rg]) => {\n              if (rg.frags.has(elem.fragId)) acc.push(rgid);\n\n              return acc;\n            },\n            [],\n          ),\n        };\n        dlg = openDialog(dispatch, 'rgroup', params).then((res) => ({\n          values: res.values,\n          type: 'rlabel',\n        }));\n      } else {\n        dlg = openDialog(\n          dispatch,\n          !elem.pseudo ? 'period-table' : 'extended-table',\n          { ...elem, pseudo: elem.pseudo },\n        );\n      }\n      return dlg.then(toElement);\n    },\n\n    // TODO: correct\n    onEnhancedStereoEdit: ({ ...init }) =>\n      sleep(0).then(() => {\n        init = fromStereoLabel(init.stereoLabel);\n        return openDialog(dispatch, 'enhancedStereo', {\n          init,\n        }).then(\n          (res) => toStereoLabel(res),\n          () => null,\n        );\n      }),\n\n    onQuickEdit: (atom) => openDialog(dispatch, 'labelEdit', atom),\n    onBondEdit: (bonds) => {\n      const bondsAttributes = generateCommonProperties(bonds, bonds[0]);\n      return openDialog(dispatch, 'bondProps', fromBond(bondsAttributes)).then(\n        toBond,\n      );\n    },\n    onRgroupEdit: (rgroup) => {\n      const struct = getState().editor.struct();\n\n      if (Object.keys(rgroup).length > 2) {\n        const rgroupLabels = Array.from(struct.rgroups.keys());\n        if (!rgroup.range) rgroup.range = '>0';\n\n        return openDialog(\n          dispatch,\n          'rgroupLogic',\n          Object.assign({ rgroupLabels }, rgroup),\n        );\n      }\n\n      const disabledIds = Array.from(struct.atoms.values()).reduce(\n        (acc, atom) => {\n          if (atom.fragment === rgroup.fragId && atom.rglabel !== null)\n            return acc.concat(fromElement(atom).values);\n\n          return acc;\n        },\n        [],\n      );\n      const params = {\n        type: 'fragment',\n        values: [rgroup.label],\n        disabledIds,\n      };\n      return openDialog(dispatch, 'rgroup', params).then((res) => ({\n        label: res.values[0],\n      }));\n    },\n    onSgroupEdit: (sgroup) =>\n      sleep(0) // huck to open dialog after dispatch sgroup tool action\n        .then(() => openDialog(dispatch, 'sgroup', fromSgroup(sgroup)))\n        .then(toSgroup),\n    onRemoveFG: (result) =>\n      sleep(0).then(() => openDialog(dispatch, 'removeFG', result)),\n    onMessage: (msg) => {\n      if (msg.error) {\n        // TODO: add error handler call\n      }\n    },\n    onAromatizeStruct: (struct) => {\n      const state = getState();\n      const serverOpts = state.options.getServerSettings();\n      return serverCall(\n        state.editor,\n        state.server,\n        'aromatize',\n        serverOpts,\n        struct,\n      ).catch((e) => {\n        KetcherLogger.error('index.js::initEditor::onAromatizeStruct', e);\n        state.editor.errorHandler(e);\n      });\n    },\n    onDearomatizeStruct: (struct) => {\n      const state = getState();\n      const serverOpts = state.options.getServerSettings();\n      return serverCall(\n        state.editor,\n        state.server,\n        'dearomatize',\n        serverOpts,\n        struct,\n      ).catch((e) => {\n        KetcherLogger.error('index.js::initEditor::onDearomatizeStruct', e);\n        state.editor.errorHandler(e);\n      });\n    },\n    onMouseDown: () => {\n      updateAction();\n    },\n    onConfirm: () => openDialog(dispatch, 'confirm'),\n    onShowInfo: (payload) => {\n      if (payload) {\n        const { groupStruct, event, sGroup } = payload;\n        highlightFG(dispatch, { groupStruct, event, sGroup });\n      } else {\n        highlightFG(dispatch, { groupStruct: null, sGroup: null });\n      }\n    },\n    onApiSettings: (payload) => dispatch(saveSettings(payload)),\n\n    onUpdateFloatingTools: memoizedDebounce(\n      /**\n       * @param {import('src/script/editor/Editor').FloatingToolsParams} payload\n       */\n      (payload) => {\n        dispatch(updateFloatingTools(payload));\n      },\n    ),\n\n    onZoomIn: updateAction,\n    onZoomOut: updateAction,\n\n    onShowMacromoleculesErrorMessage: (payload) =>\n      dispatch(openInfoModalWithCustomMessage(payload)),\n  };\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { StructEditor } from './components';\nimport { connect } from 'react-redux';\nimport initEditor from '../state/editor';\nimport { onAction } from '../state';\nimport action from '../action';\n\nconst dispatchAction = (dispatch, actionName, event) => {\n  dispatch(onAction(action[actionName].action(event)));\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  const onZoomIn = (event) => dispatchAction(dispatch, 'zoom-in', event);\n  const onZoomOut = (event) => dispatchAction(dispatch, 'zoom-out', event);\n\n  return {\n    ...dispatch(initEditor),\n    onZoomOut,\n    onZoomIn,\n  };\n};\n\nconst Editor = connect((state) => {\n  const serverSettings = state.options.getServerSettings();\n\n  return {\n    options: state.options.settings,\n    serverSettings,\n    indigoVerification: state.requestsStatuses.indigoVerification,\n  };\n}, mapDispatchToProps)(StructEditor);\n\nexport default Editor;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport const selectCursorPosition = (state): { x: number; y: number } =>\n  state.common.cursorPosition;\n","export const ABBREVIATION_LOOKUP_TEST_ID = 'AbbreviationLookup';\n\nexport const NO_MATCHING_RESULTS_LABEL = 'No matching results';\nexport const START_TYPING_NOTIFICATION_LABEL =\n  'Start typing atom or template structure name';\n\nexport const MIN_LOOKUP_VALUE_LENGTH_FOR_HIGHLIGHT = 2;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  AbbreviationGenericOption,\n  AbbreviationOption,\n} from './AbbreviationLookup.types';\nimport { FilterOptionsState } from '@mui/material';\nimport { MIN_LOOKUP_VALUE_LENGTH_FOR_HIGHLIGHT } from './AbbreviationLookup.constants';\n\nexport const getStringsSimilarity = (\n  loweredText?: string,\n  loweredSubString?: string,\n): number => {\n  if (!loweredText || !loweredSubString) {\n    return 0;\n  }\n\n  return loweredText.includes(loweredSubString)\n    ? loweredSubString.length / loweredText.length\n    : 0;\n};\n\nconst getHighlightSearchStartIndex = (\n  option: AbbreviationGenericOption,\n  loweredLookupValue: string,\n): number => {\n  if (\n    !option.loweredAbbreviation ||\n    option.loweredAbbreviation === option.loweredName\n  ) {\n    return 0;\n  }\n\n  const nameStartsWith = option.loweredName.startsWith(loweredLookupValue);\n  const abbreviationStartsWith =\n    option.loweredAbbreviation.startsWith(loweredLookupValue);\n\n  if (nameStartsWith && !abbreviationStartsWith) {\n    return option.loweredAbbreviation.length;\n  } else if (!nameStartsWith && abbreviationStartsWith) {\n    return 0;\n  }\n\n  const nameSimilarity = getStringsSimilarity(\n    option.loweredName,\n    loweredLookupValue,\n  );\n  const abbreviationSimilarity = getStringsSimilarity(\n    option.loweredAbbreviation,\n    loweredLookupValue,\n  );\n\n  return abbreviationSimilarity >= nameSimilarity\n    ? 0\n    : option.loweredAbbreviation.length;\n};\n\nexport const highlightOptionLabel = (\n  option: AbbreviationGenericOption,\n  initialLoweredValue: string,\n) => {\n  const trimmedLoweredValue = initialLoweredValue.trim();\n\n  if (trimmedLoweredValue.length < MIN_LOOKUP_VALUE_LENGTH_FOR_HIGHLIGHT) {\n    return option.label;\n  }\n\n  const searchFromIndex = getHighlightSearchStartIndex(\n    option,\n    trimmedLoweredValue,\n  );\n  const startPos = option.loweredLabel.indexOf(\n    trimmedLoweredValue,\n    searchFromIndex,\n  );\n  if (startPos === -1) {\n    return option.label;\n  }\n\n  const endPos = startPos + trimmedLoweredValue.length;\n  const startPart = option.label.substring(0, startPos);\n  const middlePart = option.label.substring(startPos, endPos);\n  const endPart = option.label.substring(endPos);\n\n  return (\n    <>\n      {startPart}\n      <mark>{middlePart}</mark>\n      {endPart}\n    </>\n  );\n};\n\nexport const getOptionLabel = (option: AbbreviationGenericOption): string => {\n  return option.label;\n};\n\nexport const getSimilarity = (\n  option: AbbreviationGenericOption,\n  loweredLookupValue: string,\n): number => {\n  if (!loweredLookupValue) {\n    return 0;\n  }\n\n  const nameSimilarity = getStringsSimilarity(\n    option.loweredName,\n    loweredLookupValue,\n  );\n  const abbreviationSimilarity = getStringsSimilarity(\n    option.loweredAbbreviation,\n    loweredLookupValue,\n  );\n\n  return Math.max(nameSimilarity, abbreviationSimilarity);\n};\n\nexport const filterOptions = (\n  options: AbbreviationOption[],\n  state: FilterOptionsState<AbbreviationOption>,\n): AbbreviationOption[] => {\n  if (!state.inputValue) {\n    return [];\n  }\n\n  const loweredLookupValue = state.inputValue.toLowerCase().trim();\n\n  const filteredOptions = options.filter((option) => {\n    return (\n      option.loweredName.includes(loweredLookupValue) ||\n      (option.loweredAbbreviation &&\n        option.loweredAbbreviation.includes(loweredLookupValue))\n    );\n  });\n\n  filteredOptions.sort((optionA, optionB) => {\n    const optionAStartWith =\n      optionA.loweredName.startsWith(loweredLookupValue) ||\n      optionA.loweredAbbreviation?.startsWith(loweredLookupValue);\n    const optionBStartWith =\n      optionB.loweredName.startsWith(loweredLookupValue) ||\n      optionB.loweredAbbreviation?.startsWith(loweredLookupValue);\n\n    if (optionAStartWith && !optionBStartWith) {\n      return -1;\n    } else if (!optionAStartWith && optionBStartWith) {\n      return 1;\n    } else {\n      const optionASimilarity = getSimilarity(optionA, loweredLookupValue);\n      const optionBSimilarity = getSimilarity(optionB, loweredLookupValue);\n\n      if (optionASimilarity > optionBSimilarity) {\n        return -1;\n      } else if (optionASimilarity < optionBSimilarity) {\n        return 1;\n      } else {\n        return optionA.loweredLabel < optionB.loweredLabel ? -1 : 1;\n      }\n    }\n  });\n\n  return filteredOptions;\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Template } from '../template/TemplateTable';\nimport { Element } from 'ketcher-core';\n\nexport enum AbbreviationType {\n  Template = 'Template',\n  Element = 'Element',\n}\n\nexport interface AbbreviationGenericOption {\n  type: AbbreviationType;\n  loweredName: string;\n  loweredAbbreviation?: string;\n  label: string;\n  loweredLabel: string;\n}\n\nexport interface AbbreviationTemplateOption extends AbbreviationGenericOption {\n  type: AbbreviationType.Template;\n  template: Template;\n}\n\nexport interface AbbreviationElementOption extends AbbreviationGenericOption {\n  type: AbbreviationType.Element;\n  element: Element;\n}\n\nexport type AbbreviationOption =\n  | AbbreviationTemplateOption\n  | AbbreviationElementOption;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  ChangeEvent,\n  CSSProperties,\n  FocusEvent,\n  KeyboardEvent,\n  MutableRefObject,\n  SyntheticEvent,\n  useLayoutEffect,\n  useRef,\n  useState,\n} from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport assert from 'assert';\nimport { Icon } from 'components';\nimport MuiAutocomplete, {\n  AutocompleteChangeReason,\n} from '@mui/material/Autocomplete';\nimport { KETCHER_ROOT_NODE_CSS_SELECTOR } from 'src/constants';\nimport classes from './AbbreviationLookup.module.less';\nimport { Portal } from '../../Portal';\nimport { onAction } from '../../state';\nimport { selectAbbreviationLookupValue } from '../../state/abbreviationLookup/selectors';\nimport { closeAbbreviationLookup } from '../../state/abbreviationLookup';\nimport { selectCursorPosition } from '../../state/common/selectors';\nimport {\n  filterOptions,\n  getOptionLabel,\n  highlightOptionLabel,\n} from './AbbreviationLookup.utils';\nimport {\n  AbbreviationOption,\n  AbbreviationType,\n} from './AbbreviationLookup.types';\nimport {\n  ABBREVIATION_LOOKUP_TEST_ID,\n  NO_MATCHING_RESULTS_LABEL,\n  START_TYPING_NOTIFICATION_LABEL,\n} from './AbbreviationLookup.constants';\nimport { CLIP_AREA_BASE_CLASS } from '../../component/cliparea/cliparea';\n\ninterface Props {\n  options: AbbreviationOption[];\n}\n\nexport const AbbreviationLookup = ({ options }: Props) => {\n  const inputRef = useRef<HTMLInputElement | null>();\n  const autocompleteRef = useRef<HTMLInputElement | null>();\n\n  const dispatch = useDispatch();\n\n  const cursorPosition = useSelector(selectCursorPosition);\n  const usedCursorPositionRef = useRef(cursorPosition);\n  const [portalStyle, setPortalSize] = useState({} as CSSProperties);\n\n  const initialLookupValue = useSelector(selectAbbreviationLookupValue);\n  const [lookupValue, setLookupValue] = useState(initialLookupValue);\n  const [loweredLookupValue, setLoweredLookupValue] = useState(() =>\n    initialLookupValue.toLowerCase(),\n  );\n\n  useLayoutEffect(() => {\n    const containerHeight = autocompleteRef.current?.offsetHeight ?? 0;\n    const containerWidth = autocompleteRef.current?.offsetWidth ?? 0;\n\n    const parentNode = document.querySelector(KETCHER_ROOT_NODE_CSS_SELECTOR);\n    assert(parentNode !== null, 'Ketcher root node is required');\n    const parentRect = parentNode.getBoundingClientRect();\n\n    const maxLeft = parentRect.width - containerWidth;\n    const maxTop = parentRect.height - containerHeight;\n\n    const calculatedLeft = usedCursorPositionRef.current.x - parentRect.left;\n    const calculatedTop = usedCursorPositionRef.current.y - parentRect.top;\n\n    const left = Math.min(Math.max(0, calculatedLeft), maxLeft);\n    const top = Math.min(Math.max(0, calculatedTop), maxTop);\n\n    setPortalSize({\n      left: `${left}px`,\n      top: `${top}px`,\n    });\n\n    inputRef.current?.focus();\n\n    // TODO extract to a separate hook or utils\n    return () => {\n      (\n        inputRef.current\n          ?.closest(KETCHER_ROOT_NODE_CSS_SELECTOR)\n          ?.getElementsByClassName(CLIP_AREA_BASE_CLASS)[0] as HTMLElement\n      ).focus();\n    };\n  }, []);\n\n  const closePanel = () => {\n    dispatch(closeAbbreviationLookup());\n  };\n\n  const handleOnChange = (\n    _event: SyntheticEvent,\n    option: AbbreviationOption,\n    reason: AutocompleteChangeReason,\n  ) => {\n    if (reason !== 'selectOption') {\n      return;\n    }\n\n    if (option.type === AbbreviationType.Template) {\n      dispatch(onAction({ tool: 'template', opts: option.template }));\n    } else {\n      dispatch(onAction({ tool: 'atom', opts: option.element }));\n    }\n\n    closePanel();\n  };\n\n  const handleKeyDown = (event: KeyboardEvent<HTMLDivElement>) => {\n    if (event.key === 'Escape') {\n      closePanel();\n    }\n\n    event.stopPropagation();\n  };\n\n  const handleBlur = (event: FocusEvent<HTMLInputElement>) => {\n    if (event.target !== document.activeElement) {\n      closePanel();\n    }\n  };\n\n  return (\n    <Portal\n      isOpen={true}\n      className={classes.lookupContainer}\n      style={portalStyle}\n    >\n      <MuiAutocomplete<AbbreviationOption, false, true>\n        ref={autocompleteRef}\n        options={options}\n        inputValue={lookupValue}\n        getOptionLabel={getOptionLabel}\n        filterOptions={filterOptions}\n        onChange={handleOnChange}\n        onBlur={handleBlur}\n        onKeyDown={handleKeyDown}\n        openOnFocus\n        autoHighlight\n        noOptionsText={\n          loweredLookupValue\n            ? NO_MATCHING_RESULTS_LABEL\n            : START_TYPING_NOTIFICATION_LABEL\n        }\n        classes={{\n          option: classes.optionItem,\n          listbox: classes.listBox,\n          input: classes.input,\n          noOptions: classes.noOptions,\n        }}\n        renderInput={(params) => {\n          return (\n            <div className={classes.inputContainer} ref={params.InputProps.ref}>\n              <Icon name=\"search\" className={classes.searchIcon} />\n              <input\n                type=\"text\"\n                {...params.inputProps}\n                ref={(ref) => {\n                  inputRef.current = ref;\n\n                  // this workaround is required to have access to `ref` field of inputProps that isn't provided\n                  // by types, but present in the field\n                  (\n                    params.inputProps as {\n                      ref: MutableRefObject<HTMLInputElement | null>;\n                    }\n                  ).ref.current = ref;\n                }}\n                onChange={(event: ChangeEvent<HTMLInputElement>) => {\n                  setLookupValue(event.target.value);\n                  setLoweredLookupValue(event.target.value.toLowerCase());\n                }}\n              />\n            </div>\n          );\n        }}\n        renderOption={(props, option) => {\n          return (\n            <li {...props} title={option.label}>\n              <div className={classes.optionItemContent}>\n                {highlightOptionLabel(option, loweredLookupValue)}\n              </div>\n            </li>\n          );\n        }}\n        data-testid={ABBREVIATION_LOOKUP_TEST_ID}\n      />\n    </Portal>\n  );\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nexport const templatesLibSelector = (state) => {\n  return state.templates.lib;\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useMemo } from 'react';\nimport { uniqBy } from 'lodash';\nimport { useSelector } from 'react-redux';\nimport { Elements } from 'ketcher-core';\n\nimport { Template } from '../../template/TemplateTable';\nimport { functionalGroupsSelector } from '../../../state/functionalGroups/selectors';\nimport { templatesLibSelector } from '../../../state/templates/selectors';\nimport { saltsAndSolventsSelector } from '../../../state/saltsAndSolvents/selectors';\nimport {\n  AbbreviationOption,\n  AbbreviationType,\n} from '../AbbreviationLookup.types';\n\nexport const useOptions = (): AbbreviationOption[] => {\n  const functionGroups = useSelector(functionalGroupsSelector);\n  const templates = useSelector(templatesLibSelector);\n  const saltsAndSolvents = useSelector(saltsAndSolventsSelector);\n\n  return useMemo<AbbreviationOption[]>(() => {\n    // TODO uniqBy is required to remove duplicates. https://github.com/epam/ketcher/issues/2749\n    const uniqTemplates = uniqBy<Template>(\n      [...functionGroups, ...templates, ...saltsAndSolvents],\n      (template) => template.struct.name,\n    );\n\n    const mappedElementOptions: AbbreviationOption[] = Elements.getAll().map(\n      (element) => {\n        const label = `${element.label} (${element.title})`;\n        return {\n          type: AbbreviationType.Element,\n          element,\n          label,\n          loweredLabel: label.toLowerCase(),\n          loweredName: element.title.toLowerCase(),\n          loweredAbbreviation: element.label.toLowerCase(),\n        };\n      },\n    );\n\n    const mappedTemplateOptions: AbbreviationOption[] = uniqTemplates.map(\n      (template) => {\n        const label =\n          template.struct.abbreviation &&\n          template.struct.abbreviation !== template.struct.name\n            ? `${template.struct.abbreviation} (${template.struct.name})`\n            : template.struct.name;\n        return {\n          type: AbbreviationType.Template,\n          template,\n          label,\n          loweredLabel: label.toLowerCase(),\n          loweredName: template.struct.name.toLowerCase(),\n          loweredAbbreviation: template.struct.abbreviation?.toLowerCase(),\n        };\n      },\n    );\n\n    return [...mappedElementOptions, ...mappedTemplateOptions];\n  }, [functionGroups, saltsAndSolvents, templates]);\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useSelector } from 'react-redux';\n\nimport { AbbreviationLookup } from './AbbreviationLookup';\nimport { useOptions } from './hooks/useOptions';\n\nimport { selectIsAbbreviationLookupOpen } from '../../state/abbreviationLookup/selectors';\n\nexport const AbbreviationLookupContainer = () => {\n  const isOpen = useSelector(selectIsAbbreviationLookupOpen);\n  const abbreviationOptions = useOptions();\n\n  if (!isOpen) {\n    return null;\n  }\n\n  return <AbbreviationLookup options={abbreviationOptions} />;\n};\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  BottomToolbarContainer,\n  LeftToolbarContainer,\n  RightToolbarContainer,\n  TopToolbarContainer,\n} from '../views/toolbars';\nimport { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { createTheme, ThemeProvider } from '@mui/material';\nimport AppClipArea from '../views/AppClipArea';\nimport { AppHiddenContainer } from './AppHidden';\nimport AppModalContainer from '../views/modal';\nimport ConnectedEditor from '../views/Editor';\nimport classes from './App.module.less';\nimport { initFGroups, initFGTemplates } from '../state/functionalGroups';\nimport {\n  initSaltsAndSolvents,\n  initSaltsAndSolventsTemplates,\n} from '../state/saltsAndSolvents';\nimport { useSubscriptionOnEvents } from '../../../hooks';\nimport { AbbreviationLookupContainer } from '../dialog/AbbreviationLookup';\nimport { initLib } from '../state/templates/init-lib';\n\ninterface AppCallProps {\n  checkServer: () => void;\n  togglerComponent?: JSX.Element;\n}\n\nconst muiTheme = createTheme({\n  components: {\n    MuiButtonBase: {\n      defaultProps: {\n        disableRipple: true,\n      },\n    },\n  },\n});\n\ntype Props = AppCallProps;\n\nconst App = (props: Props) => {\n  const dispatch = useDispatch();\n  const { checkServer } = props;\n\n  useSubscriptionOnEvents();\n\n  useEffect(() => {\n    checkServer();\n    dispatch(initFGTemplates());\n    dispatch(initSaltsAndSolventsTemplates());\n\n    return () => {\n      dispatch(initLib([]));\n      dispatch(initSaltsAndSolvents([]));\n      dispatch(initFGroups([]));\n    };\n  }, []);\n\n  // Temporary workaround: add proper types for Editor\n  const Editor = ConnectedEditor as React.ComponentType<{ className: string }>;\n\n  return (\n    <ThemeProvider theme={muiTheme}>\n      <div className={classes.app}>\n        <AppHiddenContainer />\n        <Editor className={classes.canvas} />\n\n        <TopToolbarContainer\n          className={classes.top}\n          togglerComponent={props.togglerComponent}\n        />\n        <LeftToolbarContainer className={classes.left} />\n        <BottomToolbarContainer className={classes.bottom} />\n        <RightToolbarContainer className={classes.right} />\n\n        <AppClipArea />\n        <AppModalContainer />\n        <AbbreviationLookupContainer />\n      </div>\n    </ThemeProvider>\n  );\n};\n\nexport type { AppCallProps };\nexport { App };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { App, AppCallProps } from './App';\n\nimport { checkServer } from '../state/server';\nimport { connect } from 'react-redux';\n\nconst mapDispatchToProps: AppCallProps = {\n  checkServer,\n};\n\nconst AppContainer = connect<\n  Record<string, never>,\n  AppCallProps,\n  { togglerComponent?: JSX.Element }\n>(\n  null,\n  mapDispatchToProps,\n)(App);\n\nexport { AppContainer };\nexport default AppContainer;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { updateCursorPosition } from './common';\nimport { throttle } from 'lodash';\n\ntype mouseListener = ((event: MouseEvent) => void) | null;\n\nconst MOUSE_MOVE_THROTTLE_TIMEOUT = 300;\n\nconst handleMouseMove = (dispatch, event: MouseEvent) => {\n  dispatch(updateCursorPosition(event.clientX, event.clientY));\n};\n\nlet pointerMoveListener: mouseListener = null;\nlet mouseDownListener: mouseListener = null;\n\nexport function initMouseListener(element) {\n  return function (dispatch, getState) {\n    const throttledHandleMouseMove = throttle(\n      handleMouseMove,\n      MOUSE_MOVE_THROTTLE_TIMEOUT,\n    );\n\n    pointerMoveListener = (event: MouseEvent) =>\n      throttledHandleMouseMove(dispatch, event);\n    mouseDownListener = (event: MouseEvent) => {\n      const areBothLeftAndRightButtonsClicked = event.buttons === 3;\n      if (areBothLeftAndRightButtonsClicked) {\n        handleRightClick(getState);\n      }\n    };\n\n    element.addEventListener('pointermove', pointerMoveListener);\n    element.addEventListener('mousedown', mouseDownListener, true);\n  };\n}\n\nexport function removeMouseListeners(element) {\n  return function () {\n    if (pointerMoveListener) {\n      element.removeEventListener('pointermove', pointerMoveListener);\n    }\n\n    if (mouseDownListener) {\n      element.addEventListener('mousedown', mouseDownListener, true);\n    }\n  };\n}\n\nfunction handleRightClick(getState) {\n  const state = getState();\n  const { editor } = state;\n\n  if (editor.rotateController.isRotating) {\n    editor.rotateController.revert();\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  AppContext,\n  ErrorsContext,\n  SettingsContext,\n} from './../../../contexts';\nimport { Ketcher, StructService } from 'ketcher-core';\n\nimport App from './App.container';\nimport { Provider } from 'react-redux';\nimport { uniqueId } from 'lodash';\nimport { Root } from 'react-dom/client';\nimport createStore, { setServer } from '../state';\nimport { initKeydownListener, removeKeydownListener } from '../state/hotkeys';\nimport { initResize } from '../state/toolbar';\nimport { initMouseListener, removeMouseListeners } from '../state/mouse';\n\nfunction initApp(\n  element: HTMLDivElement | null,\n  appRoot: Root,\n  staticResourcesUrl: string,\n  options: any,\n  server: StructService,\n  resolve: (args: {\n    editor: any;\n    setKetcher: (ketcher: Ketcher) => void;\n    ketcherId: string;\n    setServer: (server: StructService) => void;\n  }) => void,\n  togglerComponent?: JSX.Element,\n) {\n  let ketcherRef: Ketcher | null = null;\n  const setKetcher = (ketcher: Ketcher) => {\n    ketcherRef = ketcher;\n  };\n  const ketcherId = uniqueId();\n  // hack to return server setter to Editor.tsx\n  // because it does not have access to store\n  // eslint-disable-next-line prefer-const\n  let getServerSetter: () => (structService: StructService) => void;\n\n  const setEditor = (editor) => {\n    const setServer = getServerSetter();\n    resolve({ editor, setKetcher, ketcherId, setServer });\n  };\n  const store = createStore(options, server, setEditor);\n\n  getServerSetter = () => {\n    return (structService: StructService) => {\n      store.dispatch(setServer(structService));\n    };\n  };\n\n  store.dispatch(initKeydownListener(element));\n  store.dispatch(initMouseListener(element));\n  store.dispatch(initResize());\n\n  appRoot.render(\n    <Provider store={store}>\n      <SettingsContext.Provider value={{ staticResourcesUrl }}>\n        <ErrorsContext.Provider value={{ errorHandler: options.errorHandler }}>\n          <AppContext.Provider\n            value={{\n              // Expected this is set before load\n              getKetcherInstance: () => ketcherRef as unknown as Ketcher,\n              ketcherId,\n            }}\n          >\n            <App togglerComponent={togglerComponent} />\n          </AppContext.Provider>\n        </ErrorsContext.Provider>\n      </SettingsContext.Provider>\n    </Provider>,\n  );\n\n  return () => {\n    store.dispatch(removeKeydownListener(element));\n    store.dispatch(removeMouseListeners(element));\n  };\n}\n\nexport { initApp };\n","import { StructService } from 'ketcher-core';\n\nlet indigo;\nexport class IndigoProvider {\n  static getIndigo(): StructService {\n    return indigo;\n  }\n\n  static setIndigo(newIndigo: StructService) {\n    indigo = newIndigo;\n  }\n}\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport {\n  DefaultStructServiceOptions,\n  FormatterFactory,\n  Ketcher,\n  ServiceMode,\n  StructService,\n  StructServiceProvider,\n  ketcherProvider,\n  KetcherLogger,\n} from 'ketcher-core';\n\nimport { ButtonsConfig } from './ButtonsConfig';\nimport { Editor } from '../../editor';\nimport createApi from '../../api';\nimport { initApp } from '../../ui';\nimport { Root } from 'react-dom/client';\nimport { IndigoProvider } from 'src/script/providers';\nimport { STRUCT_SERVICE_INITIALIZED_EVENT } from '../../../constants';\nimport { CustomButton } from './CustomButtons';\n\nclass KetcherBuilder {\n  private structService: StructService | null;\n  private editor: Editor | null;\n  private serviceMode: ServiceMode | null;\n  private formatterFactory: FormatterFactory | null;\n\n  constructor() {\n    this.structService = null;\n    this.editor = null;\n    this.serviceMode = null;\n    this.formatterFactory = null;\n  }\n\n  async appendApiAsync(structServiceProvider: StructServiceProvider) {\n    this.structService = createApi(\n      structServiceProvider,\n      DefaultStructServiceOptions,\n    );\n  }\n\n  reinitializeApi(\n    structServiceProvider: StructServiceProvider,\n    setStructServiceToStore: (structService: StructService) => void,\n  ) {\n    const oldStructService = this.structService;\n\n    this.structService = createApi(\n      structServiceProvider,\n      DefaultStructServiceOptions,\n    );\n\n    window.addEventListener(\n      STRUCT_SERVICE_INITIALIZED_EVENT,\n      () => {\n        oldStructService?.destroy?.();\n\n        if (!this.structService) {\n          KetcherLogger.warn('Structure service is not reinitialized');\n\n          return;\n        }\n\n        const ketcher = ketcherProvider.getKetcher();\n        ketcher.reinitializeIndigo(this.structService);\n        IndigoProvider.setIndigo(this.structService);\n        setStructServiceToStore(this.structService);\n      },\n      { once: true },\n    );\n\n    return this.structService;\n  }\n\n  appendServiceMode(mode: ServiceMode) {\n    this.serviceMode = mode;\n  }\n\n  async appendUiAsync(\n    element: HTMLDivElement | null,\n    appRoot: Root,\n    staticResourcesUrl: string,\n    errorHandler: (message: string) => void,\n    buttons?: ButtonsConfig,\n    togglerComponent?: JSX.Element,\n    customButtons?: Array<CustomButton>,\n  ): Promise<{\n    setKetcher: (ketcher: Ketcher) => void;\n    ketcherId: string;\n    cleanup: ReturnType<typeof initApp> | null;\n    setServer: (structService: StructService) => void;\n  }> {\n    const { structService } = this;\n    let cleanup: ReturnType<typeof initApp> | null = null;\n\n    const { editor, setKetcher, ketcherId, setServer } = await new Promise<{\n      editor: Editor;\n      setKetcher: (ketcher: Ketcher) => void;\n      ketcherId: string;\n      setServer: (structService: StructService) => void;\n    }>((resolve) => {\n      cleanup = initApp(\n        element,\n        appRoot,\n        staticResourcesUrl,\n        {\n          buttons: buttons || {},\n          errorHandler: errorHandler || null,\n          version: process.env.VERSION || '',\n          buildDate: process.env.BUILD_DATE || '',\n          buildNumber: process.env.BUILD_NUMBER || '',\n          customButtons: customButtons || [],\n        },\n        structService!,\n        resolve,\n        togglerComponent,\n      );\n    });\n\n    this.editor = editor;\n    this.editor.errorHandler =\n      errorHandler && typeof errorHandler === 'function'\n        ? errorHandler\n        : // eslint-disable-next-line @typescript-eslint/no-empty-function\n          () => {};\n    this.formatterFactory = new FormatterFactory(structService!);\n\n    return { setKetcher, ketcherId, cleanup, setServer };\n  }\n\n  build() {\n    if (!this.serviceMode) {\n      throw new Error('You should append ServiceMode before building');\n    }\n\n    if (!this.structService) {\n      throw new Error('You should append Api before building');\n    }\n\n    if (!this.formatterFactory) {\n      throw new Error(\n        'You should append StructureServiceFactory before building',\n      );\n    }\n\n    const ketcher = new Ketcher(\n      this.editor!,\n      this.structService,\n      this.formatterFactory,\n    );\n    ketcher[this.serviceMode] = true;\n\n    const userInput = document.location.search;\n    if (\n      userInput === '__proto__' ||\n      userInput === 'constructor' ||\n      userInput === 'prototype'\n    ) {\n      return;\n    }\n    const params = new URLSearchParams(document.location.search);\n    const initialMol = params.get('moll');\n    if (initialMol) {\n      ketcher.setMolecule(initialMol);\n    }\n\n    IndigoProvider.setIndigo(this.structService);\n    ketcherProvider.setKetcherInstance(ketcher);\n    return ketcher;\n  }\n}\n\nexport { KetcherBuilder };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { Root } from 'react-dom/client';\nimport { ButtonsConfig, KetcherBuilder } from './builders';\n\nimport { StructServiceProvider } from 'ketcher-core';\nimport { CustomButton } from './builders/ketcher/CustomButtons';\n\ninterface Config {\n  element: HTMLDivElement | null;\n  appRoot: Root;\n  staticResourcesUrl: string;\n  structServiceProvider: StructServiceProvider;\n  buttons?: ButtonsConfig;\n  customButtons?: Array<CustomButton>;\n  errorHandler: (message: string) => void;\n  togglerComponent?: JSX.Element;\n}\n\nasync function buildKetcherAsync({\n  element,\n  appRoot,\n  staticResourcesUrl,\n  structServiceProvider,\n  buttons,\n  errorHandler,\n  togglerComponent,\n  customButtons,\n}: Config) {\n  const builder = new KetcherBuilder();\n\n  await builder.appendApiAsync(structServiceProvider);\n  builder.appendServiceMode(structServiceProvider.mode);\n  const { setKetcher, ketcherId, cleanup, setServer } =\n    await builder.appendUiAsync(\n      element,\n      appRoot,\n      staticResourcesUrl,\n      errorHandler,\n      buttons,\n      togglerComponent,\n      customButtons,\n    );\n\n  const ketcher = builder.build();\n  if (ketcher) {\n    setKetcher(ketcher);\n  }\n  return { ketcher, ketcherId, cleanup, builder, setServer };\n}\n\nexport type { Config, ButtonsConfig };\nexport * from './providers';\nexport default buildKetcherAsync;\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport 'intersection-observer';\nimport 'element-closest-polyfill';\nimport 'regenerator-runtime/runtime';\nimport 'url-search-params-polyfill';\nimport 'whatwg-fetch';\nimport './index.less';\n\nimport init, { Config } from './script';\nimport { useEffect, useRef } from 'react';\nimport { createRoot, Root } from 'react-dom/client';\n\nimport { Ketcher, StructService } from 'ketcher-core';\nimport classes from './Editor.module.less';\nimport clsx from 'clsx';\nimport { useResizeObserver } from './hooks';\nimport {\n  ketcherInitEventName,\n  KETCHER_ROOT_NODE_CLASS_NAME,\n} from './constants';\nimport { KetcherBuilder } from './script/builders';\n\nconst mediaSizes = {\n  smallWidth: 1040,\n  smallHeight: 600,\n};\n\nexport interface EditorProps extends Omit<Config, 'element' | 'appRoot'> {\n  onInit?: (ketcher: Ketcher) => void;\n}\n\nfunction MicromoleculesEditor(props: EditorProps) {\n  const initPromiseRef = useRef<ReturnType<typeof init> | null>(null);\n  const appRootRef = useRef<Root | null>(null);\n  const cleanupRef = useRef<(() => unknown) | null>(null);\n  const ketcherBuilderRef = useRef<KetcherBuilder | null>(null);\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  const setServerRef = useRef<(structService: StructService) => void>(() => {});\n  const structServiceProvider = props.structServiceProvider;\n\n  const rootElRef = useRef<HTMLDivElement>(null);\n\n  const { height, width } = useResizeObserver<HTMLDivElement>({\n    ref: rootElRef,\n  });\n\n  useEffect(() => {\n    ketcherBuilderRef.current?.reinitializeApi(\n      props.structServiceProvider,\n      setServerRef.current,\n    );\n  }, [structServiceProvider]);\n\n  const initKetcher = () => {\n    appRootRef.current = createRoot(rootElRef.current as HTMLDivElement);\n\n    initPromiseRef.current = init({\n      ...props,\n      element: rootElRef.current,\n      appRoot: appRootRef.current,\n    });\n\n    initPromiseRef.current?.then(\n      ({ ketcher, ketcherId, cleanup, builder, setServer }) => {\n        cleanupRef.current = cleanup;\n        ketcherBuilderRef.current = builder;\n        setServerRef.current = setServer;\n\n        if (typeof props.onInit === 'function' && ketcher) {\n          props.onInit(ketcher);\n          const ketcherInitEvent = new Event(ketcherInitEventName(ketcherId));\n          window.dispatchEvent(ketcherInitEvent);\n        }\n      },\n    );\n  };\n  useEffect(() => {\n    if (initPromiseRef.current === null) {\n      initKetcher();\n    } else {\n      initPromiseRef.current?.finally(() => {\n        initKetcher();\n      });\n    }\n\n    return () => {\n      initPromiseRef.current?.then(() => {\n        cleanupRef.current?.();\n        appRootRef.current?.unmount();\n      });\n    };\n    // TODO: provide the list of dependencies after implementing unsubscribe function\n  }, []);\n\n  return (\n    <div\n      ref={rootElRef}\n      className={clsx(KETCHER_ROOT_NODE_CLASS_NAME, classes.editor, {\n        [classes.small]:\n          (height && height <= mediaSizes.smallHeight) ||\n          (width && width <= mediaSizes.smallWidth),\n      })}\n    />\n  );\n}\n\nexport { MicromoleculesEditor };\n","/****************************************************************************\n * Copyright 2021 EPAM Systems\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n ***************************************************************************/\n\nimport { useState, useRef } from 'react';\nimport styled from '@emotion/styled';\nimport { Button, Popover } from '@mui/material';\nimport { Icon } from 'components';\nimport {\n  KETCHER_MACROMOLECULES_ROOT_NODE_SELECTOR,\n  KETCHER_ROOT_NODE_CSS_SELECTOR,\n} from '../../../../../constants';\n\ninterface IStyledIconProps {\n  expanded?: boolean;\n  hidden?: boolean;\n}\nconst ElementAndDropdown = styled('div')`\n  position: relative;\n  width: 28px;\n  padding: 2px;\n  flexgrow: 1;\n  display: flex;\n  justifycontent: flex-end;\n\n  @media only screen {\n    @container (min-width: 900px) {\n      width: 162px;\n      padding: 6px 3px;\n    }\n  }\n`;\n\nconst DropDownButton = styled(Button)(() => ({\n  display: 'flex',\n  justifyContent: 'space-between',\n  color: '#000000',\n  padding: '0px',\n  width: '100%',\n  minWidth: '0px',\n\n  '& svg:first-of-type': {\n    margin: '2px',\n    width: '20px',\n    height: '20px',\n  },\n}));\n\nconst StyledIcon = styled(Icon)<IStyledIconProps>`\n  width: 16px;\n  height: 16px;\n  transform: ${({ expanded }) => (expanded ? 'rotate(180deg)' : 'none')};\n  opacity: ${({ hidden }) => (hidden ? '0' : '100')};\n`;\n\nconst StyledIconForMacromoleculesToggler = styled(StyledIcon)`\n  display: none;\n  @media only screen {\n    @container (min-width: 900px) {\n      display: flex;\n    }\n  }\n`;\n\nconst CornerIcon = styled(Icon)`\n  display: block;\n  width: 7px;\n  height: 7px;\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  fill: @main-color;\n  @media only screen {\n    @container (min-width: 900px) {\n      display: none;\n    }\n  }\n`;\n\nconst ModeLabel = styled('span')`\n  display: none;\n  text-transform: none;\n  font-size: 12px;\n  text-align: left;\n  flex-grow: 1;\n  @media only screen {\n    @container (min-width: 900px) {\n      display: inline;\n    }\n  }\n`;\n\nconst ModeControlButton = styled('div')`\n  height: 28px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 3px;\n\n  :hover {\n    background-color: #f3f8f9;\n  }\n`;\n\nconst ModeButtonLable = styled('span')`\n  font-size: 12px;\n  flex-grow: 1;\n  text-align: start;\n  text-transform: none;\n`;\n\nconst Dropdown = styled(Popover)`\n  & .MuiPopover-paper {\n    padding: 3px 0px;\n    width: 162px;\n    border: none;\n    border-radius: 0px 0px 4px 4px;\n    box-shadow: 0px 30px 48px -17px rgba(160, 165, 174, 0.3);\n    box-sizing: border-box;\n  }\n`;\n\nconst DropDownContent = styled('div')`\n  display: flex;\n  flex-direction: column;\n  white-space: nowrap;\n  word-break: keep-all;\n  background: white;\n  cursor: pointer;\n`;\n\ninterface ModeProps {\n  toggle: (isEnabled: boolean) => void;\n  isPolymerEditor: boolean;\n}\n\nexport const ModeControl = ({ toggle, isPolymerEditor }: ModeProps) => {\n  const [isExpanded, setIsExpanded] = useState<boolean>(false);\n  const btnRef = useRef<HTMLButtonElement>(null);\n\n  const onClose = () => {\n    setIsExpanded(false);\n  };\n\n  const onExpand = () => {\n    setIsExpanded(true);\n  };\n\n  const modeLabel = isPolymerEditor ? 'Macromolecules' : 'Molecules';\n  const modeIcon = isPolymerEditor ? 'macromolecules-mode' : 'molecules-mode';\n  const title = isPolymerEditor\n    ? 'Switch to Ketcher mode'\n    : 'Switch to Macromolecule mode';\n\n  return (\n    <ElementAndDropdown title={title}>\n      <DropDownButton\n        data-testid=\"polymer-toggler\"\n        onClick={onExpand}\n        ref={btnRef}\n      >\n        <Icon name={modeIcon} />\n        <>\n          <ModeLabel>{modeLabel}</ModeLabel>\n          <StyledIconForMacromoleculesToggler\n            name=\"chevron\"\n            expanded={isExpanded}\n          />\n        </>\n        <>\n          <CornerIcon name=\"dropdown\" />\n        </>\n      </DropDownButton>\n      <Dropdown\n        title=\"\"\n        open={isExpanded}\n        onClose={onClose}\n        anchorEl={btnRef.current}\n        container={\n          document.querySelector(KETCHER_ROOT_NODE_CSS_SELECTOR) ||\n          document.querySelector(KETCHER_MACROMOLECULES_ROOT_NODE_SELECTOR)\n        }\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n      >\n        <DropDownContent>\n          <ModeControlButton\n            data-testid=\"molecules_mode\"\n            onClick={() => {\n              toggle(false);\n              onClose();\n            }}\n          >\n            <Icon name=\"molecules-mode\" />\n            <ModeButtonLable>Molecules</ModeButtonLable>\n            {!isPolymerEditor && <StyledIcon name=\"check-mark\" />}\n          </ModeControlButton>\n\n          <ModeControlButton\n            data-testid=\"macromolecules_mode\"\n            onClick={() => {\n              toggle(true);\n              onClose();\n            }}\n          >\n            <Icon name=\"macromolecules-mode\" />\n            <ModeButtonLable>Macromolecules</ModeButtonLable>\n            {isPolymerEditor && <StyledIcon name=\"check-mark\" />}\n          </ModeControlButton>\n        </DropDownContent>\n      </Dropdown>\n    </ElementAndDropdown>\n  );\n};\n","import { lazy, Suspense, useEffect, useState } from 'react';\nimport { MicromoleculesEditor, EditorProps } from './MicromoleculesEditor';\nimport { ModeControl } from './script/ui/views/toolbars/ModeControl';\nimport { LoadingCircles } from './script/ui/views/components';\n\nimport styles from './Editor.module.less';\n\ntype Props = EditorProps & {\n  disableMacromoleculesEditor?: boolean;\n};\n\n/*\n * TODO:\n *  ketcher-macromolecules is imported asynchronously to avoid circular dependencies between it and ketcher-react\n *  and ts-ignore is needed to avoid TypeScript error as ketcher-react is built first\n *  so ketcher-macromolecules can't provide any typings while building ketcher-react.\n *  Consider refactoring/restructuring packages to avoid these two issues\n */\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nconst MacromoleculesEditor = lazy(() => import('ketcher-macromolecules'));\n\nexport const Editor = (props: Props) => {\n  const [showPolymerEditor, setShowPolymerEditor] = useState(false);\n\n  const togglePolymerEditor = (toggleValue: boolean) => {\n    setShowPolymerEditor(toggleValue);\n    window.isPolymerEditorTurnedOn = toggleValue;\n  };\n\n  const togglerComponent = !props.disableMacromoleculesEditor ? (\n    <ModeControl\n      toggle={togglePolymerEditor}\n      isPolymerEditor={showPolymerEditor}\n    />\n  ) : undefined;\n\n  useEffect(() => {\n    return () => {\n      window.isPolymerEditorTurnedOn = false;\n    };\n  }, []);\n\n  return (\n    <>\n      {showPolymerEditor ? (\n        <Suspense\n          fallback={\n            <div className={styles.switchingLoader}>\n              <LoadingCircles />\n            </div>\n          }\n        >\n          <MacromoleculesEditor togglerComponent={togglerComponent} />\n        </Suspense>\n      ) : (\n        <MicromoleculesEditor {...props} togglerComponent={togglerComponent} />\n      )}\n    </>\n  );\n};\n"],"names":["createApi","structServiceProvider","defaultOptions","_structService$destro","structService","createStructService","info","Object","assign","bind","convert","layout","clean","aromatize","dearomatize","calculateCip","automap","check","calculate","recognize","generateImageAsBase64","getInChIKey","toggleExplicitHydrogens","destroy","appContext","React","createContext","errorsContext","settingsContext","formContext","basicAtoms","atomCuts","H","C","N","O","S","P","F","Cl","Br","I","A","Q","R","K","M","Si","Na","X","D","B","keys","reduce","res","label","concat","toLowerCase","title","shortcut","action","tool","opts","copyAs","type","state","global","currentState","editor","struct","structSelected","errorHandler","serializer","MolSerializer","KetSerializer","simpleObjectOrText","Boolean","simpleObjects","size","texts","structData","serialize","window","clipboardData","setData","navigator","clipboard","writeText","e","KetcherLogger","error","copyImageToClipboard","_copyImageToClipboard","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","server","options","factory","service","structStr","ketcher","image","item","wrap","_callee$","_context","prev","next","FormatterFactory","create","getStructureFromStructAsync","sent","Ketcher","generateImage","outputFormat","backgroundColor","bondThickness","settings","defaultBondThickness","ClipboardItem","_defineProperty","write","t0","stop","isHidden","buttonName","_options$buttons","buttons","hidden","debugObj","update","molSerializer","molStr","molQs","encodeURIComponent","replace","qs","document","location","search","ieCb","CLIP_AREA_BASE_CLASS","needSkipCopyEvent","ClipArea","_Component","_inherits","props","_this","_classCallCheck","_callSuper","textAreaRef","createRef","_createClass","key","value","componentDidMount","_this2","el","current","target","parentNode","listeners","mouseup","event","isActiveElement","focused","autoselect","mousedown","shiftKey","preventDefault","copy","isClipboardAPIAvailable","onCopy","then","data","notifyCopyCut","addEventListener","evt","legacyCopy","once","execCommand","cut","_cut","abrupt","onCut","onLegacyCut","_x","paste","read","onPaste","notifyRequestCompleted","legacyPaste","formats","onLegacyPaste","keydown","_keydown","_callee2","_navigator$clipboard","_window$ketcher$edito","_window$ketcher$edito2","_callee2$","_context2","isControlKey","altKey","code","pasteByKeydown","call","_x2","forEach","en","shouldComponentUpdate","componentWillUnmount","_this3","removeEventListener","render","_jsx","ref","className","clsx","classes","cliparea","contentEditable","suppressContentEditableWarning","Component","tagName","includes","select","_x3","_copy2","_callee3","clipboardItemData","clipboardItem","textData","_callee3$","_context3","mimeType","mimeTypeToSet","Promise","resolve","Blob","presentationStyle","JSON","stringify","curFmt","fmt","cb","getData","d","_x4","_pasteByKeydown","_callee4","_iterator","_step","textPlain","_callee4$","_context4","_createForOfIteratorHelper","s","n","done","getType","text","f","finish","actions","exec","enabled","queryCommandSupported","ClipboardEvent","MeasurementUnits","ImageResolution","resetToSelect","enumNames","rotationStep","minimum","maximum","showValenceWarnings","description","atomColoring","showStereoFlags","stereoLabelStyle","StereLabelStyleType","IUPAC","Classic","On","Off","colorOfAbsoluteCenters","colorOfAndCenters","colorOfOrCenters","colorStereogenicCenters","StereoColoringType","LabelsOnly","BondsOnly","LabelsAndBonds","autoFadeOfStereoLabels","absFlagLabel","andFlagLabel","mixedFlagLabel","ignoreChiralFlag","orFlagLabel","font","fontsz","fontszUnit","values","Px","fontszsub","fontszsubUnit","carbonExplicitly","showCharge","showValence","showHydrogenLabels","ShowHydrogenLabels","ShowHydrogenLabelNames","TerminalAndHetero","aromaticCircle","bondSpacing","bondThicknessUnit","stereoBondWidth","stereoBondWidthUnit","bondLength","bondLengthUnit","reactionComponentMarginSize","reactionComponentMarginSizeUnit","hashSpacing","hashSpacingUnit","imageResolution","low","SERVER_OPTIONS","debug","showAtomIds","showBondIds","showHalfBondIds","showLoopIds","miew","miewMode","miewTheme","miewAtomLabel","MIEW_OPTIONS","optionsSchema","required","properties","_objectSpread","getDefaultOptions","prop","_optionsSchema$proper","validation","_typeof","validator","Validator","result","validate","errorsProps","errors","map","path","length","indexOf","storage","warningMessage","isAvailable","localStorage","getItem","parse","setItem","isSet","cachedInitData","needReinitializeTemplateLibrary","initLib","lib","deserializeSdfTemplates","baseUrl","cacheEl","_fileName","SettingsManager","sdfSerializer","SdfSerializer","tmpls","deserialize","templatesRawData","prefetch","prefetchRender","cachedFiles","tmpl","pr","prefetchSplit","file","prerender","id","initTmplLib","_initTmplLib","dispatch","userTmpls","appUpdate","templates","reinitializeTemplateLibrary","_toConsumableArray","userLib","Array","isArray","ketSerializer","group","filter","prefetchStatic","url","fetch","credentials","resp","ok","Error","split","files","push","all","fn","svgs","svgContent","innerHTML","_","i","initOptionsState","app","functionalGroups","saltsAndSolvents","analyse","roundWeight","roundMass","roundElAnalysis","checkOptions","fragment","version","KETCHER_SAVED_OPTIONS_KEY","getSettings","getServerSettings","seriliazedServerOptions","getSerilizedServerOptions","defaultServerOptions","pick","newOptions","Number","saveSettings","newSettings","changeRound","roundName","recognizeActions","setStruct","str","changeVersion","changeImage","shouldFragment","isFrag","checkOpts","optionsReducer","undefined","loading","constant","schema","desc","mapOf","oneOf","radioButtonsSchema","contextSchema","sData","Fragment","fieldName","fieldValue","radiobuttons","minLength","invalidMessage","Multifragment","Bond","Atom","Group","sdataCustomSchema","context","sdataSchema","acc","firstKeyOf","obj","getSdataDefault","_schema$properties$co","initSdata","isCustomShema","valid","correctErrors","payload","_state$result","onContextChange","fValue","onFieldNameChange","sdataReducer","init","actionContext","actionFieldName","newstate","formsState","atomProps","charge","explicitValence","hCount","invRet","isotope","radical","ringBondCount","substitutionCount","aromaticity","implicitHCount","ringMembership","ringSize","connectivity","chirality","customQuery","attachmentPoints","primary","secondary","mode","bondProps","topology","center","moleculeErrors","labelEdit","rgroup","rgroupLogic","ifthen","range","resth","save","filename","format","attach","sgroup","updateFormState","checkErrors","setDefaultSettings","formReducer","_action$data","newType","INDIGO_VERIFICATION","ANALYZING_FILE","indigoVerification","setAnalyzingFile","initialState","isAnalyzingFile","supportedSGroupTypes","MUL","SRU","SUP","DAT","GEN","queryComponent","atom","atomType","maxLength","atomList","notList","pseudo","alias","pattern","cip","unsaturatedAtom","exactChangeFlag","rgroupSchema","items","bond","mul","subscript","name","sgroupMap","minium","attachSchema","matchCharge","regex","RegExp","DefaultStereoGroupNumber","fromElement","selem","fromRlabel","rglabel","fromAtomList","Elements","get","fromAtom","ap","fromApoint","toElement","elem","toRlabel","toAtomList","toApoint","_elem$atomList","AtomList","ids","number","toAtom","capitalize","satom","_satom$atomList","_satom$atomList2","getAtomType","join","toString","stereoParity","queryProperties","_restAtom$exactChange","_restAtom$unsaturated","_atom$aromaticity","_atom$ringMembership","_atom$ringSize","_atom$connectivity","_atom$chirality","_atom$customQuery","restAtom","_objectWithoutProperties","_excluded","pch","parseInt","conv","fromStereoLabel","stereoLabel","match","StereoLabel","Abs","orNumber","andNumber","And","Or","toStereoLabel","sap","rg","rgi","val","fromBond","sbond","stereo","isCustomQuery","fromBondType","reactingCenterStatus","toBond","toBondType","bondCaptionMap","single","PATTERN","TYPE","SINGLE","STEREO","NONE","up","UP","down","DOWN","updown","EITHER","DOUBLE","crossed","CIS_TRANS","triple","TRIPLE","aromatic","AROMATIC","singledouble","SINGLE_OR_DOUBLE","singlearomatic","SINGLE_OR_AROMATIC","doublearomatic","DOUBLE_OR_AROMATIC","any","ANY","hydrogen","HYDROGEN","dative","DATIVE","caption","fromSgroup","ssgroup","_ssgroup$attrs","attrs","absolute","attached","sDataInitValue","toSgroup","_excluded2","trim","isFlipDisabled","selection","restruct","ctab","_selection$bonds","bonds","_selection$atoms","atoms","getBondIdsForAttachmentAtoms","atomId","atomBondIds","getConnectedBondIds","molecule","_iterator2","_step2","atomBondId","isAttachmentBond","b","err","getAmountOfAttachmentBonds","amountOfAttachmentBonds","totalBondIds","Set","_iterator3","_step3","bondId","toolActions","_toolActions","hand","enabledInViewOnly","erase","chain","disabled","findStereoAtoms","from","arrows","RxnArrowMode","OpenAngle","FilledTriangle","FilledBow","DashedOpenAngle","Failed","Retrosynthetic","BothEndsFilledTriangle","EquilibriumFilledHalfBow","EquilibriumFilledTriangle","EquilibriumOpenAngle","UnbalancedEquilibriumFilledHalfBow","UnbalancedEquilibriumOpenHalfAngle","UnbalancedEquilibriumLargeFilledHalfBow","UnbalancedEquilibriumFilledHalfTriangle","EllipticalArcFilledBow","EllipticalArcFilledTriangle","EllipticalArcOpenAngle","EllipticalArcOpenHalfAngle","MULTITAIL_ARROW_TOOL_NAME","SimpleObjectMode","ellipse","rectangle","line","IMAGE_KEY","bondCuts","typeSchema","bondSchema","onAction","dialog","thunk","parseStruct","_options","rescale","formatterOptions","identifyStructFormat","SupportedFormat","cdx","queryPropertiesAreUsed","getStructureFromStringAsync","removeStructAction","savedSelectedTool","selectionTool","tools","getSelectionFromStruct","MULTITAIL_ARROW_KEY","selectionEntity","selected","getInitiallySelected","load","_ref","getState","serverSettings","_options2","isPaste","method","otherOptions","parsedStruct","_otherOptions","hasUnsupportedGroups","hasMoleculeToMonomerConnections","oldStruct","isIndigoFunctionCalled","sgroups","some","sGroup","find","isNumber","beginSuperatomAttachmentPointNumber","endSuperatomAttachmentPointNumber","confirm","_key","clone","sg","sgId","offset","SGroup","getOffset","atomSet","Pile","crossBonds","getCrossBonds","bracketPos","updateOffset","findConnectedComponents","setImplicitHydrogen","setStereoLabelsToAtoms","markFragments","isBlank","zoomAccordingContent","centerStruct","disableInitiallySelected","message","openInfoModal","command","openInfoModalWithCustomMessage","customText","checkServer","_getState","indigoVersion","imagoVersions","rec","process","ketcherCheck","checkParams","isAbs","frags","fr","enhancedStereoFlag","chiral_flag","badVal","badConn","valence","optsTypes","_getState2","ketcherErrors","types","without","serverCall","serverTransform","_getState3","loadedStruct","reactionRelayout","resetStereoFlagsPosition","stereoFlagPosition","selectedAtoms","selectedBonds","aidMap","Map","bidMap","currentStruct","expSel","explicitSelected","aid","bid","serializedStruct","output_format","ChemicalMimeType","KET","omit","config","arom","dearom","_options$app$imagoVer","templateLib","tab","_tool","zoomList","zoom","_editor$tool","mousemove","lastEvent","_editor$tool2","findLastIndex","z","_editor$tool3","findIndex","openHelpLink","_window$open","open","focus","help","ketcherInitEventName","ketcherId","MODES","FG","STRUCT_TYPE","KETCHER_ROOT_NODE_CLASS_NAME","KETCHER_ROOT_NODE_CSS_SELECTOR","EditorClassName","KETCHER_MACROMOLECULES_ROOT_NODE_SELECTOR","STRUCT_SERVICE_NO_RENDER_INITIALIZED_EVENT","STRUCT_SERVICE_INITIALIZED_EVENT","ACS_STYLE_DEFAULT_SETTINGS","functionalGroupsLib","__","requestFullscreen","element","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","getIfFullScreen","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","toggleFullscreen","querySelector","documentElement","fullscreen","disableIfViewOnly","viewOnlyMode","updateConfigItem","originalDisabled","clear","undo","historySize","redo","isCutSupported","hasSelection","copies","isCopySupported","isPasteSupported","active","about","_server","hasRxnArrow","toolbar","visibleTools","alignDescriptors","configWithNonViewOnlyActionsDisabled","entries","_ref2","_ref3","_slicedToArray","iconNameToIcon","_iconNameToIcon","ฮฑ","ฮฒ","ฮณ","ฮด","ฮต","ฮถ","ฮท","ฮธ","ฮน","ฮบ","ฮป","ฮผ","ฮฝ","ฮพ","ฮฟ","ฯ","ฯ","ฯ","ฯ","ฯ","ฯ","ฯ","ฯ","ฯ","โซ","AngstromIcon","DegreeIcon","ฤง","PlanckDiracConstantIcon","PlusMinusIcon","PromilleIcon","RootIcon","LeftArrowIcon","RightArrowIcon","LeftArrowCrossedOutIcon","RightArrowCrossedOutIcon","LeftAndRightArrowIcon","CapitalPiIcon","SumIcon","InfinityIcon","PartialDerivativeIcon","DeltaIcon","IntegralIcon","ApproximatelyEqualIcon","NotEqualIcon","LessOrEqualIcon","MoreOrEqualIcon","DegreeFahreinheitIcon","DegreeCelseusIcon","AboutIcon","AnalyseIcon","AnyAtomIcon","AromIcon","ArrowUpwardIcon","BondSingleIcon","BondAnyIcon","BondAromaticIcon","BondCrossedIcon","BondHydrogenIcon","BondDative","BondDoubleIcon","BondDoubleAromaticIcon","BondDownIcon","BondSingleAromaticIcon","BondSingleDoubleIcon","BondTripleIcon","BondUpIcon","BondUpdownIcon","CapitalTIcon","ChainIcon","ChargeMinusIcon","ChargePlusIcon","CheckIcon","CheckMarkIcon","ChiralFlagIcon","CipIcon","CleanIcon","CopyIcon","CopyImageIcon","CopyMolIcon","CopyKetIcon","CutIcon","DearomIcon","DeleteIcon","dropdown","DropdownIcon","EnhancedStereoIcon","edit","EditIcon","ElementsGroupIcon","ExtendedTableIcon","EraseIcon","FileThumbnailIcon","FullscreenEnterIcon","FullscreenExitIcon","GenericGroupsIcon","HandIcon","compressedhand","CompressedHandIcon","HelpIcon","history","HistoryIcon","ImageFrameIcon","LayoutIcon","logo","LogoIcon","MiewIcon","MacromoleculesMode","MoleculesMode","ClearIcon","OpenIcon","PasteIcon","PeriodTableIcon","ReactionArrowOpenAngleIcon","ReactionArrowEllipticalArcArrowFilledBow","ReactionArrowEllipticalArcArrowFilledTriangle","ReactionArrowEllipticalArcArrowOpenAngle","ReactionArrowEllipticalArcArrowOpenHalfAngle","ReactionArrowFilledTriangle","ReactionArrowFilledBow","ReactionArrowDashedOpenAngle","ReactionArrowFailed","ReactionArrowRetrosynthetic","ReactionArrowBothEndsFilledTriangle","ReactionArrowEquilibriumFilledHalfBow","ReactionArrowEquilibriumFilledTriangle","ReactionArrowEquilibriumOpenAngle","ReactionArrowUnbalancedEquilibriumFilledHalfBow","ReactionArrowUnbalancedEquilibriumOpenHalfAngle","ReactionArrowUnbalancedEquilibriumLargeFilledHalfBow","ReactionArrowUnbalancedEquilibriumFilledHalfTriangle","ReactionArrowMultitail","ReactionAutomapIcon","ReactionMapIcon","ReactionPlusIcon","ReactionUnmapIcon","RecognizeIcon","RedoIcon","RgroupLabelIcon","RgroupAttpointsIcon","RgroupFragmentIcon","SaveIcon","SearchIcon","SelectFragmentIcon","SelectLassoIcon","SelectRectangleIcon","SettingsIcon","SgroupIcon","Template0Icon","Template1Icon","Template2Icon","Template3Icon","Template4Icon","Template5Icon","Template6Icon","Template7Icon","TemplateDialogIcon","TemplateLibIcon","SnakeModeIcon","TextIcon","AddImageIcon","TextBold","TextItalic","TextSubscript","TextSuperscript","TransformFlipHIcon","TransformFlipVIcon","UndoIcon","ZoomInIcon","ZoomOutIcon","ZoomResetIcon","ShapeEllipseIcon","ShapeRectangleIcon","ShapePolylineIcon","ShapeLineIcon","NotFoundIcon","Save1Icon","Open1Icon","ResetIcon","CloseIcon","GeneralIcon","GeneralWhiteIcon","StereoIcon","StereoWhiteIcon","AtomsIcon","AtomsWhiteIcon","BondsIcon","BondsWhiteIcon","ServerIcon","ServerWhiteIcon","ThreeDViewerIcon","ThreeDViewerWhiteIcon","DebuggingIcon","DebuggingWhiteIcon","DropdownIndicatorIcon","TextSpecialSymbolsIcon","ChevronIcon","OpenWindowPasteIcon","OpenWindowUploadIcon","Bracket","RapLeftLink","RapMiddleLink","RapRightLink","ArrowsLeft","ArrowsRight","Sugar","Base","Phosphate","Preset","Nucleotide","EditFilled","VerticalDots","ExpandIcon","MinimizeExpansionIcon","ExplicitHydrogensIcon","FlexLayoutIcon","SnakeLayoutIcon","SequenceLayoutIcon","QuestionMark","CrossIcon","getIconByName","Icon","onClick","getIconName","hasOwn","color","white","primaryWhite","green","lightGreen","graphite","grey","darkGrey","hover","small","regular","weight","background","border","medium","radius","StyledButton","styled","shouldForwardProp","boxShadow","transition","display","borderRadius","style","padding","minHeight","minWidth","cursor","isActive","opacity","IconStyles","css","_templateObject","_taggedTemplateLiteral","StyledIcon","_templateObject2","StyledCustomIcon","_templateObject3","IconButtonBase","_ref$isActive","_ref$isHidden","_ref$disabled","testId","children","combinedTitle","IconButton","iconName","IconButtonCustomIcon","link","src","alt","button","justifyContent","alignItems","outline","textTransform","fontSize","fontWeight","Button","Container","div","fullsize","normalizeStruct","molV2000StringOrStruct","Struct","StructRender","renderRef","useRef","useEffect","container","normalizedStruct","RenderStruct","StyledInput","input","caretColor","Input","overflow","flexDirection","flexBasis","height","SummaryContainer","DetailsContainer","overflowX","overflowY","Accordion","summary","details","expanded","onSummaryClick","dataTestIdDetails","_jsxs","close","InfoModal","styles","infoModalOverlay","infoModalWindow","role","infoModalBody","Dialog","params","_props$result","_props$valid","_props$buttons","headerContent","footerContent","buttonsNameMap","_props$needMargin","needMargin","_props$withDivider","withDivider","_props$focusable","focusable","rest","dialogRef","useLayoutEffect","_dialogRef$current","closest","getElementsByClassName","isButtonOk","exit","keyDown","KN","keyName","activeElement","activeTextarea","stopPropagation","onSubmit","onKeyDown","tabIndex","header","btnContainer","buttonTop","closeButton","body","withMargin","footer","cancel","Header","Content","ContentLine","_templateObject4","RatioBar","_templateObject5","ratio","MonomerName","_templateObject6","AmbiguousMonomerPreview","preview","monomer","presetMonomers","isAlternatives","subtype","aminoAcidFallback","baseFallback","fallback","monomers","previewData","useMemo","option","templateId","monomerItem","monomerName","_sugar$label","_phosphate$label","_presetMonomers","sugar","phosphate","sugarName","phosphateName","Name","preparedPreviewData","sortedData","sort","a","localeCompare","overallRatio","entry","Math","round","slice","PreviewType","PresetPosition","width","gap","topPadding","heightForNucleotide","widthForBond","heightForBond","shams","hasSymbols","hasSymbolSham","hasProto","toStr","implementation","$gOPD","require$$0","getProto","$defineProperty","defineDataProperty","gopd","setFunctionLength","define","$indexOf","hasToStringTag","$toString","isArguments","fnToStr","hasOwnProperty","g","availableTypedArrays","whichTypedArray","isTypedArray","isArgumentsObject","require$$1","require$$2","_defineProperties","_toPropertyKey","_toPrimitive","_setPrototypeOf","_createSuper","_isNativeReflectConstruct","_getPrototypeOf","_possibleConstructorReturn","_assertThisInitialized","endsWith","ownKeys","_require","_require2","keysShim","isArgs","polyfill","numberIsNaN","shim","getPolyfill","objectIs","_unsupportedIterableToArray","_arrayLikeToArray","require$$3","AssertionError","calculateMonomerPreviewTop","createCalculatePreviewTopFunction","calculateNucleoElementPreviewTop","calculateTop","_ZoomTool$instance","canvasWrapperBoundingClientRect","ZoomTool","instance","canvasWrapper","node","getBoundingClientRect","canvasWrapperTopOffset","top","canvasWrapperBottom","bottom","canvasWrapperHeight","topPreviewPosition","bottomPreviewPosition","calculatePreviewTop","calculateAmbiguousPreviewHeight","monomersCount","headingHeight","monomersHeight","calculateAmbiguousMonomerPreviewTop","shouldHaveOneLine","monomersCountToUse","min","calculateAmbiguousMonomerPreviewLeft","initialLeft","_ZoomTool$instance$ca","PREVIEW_WIDTH","canvasWrapperRight","right","canvasWrapperLeft","left","calculateBondPreviewPosition","bondCoordinates","_firstMonomer$rendere","_secondMonomer$render","_ZoomTool$instance2","firstMonomer","secondMonomer","assert","firstMonomerCoordinates","renderer","rootBoundingClientRect","secondMonomerCoordinates","canvasWrapperTop","max","leftValue","topValue","transform","ActionButton","_props$status","status","_props$selected","disableableButtons","dataTestId","shortcutStr","handleClick","CLASSNAME_SEPARATOR","Portal","createElement","isElementInDom","isOpen","addElementInDOM","_this$props","addClassName","updateStyle","removeElementFromDOM","componentDidUpdate","prevProps","_this$props2","removeClassNames","_document$querySelect","appendChild","_document$querySelect2","removeChild","classNames","classList","remove","add","prevStyle","_this4","property","component","ReactDOM","createPortal","DefaultMultiTool","toolbarItem","currentStatus","GroupedMultiTool","groups","_Fragment","descriptor","start","end","chooseMultiTool","variant","defaultClasses","usePortalOpening","opened","_useState","useState","_useState2","setIsOpen","currentId","newState","usePortalStyle","portalStyle","setPortalStyle","editorRect","menuItemRect","spaceBetween","ToolbarMultiToolItem","vertical","onOpen","_usePortalOpening","_usePortalOpening2","_usePortalStyle","_usePortalStyle2","selectedTool","_status$toolbarItem$i","allInnerItemsHidden","every","_status$option$id","displayMultiToolItem","_options$filter$","savedSelectionTool","savedSelectionToolId","_status$option$id2","_options$filter$2","_status$option$id3","onOpenOptions","actionButtonProps","_chooseMultiTool","_chooseMultiTool2","portalClassName","isDisabled","root","icon","iconSelected","portal","ToolbarGroupItem","_status$id","TemplatesList","isTemplate","makeAction","index","BottomToolbar","openDialog","dialogName","reject","onResult","onCancel","modalReducer","_data$prop","formState","form","parentModal","isRestoredModal","isNestedModal","selectTmpl","changeGroup","changeFilter","changeTab","initAttach","atomid","bondid","setAttachPoints","setTmplName","editTmpl","formData","updateLocalStore","deleteUserTmpl","deleteTmpl","saveUserTmpl","initTmplsState","tmplActions","attachActions","templatesReducer","ABBREVIATION_LOOKUP_ACTIONS","ABBR_LOOKUP_INIT","ABBR_LOOKUP_SHOW","ABBR_LOOKUP_CLOSE","initAbbreviationLookup","showAbbreviationLookup","closeAbbreviationLookup","abbreviationLookupReducer","lookupValue","cursorPosition","x","y","COMMON_ACTIONS","COMMON_UPDATE_CURSOR_POSITION","updateCursorPosition","commonReducer","execute","activeTool","actObj","isEqual","_ref4","actionName","pickBy","_ref5","isEmpty","fileOpener","FileReader","throughFileReader","ActiveXObject","fso","throughFileSystemObject","arrayBufferToBase64","buffer","binary","bytes","Uint8Array","len","byteLength","String","fromCharCode","btoa","CDX","PPTX","fileType","rd","onload","content","structures","cfb","at","CFB","FullPaths","ole","sdf","base64String","startsWith","isPPTX","msClose","onerror","readAsDataURL","readAsBinaryString","readAsText","fd","OpenTextFile","ReadAll","Close","GREEK_SIMBOLS","Alpha","alpha","Beta","beta","Gamma","gamma","greekRe","greekify","sym","filterLib","trimmedFilter","re","escapeRegExp","flow","_filter","test","filterFGLib","searchFunction","fields","abbreviation","field","getSelectOptionsFromSchema","_schema$enumNames$ind","_schema$enumNames","memoizedDebounce","func","delay","skipArguments","lastArgs","debouncedFunction","debounce","getArgumentsToCompare","args","lastArgsToCompare","_len","argsToCompare","showTooltipTimer","TOOLTIP_DELAY","convertSGroupAttachmentPointsToRGroupAttachmentPoints","atomsIdMapping","getAttachmentPoints","attachmentPoint","attachmentPointAtom","setRGAttachmentPointForDisplayPurpose","rgroupAttachmentPoint","convertToRGroupAttachmentPointForDisplayPurpose","rgroupAttachmentPoints","makeStruct","existingStruct","makeAtoms","makeRGroupAttachmentPoints","makeBonds","MonomerMicromolecule","_value","clonedBond","isInsideSGroup","begin","rgroupAttachmentPointIds","getRGroupAttachmentPointsByAtomId","atomIdInTooltip","set","hideTooltip","showInfo","clearTimeout","showTooltip","infoPanelData","UnresolvedMonomer","setTimeout","setFunctionalGroupsTooltip","isShow","checkFunctionGroupTypes","closestCollapsibleStructures","findItem","_editor$struct","isSGroupPresent","hovering","isShowingTooltip","isDataSGroup","isQuerySGroup","groupName","groupStruct","functionalGroupInfo","functionalGroupsReducer","initFGroups","highlightFGroup","notDebouncedHighlightFG","highlightFG","initFGTemplates","provider","FunctionalGroupsProvider","getInstance","setFunctionalGroupsList","saltsAndSolventsReducer","initSaltsAndSolvents","initSaltsAndSolventsTemplates","saltsAndSolventsProvider","functionalGroupsProvider","SaltsAndSolventsProvider","setSaltsAndSolventsList","addToFunctionalGroupsList","initial","freqAtoms","currentAtom","MAX_ATOMS","updateVisibleTools","visibleTool","regExp","menuHeight","innerHeight","initResize","onResize","throttle","actionState","toolInMenu","addFreqAtom","correctTools","isSelected","menuName","addAtoms","atomLabel","toolName","sel","getElementById","hiddenAncestor","base","findEl","getComputedStyle","contains","visible","rotateHandlePosition","updateFloatingTools","floatingToolsReducer","SET_SERVER","shared","combineReducers","common","actionStateReducer","toolbarReducer","modal","abbreviationLookup","store","requestsStatuses","requestReducer","floatingTools","getRootReducer","setEditor","sh","finalState","customButtons","restOptions","initState","middleware","rootReducer","createStore","applyMiddleware","setServer","mapStateToProps","mapDispatchToProps","BottomToolbarContainer","connect","makeItems","bondCommon","bondStereo","bondQuery","bondSpecial","groupOptions","flat","groupDescriptors","accum","_accum","rGroupOptions","shapeOptions","selectOptions","arrowsOptions","mappingOptions","useSettingsContext","useContext","SettingsContext","throttleMilliseconds","useThrottleResizeObserver","setSize","_useResizeObserver","useResizeObserver","useFormContext","FormContext","useAppContext","AppContext","useInterval","callback","savedCallback","setInterval","clearInterval","useSubscriptionOnEvents","useDispatch","_useAppContext","getKetcherInstance","loadingHandler","actionResultHandler","subscribe","eventBus","addListener","KetcherAsyncEvents","LOADING","SUCCESS","FAILURE","unsubscribe","removeListener","subscribeOnInit","unsubscribeOnUnMount","initEventName","ArrowScroll","startInView","endInView","scrollUp","scrollDown","isScrollDown","setScrollDown","_useState3","_useState4","isScrollUp","setScrollUp","scroll","onMouseUp","onMouseDown","mediaSizes","topSeparatorsShowingWidth","bondCollapsableHeight","rGroupCollapsableHeight","shapeCollapsableHeight","transformCollapsableHeight","RGroup","Shape","LeftToolbar","_scrollRef$current","scrollRef","_useInView","useInView","threshold","_useInView2","startRef","_useInView3","_useInView4","endRef","sizeRef","Item","scrollTop","offsetHeight","visibleItems","_status$item$id","_item$options","_createElement","listener","groupItem","scrollHeight","LeftToolbarContainer","StyledAtom","_props$el","atomColor","ElementColor","AtomsList","forwardRef","isAtom","VerticalDivider","HorizontalDividerElement","Divider","HorizontalDivider","RightToolbar","atomsList","RightToolbarContainer","TopToolbarIconStyles","TopToolbarIconButton","TopToolbarCustomIconButton","FileControls","onFileOpen","onSave","shortcuts","hiddenButtons","ElementAndDropdown","DropDownContent","DropDownButton","DropDownArrow","MenuItemWithDropdown","topElement","dropDownElements","onToolOpen","isExpanded","setIsExpanded","collapse","expand","Collapse","timeout","unmountOnExit","ClickAwayListener","onClickAway","ElementWithDropdown","ClipboardControls","onCopyMol","onCopyKet","onCopyImage","disabledButtons","copyButtons","handler","getButtonElement","firstButtonObj","collapsibleElements","UndoRedo","onUndo","onRedo","onFocusHandler","updateInputString","inputElement","ZoomInput","onZoomSubmit","currentZoom","inputRef","inputEl","useCallback","zoomShortcuts","nativeEvent","stopImmediatePropagation","onFocus","ZoomLabel","Dropdown","Popover","ZoomControlButton","ShortcutLabel","_templateObject7","getIntegerFromString","zoomInput","zoomNumber","isNaN","getValidZoom","minAllowed","maxAllowed","ZoomControls","onZoom","onZoomIn","onZoomOut","containerRef","userInput","zoomToSet","onClose","reason","onExpand","resetZoom","anchorEl","anchorOrigin","horizontal","ControlsPanel","SystemControls","onSettingsOpen","onFullscreen","onHelp","onAboutOpen","ExternalFuncControls","isCollapsed","onLayout","onClean","onAromatize","onDearomatize","onCalculate","onCheck","onAnalyse","onMiew","onToggleExplicitHydrogens","externalFuncButtons","CustomButtonElement","customButton","imageLink","CustomButtons","onCustomAction","collapseLimit","CUSTOM_BUTTON_ADDITIONAL_WIDTH","BtnsWpapper","TopToolbar","onClear","onAbout","togglerComponent","resizeRef","_useResizeObserver$wi","ketcherProvider","getKetcher","sendCustomAction","collapseLimitWithCustomButtons","onHistoryClick","getActionState","selectCustomButtons","_state$options","disabledButtonsSelector","createSelector","_actionState$item","hiddenButtonsSelector","_actionState$item2","generateMenuShortcuts","_state$actionState","dispatchAction","zoomValue","TopToolbarContainer","getFloatingToolsVisible","getFloatingToolsRotateHandlePosition","FLOATING_TOOLS","FloatingTools","wrapper","FloatingToolContainer","selectIsAbbreviationLookupOpen","selectAbbreviationLookupValue","_state$abbreviationLo","destinationVectorMapping","ArrowUp","Vec2","ArrowDown","ArrowRight","ArrowLeft","isArrowKey","moveSelectedItems","isShiftPressed","getFasterStep","vec","scaled","selectedItems","destinationVectorInCanvas","destinationVector","Scale","canvasToModel","fromMultipleMove","resizeCanvas","isClose","isCloseToTheEdgeOfCanvas","moveStep","setViewBox","minX","minY","rotateController","rerender","EDGE_OFFSET","theMostTopAtom","theMostBottomAtom","theMostRightAtom","theMostLeftAtom","position","pp","getScreenCoordinates","modelToCanvas","theMostTopAtomYCoordinate","theMostBottomAtomYCoordinate","theMostRightAtomXCoordinate","theMostLeftAtomXCoordinate","viewBox","isCloseToTop","isCloseToBottom","isCloseToLeft","isCloseToRight","getElementsInRectangle","p0","p1","bondList","sGroups","x0","x1","y0","y1","topLeftPosition","topRightPosition","bottomRightPosition","bottomLeftPosition","polygon","FunctionalGroup","isBondInContractedFunctionalGroup","isExternalBondBetweenMonomers","getGroupFromAtomId","centre","relatedFGId","findFunctionalGroupByAtom","isAtomFromMacromolecule","isAtomInContractedFunctionalGroup","rxnArrowsList","rxnPlusesList","simpleObjectsList","rxnArrows","rxnPluses","referencePoints","getReferencePoints","referencePointInRectangle","point","enhancedFlagList","enhancedFlags","sgroupDataList","sgroupData","textsList","rgroupAttachmentPointList","visibleRGroupAttachmentPoints","middlePoint","reImages","images","isPointInside","getReferencePositions","isInsidePolygon","reMultitailArrows","multitailArrows","multitailArrow","getReferencePositionsArray","getElementsInPolygon","rr","r","isPointInPolygon","referencePointInPolygon","_ref6","_ref7","_ref8","_ref9","p","rotate","PI","v0","diff","n0","dot","d0","w0","counter","eps","flag1","flag0","v1","w1","n1","d1","abs","inRectangle","inPolygon","LassoHelper","getSelection","rnd","locate","points","page2obj","running","addPoint","dp","selectionPolygon","selectionRectangle","ret","getGroupIdsFromItemArrays","_items$bonds","groupsIds","isSuperatomLeavingGroupAtom","groupId","getGroupIdFromAtomId","getGroupIdFromBondId","getGroupIdsFromItemMaps","mergeMaps","mergeMapOfItemsToSet","uniqArray","dest","reversible","xor","selMerge","getSelectedAtoms","mapAtomIdsToAtoms","getSelectedBonds","mapBondIdsToBonds","atomsIds","atomOrReAtom","bondsIds","bondOrReBond","getNewSelectedItems","selectedSgroups","newSelected","_sgroup$item","isSuperatomWithoutLabel","_newSelected$atoms","_newSelected$bonds","sgroupAtoms","getAtoms","sgroupBonds","getBonds","selectElementsOnCanvas","elements","lassoHelper","onSelectionStart","onSelectionMove","onSelectionEnd","clientArea","onSelectionLeave","SelectViewOnlyTool","isSelectionRunning","mouseleave","isMacroMolecule","isFunctionalGroupFromMacromolecule","isMergingToMacroMolecule","dragCtx","_dragCtx$mergeItems","funcGroups","mergeItems","atomToFunctionalGroup","targetObjectId","isBondingWithMacroMolecule","ci","isTargetFromMacromolecule","deleteFunctionalGroups","sGroupsId","deletedAtoms","sGroupId","_sgroups$get","sGroupItem","isContractedFunctionalGroup","sGroupAtoms","_sGroupItem$getContra","getContractedPosition","positionAtomId","atomsWithoutAttachmentPoint","mergeWith","fromSgroupDeletion","fromFragmentDeletion","_bondProps","WeakMap","AtomTool","_classPrivateFieldInitSpec","writable","_classPrivateFieldSet","editorSelection","_editorSelection$atom","Action","selectedSGroupsId","atomsInFunctionalGroup","removeFG","fgIds","hoverIcon","hide","isNotActiveTool","deletedAtomsInSGroups","updatedAtoms","selectAtomId","has","fromAtomsAttrs","_ElementColor$atomPro","show","fill","updatePosition","_molecule$sgroups$get","_this$editor$render$c","eventMaps","fgId","ciFunctionalGroupName","isSaltOrSolvent","_this$editor","_this$editor$render","reStruct","perform","getAttachmentAtomId","angle","vectorUtils","calcAngle","ctrlKey","fracAngle","degrees","newAtomPos","calcNewAtomPos","fromBondAddition","_classPrivateFieldGet","_this$editor2","_this$editor2$render","_this$editor2$render$","fromAtomAddition","_sGroup$getContracted","sGroupPositionAtomId","atomsToDelete","bondsToDelete","isAttachmentPointLabel","atomLongtapEvent","_dragCtx$item","fgs","quickEdit","newatom","xy0","stopTapping","filterNotInContractedSGroup","itemsToFilter","_itemsToFilter$atoms$","_itemsToFilter$atoms","_itemsToFilter$bonds$","_itemsToFilter$bonds","isNotCollapsedSGroup","checkAttr","filterNotPartOfSuperatomWithoutLabel","_itemsToFilter$atoms$2","_itemsToFilter$atoms2","_itemsToFilter$bonds$2","_itemsToFilter$bonds2","_struct$getGroupFromA","_struct$getGroupFromB","getGroupFromBondId","searchMaps","SGroupTool","checkSelection","filteredAtomsAndBonds","_this$editor$selectio","actualSgroupId","atomsResult","extraAtoms","_struct$atoms$get","atomFromStruct","sgs","isAtomInContractedSGroup","sgroupDialog","atomResult","bondResult","_struct$atoms$get2","_struct$bonds$get","bondsInFunctionalGroup","bondFromStruct","isBondInContractedSGroup","isFunctionalGroup","_iterator4","_step4","_iterator5","_step5","findFunctionalGroupByBond","_selection","_selection2","bondsResult","extraBonds","_iterator6","_step6","_struct$atoms$get3","_iterator7","_step7","_struct$sgroups$get","_struct$sgroups$get2","_newSelected$atoms2","_newSelected$bonds2","_iterator8","_step8","_struct$bonds$get2","_struct$sgroups$get3","_newSelected$atoms3","_struct$sgroups$get4","_newSelected$bonds3","_iterator9","_step9","_iterator10","_step10","isAtomsOrBondsSelected","getAttrs","getContextBySgroup","getContextBySelection","sgroupEdit","newSg","checkOverlapping","isDataSg","fromSeveralSgroupAddition","expandSGroupWithMultipleAttachmentPoint","createQueryComponentSGroup","fromContextType","newStruct","_editor$errorHandler","_editor$errorHandler2","sgAtoms","SgContexts","manyComponentsSelected","singleComponentSelected","sgBonds","anyChainedBonds","allBondsSelected","currSelection","sourceAtoms","TYPES","fromSgroupAction","fixedBond","j","countOfSelectedComponents","connectedComponents","isSuperset","dropAndMerge","copyAction","_editor$selection$bon","_editor$selection","_dropItemAction","isMerging","dropItemAction","expandGroupsAction","getExpandGroupsInMergeAction","_extractAttachmentAto","extractAttachmentAtom","_extractAttachmentAto2","newMergeItems","extractAttachmentAtomAction","fromItemsFuse","rebond","ReBond","bondRecalc","operations","groupsInMerge","setExpandSGroup","_mergeItems$atomToFun","functionalGroupId","srcAtomId","castAtomPropToType","typesMapping","updateOnlyChangedProperties","unchangedElement","userChangedElement","updatedKeys","getOwnPropertyNames","updatedElement","isAtomsArray","selectedElements","updateSelectedAtoms","changeAtomPromise","userChangedAtom","unchangedAtom","atomWithChangedProperties","updateSelectedBonds","changeBondPromise","userChangedBond","unchangedBond","bondWithChangedProperties","fromBondsAttrs","customOnChangeHandler","isPolymerEditorTurnedOn","handleMacroChanges","handleMicroChanges","reverse","operation","op","_inverted","OperationType","ATOM_ADD","ATOM_DELETE","pos","toFixed","ATOM_ATTR","attribute","to","data2","ATOM_MOVE","BOND_ADD","BOND_DELETE","FRAGMENT_ADD","FRAGMENT_DELETE","frid","FRAGMENT_ADD_STEREO_ATOM","FRAGMENT_DELETE_STEREO_ATOM","fragId","S_GROUP_ATOM_ADD","S_GROUP_ATOM_REMOVE","sgid","S_GROUP_CREATE","S_GROUP_DELETE","RXN_ARROW_ADD","RXN_ARROW_DELETE","RXN_ARROW_RESIZE","RXN_ARROW_MOVE","R_GROUP_FRAGMENT","SIMPLE_OBJECT_ADD","SIMPLE_OBJECT_DELETE","SIMPLE_OBJECT_RESIZE","SIMPLE_OBJECT_MOVE","getSelectionMap","structure","ReStruct","maps","getStructCenter","bb","getVBoxObj","lc2","handleMovingPosibilityCursor","canvas","isCursorShown","getAttribute","removeAttribute","setAttribute","getItemCursor","defaultCursor","movingStyle","closestItem","isLine","multitailArrowReferenceLinesToCursor","multitailReferencePositionToCursor","imageReferencePositionToCursor","ArrowTool","original","CoordinateTransformation","pageToModel","sub","MultitailArrowMoveTool","_ArrowTool","originalPosition","dragContext","MultitailArrowRefName","SPINE","fromMultitailArrowHeadTailMove","fromMultitailArrowHeadTailsResize","fromMultitailArrowMove","ReactionArrowMoveTool","updateResizingState","isResizing","reArrow","isSnappingEnabled","fromArrowResizing","_event","createCopyOfSelected","_fromPaste","fromPaste","_fromPaste2","Direction","_mode","_lassoHelper","SelectTool","multitailArrowMoveTool","reactionArrowMoveTool","isMouseDown","getMapsForClosestItem","currentPosition","closestToSel","frag","fragGetAtoms","fragGetBonds","rgroups","handleMoveCloseToEdgeOfCanvas","isReadyForCopy","isCopied","previousMouseMoveEvent","_createCopyOfSelected","_atoms$get","shouldDisplayDegree","neighbors","fromImageResize","getResizingProps","fromSimpleObjectResizing","visibleSelectedItems","getItemsToFuse","getHoverToFuse","paper","_this$dragCtx","_possibleSaltOrSolven","_this$dragCtx2","_this$dragCtx3","possibleSaltOrSolvent","isDraggingSaltOrSolventOnStructure","isDraggingCustomSgroupOnStructure","isSuperAtom","isDraggingStructureOnSaltOrSolvent","preventSaltAndSolventsMerge","dblclick","elementEdit","bondEdit","fromTextDeletion","fromTextUpdating","isDraggingOnSaltOrSolventAtom","isDraggingOnSaltOrSolventBond","mergeAtoms","mergeBonds","sgroupsOnCanvas","isAtomInSaltOrSolvent","isBondInSaltOrSolvent","isCloseToEdgeOfCanvas","mousePositionInCanvas","pageToCanvas","closeEdges","LEFT","RIGHT","TOP","_this$isCloseToEdgeOf","_this$isCloseToEdgeOf2","isCloseToSomeEdgeOfScreen","moveViewBox","requestAnimationFrame","MOVE_STEP","selectFragment","SelectCommonTool","isViewOnlyMode","PREVIEW_DELAY","getUniqueCiId","TemplatePreview","template","floatingPreviewAction","connectedPreviewAction","connectedPreviewTimeout","lastPreviewId","floatingPreview","previousPosition","hidePreview","hideConnectedPreview","hideFloatingPreview","getPreviewTarget","_this$restruct$molecu","isPreview","movePreview","previewTarget","isMouseAwayFromAtomsAndBonds","isPreviewTargetChanged","shouldHidePreview","shouldShowPreview","showConnectedPreview","showFloatingPreview","moveFloatingPreview","dist","_fromTemplateOnCanvas","fromTemplateOnCanvas","_fromTemplateOnCanvas2","isModeFunctionalGroup","sign1","getBondFlipSign","sign2","sign","shouldFlip","promise","fromTemplateOnBondAction","pasteItems","getAngleFromEvent","_fromTemplateOnAtom","fromTemplateOnAtom","_fromTemplateOnAtom2","_struct$halfBonds$get","frIds","getFragmentIds","count","loop","halfBonds","hb1","_struct$halfBonds$get2","hb2","_struct$loops$get","loopHbs","loops","hbs","hb","_struct$halfBonds$get3","halfBondBegin","hbbAtom","add_","atomById","getSign","_restruct$atoms$get","degree","_restruct$molecule$ha","neiId","nei","TemplateTool","getTemplateMode","templatePreview","findItems","angle0","sGroupSize","_this$closestItem","targetId","findKeyOfRelatedGroupId","functionalGroup","relatedSGroup","isTargetExpanded","isTargetAtomOrBond","targetGroupsIds","clickedClosestItemId","relatedGroupId","fg","relatedSGroupId","showRemoveAbbreviationPopup","_mousedown","_this$templatePreview","_this$closestItem2","_this$closestItem3","_this$closestItem4","_this$closestItem5","isNeedToShowRemoveAbbreviationPopup","_this$templatePreview2","eventPosition","targetPos","_fromTemplateOnBondAc","_fromTemplateOnBondAc2","extraBond","getTargetAtomId","extra_bond","_this$template","isAddingFunctionalGroup","_ci","functionalGroupRemoveAction","functionalGroupToReplace","isGroupAttached","addOnCanvasWithoutMerge","_functionalGroupToRep","atomsWithoutAttachmentAtom","_restruct$atoms$get2","_fromTemplateOnAtom3","_fromTemplateOnAtom4","BondAttr","AtomAttr","completeAction","isDummy","_this$templatePreview3","mouseLeaveClientArea","_this$templatePreview4","_fromTemplateOnCanvas3","_fromTemplateOnCanvas4","_tmpl$props","v","cross","handleHotkeyOverItem","newAction","handleEraser","handleDialog","handleTool","handleOtherActions","eraseItem","hoveredItem","mapItemsToArrays","itemType","_activeTool$templateP","isFunctionalGroupChange","hoveredItemId","dialogType","dialogHandler","getDialogHandler","dialogs","handleAtomPropsDialog","handleBondPropsDialog","atomsSelected","convertedAtomForModal","updatedAtom","convertedBondForModal","updatedBond","_loop","toolHandler","getToolHandler","isChangeStructureTool","_isFunctionalGroupChange","isChangingFunctionalGroup","handleAtomTool","handleBondTool","handleChargeTool","rgroupatom","handleRGroupAtomTool","handleSgroupsTool","_default","_ref10","_ref11","SGroupPositionAtomId","_ref12","newBond","_ref13","_editor$render$ctab$a","existingAtom","mappedItems","_handleRGroupAtomTool","_ref14","attrlist","getFunctionalGroupIdByItem","_x5","_isChangingFunctionalGroup","_ref15","keydownListener","initKeydownListener","hotKeys","initHotKeys","keyHandle","removeKeydownListener","removeNotRenderedStruct","actionTool","affectedTools","abbreviationLookupTimeoutId","ABBREVIATION_LOOKUP_TYPING_TIMEOUT","shortcutKeys","keyNorm","getHoveredItem","currentlyPressedKeys","isShortcutKey","isTheSameKey","isAbbreviationLookupShown","resetAction","hotkeyDialogTypes","isRotating","revert","lookup","checkGroupOnTool","groupLength","newIndex","actName","clipArea","getCurrentAction","isIE","prevActName","_actions$prevActName","ctabItem","_ret","rxnTextPlain","initClipboard","formatProperties","mime","debAction","loadStruct","legacyClipData","ketcherInstance","runAsyncAction","clipData","isSmarts","_callee6","_callee6$","_context6","_callee5","_callee5$","_context5","getStructStringFromClipboardData","DaylightSmarts","Mol","Rxn","isAbleToCopy","_clipData","_callee7","ket","_callee7$","_context7","getStructure","molAuto","formatterFactory","isReaction","AppClipArea","AppHidden","onInitTmpls","_useSettingsContext","staticResourcesUrl","requestIdleCallback","AppHiddenContainer","smallWidth","smallHeight","LoadingCircles","SELECTION_DISTANCE_COEFFICIENT","SELECTION_WITHIN_TEXT","findMaps","findClosestAtom","findClosestBond","findClosestEnhancedFlag","findClosestDataSGroupData","findClosestSGroup","findClosestFG","findClosestRxnArrow","findClosestRxnPlus","findClosestFrag","findClosestRGroup","findClosestRgroupAttachmentPoints","findClosestSimpleObject","findClosestText","findClosestMultitailArrow","findClosestImage","rectangleContainsPoint","startX","startY","minDist","POSITIVE_INFINITY","topX","topY","bottomX","bottomY","distances","refPoint","simpleObject","calcDistance","microModeScale","skip","closestAtom","maxMinDist","skipId","isHiddenLeavingGroupAtom","isSkippedAtom","closestBond","closestBondCenter","minCDist","isSkippedBond","p2","isBondToHiddenLeavingGroup","mid","cdist","hitboxPoints","getSelectionPoints","isPosInsidePolygon","dir","norm","inStripe","_skip","_minDist","_item","getDefaultStereoFlagPosition","box","dataArea","inBox","xDist","rgid","labelBox","minDistToOtherItems","closestItemId","reItem","itemOutlinePoints","getOutlinePoints","isCursorInsideOutline","getDistanceTo","rxnArrow","plus","isContracted","sGroupPosition","bracketDirection","rotateSC","pg","areas","_step$value","reSGroupId","reSGroup","_reSGroup$getTextHigh","getTextHighlightDimensions","_Scale$modelToCanvas","centerX","centerY","rectangleCenter","findClosestItem","priorityItem","mp","enrichedItem","findCloseMerge","atomPosition","mergeAtomToAtom","mergeAtomToFunctionalGroup","srcId","isAttachmentAtom","closestFunctionalGroup","renderOptions","canvasScaledPosition","maxDistance","distanceToPoint","calculateDistanceToPoint","closestPosition","calculateClosestReferencePosition","includeRef","distance","_item$calculateDistan","merge","editRGroupAttachmentPoint","_editRGroupAttachmentPoint","newAtom","previousAttachmentPoints","currentAttachmentPoints","actionFromAtomsAttrs","actionFromRGroupAttachmentPointUpdate","fromRGroupAttachmentPointUpdate","APointTool","click","isAtomSuperatomLeavingGroup","isRGroupAttachmentPointEditDisabled","AttachTool","attachPoints","_molecule$atoms$get","attachEdit","BondTool","attachmentAtomId","_endAtom2","beginAtom","endAtom","beginPos","endPos","closestSGroup","closestAttachmentAtomId","hasAttachmentPoint","isBeginFunctionalGroupItself","_endAtom","MAX_VALUE","xy1","get_xy0","_this$getExistingBond","getExistingBond","_this$getExistingBond2","existingBondId","existedBond","fromOneBondDeletion","restoreBondWhenHoveringOnCanvas","editorOptions","QUARTER_OF_BOND_WIDTH","QUARTER_OF_BOND_HEIGHT","xy","clientX","clientY","bondAddition","sum","bondChangingAction","isHoveringOverAtom","_this$dragCtx$existed","bondEnd","_step4$value","alreadyHasBondInOtherDirection","ChainTool","pos0","pos1","sectCount","ceil","_fromChain","fromChain","_fromChain2","newItems","ChargeTool","_molecule$atoms$get2","_molecule$atoms$get3","EnhancedStereoTool","stereoAtoms","changeAtomsStereoAction","stereoLabels","stereoAtom","hasAnotherLabel","enhancedStereoEdit","fromStereoFlagUpdate","EraserTool","preResult","rgroupAttachmentPointId","attachedAtomId","isRGroupAttachmentPointInsideFunctionalGroup","_restruct$bonds$get","fromOneAtomDeletion","fromArrowDeletion","fromPlusDeletion","fromSimpleObjectDeletion","fromRGroupAttachmentPointDeletion","fromImageDeletion","fromMultitailArrowDeletion","HandTool","begPos","mouseover","isMovePreviewCalculationInProgress","debouncedSetAndHoverMergeItems","pasteToolInstance","needResetTool","setMergeItems","notifyItemsToMergeInitializationComplete","PasteTool","_struct$functionalGro","isSingleContractedGroup","isSingleGroup","_rnd$clientArea","clientHeight","clientWidth","pageX","pageY","_this$struct$sgroups$","_this$action","closestGroupItem","closestGroup","_fromPaste3","_fromPaste4","_this$action2","targetGroup","prepareTemplateFromSingleGroup","_fromPaste5","_fromPaste6","visiblePasteItems","idsOfItemsMerged","groupsIdsInvolvedInMerge","RGroupAtomTool","propsDialog","aam","RGroupFragmentTool","ce","findRGroupByFragment","rgroupEdit","newRg","rgidOld","fromRGroupFragment","fromUpdateIfThen","fromRGroupAttrs","ReactionArrowAddTool","itemId","fromArrowAddition","addNewArrowWithDragging","addNewArrowWithClicking","getArrowWithMinimalLengthEnd","DEFAULT_LENGTH","MIN_LENGTH","findSecondPoint","oxAngleForVector","_item$pos","arrowId","MultitailArrowAddTool","MIN_HEIGHT","getArrowWithMinimalSizeEnd","fromMultitailArrowCreation","MIN_WIDTH","CommonArrowTool","multitailMoveTool","reactionMoveTool","addTool","isDragContextMultitail","isDragContextReaction","ReactionMapTool","_atoms$get2","updateLine","_atoms$get3","selectionLine","atom1","atom2","aam1","aam2","ReactionPlusTool","fromPlusAddition","ReactionUnmapTool","normalizeAngle","angleWithinFullCircle","SNAP_ANGLES_RELATIVE_TO_FIXED_BOND","MAX_SNAP_DELTA","ANGLE_INDICATOR_VISIBLE_DELTA","RotateTool","flipDirection","mousePos","mouseMoveAngle","angle1","rotateAngle","clearSnappingBonds","snapInfo","snapAngleDrawingProps","_this$snap","snap","_this$snap2","isSnapping","rotateAngleWithSnapping","rotateAngleInDegrees","fromRotate","selectionCenter","getCenter","canvasCenter","fromFlip","_this$snapInfo","snapMode","mousedownHandle","handleCenter","initSnapInfo","visibleAtoms","getSelectedVisibleAtoms","attachmentBonds","_bondId","bondPoints","intersectionAtoms","intersection","_this$struct$atoms$ge","centerAtomId","_this$struct$atoms$ge2","attachmentBondId","attachmentBond","_this2$selection","_this$selection","getSelectionBoxCenter","isMergingSGroup","dst","isBondFromMacromolecule","centerAtom","_this$partitionNeighb","partitionNeighborsBySelection","rotatableHalfBondIds","rotatableHalfBondAngles","fixedHalfBondIds","fixedHalfBondAngles","rotatableHalfBondId","rotatableHalfBondAngle","_this$calculateAbsolu","calculateAbsoluteSnapAngles","absoluteSnapAngles","snapAngleToHalfBonds","fixedHalfBondId","fixedHalfBondAngle","_this$calculateAbsolu2","calculateAbsoluteAnglesByFixedBond","_this$calculateAbsolu3","_this$calculateAbsolu4","calculateAbsoluteAnglesByBisector","_this$calculateAbsolu5","snapAngle","previousHalfBondId","previousHalfBondAngle","currentHalfBondId","currentHalfBondAngle","difference","bisectorAngle","halfBondId","halfBond","neighborAtomId","isHalfBondInContractedFunctionalGroup","ang","_this5","newRotatedHalfBondAngle","saveSnappingBonds","absoluteAngle","relativeAngle","_this$snapInfo2","_this6","halfBondsToBeHighlighted","bondIds","getBondIdByHalfBond","addSnappingBonds","SimpleObjectTool","isNew","previous","fromSimpleObjectAddition","addOperation","TextTool","origilContent","fromTextCreation","TAG","supportedMimes","supportedMimesForRegex","allowList","MIN_DIMENSION_SIZE","MIN_SIZELESS_IMAGE_SRC_LENGTH","ImageTool","getElement","onchange","onFileUpload","fromImageMove","clickPosition","Image","reader","errorMessage","resetElementValue","isValidSize","isValidSizeless","halfSize","halfSizeScaled","fromImageCreation","uploader","INPUT_ID","accept","HTMLInputElement","toolsMap","eraser","rgroupfragment","apoint","reactionarrow","reactionplus","reactionmap","reactionunmap","enhancedStereo","simpleobject","Highlighter","getAll","highlightsMap","highlights","highlightsArray","highlight","createdHighlights","arg","_getValidInputOnly","getValidInputOnly","validAtoms","validBonds","validRgroupAttachmentPoints","fromHighlightCreate","fromHighlightClear","structAtoms","structBonds","structRgroupAttachmentPoints","rgroupAPId","HOVER_ICON_OPACITY","HoverIcon","initialize","_fill","_label","isShown","shouldBeShownWhenMouseBack","onMouseMove","onMouseLeave","fillColor","attr","isOverLoader","relatedTarget","_this$editor$lastCurs","lastCursorPosition","newPosition","viewToCanvas","restShouldBeShownWhenMouseBack","_this$fill","getOptionsWithConvertedUnits","fontszInPx","rotatePoint","centerPoint","startPoint","oCenter","oStart","centerStart","centerEnd","oEnd","getDifference","currentDegree","structRotateDegree","positiveCurrentDegree","negativeCurrentDegree","STYLE","HANDLE_MARGIN","HANDLE_RADIUS","INITIAL_COLOR","ACTIVE_COLOR","LEFT_ARROW_PATH","RIGHT_ARROW_PATH","RotateController","isSomeButtonPressed","drawHandle","_this$boundingRect","isLeftButtonPressed","isDragPaused","boundingRect","centerHandleVec","normalizedCenterInitialHandleVec","normalized","newProtractorRadius","initialRadius","_this$getProtractorBa","getProtractorBaseInfo","_this$getProtractorBa2","degree0Line","degree0TextPos","drawProtractor","drawCross","drawLink","originalHandleCenter","rotateTool","originalCenter","lastSnappingRadius","_dxFromStart","_dyFromStart","_clientX","_clientY","_lastSnappingRadius","_this$rotateTool$drag","_this$rotateTool$drag2","newRadius","_this$getProtractorBa3","_this$getProtractorBa4","rotateArcStart","textPos","drawRotateArc","updateSnapAngleIndicator","isMovingCenter","handle","handleCenterInViewport","canvasToView","_this$handle","_this$handle2","_this$handle3","_this$handle4","_this$cross","_this$cross2","_this$boundingRect2","_this$link","_this$handle5","_this$protractor","_this$rotateArc","_this$snapAngleIndica","unhover","hoverIn","hoverOut","unmousedown","dragStart","unmouseup","dragEnd","undrag","crossArea","hoverCrossIn","hoverCrossOut","dragCrossStart","dragCrossEnd","protractor","rotateArc","snapAngleIndicator","_this$rotateTool$drag3","isPartOfFragmentSelected","allAtoms","selectedAtomIds","selectedFragmentIdSet","_allAtoms$get","fragmentId","nonSelectedAtoms","_this$handle6","_this$handle7","_this$handle8","_this$handle9","_this$cross3","isMoreThanOneItemBeingSelected","enable","rectStartY","drawBoundingRect","drag","dragMove","dragCrossMove","dragCrossEndOUtOfBounding","_this$cross4","stroke","_this$cross5","_this$cross6","_this$cross7","translate","_this$cross8","_this$cross9","circle","RECT_RADIUS","RECT_PADDING","rectBox","rectStartX","atomSelectionPlateRadius","rectEndX","rectEndY","rect","_this$handle10","_this$handle11","_this$handle12","_this$handle13","_this$handle14","arrowSet","_this$handle15","leftArrow","rightArrow","_arrowSet$getBBox","getBBox","_this$link2","_this$link3","_this$link4","_this$link5","degreeLine","_this$protractor2","PROTRACTOR_COLOR","DEGREE_FONT_SIZE","predefinedDegrees","previousDegree","currentIndex","_this2$protractor","_this2$protractor2","isDrawingDegree0","degreeText","toBack","arc","rotateArcEnd","TEXT_FONT_SIZE","TEXT_COLOR","DEGREE_TEXT_MARGIN","distBetweenDegree0TextAndCenter","centerDegree0TextVec","lineLength","centerLineStartVec","lineVec","lineStart","lineEnd","lineEndHalf","addScaled","arcStartPos","TEXT_MARGIN_LEFT","l1","l2","currentDegreeMarkPos","_this$snapAngleIndica2","drawingState","drawSnapAngleIndicator","absoluteSnapAngle","relativeSnapAngle","_this$snapAngleIndica3","LINE_LENGTH","relativeSnapAngleInDegrees","drawText","textPosition","drawLine","lineVector","textAngle","SCALE","provideEditorSettings","HISTORY_SIZE","structObjects","highlightTargets","selectStereoFlagsIfNecessary","expAtoms","atomsOfFragments","stereoFlags","shouldSelSFlag","_origin","Editor","Render","reuseRestructIfExist","historyStack","historyPtr","renderAndRecoordinateStruct","setOptions","setServerSettings","contextMenu","Subscription","PipelineSubscription","zoomIn","zoomOut","sdataEdit","change","selectionChange","aromatizeStruct","dearomatizeStruct","apiSettings","domEventSetup","isDitrty","setOrigin","ToolConstructor","isAtomToolChosen","isSelectToolChosen","needToCenterStruct","fromNewCanvas","structToAddFragment","superStruct","mergeInto","wasViewOnlyEnabled","updateOptions","updateToolAfterOptionsChange","setZoom","isViewOnlyEnabled","changeEvent","structCenter","viewBoxCenter","viewBoxCenterInProto","shiftVector","structureToMove","MIN_ZOOM_VALUE","MAX_ZOOM_VALUE","MARGIN_IN_PIXELS","parsedStructCoordBoundingBox","getCoordBoundingBox","parsedStructSize","parsedStructSizeInPixels","clientAreaBoundingBox","newZoomValue","selectAll","setSelection","newTool","setHover","ignoreHistory","splice","shift","clearHistoryStack","ketcherChangeEvent","stack","eventName","subscriber","subscribeFuncWrapper","findMerge","srcItems","isRxn","fromDescriptorsAlign","setMacromoleculeConvertionError","macromoleculeConvertionError","clearMacromoleculeConvertionError","focusCliparea","isMouseMainButtonPressed","resetSelectionOnCanvasClick","updateLastCursorPosition","events","isContextMenuClosed","useToolIfNeeded","eventHandlerName","_editorTool$isSelecti","editorTool","conditions","condition","_editorTool$eventHand","trackedDomEvents","toolEventHandler","DOMSubscription","subs","nodeName","isToolUsed","dstId","item1","item2","CONTEXT_MENU_ID","ContextMenuTriggerType","useAtomEdit","atomIds","formatTitle","getBondNames","queryBondNames","getNonQueryBondNames","allBondNames","onlyHasProperty","checkedObject","ignoredProps","numberOfProps","useAtomStereo","stereoAtomIdsRef","stereoAtomIds","useDelete","itemsToDelete","ButtonGroup","defaultValue","setValue","handleChange","ToggleButtonGroup","exclusive","flexWrap","buttonValue","ToggleButton","flex","margin","useAddAttachmentPoint","_props$atomIds","bondAdditionResult","addedLeavingGroupAtomId","moleculeAtoms","sgroupAttachmentPoints","allPointsNumbers","lastMinimalPointNumber","hasFirstNumber","prevNumber","currentNumber","findConnectedComponent","fromSgroupAddition","newId","SGroupAttachmentPoint","attachmentPointNumber","fromSgroupAttachmentPointAddition","useRemoveAttachmentPoint","atomExternalConnections","atomFreeAttachmentPoints","attachmentPointToDelete","getAttachmentAtomExternalConnections","leaveAtomId","standardColors","Submenu","ColorContainer","ColorSquare","span","ColorItem","HighlightMenu","onHighlight","marginLeft","_atom$properties","atomPropertiesForSubMenu","AtomMenuItems","_props$propsFromTrigg4","_props$propsFromTrigg5","_props$propsFromTrigg7","_useAtomEdit","_useAtomEdit2","handleEdit","_useAddAttachmentPoin","_useAddAttachmentPoin2","handleAddAttachmentPoint","_useRemoveAttachmentP","_useRemoveAttachmentP2","handleRemoveAttachmentPoint","_useAtomStereo","_useAtomStereo2","handleStereo","stereoDisabled","handleDelete","getPropertyValue","_props$propsFromTrigg","propsFromTrigger","_props$propsFromTrigg2","_atomGetAttr","atomGetAttr","updateAtomProperty","_props$propsFromTrigg3","onlyOneAtomSelected","selectedAtomId","atomInSgroupWithLabel","maxAttachmentPointsAmount","isAtomSuperatomAttachmentPoint","isSuperatomAttachmentAtom","highlightAtomWithColor","_props$propsFromTrigg6","extraItemsSelected","sameGroup","useBondEdit","selectedBondIds","useBondSGroupAttach","attachedSGroups","getAttachedSGroups","_attachedSGroups","sgGroupId","useBondSGroupEdit","sGroupsRef","_sGroupsRef$current","useBondTypeChange","_molecule$bonds$get","useChangeBondDirection","changeDirection","_getKetcherInstance","fromBondFlipping","nonQueryBondNames","BondMenuItems","bondData","setBondData","_useBondEdit","_useBondEdit2","_useBondTypeChange","_useBondTypeChange2","handleTypeChange","_useBondSGroupAttach","_useBondSGroupAttach2","handleSGroupAttach","sGroupAttachHidden","_useBondSGroupEdit","_useBondSGroupEdit2","handleSGroupEdit","sGroupEditDisabled","sGroupEditHidden","bondNamesWithoutEmptyValue","_useChangeBondDirecti","highlightBondWithColor","shouldShowChangeDirection","devider","subMenu","useFunctionalGroupEoc","toExpand","selectedFunctionalGroups","setExpandMonomerSGroup","_props$functionalGrou","useFunctionalGroupRemove","FunctionalGroupMenuItems","_useFunctionalGroupEo","_useFunctionalGroupEo2","handleExpandOrContract","ExpandOrContractHidden","handleRemove","bondNames","SelectionMenuItems","handleBondEdit","bondEditDisabled","handleAtomEdit","atomEditDisabled","bondTypeChangeDisabled","handleAtomStereo","atomStereoDisabled","pointsToDelete","previousAction","currentPoint","currentAction","getAtomIdByProps","_props$rgroupAttachme","attachmentPointId","useRGroupAttachmentPointEdit","_props$atomIds2","atomLength","RGroupAttachmentPointMenuItems","useRGroupAttachmentPointRemove","_useRGroupAttachmentP","_useRGroupAttachmentP2","handleEditRGroupAttachmentPoint","rgroupAttachmentPointDisabled","rgroupAttachmentPointHidden","updateEditor","typedEditor","useMultitailArrowTailsAdd","addTail","fromMultitailArrowTailAdd","isAddTailDisabled","MultitailArrow","canAddTail","getTailsMaxDistance","useMultitailArrowTailsRemove","_useAppContext2","removeTail","fromMultitailArrowTailRemove","tailId","removeTailHidden","MultitailArrowMenuItems","_useMultitailArrowTai","_useMultitailArrowTai2","useMonomerExpansionHandlers","MacromoleculeMenuItems","_useMonomerExpansionH","_useMonomerExpansionH2","multipleMonomersSelected","expandText","collapseText","animation","ContextMenu","adjustSubmenuPosition","submenuElement","ketcherRootElement","ketcherRootElementRect","ketcherEditorWidth","ketcherEditorHeight","ketcherEditorLeft","ketcherEditorTop","resetMenuPosition","menuElement","contextMenuElement","contextMenuElementBoundingBox","ketcherRootElementBoundingBox","viewportWidth","innerWidth","viewportHeight","trackVisibility","submenuElements","querySelectorAll","ketcherEditorRootElement","Menu","FOR_BONDS","onVisibilityChange","FOR_ATOMS","FOR_SELECTION","FOR_FUNCTIONAL_GROUPS","FOR_R_GROUP_ATTACHMENT_POINT","FOR_MULTITAIL_ARROW","FOR_MACROMOLECULE","getIsItemInSelection","selectedSGroupsIds","getMenuPropsForClosestItem","noFunctionalGroup","isMonomer","findFunctionalGroupBySGroup","_struct$rgroupAttachm","_closestItemTyped$ref","closestItemTyped","IGNORED_MAPS_LIST","getMenuPropsForSelection","ContextMenuTrigger","_useContextMenu","useContextMenu","getSelectedGroupsInfo","handleDisplay","currentTool","_getSelectedGroupsInf","showProps","triggerType","isLeftMouseButtonPressed","isRotationReverted","ClosestItem","None","Selection","onContextMenu","X_COORD_INDEX","Y_COORD_INDEX","calculateMiddleCoordsForRect","rectCoords","middleCoordForRectangleSides","previousPoint","middleX","middleY","getSmoothScrollDelta","delta","SMOOTH_FACTOR","BAR_PANEL_SIZE","LEFT_PADDING_MULTIPLIER","getPanelPositionRelativeToRect","_render$clientArea","_render$clientArea2","_sGroup$hovering$attr","viewportLeftLimit","viewportBottomLimit","viewportRightLimit","_calculateMiddleCoord","_calculateMiddleCoord2","middleLeftSide","middleBottomSide","middleRightSide","middleTopSide","panelPositionInViewBox","SGroupDataRender","sGroupData","wrapperHeight","setWrapperHeight","wrapperWidth","setWrapperWidth","wrapperRef","panelCoordinate","infoPanel","functionalGroupsSelector","functionGroupInfoSelector","HOVER_PANEL_PADDING","MAX_INFO_PANEL_SIZE","getPanelPosition","groupBoundingBox","panelPosition","modelToView","InfoPanel","_sGroup$data","setMolecule","setSGroupData","_sGroup$data2","_sGroup$data3","nonTooltipSGroup","isMulSGroup","isSRUSGroup","_getPanelPosition","_getPanelPosition2","showMolecule","isAmbiguousMonomer","AmbiguousMonomer","variantMonomerItem","downScale","cachePrefix","needCache","_functionGroupInfoSel","_functionGroupInfoSel2","_functionGroupInfoSel3","_functionGroupInfoSel4","_store$editor","tooltipOffset","InfoTooltip","tooltip","setTooltip","setPosition","debouncedShowTooltip","toggleTooltip","dataset","shiftedPosition","infoTooltip","dangerouslySetInnerHTML","__html","setupEditor","oldProps","toolOpts","upperFirst","unobserveCanvasResize","observeCanvasResize","removeEditorHandlers","StructEditor","zoomDelta","deltaY","_this$editor$tool","scrollCanvas","updateFloatingToolsPosition","enableCursor","editorRef","logRef","handleHorizontalScroll","handleScroll","wheelDelta","deltaX","nextProps","nextState","UNSAFE_componentWillReceiveProps","onShowMacromoleculesErrorMessage","onInit","msg","showAttachmentPoints","parsedInfo","csr","_this4$editorRef$curr","handShouldBeShown","setState","handleWheel","_this$props$Tag","Tag","onSelectionChange","onElementEdit","onEnhancedStereoEdit","onQuickEdit","onBondEdit","onRgroupEdit","onSgroupEdit","onRemoveFG","onMessage","onAromatizeStruct","onDearomatizeStruct","onAttachEdit","onCipChange","onConfirm","onShowInfo","onApiSettings","onUpdateFloatingTools","_this$state","_this$state$clientX","_this$state$clientY","intermediateCanvas","measureLog","spinnerOverlay","AboutDialog","indigoInfo","dialog_body","onOk","okButton","href","overviewLink","rel","Logo","verionsInfo","ketcherVersionInfo","date","infoLinks","feedbackLink","lifeScienciesLink","indigoMachine","buildDate","_result","About","GenericInput","onChange","innerRef","_ref$type","_ref$isFocused","isFocused","genericInput","checkbox","radioButton","ev","isInteger","isFloat","TextArea","onInput","CheckBox","_ref3$value","_excluded3","fieldSetItem","checked","Select","onSelect","_ref4$multiple","multiple","enumSchema","selectedIndex","o","FieldSet","_ref5$type","_excluded4","fieldSetLabel","defaultChecked","_input$parentNode","fieldset","inputCollection","inp","Slider","_excluded5","slider","cbOrIndex","isTypeValue","inputCtrl","singleSelectCtrl","testVal","multipleSelectCtrl","ctrlMap","componentMap","AnyComponentWithRef","_excluded6","_PureComponent","ctrl","restProps","_excluded7","PureComponent","chevronIcon","isFullScreen","_currentValue$value","_ref2$multiple","formName","currentValue","setCurrentValue","selectRef","MuiSelect","selectContainer","MenuProps","dropdownList","_selectRef$current$cl","_selectRef$current","IconComponent","isDivider","listDivider","MenuItem","disableRipple","ErrorMessage","ErrorPopover","handleClose","disableAutoFocus","sx","pointerEvents","transformOrigin","Form","onUpdate","propSchema","_this$schema$serializ","errs","getErrorsObj","updateState","customValid","_this$schema$serializ2","extraName","_this$props3","extraValue","handleOnChange","dataError","onExtraChange","_this$props4","Provider","stateStore","Label","labelPos","divWithTooltipAndAboutIcon","Tooltip","Field","extraLabel","setAnchorEl","handlePopoverOpen","currentTarget","handlePopoverClose","_useFormContext","_stateStore$field","fieldOpts","getExtraSchema","extraSchema","formField","inputWithExtraLabel","inputWrapper","onMouseEnter","FieldWithModal","onEdit","_useFormContext2","_stateStore$field2","inputWithEditButtonWrapper","editButton","CustomQueryField","onCheckboxChange","checkboxValue","_useState5","_useState6","_useFormContext3","_stateStore$field3","_excluded8","handleCheckboxChange","SelectOneOf","_excluded9","selectDesc","_ref2$serialize","_ref2$deserialize","schemaCopy","cloneDeep","prototype","customFormats","formatName","formatValidator","_schemaCopy$propertie","enumIsReservedWord","_excluded10","inst","serializeRewrite","deserializeRewrite","serializeMap","deserializeMap","getInvalidMessage","presetColors","ColorPicker","isPaletteOpen","setIsPaletteOpen","limit","inThrottle","handlePaletteOpen","handleColorChange","handleBlur","colorPickerWrapper","colorPickerInput","selectedInput","colorPickerPreview","expandIcon","turnedIcon","colorPickerWrap","withPalette","onBlur","chooseColor","clicked","autoFocus","presetColor","colorPicker","HexColorPicker","colorContainer","hex","HexColorInput","getNewFloat","_value$split","_value$split2","int","float","isNewFloat","getNewInternalValue","prevValue","endorcedValue","newValueEndsWithDot","prevValueHasDot","isDotDeleted","isDotAdded","_getNewFloat","MeasureInput","internalValue","setInternalValue","isNewInternalValueValid","parseFloat","stringifiedValue","startsWithZero","zeroWithDot","measureInput","OpenButton","opener","noop","_this$props$onLoad","onLoad","_this$props$onError","onError","btn","openButton","fileSaver","saveAs","blob","SaveButton","_props$filename","_props$mode","_props$onSave","_props$onError","saveFile","saver","saveImage","tabs","changedGroups","expandedAccordions","setExpandedAccordions","handleAccordionChange","accordion","isExpand","expandedAccordion","accordionWrapper","shouldGroupBeRended","accordionSummaryWrapper","accordionSummary","groupLabel","groupIcon","changeMarker","accordionDetailsWrapper","hiddenAccordion","accordionDetails","commonFonts","checkInSystem","availableFontsPromises","fontName","observer","FontFaceObserver","SystemFonts","availableFonts","setAvailableFonts","onChangeCallback","mounted","results","fonts","fieldGroups","defaultSettings","HeaderContent","onOpenFile","onReset","getIsResetDisabled","settingsProps","settingsSchema","SettingsDialog","appOpts","setChangedGroups","changed","generalTab","stereoTab","atomsTab","bondsTab","serverTab","threeDViewerTab","viewer","debuggingTab","onACSStyle","ACSStyleButton","acsStyleButton","OK","ownProps","newOpts","_res","showNotification","Settings","ErrorsCheck","checkSchema","moleculeErrorsTypes","getOptionName","nameIndex","getFormattedDateString","getFixedString","num","padStart","getHours","getMinutes","getSeconds","getDate","getMonth","getFullYear","FooterContent","handleCheck","handleApply","isStuctureChecking","isCheckedWithNewSettings","buttonSecondary","buttonPrimary","buttonsRight","CheckDialog","checkState","onApply","_formState$result","setIsStructureChecking","lastCheckDate","setLastCheckDate","setIsCheckedWithNewSettings","Date","handleSettingsChange","checkBoxesDisabled","checkInfo","centeredContainer","warnings","warningsContainer","Check","formulaRegexp","errorRegexp","formulaInputMarkdown","contentData","keyCode","chem_input","onKeyPress","FormulaInput","cnd","substring","FrozenInput","spellCheck","readOnly","roundOff","AnalyseDialog","onChangeRound","withSelector","contentWrapper","selectWrapper","ErrorsContext","Analyse","DialogActionButton","clickHandler","isImage","_file$type","onImage","openHandler","copyHandler","isAddToCanvasDisabled","secondaryButton","primaryButton","RecognizeDialog","partProps","onRecognize","isFragment","onChangeImago","canPreviewImage","setCanPreviewImage","clearFile","topBody","imagoVersion","imagesContainer","picture","messageContainer","output","URL","webkitURL","createObjectURL","ver","Recognize","Viewer","lazy","BACKGROUND_COLOR","dark","light","MIEW_TX_TYPES","no","bright","colorer","blackAndWhite","bg","black","TXoptions","userOpts","selector","showBg","createMiewOptions","autoPreset","editing","inversePanning","reps","textMode","CHANGING_WARNING","warning","MiewDialog","miewOpts","onExportCML","_ref$miewTheme","miewRef","isInitialized","setIsIsInitialized","onMiewInit","cml","sourceType","exportCML","_miewRef$current","cmlStruct","applyButton","miewDialog","miewContainer","miewDarkTheme","Suspense","loadingContainer","getOptionsSettings","miewOptionsSelector","Miew","atomValid","isMultipleAtoms","isChemicalElement","AtomListValid","pseudoAtomValid","disableQueryElements","capitalizedValue","isDisabledQueryElement","isGenericElement","genericsList","chargeValid","isValidCharge","customQueryValid","atomSchema","ElementNumber","_Elements$get","AtomElement","openNestedDialog","modalName","_el$values","AtomFields","list","querySpecificFields","_props$isMultipleAtom","setIsCustomQuery","handleCustomQueryCheckBoxChange","setCustomQuery","query","getAtomCustomQuery","getOptions","itemGroups","querySpecific","reactionFlags","disableCustomQuery","customQueryWrapper","AtomContainer","AttachPoints","attachmentPointsSchema","AttachPointsContainer","automapSchema","Automap","AutomapContainer","previousSettings","getBondCustomQuery","isValid","queryAttrsText","patterns","bondType","CoreBond","TOPOLOGY","RING","CHAIN","BondContainer","IfThenSelect","rgroupLabels","rgroupLabel","RgroupLogic","rangeConv","RgroupLogicContainer","ICON_NAME","AnalyzingFile","fileName","analyzingFileWrapper","fileBox","FileDrop","buttonLabel","textLabel","disabledText","_useDropzone","useDropzone","getRootProps","getInputProps","isDragActive","getClassesString","parentStyles","dropContainer","isHovered","dropIconWrapper","textLabelWrapper","buttonLabelWrapper","ICON_NAMES","PASTE","FILE","IMAGE","OpenOptions","selectClipboard","fileLoadHandler","imageLoadHandler","isRecognizeDisabled","optionsContainer","onDropAccepted","onDropRejected","TextEditor","inputHandler","_ref$autoFocus","textareaEditor","serverSelector","editorOptionsSelector","_state$editor","CDXStructuresViewer","_ref$structList","structList","useSelector","setSelectedIndex","itemsMap","setItemsMap","setLoading","base64struct","getImage","object","renderStructure","centerWrapper","_itemsMap$selectedInd","autoScale","renderStructures","structuresWrapper","menuListWrapper","MenuList","_itemsMap$index","imageWrapper","ViewSwitcher","states","idle","textEditor","presentationViewer","MODAL_STATES","imageRec","cancelButton","buttonsContainer","copyButton","Open","onImageUpload","setStructStr","setStructList","setFileName","_useState7","_useState8","setOpener","_useState9","_useState10","setCurrentState","_useState11","_useState12","isLoading","setIsLoading","chosenOpener","onFileLoad","fileContent","onImageLoad","getFormatMimeTypeByFileName","withFooterContent","_state$actionState$re","badHeaderRecover","OpenContainer","couldBeSaved","getPropertiesByFormat","rxnArrowsSize","arrayOfAtoms","arrayOfBonds","atomsHaveUnsupportedProperties","bondsHaveUnsupportedProperties","hasGenerics","arrayOfArrows","rxnArrowMode","isRg","_ind","isSg","isVal","StereoFlag","Tabs","contentClassName","tabPanel","componentProps","saveSchema","SaveDialog","getPropertiesByImgFormat","isImageFormat","ketSerialize","disableControls","imageFormat","serverOptions","base64","imageSrc","onResetForm","getStructFromStringByType","structWarning","saveWarning","structFormat","isStructInvalid","showStructWarningMessage","filteredMoleculeErrors","getWarnings","renderSaveFile","renderWarnings","formContainer","changeType","captions","isCleanStruct","LoadingState","loadingCirclesContainer","ImageContent","imageContainer","BinaryContent","previewBackground","previewArea","PreviewContent","handleCopy","isBinaryCdxFormat","warningsArr","_this$state2","_formState$result2","savingStruct","b64toBlob","isMoleculeContain","saveTmpl","onTmplSave","extensions","hasMultitailArrow","formatProps","getButtons","renderForm","serverSettingsSelector","prevState","Save","EnhancedStereo","findStereLabels","maxAnd","maxOfAnds","maxOr","maxOfOrs","enhancedStereoSchema","labelGroupSelect","aids","stereoIds","stereLabels","numbers","_label$match","_label$match2","lc","LabelEdit","letter","labelEditSchema","l","labelEditInputField","AtomInfo","isInfo","numberStyle","elemStyle","ket_atom_info","none","mass","PERIODIC_TABLE_COLUMNS","MainRow","row","refer","onAtomSelect","onDoubleClick","currentEvents","atomClassNames","colSpan","OutinerRow","metalPrefix","metal","unknownProps","unknownState","beforeSpan","He","Al","Hf","Rf","ACTINIDE","LANTHANIDE","main","rowPartition","lanthanides","actinides","period","ElementsTable","origin","callbacks","table","getAtomClassNames","main_row","outiner_row","HorizontalBoxWithLines","horizintalNodeLines","upperLines","lowerLine","VerticalBoxWithLines","verticalNodeLines","isGenericGroup","cyclicGroups","ButtonGenSet","titleText","getGroupClassName","replaceAll","GenSet","labels","disabledQueryElements","displayName","legendBox","genGroupLegendBox","genGroupLegend","getLegendClassname","mainTitles","GenGroup","fieldFlexWrapper","genButtonContainer","buttonContainer","itemSets","subGroup","getGenericsGroupsMap","tree","newGroups","_i","_Object$keys","_newGroups$groupName","subGroups","groupsMap","Generics","renderGenGroupComponent","GenericGroups","genericGroups","topGroupsContainer","groupNames","atomsGen","specialNodes","groupGen","groupGenerics","groupAcyclic","subgroupContainer","acyclicCarbo","acyclicHetero","groupCyclic","cyclicCarbo","cyclicHetero","TypeChoice","Table","prevChoice","currentChoice","dialogHeader","activateImmediately","_this$state3","elementsTable","periodTable","mapSelectionToProps","PeriodTable","extendedTable","ExtendedTable","RemoveFG","question","buttonCancel","buttonOk","oneOrMore","multipl","ButtonList","disabledIds","placeholder","SDataFieldset","formSchema","propMapping","schemes","SGroupFieldset","Sgroup","TemplateEditDialog","Warning","Message","LeftColumn","RightColumn","NameInput","AttachmentOutput","_templateObject8","Buttons","_templateObject9","buttonCommonStyles","_templateObject10","_templateObject11","CancelButton","_templateObject12","editorStyles","selectionStyle","hoverStyle","hoverStyleSimpleObject","Attach","SAVE","EDIT","initTmpl","checkIsValidName","onNameEdit","globalSettings","getScale","dialogTitle","warningObject","normTmpl","structNormalization","normStruct","cbb","rxnPlus","VIEW_SIZE","scale","isSaltOrSolventTemplate","isFunctionalGroupTemplate","getTemplateTitle","tmplName","TemplateTable","onDelete","onAttach","_props$titleRows","titleRows","tableContent","oneRowTitleTable","twoRowsTitleTable","td","autoScaleMargin","structTitle","selectedTitle","deleteButton","saltsAndSolventsSelector","EmptySearchResult","textInfo","emptySearch","SALTS_AND_SOLVENTS","batchDelay","useSaltsAndSolvents","isFirstRender","setIsFirstRender","timerId","filteredSaltsAndSolvents","setFilteredSaltsAndSolvents","addToSaSWithBatches","fullFilteredArray","batchSize","_filterFGLib$SALTS_AN","filteredSaS","TabPanel","other","a11yProps","TemplateTabs","filterLibSelector","FUNCTIONAL_GROUPS","clickToAddToCanvas","SaltsAndSolvents","flexGrow","saveButton","TemplateLibrary","TemplateDialog","onFilter","onTabChange","onChangeGroup","_props$initialTab","initialTab","searchInputRef","filteredFG","setFilteredFG","filteredTemplateLib","_searchInputRef$curre","handleTabChange","serializerMapper","FunctionalGroupLibrary","inputContainer","searchIcon","Tab","tabsContent","square","AccordionSummary","AccordionDetails","templ","resultsContainer","selectTemplate","onModalClose","_store$modal","useClickOutside","targetRef","onClickOutside","_targetRef$current","FontControl","editorState","setEditorState","defaultFontSize","isShowingFontSizeMenu","setIsShowingFontSizeMenu","currentFontSize","setCurrentFontSize","onClickOutsideCloseDrowndown","setFontSize","newEditorState","currentStyle","MIN_FONT_SIZE","MAX_FONT_SIZE","fontSizes","fontSizeOptions","fontSizeOption","fontBtn","fontSizeMenu","SpecialSymbolsList","symbols","symbol","SpecialSymbolsButton","showSpecialSymbols","setShowSpecialSymbols","closeSymbolsList","addSymbol","contentState","getCurrentContent","nextContentState","Modifier","replaceText","nextEditorState","EditorState","activeTextButton","textButton","TextButton","toggleStyle","_createStyles","createStyles","customStyleFn","TextCommand","Bold","Italic","Superscript","Subscript","Text","rawContentState","moveFocusToEnd","createWithContent","convertFromRaw","blocks","entityMap","hasText","convertToRaw","keyBindingFn","getDefaultKeyBinding","onContentChange","getCurrentInlineStyle","RichUtils","toggleInlineStyle","customStyleMap","SUBSCRIPT","verticalAlign","SUPERSCRIPT","lineHeight","refEditor","setFocusInEditor","controlPanel","Confirm","pasteErrorText","hotKey","PasteErrorModalBody","pasteErrorModalBody","shortcutsBlock","ErrorInfoModal","_config$paste$title","_props$title","isPasteError","defaultCutCopyMessage","infoModal","Rgroup","TemplateAttach","TemplatesDialog","Modal","modals","modalOverlay","selectClasses","smallScreen","mergeProps","stateProps","dispatchProps","initProps","ModalContainer","generateCommonProperties","normalizedElement","resultElementAttributes","uniqueValues","allElementsHaveTheSameValue","initEditor","updateAction","sleep","time","force","selectMode","resetOption","acts","atomAttributes","dlg","_extends","_objectDestructuringEmpty","bondsAttributes","serverOpts","selectCursorPosition","ABBREVIATION_LOOKUP_TEST_ID","NO_MATCHING_RESULTS_LABEL","START_TYPING_NOTIFICATION_LABEL","MIN_LOOKUP_VALUE_LENGTH_FOR_HIGHLIGHT","getStringsSimilarity","loweredText","loweredSubString","getHighlightSearchStartIndex","loweredLookupValue","loweredAbbreviation","loweredName","nameStartsWith","abbreviationStartsWith","nameSimilarity","abbreviationSimilarity","highlightOptionLabel","initialLoweredValue","trimmedLoweredValue","searchFromIndex","startPos","loweredLabel","startPart","middlePart","endPart","getOptionLabel","getSimilarity","filterOptions","inputValue","filteredOptions","optionA","optionB","_optionA$loweredAbbre","_optionB$loweredAbbre","optionAStartWith","optionBStartWith","optionASimilarity","optionBSimilarity","AbbreviationType","AbbreviationLookup","autocompleteRef","usedCursorPositionRef","setPortalSize","initialLookupValue","setLookupValue","setLoweredLookupValue","_autocompleteRef$curr","_autocompleteRef$curr2","_autocompleteRef$curr3","_autocompleteRef$curr4","_inputRef$current","containerHeight","containerWidth","offsetWidth","parentRect","maxLeft","maxTop","calculatedLeft","calculatedTop","_inputRef$current2","closePanel","Template","handleKeyDown","lookupContainer","MuiAutocomplete","openOnFocus","autoHighlight","noOptionsText","optionItem","listbox","listBox","noOptions","renderInput","InputProps","inputProps","renderOption","optionItemContent","templatesLibSelector","useOptions","functionGroups","uniqTemplates","uniqBy","mappedElementOptions","Element","mappedTemplateOptions","_template$struct$abbr","AbbreviationLookupContainer","abbreviationOptions","muiTheme","createTheme","components","MuiButtonBase","defaultProps","App","ConnectedEditor","ThemeProvider","theme","AppModalContainer","AppContainer","MOUSE_MOVE_THROTTLE_TIMEOUT","handleMouseMove","pointerMoveListener","mouseDownListener","initMouseListener","throttledHandleMouseMove","areBothLeftAndRightButtonsClicked","handleRightClick","removeMouseListeners","initApp","appRoot","ketcherRef","setKetcher","uniqueId","getServerSetter","indigo","IndigoProvider","getIndigo","setIndigo","newIndigo","KetcherBuilder","serviceMode","_appendApiAsync","DefaultStructServiceOptions","appendApiAsync","reinitializeApi","setStructServiceToStore","oldStructService","_oldStructService$des","warn","reinitializeIndigo","appendServiceMode","_appendUiAsync","cleanup","_yield$Promise","buildNumber","appendUiAsync","_x6","_x7","_x8","build","URLSearchParams","initialMol","setKetcherInstance","buildKetcherAsync","_buildKetcherAsync","builder","_yield$builder$append","MicromoleculesEditor","initPromiseRef","appRootRef","cleanupRef","ketcherBuilderRef","setServerRef","rootElRef","_ketcherBuilderRef$cu","initKetcher","_initPromiseRef$curre","createRoot","ketcherInitEvent","Event","dispatchEvent","_initPromiseRef$curre2","_initPromiseRef$curre3","_cleanupRef$current","_appRootRef$current","unmount","StyledIconForMacromoleculesToggler","CornerIcon","ModeLabel","ModeControlButton","ModeButtonLable","ModeControl","toggle","isPolymerEditor","btnRef","modeLabel","modeIcon","MacromoleculesEditor","showPolymerEditor","setShowPolymerEditor","togglePolymerEditor","toggleValue","disableMacromoleculesEditor","switchingLoader"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}